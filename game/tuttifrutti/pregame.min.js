/*! tweensoft.com 2014-05-21 13:34:54 */
function importScript(a){var b=document.createElement("script");b.src="src/"+a,document.head.appendChild(b)}function extend(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superclass=b.prototype}function dragAndDrop(a){var b,c;a.addEventListener("mousedown",function(a){b=a.stageX-a.target.x,c=a.stageY-a.target.y}),a.addEventListener("pressmove",function(a){a.target.x=a.stageX-b,a.target.y=a.stageY-c}),a.addEventListener("pressup",function(a){console.log(a.target.x,a.target.y)})}function indexOf(a,b){for(var c=-1,d=0;d<a.length;d++)a[d]==b&&(c=d);return c}function searchObjectWithPar(a,b){for(var c=-1,d=0;d<a.length;d++)for(var e=0;e<b.length&&(a[d][b[e][0]]&&a[d][b[e][0]]==b[e][1]);e++)e==b.length-1&&(c=d);return c}function distXY(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))}function round(a){return Math.round(100*a)/100}function radToDeg(a){return 180*a/Math.PI}function circlesColliding(a,b,c,d,e,f){var g=d-a,h=e-b,i=c+f;return i*i>g*g+h*h?!0:!1}function div(a,b){return(a-a%b)/b}function ResizeGame(){window.scrollTo(0,1);var a=WIDTHGAME,b=HEIGHTGAME,c=__WIDTHBG-a,d=__HEIGHTBG-b,e=__WIDTHBG-d,f=__HEIGHTBG-c,g=window.innerWidth/window.innerHeight,h=__WIDTHBG/(f-d),i=document.getElementById("gameArea"),j=document.getElementById("imgl2p"),k=document.getElementById("background"),l=document.getElementById("gameField");void 0!=window.orientation&&(g>1?(k.style.display="none",l.style.display="none",j.style.display="table-cell"):(k.style.display="block",l.style.display="block",j.style.display="none")),g>h?(i.style.height=__HEIGHTBG*window.innerHeight/(f-d)+"px",i.style.width=__WIDTHBG*window.innerHeight/(f-d)+"px",i.style.left=window.innerWidth/2-__WIDTHBG*window.innerHeight/(f-d)/2+"px",i.style.top=-(d/2)*window.innerHeight/(f-d)+"px"):(i.style.height=f*window.innerWidth/__WIDTHBG+"px",i.style.width=e*window.innerWidth/e+"px",i.style.top=window.innerHeight/2-__HEIGHTBG*window.innerWidth/__WIDTHBG/2+"px",i.style.left="0px")}function t_addToTicker(a){var b=indexOf(mas,a);-1==b?mas.push(a):mas[b]=a}function t_delInTicker(a){var b=indexOf(mas,a);-1!=b&&mas.splice(b,1)}function t_setPause(a){var b=indexOf(paused,a);-1==b&&paused.push(a)}function t_delInPause(a){var b=indexOf(paused,a);-1!=b&&paused.splice(a)}function t_startTicker(){time=setInterval(function(){for(var a=0;a<mas.length;a++)-1==indexOf(paused,mas[a])&&mas[a]()},1e3/__freq)}function t_stopTicker(){clearInterval(time)}function t_removeAllTimers(){mas=new Array}function t_delayOn(a,b,c){var d=0,e=function(){return d>__freq*a?(t_delInTicker(e),void(b&&b.apply(null,c))):void d++};return t_addToTicker(e),e}function t_intervalOn(a,b,c,d,e){var f,g=function(a,b,c){var d=function(c){b.apply(null,c),g(a,b,c)};f=t_delayOn(a,d,c)};d&&t_delayOn(d,function(){t_delInTicker(f),e&&e()}),g(a,b,c)}function Preloader(){this.initialize();var a=new createjs.Bitmap(images.img_loading);setCoor(a,92,153);var b=new createjs.Bitmap(images.img_star),c=86,d=410;setCoor(b,c,470),this.addChild(a),this.addChild(b),this.setLvl=function(a){setCoor(b,c+d*a,null)}}function v_startPreloader(){return __stageBG=document.getElementById(canvases.bg),__arrBG[bgImgs[0].name]=createBgImg(bgImgs[0].url),__stageBG.appendChild(__arrBG[bgImgs[0].name]),__stageGame=createStage(canvases.game,0,(__HEIGHTBG-HEIGHTGAME)/2),__arrLoc.preloader=new Preloader,t_addToTicker(function(){__stageGame.update()}),v_choiseLocation("preloader"),__arrLoc.preloader}function v_initLocations(){for(var a=1;a<bgImgs.length;a++)__arrBG[bgImgs[a].name]=createBgImg(bgImgs[a].url),__stageBG.appendChild(__arrBG[bgImgs[a].name]);__arrLoc.game=new Game,__arrLoc.menu=new Menu,__arrLoc.setting=new Setting,__arrLoc.about=new About,__arrLoc.instructions=new Instructions,__arrLoc.chlevel=new ChoiseLevel,__arrLoc.splash=new SplashScreen}function v_choiseLocation(a,b){__arrLoc[a]&&(updateBg("game"==a?bgImgs[1].name:bgImgs[0].name),__stageGame.removeAllChildren(),__arrLoc[a].update&&__arrLoc[a].update(b),__stageGame.addChild(__arrLoc[a]))}function activeModal(a){_currentLocation.deleteAllListeners&&_currentLocation.deleteAllListeners(),__arrMod[a]&&(__arrMod[a].setParent&&__arrMod[a].setParent(_currentLocation),_currentLocation.addChild(__arrMod[a]))}function deactivateModal(a){_currentLocation.addAllListeners&&_currentLocation.addAllListeners(),__arrMod[a]&&__arrMod[a].parent&&__arrMod[a].parent.removeChild(__arrMod[a])}function setCoor(a,b,c){"number"==typeof b&&(a.x=b/__koefDisplay),"number"==typeof c&&(a.y=c/__koefDisplay)}var mas=new Array,paused=new Array,__freq=30,time;extend(Preloader,createjs.Container);var __config={url:__configFB.url,appId:__configFB.appId,fb_name:__configFB.fb_name,fb_caption:__configFB.fb_caption,fb_description:__configFB.fb_description,timeOnMove:__configFB.timeOnMove,delayRobot:__configFB.delayRobot,add2home:__configFB.add2home,facebook:__configFB.facebook,item:{width:80/__koefDisplay,height:80/__koefDisplay},sizeField:{width:8,height:8},numEnd:5,colors:["blue","green","orange","red","violet","orange"],levels:[.25,.5,.75,1]},__stageGame,__stageBG,__arrBG=new Array,__arrLoc=new Array,__arrMod=new Array,updateBg=function(a){for(var b=0;b<bgImgs.length;b++)__arrBG[bgImgs[b].name]&&__arrBG[bgImgs[b].name].parentNode&&__stageBG.removeChild(__arrBG[bgImgs[b].name]);__stageBG.appendChild(__arrBG[a])},createStage=function(a,b,c){canvasInit(a);var d=document.getElementById(a),e=new createjs.Stage(d);return createjs.Touch.enable(e),e.x=b,e.y=c,e},createBgImg=function(a){var b;return images[a]?b=images[a]:(b=document.createElement("div"),b.style.background="linear-gradient(to bottom, #003366 0%, #003366 50%, #003366 100%)",b.style.width="100%",b.style.height="100%"),b.id="bg",b},canvasInit=function(a){var b=document.getElementById(a);b.width=__WIDTHBG,b.height=__HEIGHTBG};bgImgs=[{name:"other",url:""},{name:"game",url:"img_game_bg"}],__WIDTHBG=640/__koefDisplay,__HEIGHTBG=960/__koefDisplay,WIDTHGAME=640/__koefDisplay,HEIGHTGAME=744/__koefDisplay,canvases={game:"gameField",bg:"background"};var _allMusic=new Array,_obsMusic=new Array,onoff=new Array;MusicCTRL={start:function(a){for(var b=a.target._loadQueueBackup,c=0;c<b.length;c++)b[c]._item.type==createjs.LoadQueue.SOUND&&(_allMusic[b[c]._item.id]=createjs.Sound.createInstance(b[c]._item.id))},on:function(a,b){b||(b=-1),1==b?b=null:b--,_allMusic[a]&&(onoff[a]={open:!0,loop:b});for(var c=1;_allMusic[a+c];)onoff[a+c]={open:!0,loop:b},c++;for(var d=0;d<_obsMusic.length;d++)_obsMusic[d].on&&_obsMusic[d].on(a)},off:function(a){_allMusic[a]&&(_allMusic[a].stop(),onoff[a]={open:!1});for(var b=1;_allMusic[a+b];)_allMusic[a+b].stop(),onoff[a+b]={open:!1},b++;for(var c=0;c<_obsMusic.length;c++)_obsMusic[c].off&&_obsMusic[c].off(a)},play:function(a){if(onoff[a]&&onoff[a].open){var b;b=onoff[a].loop?{loop:onoff[a].loop}:null,_allMusic[a].play(b)}},registerObserver:function(a){_obsMusic.push(a)}};