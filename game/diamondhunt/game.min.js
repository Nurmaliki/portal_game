/*! tweensoft.com 2014-07-15 16:26:45 */
function MusicPlay(){s_pop=createjs.Sound.createInstance("pop"),music=createjs.Sound.createInstance("music"),music.play({loop:-1}),windows.windows[windows.getIDbyName("setting")].butS.visible=!0,windows.windows[windows.getIDbyName("setting")].butM.visible=!0,windows.windows[windows.getIDbyName("setting")].butS.gotoAndStop("but_sound_on"),windows.windows[windows.getIDbyName("setting")].butM.gotoAndStop("but_music_on")}function SoundSwitch(a){s_pop.setMute(a),windows.windows[windows.getIDbyName("setting")].butS.gotoAndStop(a?"but_sound_off":"but_sound_on")}function MusicSwitch(a){music.setMute(a),windows.windows[windows.getIDbyName("setting")].butM.gotoAndStop(a?"but_music_off":"but_music_on")}function APlay(){audio_supported&&s_pop.play()}function ClassGoal(){this.getImg=new createjs.Container;var a=ss_data.clone();a.gotoAndStop("area_goal"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("text3_goal"),b.x=8*devise_size,b.y=3*devise_size,this.getImg.addChild(b),this.shape=ss_data.clone(),this.shape.x=90*devise_size,this.shape.y=14*devise_size,this.shape.regX=35*devise_size,this.shape.regY=33*devise_size,this.shape.scaleX=this.shape.scaleY=.36,this.getImg.addChild(this.shape),this.ef=ss_data.clone(),this.ef.visible=!1,this.ef.on("animationend",function(a){a.target.stop(),a.target.visible=!1}),this.ef.x=90*devise_size,this.ef.y=14*devise_size,this.ef.regX=77*devise_size,this.ef.regY=77*devise_size,this.ef.scaleX=this.ef.scaleY=.36,this.getImg.addChild(this.ef),this.v=save.getGoat(),this.v2=save.getBShape(),this.shape.gotoAndStop("shape"+config.goal[this.v])}function ClassGrid(){this.jelly=new ClassJelly,this.getImg=this.jelly.getImg,this.mass=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],this.width=0,this.height=0}function ClassJelly(){this.getImg=new createjs.Container,this.t_jelly=[],this.t_jelly_move=[],this.jelly=[],this.jelly_move=[],this.jelly_ef=[];for(var a=0;5>a;a++){this.jelly.push([ss_data.clone(),ss_data.clone(),ss_data.clone(),ss_data.clone(),ss_data.clone()]),this.jelly_move.push([ss_data.clone(),ss_data.clone(),ss_data.clone(),ss_data.clone(),ss_data.clone()]),this.t_jelly.push([new FontText,new FontText,new FontText,new FontText,new FontText]),this.t_jelly_move.push([new FontText,new FontText,new FontText,new FontText,new FontText]),this.jelly_ef.push([ss_data.clone(),ss_data.clone(),ss_data.clone(),ss_data.clone(),ss_data.clone()]);for(var b=0;5>b;b++)this.jelly[a][b].x=72*b*devise_size,this.jelly[a][b].y=72*a*devise_size,this.jelly[a][b].regX=35*devise_size,this.jelly[a][b].regY=33*devise_size,this.getImg.addChild(this.jelly[a][b]),this.jelly_move[a][b].visible=!1,this.jelly_move[a][b].x=72*b*devise_size,this.jelly_move[a][b].y=72*a*devise_size,this.jelly_move[a][b].regX=35*devise_size,this.jelly_move[a][b].regY=33*devise_size,this.getImg.addChild(this.jelly_move[a][b]),this.t_jelly[a][b].setText("",1,"left"),this.t_jelly[a][b].x=72*b*devise_size,this.t_jelly[a][b].y=72*a*devise_size,this.t_jelly[a][b].regX=36*devise_size,this.t_jelly[a][b].regY=36*devise_size,this.getImg.addChild(this.t_jelly[a][b]),this.t_jelly_move[a][b].setText("",1,"left"),this.t_jelly_move[a][b].x=72*b*devise_size,this.t_jelly_move[a][b].y=72*a*devise_size,this.t_jelly_move[a][b].regX=36*devise_size,this.t_jelly_move[a][b].regY=36*devise_size,this.getImg.addChild(this.t_jelly_move[a][b]),this.jelly_ef[a][b].visible=!1,this.jelly_ef[a][b].on("animationend",function(a){a.target.visible=!1}),this.jelly_ef[a][b].x=72*b*devise_size,this.jelly_ef[a][b].y=72*a*devise_size,this.jelly_ef[a][b].regX=77*devise_size,this.jelly_ef[a][b].regY=77*devise_size,this.getImg.addChild(this.jelly_ef[a][b])}this.t_visible=!1}function ClassHint(){this.moves=save.getHint(),this.h=ss_data.clone(),this.h.on("mousedown",function(a){a.target.visible=!1}),this.h.visible=!1}function ClassSave(){}function ClassScore(){this.getImg=new createjs.Container;var a=ss_data.clone();a.gotoAndStop("area_score"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("text3_score"),b.x=5*devise_size,b.y=3*devise_size,this.getImg.addChild(b),this.text_d_score=new FontText,this.text_d_score.setText("0",2,"left"),this.text_d_score.x=149*devise_size-this.text_d_score.width,this.text_d_score.y=8*devise_size,this.text_d_score.scaleY=.8,this.getImg.addChild(this.text_d_score),this.v=0,this.visual_score=0}function ClassTut(){this.getImg=new createjs.Container,this.tut=[ss_data.clone(),ss_data.clone(),ss_data.clone()],this.tut[0].gotoAndStop("instructions-1"),this.tut[0].regX=160*devise_size,this.tut[0].regY=185*devise_size,this.tut[0].x=160*devise_size,this.tut[0].y=240*devise_size,this.getImg.addChild(this.tut[0]),this.tut[1].gotoAndStop("instructions-2"),this.tut[1].regX=148*devise_size,this.tut[1].regY=184*devise_size,this.tut[1].x=160*devise_size,this.tut[1].y=240*devise_size,this.getImg.addChild(this.tut[1]),this.tut[2].gotoAndStop("instructions-3"),this.tut[2].regX=160*devise_size,this.tut[2].regY=192*devise_size,this.tut[2].x=160*devise_size,this.tut[2].y=240*devise_size,this.getImg.addChild(this.tut[2]),this.btnLf=ss_data.clone(),this.btnLf.gotoAndStop("but_play"),this.btnLf.regY=101*devise_size,this.btnLf.regX=101*devise_size,this.btnLf.x=5*devise_size,this.btnLf.y=422*devise_size,this.btnLf.scaleX=-.5,this.btnLf.scaleY=.5,this.btnLf.on("mousedown",function(){-1==game.tut.Swap(-1)&&windows.Hide("tut")}),this.getImg.addChild(this.btnLf),this.btnRg=ss_data.clone(),this.btnRg.gotoAndStop("but_play"),this.btnRg.regX=101*devise_size,this.btnRg.regY=101*devise_size,this.btnRg.x=316*devise_size,this.btnRg.y=422*devise_size,this.btnRg.scaleX=this.btnRg.scaleY=.5,this.btnRg.on("mousedown",function(){1==game.tut.Swap(1)&&(windows.Hide("tut"),"main_menu"==windows.getPrevious(1)&&(save.setTut("false"),game.grid.Re(),windows.Show("loc")))}),this.getImg.addChild(this.btnRg),this.v=0}function ClassGame(){this.move=!0,this.next_goal=!1,this.tut=new ClassTut,this.score=new ClassScore,this.goal=new ClassGoal,this.grid=new ClassGrid,this.hint=new ClassHint}function FontText(){this.initialize(),this.text="",this.font=0,this.align=0,this.setText=function(a,b,c){3==arguments.length?(this.text=a,this.font=b,this.align=c):this.text=a;var d=0,e=0,f=0,g=0,h=0,i=[];this.removeAllChildren();for(var j=0;j<a.length;j++)"\n"==a[j]?(i.push(d),f=Math.max(f,d),d=0,e+=fonts[this.font].line_height,h++):" "==a[j]?(g=fonts[this.font].chars.indexOf(a[j]),d+=fonts[this.font].kerning[g],h++):(g=fonts[this.font].chars.indexOf(a[j]),this.addChild(fonts[this.font].ss_font.clone()),this.getChildAt(j-h).gotoAndStop(g),this.getChildAt(j-h).x=d,this.getChildAt(j-h).y=e,this.getChildAt(j-h).regY=fonts[this.font].baseline,d+=fonts[this.font].kerning[g]);if(e+=fonts[this.font].line_height,i.push(d),f=Math.max(f,d),"center"==this.align)for(j=0;j<this.getNumChildren();j++)d=(f-i[this.getChildAt(j).y/fonts[this.font].line_height])/2<<0,this.getChildAt(j).x+=d;else if("right"==this.align)for(j=0;j<this.getNumChildren();j++)d=f-i[this.getChildAt(j).y/fonts[this.font].line_height]<<0,this.getChildAt(j).x+=d;this.width=f,this.height=e}}function extend(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superclass=b.prototype}function isCollisionSquareCircle(a,b,c,d,e,f,g){var h=e,i=f;return a>e?h=a:e>a+c&&(h=a+c),b>f?i=b:f>b+d&&(i=b+d),h=e-h,i=f-i,g*g>h*h+i*i}function dragAndDrop(a){a.addEventListener("mousedown",function(a){a.target.x=a.stageX,a.target.y=a.stageY}),a.addEventListener("pressmove",function(a){a.target.x=a.stageX,a.target.y=a.stageY}),a.addEventListener("pressup",function(a){console.log(a.target.x,a.target.y)})}function intToStringDot(a){a=a.toString();for(var b=(a.length-1)/3<<0;b>0;b--)a=a.substr(0,a.length-3*b)+"."+a.substr(a.length-3*b);return a}function inscribedInSquare(a,b,c){a.image.width/a.image.height>=b/c?(a.scaleX=a.scaleY=b/a.image.width,a.y+=(c-a.image.height*a.scaleY)/2<<0):(a.scaleX=a.scaleY=c/a.image.height,a.x+=(b-a.image.width*a.scaleX)/2<<0)}function simpleEncoder(a){for(var b="",c=0;c<a.length;c++)b+=(a.charCodeAt(c)+128*(16*Math.random()<<0)).toString(16)+":";return b.substr(0,b.length-1)}function simpleDecoder(a){var b="";a=a.split(":");for(var c=0;c<a.length;c++)b+=String.fromCharCode(parseInt(a[c],16)%128);return b}function ClassWindow(){this.name="",this.layer=0,this.animation_step=0,this.animation_time_in=1,this.animation_time_out=1,this.animation_time_pos=0,this.getImg=new createjs.Container,this.getImg.visible=!1,this.visible=!1}function ClassWindows(){this.windows=[new WindowMainMenu,new WindowSetting,new WindowAbout,new WindowTut,new WindowGameOver,new WindowLocation,new WindowCongrats,new WindowEnd,new WindowMoves],this.path=[],this.prev=0,this.next="",this.max_layer=0,this.add_m=!0,this.modal_bg=new createjs.Shape,this.modal_bg.graphics.f("#4133A8").dr(0,0,320*devise_size,480*devise_size),this.modal_bg.alpha=.8,this.modal_bg.visible=!1,this.layer_vis=[];for(var a=0;a<this.windows.length;a++)this.max_layer=Math.max(this.max_layer,this.windows[a].layer),this.path.push(a);for(var b=0;b<this.max_layer+1;b++)for(1==b&&this.add_m&&(this.add_m=!1,stage.addChild(this.modal_bg)),this.layer_vis.push(0),a=0;a<this.windows.length;a++)this.windows[a].layer==b&&stage.addChild(this.windows[a].getImg)}function WindowAbout(){this.name="about",this.layer=0,this.animation_time_in=1,this.animation_time_out=1;var a=new createjs.Bitmap(load.queue.getResult("bg_window"));this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("but_play"),b.x=55*devise_size,b.y=372*devise_size,b.scaleX=-.5,b.scaleY=.5,b.on("mousedown",function(){windows.Hide("about")}),this.getImg.addChild(b);var c=ss_data.clone();c.gotoAndStop("About"),c.on("mousedown",function(){window.open(config.url_about_logo)});var d=new createjs.Shape;d.graphics.f("#333").dr(0,0,178*devise_size,290*devise_size),c.hitArea=d,c.regX=89*devise_size,c.regY=145*devise_size,c.x=160*devise_size,c.y=240*devise_size,this.getImg.addChild(c)}function WindowCongrats(){this.name="con",this.layer=1,this.animation_time_in=1,this.animation_time_out=1;var a=ss_data.clone();a.gotoAndStop("text2_congrats"),a.x=160*devise_size,a.y=170*devise_size,a.regX=111*devise_size,a.regY=91*devise_size,this.getImg.addChild(a),this.shape=ss_data.clone(),this.shape.x=160*devise_size,this.shape.y=300*devise_size,this.shape.regX=35*devise_size,this.shape.regY=33*devise_size,this.getImg.addChild(this.shape),this.timer=0}function WindowEnd(){this.name="end",this.layer=1,this.animation_time_in=1,this.animation_time_out=1;var a=ss_data.clone();a.gotoAndStop("text2_game_complete"),a.x=160*devise_size,a.y=170*devise_size,a.regX=136*devise_size,a.regY=91*devise_size,this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("shape32768"),b.x=160*devise_size,b.y=300*devise_size,b.regX=35*devise_size,b.regY=33*devise_size,this.getImg.addChild(b);var c=ss_data.clone();c.gotoAndStop("but_home"),c.x=4*devise_size,c.y=372*devise_size,c.on("mousedown",function(){windows.Show("main_menu")}),this.getImg.addChild(c)}function WindowGameOver(){this.name="fail",this.layer=0,this.animation_time_in=30,this.animation_time_out=1;var a=new createjs.Bitmap(load.queue.getResult("bg_window"));this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("but_home"),b.x=4*devise_size,b.y=372*devise_size,b.on("mousedown",function(){windows.Show("main_menu")}),this.getImg.addChild(b);var c=ss_data.clone();c.gotoAndStop("but_play"),c.regX=101*devise_size,c.regY=101*devise_size,c.x=316*devise_size,c.y=422*devise_size,c.scaleX=c.scaleY=.5,c.on("mousedown",function(){game.grid.Re(),windows.Show("loc")}),this.getImg.addChild(c);var d=ss_data.clone();d.gotoAndStop("game_over_area"),d.x=34*devise_size,d.y=111*devise_size,this.getImg.addChild(d);var e=ss_data.clone();e.gotoAndStop("text2_game_over"),e.x=33*devise_size,e.y=61*devise_size,this.getImg.addChild(e),this.text_score=ss_data.clone(),this.text_score.gotoAndStop("text1_score"),this.text_score.regX=46*devise_size,this.text_score.x=160*devise_size,this.text_score.y=125*devise_size,this.getImg.addChild(this.text_score),this.text_best_score=ss_data.clone(),this.text_best_score.gotoAndStop("text1_best_score"),this.text_best_score.regX=77*devise_size,this.text_best_score.x=160*devise_size,this.text_best_score.y=238*devise_size,this.getImg.addChild(this.text_best_score),this.shape_score=ss_data.clone(),this.shape_score.x=160*devise_size,this.shape_score.y=156*devise_size,this.shape_score.scaleX=this.shape_score.scaleY=.8,this.getImg.addChild(this.shape_score),this.text_d_score=new FontText,this.text_d_score.x=160*devise_size,this.text_d_score.y=167*devise_size,this.getImg.addChild(this.text_d_score),this.shape_best_score=ss_data.clone(),this.shape_best_score.x=160*devise_size,this.shape_best_score.y=268*devise_size,this.shape_best_score.scaleX=this.shape_best_score.scaleY=.8,this.getImg.addChild(this.shape_best_score),this.text_d_best_score=new FontText,this.text_d_best_score.x=160*devise_size,this.text_d_best_score.y=279*devise_size,this.getImg.addChild(this.text_d_best_score),this.anim_score=0,this.flash=!1,this.flash_time=0}function WindowLocation(){home_cout=0,fb_cout=0,this.name="loc",this.layer=0,this.animation_time_in=1,this.animation_time_out=1;var a=new createjs.Bitmap(load.queue.getResult("bg_game"));this.getImg.addChild(a),game.score.getImg.y=90*devise_size,game.score.getImg.x=143*devise_size,this.getImg.addChild(game.score.getImg),game.goal.getImg.y=90*devise_size,game.goal.getImg.x=15*devise_size,this.getImg.addChild(game.goal.getImg);var b=ss_data.clone();b.gotoAndStop("area_best_score"),b.x=15*devise_size,b.y=56*devise_size,this.getImg.addChild(b);var c=ss_data.clone();c.gotoAndStop("text3_best_score"),c.x=9*devise_size+15*devise_size,c.y=3*devise_size+56*devise_size,this.getImg.addChild(c),this.text_d_best_score=new FontText,this.text_d_best_score.setText("0",2,"left"),this.text_d_best_score.x=206*devise_size-this.text_d_best_score.width+15*devise_size,this.text_d_best_score.y=8*devise_size+56*devise_size,this.text_d_best_score.scaleY=.8,this.getImg.addChild(this.text_d_best_score),game.grid.getImg.y=163*devise_size,game.grid.getImg.x=51*devise_size,this.getImg.addChild(game.grid.getImg);var d=ss_data.clone();d.on("mousedown",function(){windows.Show("setting")}),d.gotoAndStop("but_settings"),d.x=291*devise_size,d.y=56*devise_size,this.getImg.addChild(d);var e=ss_data.clone();e.on("mousedown",function(){game.grid.TV()}),e.gotoAndStop("but_numbers"),e.x=260*devise_size,e.y=56*devise_size,this.getImg.addChild(e);var f=new createjs.Shape;f.graphics.f("#999").dr(15*devise_size,127*devise_size,288*devise_size,288*devise_size),f.alpha=.01,f.on("mousedown",function(a){m_s_x=a.stageX,m_s_y=a.stageY}),f.on("pressup",function(a){Math.max(Math.abs(a.stageX-m_s_x),Math.abs(a.stageY-m_s_y))>10*devise_size&&game.move&&(Math.abs(a.stageX-m_s_x)>Math.abs(a.stageY-m_s_y)?a.stageX<m_s_x?game.grid.Left():game.grid.Right():a.stageY<m_s_y?game.grid.Up():game.grid.Down())}),this.getImg.addChild(f),this.getImg.addChild(game.hint.h)}function WindowMainMenu(){this.name="main_menu",this.layer=0,this.animation_time_in=1,this.animation_time_out=1;var a=new createjs.Shape;a.on("mousedown",function(){load.LoadAudio(),windows.Show("setting")}),a.graphics.f("#333").dc(40*devise_size,394*devise_size,30*devise_size),this.getImg.addChild(a);var b=new createjs.Shape;b.on("mousedown",function(){load.LoadAudio(),save.getTut()?windows.Show("tut"):(game.grid.Re(),windows.Show("loc"))}),b.graphics.f("#333").dc(157*devise_size,372*devise_size,46*devise_size),this.getImg.addChild(b);var c=new createjs.Shape;c.on("mousedown",function(){load.LoadAudio(),window.open(config.url_main_menu_mg)}),c.graphics.f("#333").dc(275*devise_size,394*devise_size,30*devise_size),this.getImg.addChild(c);var d=new createjs.Shape;d.on("mousedown",function(){load.LoadAudio(),window.open(config.url_main_menu_logo)}),d.graphics.f("#333").dr(162*devise_size,169*devise_size,120*devise_size,20*devise_size),this.getImg.addChild(d);var e=new createjs.Bitmap(load.queue.getResult("bg_menu"));this.getImg.addChild(e)}function WindowMoves(){this.name="moves",this.layer=1,this.animation_time_in=1,this.animation_time_out=1;var a=ss_data.clone();a.gotoAndStop("text_no_more_moves"),a.x=160*devise_size,a.y=240*devise_size,a.regX=62*devise_size,a.regY=32*devise_size,this.getImg.addChild(a),this.timer=0}function WindowSetting(){this.name="setting",this.layer=0,this.animation_time_in=10,this.animation_time_out=10;var a=new createjs.Bitmap(load.queue.getResult("bg_window"));this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("but_home"),b.x=4*devise_size,b.y=372*devise_size,b.on("mousedown",function(){windows.HideAndShow("setting","main_menu")}),this.getImg.addChild(b),this.btnRg=ss_data.clone(),this.btnRg.gotoAndStop("but_play"),this.btnRg.x=266*devise_size,this.btnRg.y=372*devise_size,this.btnRg.scaleX=this.btnRg.scaleY=.5,this.btnRg.on("mousedown",function(){windows.Hide("setting")}),this.getImg.addChild(this.btnRg);var c=ss_data.clone();c.gotoAndStop("text2_settings"),c.x=54*devise_size,c.y=61*devise_size,this.getImg.addChild(c),this.butI=ss_data.clone(),this.butI.on("mousedown",function(){windows.Show("about")}),this.butI.gotoAndStop("but_i"),this.butI.regX=this.butI.regY=33*devise_size,this.butI.x=94*devise_size,this.butI.y=170*devise_size,this.getImg.addChild(this.butI),this.butH=ss_data.clone(),this.butH.on("mousedown",function(){windows.Show("tut")}),this.butH.gotoAndStop("but_help"),this.butH.regX=this.butH.regY=33*devise_size,this.butH.x=226*devise_size,this.butH.y=170*devise_size,this.getImg.addChild(this.butH),this.butS=ss_data.clone(),this.butS.visible=!1,this.butS.on("mousedown",function(){SoundSwitch(!s_pop.getMute())}),this.butS.gotoAndStop("but_sound_off"),this.butS.regX=this.butS.regY=33*devise_size,this.butS.x=226*devise_size,this.butS.y=284*devise_size,this.getImg.addChild(this.butS),this.butM=ss_data.clone(),this.butM.visible=!1,this.butM.on("mousedown",function(){MusicSwitch(!music.getMute())}),this.butM.gotoAndStop("but_music_off"),this.butM.regX=this.butM.regY=33*devise_size,this.butM.x=94*devise_size,this.butM.y=284*devise_size,this.getImg.addChild(this.butM)}function WindowTut(){this.name="tut",this.layer=0,this.animation_time_in=1,this.animation_time_out=1;var a=new createjs.Shape;a.graphics.f("#000").dr(0,0,320*devise_size,372*devise_size),a.y=54*devise_size,a.on("mousedown",function(a){tut_sw=a.stageX}),a.on("pressup",function(a){Math.abs(tut_sw-a.stageX)>5*devise_size&&(tut_sw-a.stageX<0?-1==game.tut.Swap(-1)&&windows.Hide("tut"):1==game.tut.Swap(1)&&(windows.Hide("tut"),"main_menu"==windows.getPrevious(1)&&(save.setTut("false"),game.grid.Re(),windows.Show("loc"))))}),this.getImg.addChild(a);var b=new createjs.Bitmap(load.queue.getResult("bg_window"));this.getImg.addChild(b),this.getImg.addChild(game.tut.getImg)}var music,s_pop,lock_audio=!0,audio_supported;ClassGoal.prototype.Re=function(){this.shape.gotoAndStop("shape"+config.goal[this.v]),this.v2=2},ClassGoal.prototype.isGoal=function(a){game.next_goal=config.goal[this.v]==a,a>this.v2&&(this.v2=a)},ClassGoal.prototype.Anim=function(){this.ef.gotoAndPlay("ef"),this.ef.visible=!0},ClassGoal.prototype.Al=function(){game.next_goal=!1,this.v==config.goal.length-1?windows.Show("end"):(this.v++,save.setGoat(this.v),this.shape.gotoAndStop("shape"+config.goal[this.v]),windows.Show("con"))},ClassGrid.prototype.Re=function(){game.next_goal=!1,game.move=!0,this.width=4,this.height=4;for(var a=0;a<this.height;a++)for(var b=0;b<this.width;b++)this.mass[a][b]=0;this.mass[Math.random()*this.width<<0][Math.random()*this.height<<0]=Math.random()>config.random?2:4,this.jelly.Re(),this.jelly.Upd(),game.goal.Re(),game.score.Re()},ClassGrid.prototype.TV=function(){this.jelly.TV()},ClassGrid.prototype.Upd=function(){this.jelly.Upd()},ClassGrid.prototype.Drw=function(){this.jelly.Drw()};var b=0;ClassGrid.prototype.Up=function(){game.move=!1;for(var a=0,c=0,d=!1,e=0;e<this.width;e++)for(a=1,b=0;a<this.height;)0!=this.mass[a][e]&&0!=a&&(c=this.getUp(a-1,e),this.mass[a][e]==this.mass[c][e]?b=c+1:0!=this.mass[c][e]&&c++,c!=a&&(0==this.mass[c][e]?(d=!0,this.jelly.setPosition(c,e,a,e),this.mass[c][e]=this.mass[a][e]):(d=!0,this.jelly.setMove(c,e,a,e),this.mass[c][e]=2*Math.max(this.mass[a][e],this.mass[c][e])),this.mass[a][e]=0,a=c)),a++;d&&this.addDown(),this.jelly.Upd()},ClassGrid.prototype.getUp=function(a,c){for(var d=a;d>b&&0==this.mass[d][c];)d--;return d},ClassGrid.prototype.Down=function(){game.move=!1;for(var a=0,c=0,d=!1,e=0;e<this.width;e++)for(a=this.height-2,b=this.height-1;a>=0;)0!=this.mass[a][e]&&a!=this.height-1&&(c=this.getDown(a+1,e),this.mass[a][e]==this.mass[c][e]?b=c-1:0!=this.mass[c][e]&&c--,c!=a&&(0==this.mass[c][e]?(d=!0,this.jelly.setPosition(c,e,a,e),this.mass[c][e]=this.mass[a][e]):(d=!0,this.jelly.setMove(c,e,a,e),this.mass[c][e]=2*Math.max(this.mass[a][e],this.mass[c][e])),this.mass[a][e]=0,a=c)),a--;d&&this.addUp(),this.jelly.Upd()},ClassGrid.prototype.getDown=function(a,c){for(var d=a;b>d&&0==this.mass[d][c];)d++;return d},ClassGrid.prototype.Left=function(){game.move=!1;for(var a=0,c=0,d=!1,e=0;e<this.width;e++)for(a=1,b=0;a<this.width;)0!=this.mass[e][a]&&0!=a&&(c=this.getLeft(a-1,e),this.mass[e][a]==this.mass[e][c]?b=c+1:0!=this.mass[e][c]&&c++,c!=a&&(0==this.mass[e][c]?(d=!0,this.jelly.setPosition(e,c,e,a),this.mass[e][c]=this.mass[e][a]):(d=!0,this.jelly.setMove(e,c,e,a),this.mass[e][c]=2*Math.max(this.mass[e][a],this.mass[e][c])),this.mass[e][a]=0,a=c)),a++;d&&this.addRight(),this.jelly.Upd()},ClassGrid.prototype.getLeft=function(a,c){for(var d=a;d>b&&0==this.mass[c][d];)d--;return d},ClassGrid.prototype.Right=function(){game.move=!1;for(var a=0,c=0,d=!1,e=0;e<this.width;e++)for(a=this.width-2,b=this.width-1;a>=0;)0!=this.mass[e][a]&&a!=this.width-1&&(c=this.getRight(a+1,e),this.mass[e][a]==this.mass[e][c]?b=c-1:0!=this.mass[e][c]&&c--,c!=a&&(0==this.mass[e][c]?(d=!0,this.jelly.setPosition(e,c,e,a),this.mass[e][c]=this.mass[e][a]):(d=!0,this.jelly.setMove(e,c,e,a),this.mass[e][c]=2*Math.max(this.mass[e][a],this.mass[e][c])),this.mass[e][a]=0,a=c)),a--;d&&this.addLeft(),this.jelly.Upd()},ClassGrid.prototype.getRight=function(a,c){for(var d=a;b>d&&0==this.mass[c][d];)d++;return d},ClassGrid.prototype.addUp=function(){for(var a=0,b=0;b<this.width;b++)0==this.mass[0][b]&&a++;var c=Math.random()>config.random?2:4;if(0!=a){var d=Math.random()*a+1<<0;for(b=0;0!=d;)0==this.mass[0][b]&&d--,b++;this.mass[0][b-1]=c,this.jelly.jelly[0][b-1].y-=72*devise_size}},ClassGrid.prototype.addDown=function(){for(var a=0,b=0;b<this.width;b++)0==this.mass[this.width-1][b]&&a++;var c=Math.random()>config.random?2:4;if(0!=a){var d=Math.random()*a+1<<0;for(b=0;0!=d;)0==this.mass[this.width-1][b]&&d--,b++;this.mass[this.width-1][b-1]=c,this.jelly.jelly[this.width-1][b-1].y+=72*devise_size}},ClassGrid.prototype.addLeft=function(){for(var a=0,b=0;b<this.height;b++)0==this.mass[b][0]&&a++;var c=Math.random()>config.random?2:4;if(0!=a){var d=Math.random()*a+1<<0;for(b=0;0!=d;)0==this.mass[b][0]&&d--,b++;this.mass[b-1][0]=c,this.jelly.jelly[b-1][0].x-=72*devise_size}},ClassGrid.prototype.addRight=function(){for(var a=0,b=0;b<this.height;b++)0==this.mass[b][this.height-1]&&a++;var c=Math.random()>config.random?2:4;if(0!=a){var d=Math.random()*a+1<<0;for(b=0;0!=d;)0==this.mass[b][this.height-1]&&d--,b++;this.mass[b-1][this.height-1]=c,this.jelly.jelly[b-1][this.height-1].x+=72*devise_size}},ClassGrid.prototype.Log=function(){for(var a="",b=0;b<this.height;b++){a+="[";for(var c=0;c<this.width;c++)a+=this.mass[b][c]+", ";a+="]\n"}console.log(a)},ClassGrid.prototype.isGameOver=function(){for(var a=0,b=0;b<this.height;b++)for(var c=0;c<this.width;c++)0!=this.mass[b][c]&&a++;if(this.height*this.width==a){for(a=0,b=0;b<this.height;b++)for(c=0;c<this.width;c++)a+=this.isNot(b,c);return this.height*this.width==a}return!1},ClassGrid.prototype.isNot=function(a,b){var c=!0;return a<this.height-1&&this.mass[a+1][b]==this.mass[a][b]&&32768!=this.mass[a][b]&&(c=!1),a>0&&this.mass[a-1][b]==this.mass[a][b]&&32768!=this.mass[a][b]&&(c=!1),b<this.width-1&&this.mass[a][b+1]==this.mass[a][b]&&32768!=this.mass[a][b]&&(c=!1),b>0&&this.mass[a][b-1]==this.mass[a][b]&&32768!=this.mass[a][b]&&(c=!1),c&&(console.log("i j"+this.mass[a][b]),a<this.height-1&&console.log("i j"+this.mass[a+1][b]),a>0&&console.log("i j"+this.mass[a-1][b]),b<this.width-1&&console.log("i j"+this.mass[a][b+1]),b>1&&console.log("i j"+this.mass[a][b-1])),c?1:0},ClassJelly.prototype.TV=function(){this.t_visible=!this.t_visible;for(var a=0;a<game.grid.height;a++)for(var b=0;b<game.grid.width;b++)0!=game.grid.mass[a][b]&&(this.t_jelly[a][b].visible=this.t_visible,this.t_jelly[a][b].visible&&(this.t_jelly[a][b].setText(intToStringDot(config.add_score[game.grid.mass[a][b]])),this.t_jelly[a][b].regX=this.t_jelly[a][b].width-28*devise_size))},ClassJelly.prototype.Re=function(){for(var a=0;5>a;a++)for(var b=0;5>b;b++)this.jelly[a][b].visible=a<game.grid.height&&b<game.grid.width},ClassJelly.prototype.Upd=function(){for(var a=0;a<game.grid.height;a++)for(var b=0;b<game.grid.width;b++)0==game.grid.mass[a][b]?(this.jelly[a][b].visible=!1,this.t_jelly[a][b].visible=!1):(this.jelly[a][b].visible=!0,this.jelly_move[a][b].visible?(this.jelly[a][b].gotoAndStop("shape"+game.grid.mass[a][b]/2),this.t_visible&&(this.t_jelly[a][b].visible=!0,this.t_jelly[a][b].setText(intToStringDot(config.add_score[game.grid.mass[a][b]/2])),this.t_jelly[a][b].regX=this.t_jelly[a][b].width-28*devise_size)):(this.jelly[a][b].gotoAndStop("shape"+game.grid.mass[a][b]),this.t_visible&&(this.t_jelly[a][b].visible=!0,this.t_jelly[a][b].setText(intToStringDot(config.add_score[game.grid.mass[a][b]])),this.t_jelly[a][b].regX=this.t_jelly[a][b].width-28*devise_size)))},ClassJelly.prototype.setPosition=function(a,b,c,d){this.jelly[a][b].x=72*d*devise_size,this.jelly[a][b].y=72*c*devise_size},ClassJelly.prototype.setMove=function(a,b,c,d){this.jelly_move[a][b].visible=!0,this.t_jelly_move[a][b].visible=this.t_visible,this.t_jelly_move[a][b].setText(intToStringDot(game.grid.mass[a][b])),this.t_jelly_move[a][b].regX=this.t_jelly_move[a][b].width-28*devise_size,this.jelly_move[a][b].gotoAndStop(this.jelly[c][d].currentFrame),this.jelly_move[a][b].x=72*d*devise_size,this.jelly_move[a][b].y=72*c*devise_size,this.t_jelly_move[a][b].x=this.jelly_move[a][b].x,this.t_jelly_move[a][b].y=this.jelly_move[a][b].y},ClassJelly.prototype.Drw=function(){for(var a=!0,b=0;b<game.grid.height;b++)for(var c=0;c<game.grid.width;c++)this.jelly_move[b][c].visible&&this.jelly_move[b][c].x>72*c*devise_size?(a=!1,this.jelly_move[b][c].x-=config.speed_b,this.t_jelly_move[b][c].x=this.jelly_move[b][c].x,this.jelly_move[b][c].x<=72*c*devise_size&&(console.log(game.grid.mass),console.log(b+" "+c+" "+game.grid.mass[b][c]),this.Fusion(game.grid.mass[b][c]),this.jelly_ef[b][c].visible=!0,this.jelly_ef[b][c].gotoAndPlay("ef"),this.jelly[b][c].gotoAndStop("shape"+game.grid.mass[b][c]),this.t_jelly[b][c].setText(intToStringDot(config.add_score[game.grid.mass[b][c]])),this.t_jelly[b][c].regX=this.t_jelly[b][c].width-28*devise_size,this.jelly_move[b][c].visible=!1,this.t_jelly_move[b][c].visible=!1,this.jelly_move[b][c].x=72*c*devise_size)):this.jelly_move[b][c].visible&&this.jelly_move[b][c].x<72*c*devise_size&&(a=!1,this.jelly_move[b][c].x+=config.speed_b,this.t_jelly_move[b][c].x=this.jelly_move[b][c].x,this.jelly_move[b][c].x>=72*c*devise_size&&(console.log(game.grid.mass),console.log(b+" "+c+" "+game.grid.mass[b][c]),this.Fusion(game.grid.mass[b][c]),this.jelly_ef[b][c].visible=!0,this.jelly_ef[b][c].gotoAndPlay("ef"),this.jelly[b][c].gotoAndStop("shape"+game.grid.mass[b][c]),this.t_jelly[b][c].setText(intToStringDot(config.add_score[game.grid.mass[b][c]])),this.t_jelly[b][c].regX=this.t_jelly[b][c].width-28*devise_size,this.jelly_move[b][c].visible=!1,this.t_jelly_move[b][c].visible=!1,this.jelly_move[b][c].x=72*c*devise_size)),this.jelly_move[b][c].visible&&this.jelly_move[b][c].y>72*b*devise_size?(a=!1,this.jelly_move[b][c].y-=config.speed_b,this.t_jelly_move[b][c].y=this.jelly_move[b][c].y,this.jelly_move[b][c].y<=72*b*devise_size&&(console.log(game.grid.mass),console.log(b+" "+c+" "+game.grid.mass[b][c]),this.Fusion(game.grid.mass[b][c]),this.jelly_ef[b][c].visible=!0,this.jelly_ef[b][c].gotoAndPlay("ef"),this.jelly[b][c].gotoAndStop("shape"+game.grid.mass[b][c]),this.t_jelly[b][c].setText(intToStringDot(config.add_score[game.grid.mass[b][c]])),this.t_jelly[b][c].regX=this.t_jelly[b][c].width-28*devise_size,this.jelly_move[b][c].visible=!1,this.t_jelly_move[b][c].visible=!1,this.jelly_move[b][c].y=72*b*devise_size)):this.jelly_move[b][c].visible&&this.jelly_move[b][c].y<72*b*devise_size&&(a=!1,this.jelly_move[b][c].y+=config.speed_b,this.t_jelly_move[b][c].y=this.jelly_move[b][c].y,this.jelly_move[b][c].y>=72*b*devise_size&&(console.log(game.grid.mass),console.log(b+" "+c+" "+game.grid.mass[b][c]),this.Fusion(game.grid.mass[b][c]),this.jelly_ef[b][c].visible=!0,this.jelly_ef[b][c].gotoAndPlay("ef"),this.jelly[b][c].gotoAndStop("shape"+game.grid.mass[b][c]),this.t_jelly[b][c].setText(intToStringDot(config.add_score[game.grid.mass[b][c]])),this.t_jelly[b][c].regX=this.t_jelly[b][c].width-28*devise_size,this.jelly_move[b][c].visible=!1,this.t_jelly_move[b][c].visible=!1,this.jelly_move[b][c].y=72*b*devise_size)),this.jelly[b][c].x>72*c*devise_size?(a=!1,this.jelly[b][c].x-=config.speed_b,this.jelly[b][c].x<=72*c*devise_size&&(this.jelly[b][c].x=72*c*devise_size),this.t_jelly[b][c].x=this.jelly[b][c].x):this.jelly[b][c].x<72*c*devise_size&&(a=!1,this.jelly[b][c].x+=config.speed_b,this.jelly[b][c].x>=72*c*devise_size&&(this.jelly[b][c].x=72*c*devise_size),this.t_jelly[b][c].x=this.jelly[b][c].x),this.jelly[b][c].y>72*b*devise_size?(a=!1,this.jelly[b][c].y-=config.speed_b,this.jelly[b][c].y<=72*b*devise_size&&(this.jelly[b][c].y=72*b*devise_size),this.t_jelly[b][c].y=this.jelly[b][c].y):this.jelly[b][c].y<72*b*devise_size&&(a=!1,this.jelly[b][c].y+=config.speed_b,this.jelly[b][c].y>=72*b*devise_size&&(this.jelly[b][c].y=72*b*devise_size),this.t_jelly[b][c].y=this.jelly[b][c].y);!game.move&&a&&(game.hint.Show(),game.next_goal&&game.goal.Al(),game.grid.isGameOver()&&setTimeout(function(){windows.Show("moves")},2e3)),game.move=a},ClassJelly.prototype.Fusion=function(a){console.log(),game.goal.isGoal(a),game.score.Add(config.add_score[a]),APlay()},ClassHint.prototype.Show=function(){this.moves++,this.moves==config.hint[0]&&(this.h.visible=!0,this.h.gotoAndStop("hint_1"),this.h.x=30*devise_size,this.h.y=59*devise_size,save.setHint(config.hint[0]+1)),this.moves==config.hint[1]&&(this.h.visible=!0,this.h.gotoAndStop("hint_2"),this.h.x=70*devise_size,this.h.y=271*devise_size,save.setHint(config.hint[1]+1)),this.moves==config.hint[2]&&(this.h.visible=!0,this.h.gotoAndStop("hint_3"),this.h.x=97*devise_size,this.h.y=271*devise_size,save.setHint(config.hint[2]+1))},ClassSave.prototype.getHint=function(){return null==window.localStorage.getItem("dh_hint")?(window.localStorage.setItem("dh_hint","0"),0):parseInt(window.localStorage.getItem("dh_hint"))},ClassSave.prototype.setHint=function(a){window.localStorage.setItem("dh_hint",a)},ClassSave.prototype.getTut=function(){return null==window.localStorage.getItem("dh_tut")?(window.localStorage.setItem("dh_tut","true"),!0):"true"==window.localStorage.getItem("dh_tut")},ClassSave.prototype.setTut=function(a){window.localStorage.setItem("dh_tut",a)},ClassSave.prototype.getGoat=function(){return null==window.localStorage.getItem("dh_goat")?(window.localStorage.setItem("dh_goat",simpleEncoder("0")),0):parseInt(simpleDecoder(window.localStorage.getItem("dh_goat")))},ClassSave.prototype.setGoat=function(a){window.localStorage.setItem("dh_goat",simpleEncoder(a.toString()))},ClassSave.prototype.getBShape=function(){return null==window.localStorage.getItem("dh_bshape")?(window.localStorage.setItem("dh_bshape",simpleEncoder("2")),2):parseInt(simpleDecoder(window.localStorage.getItem("dh_bshape")))
},ClassSave.prototype.setBShape=function(a){window.localStorage.setItem("dh_bshape",simpleEncoder(a.toString()))},ClassSave.prototype.getBScore=function(){return null==window.localStorage.getItem("dh_bscore")?(window.localStorage.setItem("dh_bscore",simpleEncoder("0")),0):parseInt(simpleDecoder(window.localStorage.getItem("dh_bscore")))},ClassSave.prototype.setBScore=function(a){window.localStorage.setItem("dh_bscore",simpleEncoder(a.toString()))},ClassScore.prototype.Re=function(){this.v=0,this.visual_score=0,this.text_d_score.setText("0")},ClassScore.prototype.Add=function(a){this.v+=a},ClassScore.prototype.Drw=function(){if(this.visual_score!=this.v){var a=Math.max(3,(this.v-this.visual_score)/4<<0);this.visual_score=Math.min(this.visual_score+a,this.v),this.text_d_score.setText(intToStringDot(this.visual_score)),this.text_d_score.x=149*devise_size-this.text_d_score.width}},ClassTut.prototype.Re=function(){this.v=0;for(var a=0;3>a;a++)this.tut[a].visible=this.v==a},ClassTut.prototype.Swap=function(a){this.v+=a;for(var b=0;3>b;b++)this.tut[b].visible=this.v==b;return 2==this.v?(this.btnLf.scaleX=-.3,this.btnLf.scaleY=.3,this.btnRg.scaleX=this.btnRg.scaleY=.3):(this.btnLf.scaleX=-.5,this.btnLf.scaleY=.5,this.btnRg.scaleX=this.btnRg.scaleY=.5),this.v<0?-1:this.v>2?1:0},extend(FontText,createjs.Container),ClassWindow.prototype.isVisible=function(){return this.visible},ClassWindow.prototype.isIn=function(){return 1==this.animation_step},ClassWindow.prototype.isSt=function(){return 0==this.animation_step},ClassWindow.prototype.isOut=function(){return-1==this.animation_step},ClassWindow.prototype._Show=function(){this.getImg.visible=!0},ClassWindow.prototype._Hide=function(){this.getImg.visible=!1},ClassWindow.prototype.PreShow=function(){},ClassWindow.prototype.PreHide=function(){},ClassWindow.prototype.PostShow=function(){},ClassWindow.prototype.PostHide=function(){},ClassWindow.prototype.Show=function(){this.visible=!0,this.PreShow(),this._Show(),this.animation_step=1,this.animation_time_pos=0},ClassWindow.prototype.Hide=function(){this.visible=!1,this.PreHide(),this.animation_step=-1,this.animation_time_pos=0},ClassWindow.prototype._Drw=function(){0!=this.animation_step?(this.animation_time_pos+=this.animation_step,1==this.animation_step?this.DrwIn():this.DrwOut(),this.animation_time_pos==this.animation_time_in&&(this.animation_step=0,this.PostShow()),this.animation_time_pos==-this.animation_time_out&&(this.animation_step=0,this._Hide(),this.PostHide(),windows.EndHide())):this.DrwSt(),this.Drw()},ClassWindow.prototype.Drw=function(){},ClassWindow.prototype.DrwSt=function(){},ClassWindow.prototype.DrwIn=function(){},ClassWindow.prototype.DrwOut=function(){},ClassWindows.prototype.Show=function(a){var b=this.getIDbyName(a);this.windows[b].Show(),this.PathShow(b),this.Upd()},ClassWindows.prototype.Hide=function(a){var b=this.getIDbyName(a);this.windows[b].Hide(),this.prev=b,this.next=""},ClassWindows.prototype.HideAndShow=function(a,b){var c=this.getIDbyName(a);this.windows[c].Hide(),this.prev=c,this.next=b},ClassWindows.prototype.EndHide=function(){if(""!=this.next){var a=this.getIDbyName(this.next);this.windows[a].Show(),this.PathShow(a)}this.PathHide(this.prev),this.Upd()},ClassWindows.prototype.getIDbyName=function(a){for(var b=0;this.windows[b].name!=a;)b++;return b},ClassWindows.prototype.Drw=function(){0!=this.path.length&&this.windows[this.path[this.path.length-1]]._Drw()},ClassWindows.prototype.getPrevious=function(a){return this.windows[this.path[this.path.length-1-a]].name},ClassWindows.prototype.Upd=function(){this.modal_bg.visible=!1;for(var a=0;a<this.windows.length;a++)this.windows[a].getImg.visible=!1,this.windows[a].getImg.mouseEnabled=!1;for(a=0;a<this.max_layer+1;a++){for(var b=this.path.length-1;this.windows[this.path[b]].layer!=a;)b--;this.layer_vis[a]=b,(0==a||this.layer_vis[a-1]<this.layer_vis[a])&&(this.windows[this.path[this.layer_vis[a]]].getImg.visible=!0,0!=this.windows[this.path[this.layer_vis[a]]].layer&&(this.modal_bg.visible=!0))}this.windows[this.path[this.path.length-1]].getImg.mouseEnabled=!0},ClassWindows.prototype.PathShow=function(a){for(var b=0;this.path[b]!=a;)b++;for(var c=b;c<this.path.length-1;c++)this.path[c]=this.path[c+1];this.path[this.path.length-1]=a},ClassWindows.prototype.PathHide=function(a){for(var b=0;this.path[b]!=a;)b++;for(var c=b-1;c>-1;c--)this.path[c+1]=this.path[c];this.path[0]=a},WindowAbout.prototype=new ClassWindow,WindowCongrats.prototype=new ClassWindow,WindowCongrats.prototype.PreShow=function(){this.timer=90,this.shape.gotoAndStop("shape"+config.goal[game.goal.v])},WindowCongrats.prototype.PostHide=function(){game.goal.Anim()},WindowCongrats.prototype.Drw=function(){this.timer--,0==this.timer&&windows.Hide("con")},WindowEnd.prototype=new ClassWindow,WindowGameOver.prototype=new ClassWindow,WindowGameOver.prototype.PreShow=function(){this.text_d_score.setText(intToStringDot(game.score.v),0,"left"),this.shape_score.x=160*devise_size-((72*devise_size+this.text_d_score.width)/2<<0),this.text_d_score.x=this.shape_score.x+56*devise_size,this.anim_score=0,this.text_d_score.setText("0",0,"left"),this.shape_score.gotoAndStop("shape"+game.goal.v2),this.text_d_best_score.setText(intToStringDot(save.getBScore()),0,"left"),this.shape_best_score.x=160*devise_size-((72*devise_size+this.text_d_best_score.width)/2<<0),this.text_d_best_score.x=this.shape_best_score.x+56*devise_size,this.shape_best_score.gotoAndStop("shape"+save.getBShape()),this.flash=!1,this.flash_time=0,save.getBShape()<game.goal.v2&&(this.flash=!0,save.setBShape(game.goal.v2)),save.getBScore()<game.score.v&&(this.flash=!0,save.setBScore(game.score.v)),this.text_score.alpha=1,this.text_score.regX=46*devise_size,this.text_score.gotoAndStop("text1_score")},WindowGameOver.prototype.DrwIn=function(){var a=this.animation_time_pos/this.animation_time_in,b=1-Math.abs(2*a-1);this.text_score.y=165*b*devise_size,this.text_d_score.y=207*b*devise_size,this.shape_score.y=196*b*devise_size,this.text_best_score.y=298*b*devise_size,this.text_d_best_score.y=339*b*devise_size,this.shape_best_score.y=328*b*devise_size,a>.5&&(this.text_score.y=Math.max(125*devise_size,this.text_score.y),this.text_d_score.y=Math.max(167*devise_size,this.text_d_score.y),this.shape_score.y=Math.max(156*devise_size,this.shape_score.y),this.text_best_score.y=Math.max(238*devise_size,this.text_best_score.y),this.text_d_best_score.y=Math.max(279*devise_size,this.text_d_best_score.y),this.shape_best_score.y=Math.max(268*devise_size,this.shape_best_score.y))},WindowGameOver.prototype.DrwSt=function(){if(this.anim_score!=game.score.v){var a=Math.max(7,(game.score.v-this.anim_score)/8<<0);this.anim_score=Math.min(this.anim_score+a,game.score.v),this.text_d_score.setText(intToStringDot(this.anim_score),0,"left")}else this.flash&&(this.flash_time+=.2,this.text_score.alpha=Math.abs(Math.cos(this.flash_time)),this.flash_time>3*Math.PI&&(this.text_score.alpha=1,this.text_score.regX=112*devise_size,this.text_score.gotoAndStop("text1_new_high_score"),save.getBShape()==game.goal.v2&&this.shape_best_score.gotoAndStop("shape"+game.goal.v2),save.getBScore()==game.score.v&&(this.text_d_best_score.setText(intToStringDot(game.score.v),0,"left"),this.shape_best_score.x=160*devise_size-((72*devise_size+this.text_d_best_score.width)/2<<0),this.text_d_best_score.x=this.shape_best_score.x+56*devise_size)))};var home_cout,fb_cout,m_s_x,m_s_y;WindowLocation.prototype=new ClassWindow,WindowLocation.prototype.PreShow=function(){home_cout===config.add_home_post?(addToHome.show(!0),home_cout=0):home_cout++,fb_cout==config.fb_post?(FB.ui({method:"feed",name:config.fb_name,link:window.location.href,picture:window.location.href.substring(0,window.location.href.lastIndexOf("/")+1)+"assets/facebook.jpg",caption:config.fb_caption,description:config.fb_description},function(){}),fb_cout=0):fb_cout++,this.text_d_best_score.setText(intToStringDot(save.getBScore()),2,"left"),this.text_d_best_score.x=206*devise_size-this.text_d_best_score.width+15*devise_size},WindowLocation.prototype.DrwSt=function(){game.grid.Drw(),game.score.Drw()},WindowMainMenu.prototype=new ClassWindow,WindowMoves.prototype=new ClassWindow,WindowMoves.prototype.PreShow=function(){this.timer=90},WindowMoves.prototype.Drw=function(){this.timer--,0==this.timer&&windows.Show("fail")},WindowSetting.prototype=new ClassWindow,WindowSetting.prototype.PreShow=function(){this.btnRg.visible="main_menu"!=windows.getPrevious(0)},WindowSetting.prototype.DrwIn=function(){var a=this.animation_time_pos/this.animation_time_in;this.butI.x=(160-66*a)*devise_size,this.butI.y=(227-57*a)*devise_size,this.butH.x=(160+66*a)*devise_size,this.butH.y=(227-57*a)*devise_size,this.butM.x=(160-66*a)*devise_size,this.butM.y=(227+57*a)*devise_size,this.butS.x=(160+66*a)*devise_size,this.butS.y=(227+57*a)*devise_size,this.butI.scaleX=this.butI.scaleY=this.butH.scaleX=this.butH.scaleY=this.butM.scaleX=this.butM.scaleY=this.butS.scaleX=this.butS.scaleY=a},WindowSetting.prototype.DrwOut=function(){var a=1-this.animation_time_pos/this.animation_time_out*1.5;this.butI.x=(160-66*a)*devise_size,this.butI.y=(227-57*a)*devise_size,this.butH.x=(160+66*a)*devise_size,this.butH.y=(227-57*a)*devise_size,this.butM.x=(160-66*a)*devise_size,this.butM.y=(227+57*a)*devise_size,this.butS.x=(160+66*a)*devise_size,this.butS.y=(227+57*a)*devise_size,this.butI.scaleX=this.butI.scaleY=this.butH.scaleX=this.butH.scaleY=this.butM.scaleX=this.butM.scaleY=this.butS.scaleX=this.butS.scaleY=a};var tut_sw;WindowTut.prototype=new ClassWindow,WindowTut.prototype.PreShow=function(){game.tut.Re()};