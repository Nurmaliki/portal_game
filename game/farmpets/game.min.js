/*! tweensoft.com 2014-09-11 11:02:46 */
function ClassAddBonus(){this.gift_st=ss_data.clone(),this.gift_st.alpha=.5,this.gift_st.visible=!1,this.gift=ss_data.clone(),this.gift.visible=!1,this.rand=0,this.speed=0,this.t=0,m_add_bonus=[51*devise_size,116*devise_size,156*devise_size,196*devise_size,236*devise_size,276*devise_size]}function ClassAllJ(){this.getImg=new createjs.Container,this.job=new ClassJob,this.moves=new ClassMoves,this.time_bar=new ClassTimeBar,this.moves.getImg.x=9*devise_size,this.moves.getImg.y=51*devise_size,this.getImg.addChild(this.moves.getImg),this.job.getImg.x=110*devise_size,this.job.getImg.y=50*devise_size,this.getImg.addChild(this.job.getImg),this.time_bar.getImg.x=5*devise_size,this.time_bar.getImg.y=55*devise_size,this.getImg.addChild(this.time_bar.getImg),this.win=""}function ClassBg(){this.getImg=new createjs.Container,this.img_bg=[[],[],[],[],[],[],[],[]];for(var a=0;8>a;a++)for(var b=0;4>b;b++)this.img_bg[a].push(ss_data.clone()),this.img_bg[a][b].x=(80*b+40*(a%2))*devise_size-20*devise_size,this.img_bg[a][b].y=40*devise_size*a-20*devise_size,this.getImg.addChild(this.img_bg[a][b])}function ClassBonus(){this.getImg=new createjs.Container,this.ID=0;var a=ss_data.clone();a.gotoAndStop("game_bottom_bar"),this.getImg.addChild(a),this.bg_block=[],this.img_bonus=[],this.text_count=[],this.lvl_text=ss_data.clone(),this.lvl_text.gotoAndStop("text_white_level"),this.lvl_text.x=33*devise_size,this.lvl_text.y=8*devise_size,this.getImg.addChild(this.lvl_text),this.lvl_text_num=new ClassText("",3),this.lvl_text_num.getImg.x=93*devise_size,this.lvl_text_num.getImg.y=-1*devise_size,this.getImg.addChild(this.lvl_text_num.getImg),this.bg_block.push(ss_data.clone()),this.bg_block[0].gotoAndStop("block_bonus"),this.bg_block[0].x=55*devise_size,this.bg_block[0].y=devise_size,this.bg_block[0].name=0,this.bg_block[0].on("mousedown",function(a){game.bonus.setBonus(a.target.name)}),this.getImg.addChild(this.bg_block[0]),this.img_bonus.push(ss_data.clone()),this.img_bonus[0].gotoAndStop("bonus00"),this.img_bonus[0].regX=8*devise_size,this.img_bonus[0].regY=4*devise_size,this.img_bonus[0].x=55*devise_size,this.img_bonus[0].y=devise_size,this.getImg.addChild(this.img_bonus[0]),this.text_count.push(new ClassText("",2)),this.text_count[0].getImg.x=82*devise_size,this.text_count[0].getImg.y=11*devise_size,this.getImg.addChild(this.text_count[0].getImg);for(var b=1;6>b;b++)this.bg_block.push(ss_data.clone()),this.bg_block[b].gotoAndStop("block_bonus"),this.bg_block[b].x=(80+40*b)*devise_size,this.bg_block[b].y=devise_size,this.bg_block[b].name=b,this.bg_block[b].on("mousedown",function(a){game.bonus.setBonus(a.target.name)}),this.getImg.addChild(this.bg_block[b]),this.img_bonus.push(ss_data.clone()),this.img_bonus[b].gotoAndStop("bonus"+b+"0"),this.img_bonus[b].regX=8*devise_size,this.img_bonus[b].regY=4*devise_size,this.img_bonus[b].x=(80+40*b)*devise_size,this.img_bonus[b].y=devise_size,this.getImg.addChild(this.img_bonus[b]),this.text_count.push(new ClassText("",2)),this.text_count[b].getImg.x=(108+40*b)*devise_size,this.text_count[b].getImg.y=11*devise_size,this.getImg.addChild(this.text_count[b].getImg)}function ClassBonusBar(){m_bonus_bar=[116*devise_size,140*devise_size,175*devise_size],this.getImg=new createjs.Container,this.progress=0,this.bg=ss_data.clone(),this.bg.gotoAndStop("progress_bar_bonus1"),this.bg.x=0,this.getImg.addChild(this.bg),this.center=ss_data.clone(),this.center.gotoAndStop("progress_center1"),this.center.x=14*devise_size,this.center.scaleX=1,this.getImg.addChild(this.center),this.end=ss_data.clone(),this.end.gotoAndStop("progress_end1"),this.end.x=14*devise_size+this.center.scaleX,this.getImg.addChild(this.end),this.text_count=new ClassText("",4),this.text_count.getImg.y=23*devise_size,this.text_count.getImg.scaleX=this.text_count.getImg.scaleY=.9,this.getImg.addChild(this.text_count.getImg),this.text=ss_data.clone(),this.text.gotoAndStop("text_yellow_collected"),this.text.y=47*devise_size,this.getImg.addChild(this.text),this.ef=ss_data.clone(),this.ef.gotoAndPlay("a_lock"),this.ef.on("animationend",function(a){a.target.visible=!1}),this.ef.regX=37*devise_size,this.ef.regY=37*devise_size,this.ef.y=10*devise_size,this.getImg.addChild(this.ef)}function ClassBorder(a,b,c,d){for(var e=new createjs.Container,f=[],g=0;8>g;g++)f.push(ss_data.clone()),e.addChild(f[g]);return f[0].gotoAndStop("border1"),f[0].x=a,f[0].y=b,f[0].scaleX=1,f[0].scaleY=1,f[1].gotoAndStop("border2"),f[1].x=a+8*devise_size,f[1].y=b,f[1].scaleX=(c-16*devise_size)/devise_size,f[1].scaleY=1,f[2].gotoAndStop("border1"),f[2].x=a+c,f[2].y=b,f[2].scaleX=-1,f[2].scaleY=1,f[3].gotoAndStop("border3"),f[3].x=a+c,f[3].y=b+8*devise_size,f[3].scaleX=-1,f[3].scaleY=(d-16*devise_size)/devise_size,f[4].gotoAndStop("border1"),f[4].x=a+c,f[4].y=b+d,f[4].scaleX=-1,f[4].scaleY=-1,f[5].gotoAndStop("border2"),f[5].x=a+8*devise_size,f[5].y=b+d,f[5].scaleX=(c-16*devise_size)/devise_size,f[5].scaleY=-1,f[6].gotoAndStop("border1"),f[6].x=a,f[6].y=b+d,f[6].scaleX=1,f[6].scaleY=-1,f[7].gotoAndStop("border3"),f[7].x=a,f[7].y=b+8*devise_size,f[7].scaleX=1,f[7].scaleY=(d-16*devise_size)/devise_size,e}function ClassBot(){this.m=[[],[],[],[],[],[],[],[]],this.find=!1,this.max_length=0,this.max={y1:0,x1:0,y2:0,x2:0,l:0}}function ClassCombo(){this.getImg=ss_data.clone(),this.getImg.visible=!1,this.getImg.regY=20*devise_size,this.time=0}function ClassEl(){this.ID=-1,this.bonusID=0,this.val=0,this.multi=1}function isDes(a,b){var c=!1;return 0==a.ID&&0==b.ID&&a.val==b.val&&2!=a.bonusID&&2!=b.bonusID&&(c=!0),(0==a.ID&&1==b.ID&&2!=a.bonusID||1==a.ID&&0==b.ID&&2!=b.bonusID)&&(c=!0),c}function isSwp(a,b){return-1!=game.grid.mass[a][b].ID&&2!=game.grid.mass[a][b].bonusID}function swapE(a,b,c,d){game.grid.mass[a][b].ID+=game.grid.mass[c][d].ID,game.grid.mass[c][d].ID=game.grid.mass[a][b].ID-game.grid.mass[c][d].ID,game.grid.mass[a][b].ID-=game.grid.mass[c][d].ID,game.grid.mass[a][b].bonusID+=game.grid.mass[c][d].bonusID,game.grid.mass[c][d].bonusID=game.grid.mass[a][b].bonusID-game.grid.mass[c][d].bonusID,game.grid.mass[a][b].bonusID-=game.grid.mass[c][d].bonusID,game.grid.mass[a][b].val+=game.grid.mass[c][d].val,game.grid.mass[c][d].val=game.grid.mass[a][b].val-game.grid.mass[c][d].val,game.grid.mass[a][b].val-=game.grid.mass[c][d].val,game.grid.mass[a][b].multi+=game.grid.mass[c][d].multi,game.grid.mass[c][d].multi=game.grid.mass[a][b].multi-game.grid.mass[c][d].multi,game.grid.mass[a][b].multi-=game.grid.mass[c][d].multi}function ClassFlyPets(){this.getImg=new createjs.Container,this.img=[]}function ClassFlys(){this.getImg=new createjs.Container,this.i=0,this.fly=[];for(var a=0;32>a;a++)this.fly.push(new ClassFly),this.getImg.addChild(this.fly[a].getImg)}function ClassFlyWater(){this.getImg=ss_data.clone(),this.getImg.gotoAndStop("bonus00"),this.getImg.scaleX=this.getImg.scaleY=.6,this.getImg.regX=43*devise_size,this.getImg.regY=39*devise_size,this.getImg.visible=!1}function CreateFonts(){for(var a=0;a<fonts.length;a++)fonts[a].ss=new createjs.Sprite(new createjs.SpriteSheet(fonts[a].data))}function ClassText(a,b){this.getImg=new createjs.Container,this.font=b;for(var c,d=0,e=0,f=0;f<a.length;f++)e=fonts[b].chars.indexOf(a[f]),c=fonts[b].ss.clone(),c.gotoAndStop(e),c.x=d,d+=fonts[b].kerning[e],this.getImg.addChild(c);this.getImg.width=d,this.getImg.height=fonts[b].line_height}function ClassGame(){this.level_num=0,this.bonus_lvl=!1,this.move=!0,this.bot=!1,this.save=new ClassSave,this.save.LoadBonus(),this.save.LoadMap(),this.save.LoadTut(),this.grid=new ClassGrid,this.bonus=new ClassBonus,this.combo=new ClassCombo,this.bot=new ClassBot,this.fly=new ClassFlyPets,this.score=new ClassScore,this.fly_w=new ClassFlyWater,this.all_job=new ClassAllJ,this.color=["p1","p2","p3","p4","p5","p6","p7","p8","p9","p10","p11"]}function ClassGr(){for(this.getImg=new createjs.Container,this.img=[[],[],[],[],[],[],[],[]],this.img_des=[[],[],[],[],[],[],[],[]],this.img_glow=[[],[],[],[],[],[],[],[]],this.img_bonus=[[],[],[],[],[],[],[],[]],this.text_multi=[[],[],[],[],[],[],[],[]],this.time_bonus=[0,0,0,0,0,0],a=0;8>a;a++)for(b=0;8>b;b++)this.img_glow[a].push(ss_data.clone()),this.img_glow[a][b].visible=!1,this.img_glow[a][b].gotoAndPlay("glow"),this.img_glow[a][b].regX=37*devise_size,this.img_glow[a][b].regY=37*devise_size,this.img_glow[a][b].x=40*b*devise_size,this.img_glow[a][b].y=40*a*devise_size,this.getImg.addChild(this.img_glow[a][b]);for(var a=0;8>a;a++)for(var b=0;8>b;b++){this.img[a].push(ss_data.clone()),this.img[a][b].name=10*a+b;var c=new createjs.Shape;c.graphics.f("#000").dc(21*devise_size,18*devise_size,18*devise_size),this.img[a][b].hitArea=c,this.img[a][b].on("mousedown",function(a){mouse_x=a.stageX,mouse_y=a.stageY;var b=a.target.name/10<<0,c=a.target.name%10;stage_glow.addChild(ClassBorder(game.grid.getImg.x+40*c*devise_size-20*devise_size,game.grid.getImg.y+40*b*devise_size-20*devise_size,40*devise_size,40*devise_size))}),this.img[a][b].on("pressup",function(a){if(stage_glow.removeAllChildren(),game.move){var b=a.target.name/10<<0,c=a.target.name%10;switch(game.bonus.ID){case 0:2==game.grid.mass[b][c].ID?(game.fly_w.set(game.grid.getImg.x+40*c*devise_size,game.grid.getImg.y+40*b*devise_size),game.grid.destroy[b][c]=1,game.grid.isDestroy()&&game.grid.Restroy()):Math.max(Math.abs(mouse_x-a.stageX),Math.abs(mouse_y-a.stageY))>5*devise_size&&(Math.abs(mouse_x-a.stageX)>Math.abs(mouse_y-a.stageY)?game.grid.MouseSwap(b,c,b,c+(mouse_x-a.stageX<0?1:-1)):game.grid.MouseSwap(b,c,b+(mouse_y-a.stageY<0?1:-1),c));break;case 1:game.grid.Bonus1(b,c)&&(game.grid.gr.bonus_img.visible=!0,game.grid.gr.bonus_img.gotoAndPlay("water"),game.grid.gr.bonus_img.regX=38*devise_size,game.grid.gr.bonus_img.regY=38*devise_size,game.grid.gr.bonus_img.x=40*c*devise_size,game.grid.gr.bonus_img.y=40*b*devise_size,game.bonus.Add(0,-1),game.bonus.reBonus(),game.grid.gr.setAnimBonus1());break;case 2:game.grid.Bonus2(b,c)&&(game.grid.gr.bonus_img.visible=!0,game.grid.gr.bonus_img.gotoAndPlay("bsmal"),game.grid.gr.bonus_img.regX=32*devise_size,game.grid.gr.bonus_img.regY=32*devise_size,game.grid.gr.bonus_img.x=40*c*devise_size,game.grid.gr.bonus_img.y=40*b*devise_size,game.bonus.Add(1,-1),game.bonus.reBonus(),game.grid.gr.setAnimBonus2());break;case 3:game.grid.Bonus3(b,c)&&(game.grid.gr.bonus_img.visible=!0,game.grid.gr.bonus_img.gotoAndPlay("bomb"),game.grid.gr.bonus_img.regX=88*devise_size,game.grid.gr.bonus_img.regY=88*devise_size,game.grid.gr.bonus_img.x=40*c*devise_size,game.grid.gr.bonus_img.y=40*b*devise_size,game.bonus.Add(2,-1),game.bonus.reBonus(),game.grid.gr.setAnimBonus3());break;case 4:game.grid.Bonus4(b,c)&&(game.bonus.Add(3,-1),game.bonus.reBonus(),game.grid.gr.setAnimBonus4());break;case 5:game.grid.Bonus5(b,c)&&(game.bonus.Add(4,-1),game.bonus.reBonus(),game.grid.gr.setAnimBonus5());break;case 6:game.grid.Bonus6(b,c)&&(game.grid.gr.bonus_img.visible=!0,game.grid.gr.bonus_img.gotoAndPlay("a_lock"),game.grid.gr.bonus_img.regX=38*devise_size,game.grid.gr.bonus_img.regY=38*devise_size,game.grid.gr.bonus_img.x=40*c*devise_size,game.grid.gr.bonus_img.y=40*b*devise_size,game.bonus.Add(5,-1),game.bonus.reBonus(),game.grid.gr.setAnimBonus6())}}}),this.img[a][b].regX=21*devise_size,this.img[a][b].regY=40*devise_size,this.img[a][b].x=40*b*devise_size,this.img[a][b].y=(40*a+20)*devise_size,this.getImg.addChild(this.img[a][b])}for(a=0;8>a;a++)for(b=0;8>b;b++)this.img_des[a].push(ss_data.clone()),this.img_des[a][b].visible=!1,this.img_des[a][b].on("animationend",function(a){a.target.visible=!1}),this.img_des[a][b].regX=77*devise_size,this.img_des[a][b].regY=77*devise_size,this.img_des[a][b].x=40*b*devise_size,this.img_des[a][b].y=40*a*devise_size,this.getImg.addChild(this.img_des[a][b]),this.img_bonus[a].push(ss_data.clone()),this.img_bonus[a][b].visible=!1,this.img_bonus[a][b].regX=-4*devise_size,this.img_bonus[a][b].regY=-4*devise_size,this.img_bonus[a][b].x=40*b*devise_size,this.img_bonus[a][b].y=40*a*devise_size,this.getImg.addChild(this.img_bonus[a][b]),this.text_multi[a].push(new ClassText("0",2)),this.text_multi[a][b].getImg.regX=-2*devise_size,this.text_multi[a][b].getImg.x=40*devise_size*b,this.text_multi[a][b].getImg.y=40*devise_size*a,this.getImg.addChild(this.text_multi[a][b].getImg);this.bonus_img=ss_data.clone(),this.bonus_img.on("animationend",function(a){a.target.visible=!1}),this.bonus_img.visible=!1,this.getImg.addChild(this.bonus_img)}function ClassGrid(){this.width=0,this.height=0,this.old_random=0,this.mass=[];for(var a=0;8>a;a++){this.mass.push([]);for(var b=0;8>b;b++)this.mass[a].push(new ClassEl)}this.glow_m=0,this.glow=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],this.destroy=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],this.getImg=new createjs.Container,this.bg=new ClassBg,this.getImg.addChild(this.bg.getImg),this.gr=new ClassGr,this.getImg.addChild(this.gr.getImg),this.s=new createjs.Shape,this.s.x=-19*devise_size,this.s.y=-19*devise_size,this.s.alpha=.5,this.getImg.addChild(this.s)}function ClassJob(){this.getImg=new createjs.Container,this.job_v=[],this.job_l=[],this.text=[],this.bg=[],this.mark=[],this.pre=[];for(var a=0;4>a;a++)this.bg.push(ss_data.clone()),this.bg[a].gotoAndStop("top_bar_green_block"),this.bg[a].x=(23+51*a)*devise_size,this.bg[a].y=6*devise_size,this.getImg.addChild(this.bg[a]),this.mark.push(ss_data.clone()),this.mark[a].gotoAndStop("marker_top_bar"),this.mark[a].x=(22+51*a)*devise_size,this.mark[a].y=4*devise_size,this.getImg.addChild(this.mark[a]),this.pre.push(ss_data.clone()),this.pre[a].x=51*a*devise_size,this.pre[a].y=2*devise_size,this.pre[a].scaleX=this.pre[a].scaleY=.6,this.getImg.addChild(this.pre[a]);for(a=0;4>a;a++)this.text.push(new ClassText("",2)),this.text[a].getImg.x=(23+51*a)*devise_size,this.text[a].getImg.y=devise_size,this.getImg.addChild(this.text[a].getImg)}function ClassMoves(){this.getImg=new createjs.Container,this.moves=25,this.moves_save=0;var a=ss_data.clone();a.gotoAndStop("top_bar_block_moves"),this.getImg.addChild(a),this.text_moves=new ClassText("",3),this.text_moves.getImg.y=-devise_size,this.text_moves.getImg.scaleX=this.text_moves.getImg.scaleY=.8,this.getImg.addChild(this.text_moves.getImg),this.text=ss_data.clone(),this.text.gotoAndStop("text_white_moves"),this.text.y=6*devise_size,this.text.scaleX=this.text.scaleY=.8,this.getImg.addChild(this.text),this.Upd()}function ClassProgressBar(){m_progress_bar=[11*devise_size,-32*devise_size,75*devise_size,-42*devise_size,132*devise_size,-34*devise_size],this.getImg=new createjs.Container,this.progress=0,this.progress_w=0,this.bg=ss_data.clone(),this.bg.gotoAndStop("progress_bar_bonus2"),this.getImg.addChild(this.bg),this.center=ss_data.clone(),this.center.gotoAndStop("progress_center2"),this.center.x=13*devise_size,this.center.scaleX=1,this.getImg.addChild(this.center),this.end=ss_data.clone(),this.end.gotoAndStop("progress_end2"),this.end.x=13*devise_size+this.center.scaleX,this.getImg.addChild(this.end),this.text=new ClassText("",4),this.text.getImg.y=10*devise_size,this.text.getImg.x=72*devise_size,this.text.getImg.scaleX=this.text.getImg.scaleY=.8,this.getImg.addChild(this.text.getImg),this.points=ss_data.clone(),this.points.gotoAndStop("points"),this.points.y=34*devise_size,this.getImg.addChild(this.points),this.corn=ss_data.clone(),this.corn.gotoAndStop("corn0"),this.corn.y=-66*devise_size,this.corn.x=-15*devise_size,this.getImg.addChild(this.corn),this.ef=ss_data.clone(),this.ef.gotoAndPlay("a_lock"),this.ef.on("animationend",function(a){a.target.visible=!1}),this.ef.regX=37*devise_size,this.ef.regY=37*devise_size,this.getImg.addChild(this.ef)}function ClassSave(){this.bonus=[0,0,0,0,0,0],this.map=[],this.tut=!0}function ClassScore(){this.score=0}function ClassTimeBar(){this.getImg=new createjs.Container,this.time=3600,this.progress=0,this.bg=ss_data.clone(),this.bg.gotoAndStop("progress_bar_bonus2"),this.bg.x=154*devise_size,this.getImg.addChild(this.bg),this.center=ss_data.clone(),this.center.gotoAndStop("progress_center2"),this.center.x=167*devise_size,this.center.scaleX=1,this.getImg.addChild(this.center),this.end=ss_data.clone(),this.end.gotoAndStop("progress_end2"),this.end.x=167*devise_size+this.center.scaleX,this.getImg.addChild(this.end);var a=ss_data.clone();a.gotoAndStop("text_white_time"),a.x=30*devise_size,this.getImg.addChild(a),this.text_time=new ClassText("",3),this.text_time.getImg.x=80*devise_size,this.text_time.getImg.y=-9*devise_size,this.getImg.addChild(this.text_time.getImg),this.corn=[ss_data.clone(),ss_data.clone(),ss_data.clone()],this.corn[0].gotoAndStop("corn"),this.corn[1].gotoAndStop("corn"),this.corn[2].gotoAndStop("corn"),this.corn[0].x=237.2*devise_size,this.corn[1].x=254.75*devise_size,this.corn[2].x=284*devise_size,this.corn[0].y=-devise_size,this.corn[1].y=-devise_size,this.corn[2].y=-devise_size,this.corn[0].alpha=.5,this.corn[1].alpha=.5,this.corn[2].alpha=.5,this.corn[0].scaleX=this.corn[0].scaleY=.6,this.corn[1].scaleX=this.corn[1].scaleY=.6,this.corn[2].scaleX=this.corn[2].scaleY=.6,this.getImg.addChild(this.corn[0]),this.getImg.addChild(this.corn[1]),this.getImg.addChild(this.corn[2])}function ClassWindow(){this.name="",this.layer=0,this.animation_step=0,this.animation_time_in=0,this.animation_time_out=0,this.animation_pos=0,this.getImg=new createjs.Container,this.getImg.visible=!1}function ClassWindowController(){this.windows=[],this.windows.push(new WindowMainMenu),this.windows.push(new WindowMap),this.windows.push(new WindowLocation),this.windows.push(new WindowSetting),this.windows.push(new WindowLevelComplete),this.windows.push(new WindowPause),this.windows.push(new WindowJob),this.windows.push(new WindowLevelClear),this.windows.push(new WindowGameComplete),this.windows.push(new WindowBonusLevel),this.windows.push(new WindowAbout),this.windows.push(new WindowTut),this.windows.push(new WindowGift),this.windows.push(new WindowLevelFailed),this.windows.push(new WindowBonusLevelComplete),this.windows.push(new WindowSScr),this.windows.push(new WindowTarget),this.modal_bg=new createjs.Shape,this.modal_bg.graphics.beginFill("#000").drawRect(0,0,640,960),this.modal_bg.alpha=.6,this.modal_bg.visible=!1,this.active_ID=0,this.path=[];for(var a=0;2>a;a++){1==a&&stage.addChild(this.modal_bg);for(var b=0;b<this.windows.length;b++)this.windows[b].layer==a&&stage.addChild(this.windows[b].getImg)}}function WindowAbout(){this.name="about",this.layer=0;var a=new createjs.Bitmap(load.queue.getResult("bg_menu"));this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("about"),b.x=70*devise_size,b.y=73*devise_size,b.on("mousedown",function(){window.open(config.more_about_url)});var c=new createjs.Shape;c.graphics.beginFill("#000").drawRect(0,52*devise_size,180*devise_size,216*devise_size),b.hitArea=c,this.getImg.addChild(b),this.btn_left=new createjs.Container,this.btn_left.on("mousedown",function(){window_controller.Show("setting")}),this.btn_left.x=5*devise_size,this.btn_left.y=421*devise_size,this.btn_left.regY=52*devise_size;var d=ss_data.clone();d.gotoAndStop("btn"),this.btn_left.addChild(d);var e=ss_data.clone();e.gotoAndStop("icon_left"),this.btn_left.addChild(e),this.getImg.addChild(this.btn_left)}function WindowBonusLevelComplete(){this.name="bwin",this.layer=1,this.animation_time_in=20,this.animation_time_out=20,this.getImg.x=160*devise_size,this.getImg.y=2048,this.getImg.regX=110*devise_size,this.getImg.regY=105*devise_size;var a=ss_data.clone();a.gotoAndStop("window3"),this.getImg.addChild(a),this.lights=ss_data.clone(),this.lights.gotoAndStop("lights"),this.lights.x=-43*devise_size,this.lights.y=60*devise_size,this.getImg.addChild(this.lights),this.bonus_text=ss_data.clone(),this.bonus_text.gotoAndStop("text_white_bonus_reward"),this.bonus_text.x=32*devise_size,this.bonus_text.y=120*devise_size,this.getImg.addChild(this.bonus_text);var b=ss_data.clone();b.gotoAndStop("text_yellow_bonus_level_comlete"),b.x=-22*devise_size,b.y=-66*devise_size,this.getImg.addChild(b),this.text_num_lvl=new ClassText("",4),this.text_num_lvl.getImg.x=158*devise_size,this.text_num_lvl.getImg.y=-80*devise_size,this.getImg.addChild(this.text_num_lvl.getImg),this.btn_m=ss_data.clone(),this.btn_m.gotoAndStop("btn"),this.btn_m.on("mousedown",function(){window_controller.Show("map")}),this.btn_m.x=15*devise_size,this.btn_m.y=180*devise_size,this.getImg.addChild(this.btn_m);var c=ss_data.clone();c.gotoAndStop("icon_menu"),c.x=15*devise_size,c.y=180*devise_size,this.getImg.addChild(c),this.btn_r=ss_data.clone(),this.btn_r.gotoAndStop("btn"),this.btn_r.on("mousedown",function(){game.CreateLvl(game.level_num),window_controller.Show("location"),window_controller.Show("bonuslvl")}),this.btn_r.x=84*devise_size,this.btn_r.y=180*devise_size,this.getImg.addChild(this.btn_r);var d=ss_data.clone();d.gotoAndStop("icon_reset"),d.x=84*devise_size,d.y=180*devise_size,this.getImg.addChild(d),this.btn_n=ss_data.clone(),this.btn_n.gotoAndStop("btn"),this.btn_n.on("mousedown",function(){game.CreateLvl(game.level_num+1),window_controller.Show("location"),window_controller.Show("job")}),this.btn_n.x=152*devise_size,this.btn_n.y=180*devise_size,this.getImg.addChild(this.btn_n);var e=ss_data.clone();e.gotoAndStop("icon_right"),e.x=152*devise_size,e.y=180*devise_size,this.getImg.addChild(e),this.progress=new ClassBonusBar,this.progress.getImg.x=21*devise_size,this.progress.getImg.y=30*devise_size,this.getImg.addChild(this.progress.getImg),this.gift0=new ClassAddBonus,this.getImg.addChild(this.gift0.gift_st),this.getImg.addChild(this.gift0.gift),this.gift1=new ClassAddBonus,this.getImg.addChild(this.gift1.gift_st),this.getImg.addChild(this.gift1.gift)}function WindowBonusLevel(){this.name="bonuslvl",this.layer=1,this.animation_time_in=20,this.animation_time_out=20,this.getImg.x=160*devise_size,this.getImg.y=2048,this.getImg.regX=109*devise_size,this.getImg.regY=61*devise_size;var a=ss_data.clone();a.gotoAndStop("window"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("text_yellow_bonus_level"),b.x=10*devise_size,b.y=-25*devise_size,this.getImg.addChild(b);var c=ss_data.clone();c.gotoAndStop("text_white_bonus level"),c.x=30*devise_size,c.y=16*devise_size,this.getImg.addChild(c),this.sec_t=new ClassText("",3),this.sec_t.getImg.y=c.y+32*devise_size,this.getImg.addChild(this.sec_t.getImg),this.sec=ss_data.clone(),this.sec.gotoAndStop("text_white_seconds"),this.sec.y=c.y+41*devise_size,this.getImg.addChild(this.sec),this.btn_p=ss_data.clone(),this.btn_p.gotoAndStop("btn"),this.btn_p.on("mousedown",function(){window_controller.Show("location")}),this.btn_p.x=84*devise_size,this.btn_p.y=76*devise_size,this.getImg.addChild(this.btn_p);var d=ss_data.clone();d.gotoAndStop("icon_right"),d.x=84*devise_size,d.y=76*devise_size,this.getImg.addChild(d)}function WindowGameComplete(){this.name="complete",this.layer=1,this.animation_time_in=20,this.animation_time_out=20,this.getImg.x=160*devise_size,this.getImg.y=2048,this.getImg.regX=110*devise_size,this.getImg.regY=51*devise_size;var a=ss_data.clone();a.gotoAndStop("window"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("text_yellow_game_complete"),b.x=32*devise_size,b.y=18*devise_size,this.getImg.addChild(b),this.btn_p=ss_data.clone(),this.btn_p.gotoAndStop("btn"),this.btn_p.on("mousedown",function(){window_controller.Show("map")}),this.btn_p.x=84*devise_size,this.btn_p.y=76*devise_size,this.getImg.addChild(this.btn_p);var c=ss_data.clone();c.gotoAndStop("icon_back"),c.x=84*devise_size,c.y=76*devise_size,this.getImg.addChild(c)}function WindowJob(){this.name="job",this.layer=1,this.animation_time_in=20,this.animation_time_out=20,this.getImg.x=160*devise_size,this.getImg.y=2048,this.getImg.regX=109*devise_size,this.getImg.regY=61*devise_size;var a=ss_data.clone();a.gotoAndStop("window"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("text_yellow_target"),b.x=50*devise_size,b.y=-25*devise_size,this.getImg.addChild(b),this.btn_p=ss_data.clone(),this.btn_p.gotoAndStop("btn"),this.btn_p.on("mousedown",function(){window_controller.Show("location")}),this.btn_p.x=84*devise_size,this.btn_p.y=76*devise_size,this.getImg.addChild(this.btn_p);var c=ss_data.clone();c.gotoAndStop("icon_right"),c.x=84*devise_size,c.y=76*devise_size,this.getImg.addChild(c),this.pre=[],this.text_count=[];for(var d=0;4>d;d++)this.pre.push(ss_data.clone()),this.pre[d].y=20*devise_size,this.pre[d].regX=22*devise_size,this.getImg.addChild(this.pre[d]),this.text_count.push(new ClassText("",2)),this.text_count[d].getImg.y=50*devise_size,this.getImg.addChild(this.text_count[d].getImg)}function WindowLevelClear(){this.name="clear",this.layer=1,this.animation_time_in=20,this.animation_time_out=20,this.getImg.x=160*devise_size,this.getImg.y=2048,this.getImg.regX=110*devise_size,this.getImg.regY=51*devise_size;var a=ss_data.clone();a.gotoAndStop("window"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("text_yellow_level_clear"),b.x=35*devise_size,b.y=39*devise_size,this.getImg.addChild(b)}function WindowLevelComplete(){this.name="win",this.layer=1,this.animation_time_in=20,this.animation_time_out=20,this.getImg.x=160*devise_size,this.getImg.y=2048,this.getImg.regX=110*devise_size,this.getImg.regY=105*devise_size;var a=ss_data.clone();a.gotoAndStop("window2"),this.getImg.addChild(a),this.lights=ss_data.clone(),this.lights.gotoAndStop("lights"),this.lights.x=-43*devise_size,this.lights.y=60*devise_size,this.getImg.addChild(this.lights),this.bonus_text=ss_data.clone(),this.bonus_text.gotoAndStop("text_white_bonus_reward"),this.bonus_text.x=32*devise_size,this.bonus_text.y=120*devise_size,this.getImg.addChild(this.bonus_text);var b=ss_data.clone();b.gotoAndStop("text_yellow_level_complete"),b.x=32*devise_size,b.y=-55*devise_size,this.getImg.addChild(b),this.text_num_lvl=new ClassText("",4),this.text_num_lvl.getImg.x=158*devise_size,this.text_num_lvl.getImg.y=-80*devise_size,this.getImg.addChild(this.text_num_lvl.getImg),this.btn_m=ss_data.clone(),this.btn_m.gotoAndStop("btn"),this.btn_m.on("mousedown",function(){window_controller.Show("map")}),this.btn_m.x=15*devise_size,this.btn_m.y=180*devise_size,this.getImg.addChild(this.btn_m);var c=ss_data.clone();c.gotoAndStop("icon_menu"),c.x=15*devise_size,c.y=180*devise_size,this.getImg.addChild(c),this.btn_r=ss_data.clone(),this.btn_r.gotoAndStop("btn"),this.btn_r.on("mousedown",function(){game.CreateLvl(game.level_num),window_controller.Show("location"),window_controller.Show("job")}),this.btn_r.x=84*devise_size,this.btn_r.y=180*devise_size,this.getImg.addChild(this.btn_r);var d=ss_data.clone();d.gotoAndStop("icon_reset"),d.x=84*devise_size,d.y=180*devise_size,this.getImg.addChild(d),this.btn_n=ss_data.clone(),this.btn_n.gotoAndStop("btn"),this.btn_n.on("mousedown",function(){game.CreateLvl(game.level_num+1),window_controller.Show("location"),window_controller.Show(0!=config.lvls[game.level_num].bonus_lvl?"bonuslvl":"job")}),this.btn_n.x=152*devise_size,this.btn_n.y=180*devise_size,this.getImg.addChild(this.btn_n);var e=ss_data.clone();e.gotoAndStop("icon_right"),e.x=152*devise_size,e.y=180*devise_size,this.getImg.addChild(e),this.progress=new ClassProgressBar,this.progress.getImg.x=37*devise_size,this.progress.getImg.y=67*devise_size,this.getImg.addChild(this.progress.getImg),this.gift0=new ClassAddBonus,this.getImg.addChild(this.gift0.gift_st),this.getImg.addChild(this.gift0.gift),this.gift1=new ClassAddBonus,this.getImg.addChild(this.gift1.gift_st),this.getImg.addChild(this.gift1.gift)}function WindowLevelFailed(){this.name="fail",this.layer=1,this.animation_time_in=20,this.animation_time_out=20,this.getImg.x=160*devise_size,this.getImg.y=2048,this.getImg.regX=110*devise_size,this.getImg.regY=105*devise_size;var a=ss_data.clone();a.gotoAndStop("window2"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("text_yellow_game_over"),b.x=40*devise_size,b.y=59*devise_size,this.getImg.addChild(b),this.btn_m=ss_data.clone(),this.btn_m.gotoAndStop("btn"),this.btn_m.on("mousedown",function(){window_controller.Show("map")}),this.btn_m.x=15*devise_size,this.btn_m.y=180*devise_size,this.getImg.addChild(this.btn_m);var c=ss_data.clone();c.gotoAndStop("icon_menu"),c.x=15*devise_size,c.y=180*devise_size,this.getImg.addChild(c),this.btn_r=ss_data.clone(),this.btn_r.gotoAndStop("btn"),this.btn_r.on("mousedown",function(){game.CreateLvl(game.level_num),window_controller.Show("location"),window_controller.Show("job")}),this.btn_r.x=152*devise_size,this.btn_r.y=180*devise_size,this.getImg.addChild(this.btn_r);var d=ss_data.clone();d.gotoAndStop("icon_reset"),d.x=152*devise_size,d.y=180*devise_size,this.getImg.addChild(d)}function WindowLocation(){this.name="location",this.layer=0,this.getImg.addChild(game.grid.getImg),stage_glow=new createjs.Container,this.getImg.addChild(stage_glow),game.bonus.getImg.y=394*devise_size,this.getImg.addChild(game.bonus.getImg);var a=ss_data.clone();a.gotoAndStop("game_top_bar"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("btn_pause"),b.on("mousedown",function(){window_controller.Show("pause")}),b.x=5*devise_size,b.y=399*devise_size,this.getImg.addChild(b),game.combo.getImg.x=160*devise_size,game.combo.getImg.y=240*devise_size,this.getImg.addChild(game.combo.getImg),this.getImg.addChild(game.all_job.getImg),this.getImg.addChild(game.fly_w.getImg),this.getImg.addChild(game.fly.getImg)}function WindowMainMenu(){this.name="main_menu",this.layer=0;var a=new createjs.Shape;a.graphics.beginFill("#000").drawCircle(33*devise_size,240*devise_size,25*devise_size),a.on("mousedown",function(){load.LoadAudio(),window.open(config.more_games_url)}),this.getImg.addChild(a);var b=new createjs.Shape;b.graphics.beginFill("#000").drawCircle(241*devise_size,367*devise_size,46*devise_size),b.on("mousedown",function(){load.LoadAudio(),window_controller.Show("map")}),this.getImg.addChild(b);var c=new createjs.Shape;c.graphics.beginFill("#000").drawCircle(110*devise_size,208*devise_size,25*devise_size),c.on("mousedown",function(){load.LoadAudio(),window_controller.Show("setting")}),this.getImg.addChild(c);var d=new createjs.Shape;d.graphics.beginFill("#000").drawCircle(230*devise_size,0,80*devise_size),d.y=190*devise_size,d.scaleY=.3,d.on("mousedown",function(){load.LoadAudio(),window.open(config.more_main_menu_url)}),this.getImg.addChild(d);var e=new createjs.Bitmap(load.queue.getResult("bg_main"));this.getImg.addChild(e)}function WindowMap(){home_cout=0,fb_cout=0,this.name="map",this.layer=0,this.pointsX=0;var a=new createjs.Shape;a.graphics.beginFill("#fff").drawRect(0,80*devise_size,320*devise_size,267*devise_size),a.on("mousedown",function(a){a.target.m_x=a.stageX}),a.on("pressup",function(a){Math.abs(a.target.m_x-a.stageX)>30*devise_size&&window_controller.windows[window_controller.getIDbyName("map")].Swipe(Math.max(-1,Math.min(1,a.stageX-a.target.m_x)))}),this.getImg.addChild(a);var b=new createjs.Bitmap(load.queue.getResult("bg_menu"));this.getImg.addChild(b),this.points=new createjs.Container,this.points.y=54*devise_size,this.point=[],this.stars=[],this.point_text=[],this.bonus=[];for(var c=0;c<config.lvls.length;c++)this.point.push(ss_data.clone()),this.point[c].name=c,this.point[c].on("mousedown",function(a){a.target.m_x=a.stageX}),this.point[c].on("pressup",function(a){Math.abs(a.target.m_x-a.stageX)>30*devise_size?window_controller.windows[window_controller.getIDbyName("map")].Swipe(Math.max(-1,Math.min(1,a.stageX-a.target.m_x))):game.save.tut?(tut=a.target.name,window_controller.Show("tut")):(game.CreateLvl(a.target.name),window_controller.Show("location"),window_controller.Show(config.lvls[a.target.name].bonus_lvl?"bonuslvl":"job"))}),this.point[c].regX=28*devise_size,this.point[c].regY=29*devise_size,this.point[c].x=(54+70*(c%4)+320*((c/4<<0)/4<<0))*devise_size,this.point[c].y=(54+70*(c/4<<0)-280*((c/4<<0)/4<<0))*devise_size,this.points.addChild(this.point[c]),this.point_text.push(new ClassText((c+1).toString(),0)),this.point_text[c].getImg.regX=this.point_text[c].getImg.width/2,this.point_text[c].getImg.regY=this.point_text[c].getImg.height/2,this.point_text[c].getImg.x=this.point[c].x,this.point_text[c].getImg.y=this.point[c].y-25*devise_size,this.points.addChild(this.point_text[c].getImg),this.stars.push(ss_data.clone()),this.stars[c].x=this.point[c].x,this.stars[c].y=this.point[c].y,this.points.addChild(this.stars[c]),this.bonus.push(ss_data.clone()),this.bonus[c].gotoAndStop("text_white_bonus"),this.bonus[c].x=this.point[c].x-25*devise_size,this.bonus[c].y=this.point[c].y+16*devise_size,this.points.addChild(this.bonus[c]);
for(this.getImg.addChild(this.points),this.markers=[],c=0;3>c;c++)this.markers.push(ss_data.clone()),this.markers[c].gotoAndStop("marker_map"),this.markers[c].x=(106+40*c)*devise_size,this.markers[c].y=56*devise_size,this.markers[c].alpha=.5,this.getImg.addChild(this.markers[c]);this.btn_b=ss_data.clone(),this.btn_b.gotoAndStop("btn"),this.btn_b.on("mousedown",function(){window_controller.Show("main_menu")}),this.btn_b.x=5*devise_size,this.btn_b.y=369*devise_size,this.getImg.addChild(this.btn_b),this.btn_b_up=ss_data.clone(),this.btn_b_up.gotoAndStop("icon_back"),this.btn_b_up.x=5*devise_size,this.btn_b_up.y=369*devise_size,this.getImg.addChild(this.btn_b_up),this.btn_left=new createjs.Container,this.btn_left.on("mousedown",function(){window_controller.windows[window_controller.getIDbyName("map")].Swipe(1)}),this.btn_left.x=5*devise_size,this.btn_left.y=421*devise_size,this.btn_left.regY=52*devise_size;var d=ss_data.clone();d.gotoAndStop("btn"),this.btn_left.addChild(d);var e=ss_data.clone();e.gotoAndStop("icon_left"),this.btn_left.addChild(e),this.getImg.addChild(this.btn_left),this.btn_right=new createjs.Container,this.btn_right.on("mousedown",function(){window_controller.windows[window_controller.getIDbyName("map")].Swipe(-1)}),this.btn_right.x=263*devise_size,this.btn_right.y=421*devise_size,this.btn_right.regY=52*devise_size;var f=ss_data.clone();f.gotoAndStop("btn"),this.btn_right.addChild(f);var g=ss_data.clone();g.gotoAndStop("icon_right"),this.btn_right.addChild(g),this.getImg.addChild(this.btn_right)}function WindowPause(){this.name="pause",this.layer=1,this.animation_time_in=20,this.animation_time_out=20,this.getImg.x=160*devise_size,this.getImg.y=2048,this.getImg.regX=110*devise_size,this.getImg.regY=105*devise_size;var a=ss_data.clone();a.gotoAndStop("window2"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("text_yellow_pause"),b.x=60*devise_size,b.y=-25*devise_size,this.getImg.addChild(b),this.btn_mc=ss_data.clone(),this.btn_mc.gotoAndStop("btn"),this.btn_mc.x=130*devise_size,this.btn_mc.y=99*devise_size,this.getImg.addChild(this.btn_mc),this.btn_music_up=ss_data.clone(),this.btn_music_up.gotoAndStop("icon_music"),this.btn_music_up.x=130*devise_size,this.btn_music_up.y=99*devise_size,this.getImg.addChild(this.btn_music_up),this.btn_s=ss_data.clone(),this.btn_s.gotoAndStop("btn"),this.btn_s.x=37*devise_size,this.btn_s.y=99*devise_size,this.getImg.addChild(this.btn_s),this.btn_sound_up=ss_data.clone(),this.btn_sound_up.gotoAndStop("icon_sound"),this.btn_sound_up.x=37*devise_size,this.btn_sound_up.y=99*devise_size,this.getImg.addChild(this.btn_sound_up),this.btn_help=new createjs.Container,this.btn_help.on("mousedown",function(){tut=-2,window_controller.Show("tut")}),this.btn_help.x=110*devise_size,this.btn_help.y=60*devise_size,this.btn_help.regX=26*devise_size,this.btn_help.regY=26*devise_size;var c=ss_data.clone();c.gotoAndStop("btn"),this.btn_help.addChild(c);var d=ss_data.clone();d.gotoAndStop("icon_help"),this.btn_help.addChild(d),this.getImg.addChild(this.btn_help),this.btn_m=ss_data.clone(),this.btn_m.gotoAndStop("btn"),this.btn_m.on("mousedown",function(){window_controller.Show("map")}),this.btn_m.x=37*devise_size,this.btn_m.y=180*devise_size,this.getImg.addChild(this.btn_m);var e=ss_data.clone();e.gotoAndStop("icon_menu"),e.x=37*devise_size,e.y=180*devise_size,this.getImg.addChild(e),this.btn_r=ss_data.clone(),this.btn_r.gotoAndStop("btn"),this.btn_r.on("mousedown",function(){window_controller.Show("location")}),this.btn_r.x=130*devise_size,this.btn_r.y=180*devise_size,this.getImg.addChild(this.btn_r);var f=ss_data.clone();f.gotoAndStop("icon_right"),f.x=130*devise_size,f.y=180*devise_size,this.getImg.addChild(f)}function WindowSetting(){this.name="setting",this.layer=0;var a=new createjs.Bitmap(load.queue.getResult("bg_menu"));this.getImg.addChild(a),this.btn_sound=new createjs.Container,this.btn_sound.x=106*devise_size,this.btn_sound.y=200*devise_size,this.btn_sound.regX=26*devise_size,this.btn_sound.regY=26*devise_size;var b=ss_data.clone();b.gotoAndStop("btn"),this.btn_sound.addChild(b),this.btn_sound_up=ss_data.clone(),this.btn_sound_up.gotoAndStop("icon_sound"),this.btn_sound.addChild(this.btn_sound_up),this.getImg.addChild(this.btn_sound),this.btn_music=new createjs.Container,this.btn_music.x=214*devise_size,this.btn_music.y=200*devise_size,this.btn_music.regX=26*devise_size,this.btn_music.regY=26*devise_size;var c=ss_data.clone();c.gotoAndStop("btn"),this.btn_music.addChild(c),this.btn_music_up=ss_data.clone(),this.btn_music_up.gotoAndStop("icon_music"),this.btn_music.addChild(this.btn_music_up),this.getImg.addChild(this.btn_music),this.btn_help=new createjs.Container,this.btn_help.on("mousedown",function(){tut=-1,window_controller.Show("tut")}),this.btn_help.x=106*devise_size,this.btn_help.y=300*devise_size,this.btn_help.regX=26*devise_size,this.btn_help.regY=26*devise_size;var d=ss_data.clone();d.gotoAndStop("btn"),this.btn_help.addChild(d);var e=ss_data.clone();e.gotoAndStop("icon_help"),this.btn_help.addChild(e),this.getImg.addChild(this.btn_help),this.btn_i=new createjs.Container,this.btn_i.on("mousedown",function(){window_controller.Show("about")}),this.btn_i.x=214*devise_size,this.btn_i.y=300*devise_size,this.btn_i.regX=26*devise_size,this.btn_i.regY=26*devise_size;var f=ss_data.clone();f.gotoAndStop("btn"),this.btn_i.addChild(f);var g=ss_data.clone();g.gotoAndStop("icon_i"),this.btn_i.addChild(g),this.getImg.addChild(this.btn_i),this.btn_left=new createjs.Container,this.btn_left.on("mousedown",function(){window_controller.Show("main_menu")}),this.btn_left.x=5*devise_size,this.btn_left.y=421*devise_size,this.btn_left.regY=52*devise_size;var h=ss_data.clone();h.gotoAndStop("btn"),this.btn_left.addChild(h);var i=ss_data.clone();i.gotoAndStop("icon_left"),this.btn_left.addChild(i),this.getImg.addChild(this.btn_left)}function WindowSScr(){this.name="s_scr",this.layer=0,this.time=0,this.bg=new createjs.Bitmap(load.queue.getResult("scr")),this.bg.on("mousedown",function(){window.open(config.more_scr_url)}),this.getImg.addChild(this.bg)}function WindowTarget(){this.name="target",this.layer=1,this.animation_time_in=20,this.animation_time_out=20,this.getImg.x=160*devise_size,this.getImg.y=2048,this.getImg.regX=110*devise_size,this.getImg.regY=51*devise_size;var a=ss_data.clone();a.gotoAndStop("window"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("text_target_complete"),b.x=43*devise_size,b.y=27*devise_size,this.getImg.addChild(b)}function WindowTut(){this.name="tut",this.layer=0,this.a=[{x:12,y:76},{x:60,y:74},{x:62,y:74}],this.num_tut=1;var a=new createjs.Bitmap(load.queue.getResult("bg_menu"));this.getImg.addChild(a),this.tut=ss_data.clone(),this.tut.gotoAndStop("instructions1"),this.tut.x=this.a[this.num_tut-1].x*devise_size,this.tut.y=this.a[this.num_tut-1].y*devise_size,this.getImg.addChild(this.tut),this.btn_left=new createjs.Container,this.btn_left.on("mousedown",function(){window_controller.windows[window_controller.getIDbyName("tut")].Add(-1)}),this.btn_left.x=5*devise_size,this.btn_left.y=421*devise_size,this.btn_left.regY=52*devise_size;var b=ss_data.clone();b.gotoAndStop("btn"),this.btn_left.addChild(b);var c=ss_data.clone();c.gotoAndStop("icon_left"),this.btn_left.addChild(c),this.getImg.addChild(this.btn_left),this.btn_right=new createjs.Container,this.btn_right.on("mousedown",function(){window_controller.windows[window_controller.getIDbyName("tut")].Add(1)}),this.btn_right.x=263*devise_size,this.btn_right.y=421*devise_size,this.btn_right.regY=52*devise_size;var d=ss_data.clone();d.gotoAndStop("btn"),this.btn_right.addChild(d);var e=ss_data.clone();e.gotoAndStop("icon_right"),this.btn_right.addChild(e),this.getImg.addChild(this.btn_right)}function WindowGift(){this.name="gift",this.layer=1,this.animation_time_in=20,this.animation_time_out=20,this.getImg.x=160*devise_size,this.getImg.y=2048,this.getImg.regX=110*devise_size,this.getImg.regY=105*devise_size,this.t=0;var a=ss_data.clone();a.gotoAndStop("window2"),this.getImg.addChild(a);var b=ss_data.clone();b.gotoAndStop("text_yellow_special_gift"),b.x=32*devise_size,b.y=-20*devise_size,this.getImg.addChild(b);var c=ss_data.clone();c.gotoAndStop("lights"),c.x=-43*devise_size,c.y=60*devise_size,this.getImg.addChild(c);var d=ss_data.clone();d.gotoAndStop("text_white_reward"),d.x=64*devise_size,d.y=116*devise_size,this.getImg.addChild(d);var e=ss_data.clone();e.gotoAndStop("gift_big"),e.x=68*devise_size,e.y=15*devise_size,this.getImg.addChild(e),this.gift=new ClassAddBonus,this.getImg.addChild(this.gift.gift_st),this.getImg.addChild(this.gift.gift)}var addToHome=function(a){function b(){if(y){var b,d=Date.now();if(a.addToHomeConfig)for(b in a.addToHomeConfig)C[b]=a.addToHomeConfig[b];C.autostart||(C.hookOnLoad=!1),l=/ipad/gi.test(x.platform),m=a.devicePixelRatio&&a.devicePixelRatio>1,n=/Safari/i.test(x.appVersion)&&!/CriOS/i.test(x.appVersion),o=x.standalone,p=x.appVersion.match(/OS (\d+_\d+)/i),p=p[1]?+p[1].replace("_","."):0,B=+a.localStorage.getItem("addToHome"),r=a.sessionStorage.getItem("addToHomeSession"),s=C.returningVisitor?B&&B+24192e5>d:!0,B||(B=d),q=s&&d>=B,C.hookOnLoad?a.addEventListener("load",c,!1):!C.hookOnLoad&&C.autostart&&c()}}function c(){if(a.removeEventListener("load",c,!1),s?C.expire&&q&&a.localStorage.setItem("addToHome",Date.now()+6e4*C.expire):a.localStorage.setItem("addToHome",Date.now()),u||n&&q&&!r&&!o&&s){var b="",e=x.platform.split(" ")[0],f=x.language.replace("-","_");t=document.createElement("div"),t.id="addToHomeScreen",t.style.cssText+="left:-9999px;-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0;-webkit-transform:translate3d(0,0,0);position:"+(5>p?"absolute":"fixed"),C.message in D&&(f=C.message,C.message=""),""===C.message&&(C.message=f in D?D[f]:D.en_us),C.touchIcon&&(b=document.querySelector(m?'head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon][sizes="144x144"]':'head link[rel^=apple-touch-icon][sizes="57x57"],head link[rel^=apple-touch-icon]'),b&&(b='<span style="background-image:url('+b.href+')" class="addToHomeTouchIcon"></span>')),t.className=(l?"addToHomeIpad":"addToHomeIphone")+(b?" addToHomeWide":""),t.innerHTML=b+C.message.replace("%device",e).replace("%icon",p>=4.2?'<span class="addToHomeShare"></span>':'<span class="addToHomePlus">+</span>')+(C.arrow?'<span class="addToHomeArrow"></span>':"")+(C.closeButton?'<span class="addToHomeClose">×</span>':""),document.body.appendChild(t),C.closeButton&&t.addEventListener("click",g,!1),!l&&p>=6&&window.addEventListener("orientationchange",k,!1),setTimeout(d,C.startDelay)}}function d(){var b,c=208;if(l)switch(5>p?(A=a.scrollY,z=a.scrollX):6>p&&(c=160),t.style.top=A+C.bottomOffset+"px",t.style.left=z+c-Math.round(t.offsetWidth/2)+"px",C.animationIn){case"drop":b="0.6s",t.style.webkitTransform="translate3d(0,"+-(a.scrollY+C.bottomOffset+t.offsetHeight)+"px,0)";break;case"bubble":b="0.6s",t.style.opacity="0",t.style.webkitTransform="translate3d(0,"+(A+50)+"px,0)";break;default:b="1s",t.style.opacity="0"}else switch(A=a.innerHeight+a.scrollY,5>p?(z=Math.round((a.innerWidth-t.offsetWidth)/2)+a.scrollX,t.style.left=z+"px",t.style.top=A-t.offsetHeight-C.bottomOffset+"px"):(t.style.left="50%",t.style.marginLeft=-Math.round(t.offsetWidth/2)-(a.orientation%180&&p>=6?40:0)+"px",t.style.bottom=C.bottomOffset+"px"),C.animationIn){case"drop":b="1s",t.style.webkitTransform="translate3d(0,"+-(A+C.bottomOffset)+"px,0)";break;case"bubble":b="0.6s",t.style.webkitTransform="translate3d(0,"+(t.offsetHeight+C.bottomOffset+50)+"px,0)";break;default:b="1s",t.style.opacity="0"}t.offsetHeight,t.style.webkitTransitionDuration=b,t.style.opacity="1",t.style.webkitTransform="translate3d(0,0,0)",t.addEventListener("webkitTransitionEnd",h,!1),w=setTimeout(f,C.lifespan)}function e(a){y&&!t&&(u=a,c())}function f(){if(clearInterval(v),clearTimeout(w),w=null,t){var b=0,c=0,d="1",e="0";switch(C.closeButton&&t.removeEventListener("click",g,!1),!l&&p>=6&&window.removeEventListener("orientationchange",k,!1),5>p&&(b=l?a.scrollY-A:a.scrollY+a.innerHeight-A,c=l?a.scrollX-z:a.scrollX+Math.round((a.innerWidth-t.offsetWidth)/2)-z),t.style.webkitTransitionProperty="-webkit-transform,opacity",C.animationOut){case"drop":l?(e="0.4s",d="0",b+=50):(e="0.6s",b=b+t.offsetHeight+C.bottomOffset+50);break;case"bubble":l?(e="0.8s",b=b-t.offsetHeight-C.bottomOffset-50):(e="0.4s",d="0",b-=50);break;default:e="0.8s",d="0"}t.addEventListener("webkitTransitionEnd",h,!1),t.style.opacity=d,t.style.webkitTransitionDuration=e,t.style.webkitTransform="translate3d("+c+"px,"+b+"px,0)"}}function g(){a.sessionStorage.setItem("addToHomeSession","1"),r=!0,f()}function h(){return t.removeEventListener("webkitTransitionEnd",h,!1),t.style.webkitTransitionProperty="-webkit-transform",t.style.webkitTransitionDuration="0.2s",w?void(5>p&&w&&(v=setInterval(i,C.iterations))):(t.parentNode.removeChild(t),void(t=null))}function i(){var b=new WebKitCSSMatrix(a.getComputedStyle(t,null).webkitTransform),c=l?a.scrollY-A:a.scrollY+a.innerHeight-A,d=l?a.scrollX-z:a.scrollX+Math.round((a.innerWidth-t.offsetWidth)/2)-z;(c!=b.m42||d!=b.m41)&&(t.style.webkitTransform="translate3d("+d+"px,"+c+"px,0)")}function j(){a.localStorage.removeItem("addToHome"),a.sessionStorage.removeItem("addToHomeSession")}function k(){t.style.marginLeft=-Math.round(t.offsetWidth/2)-(a.orientation%180&&p>=6?40:0)+"px"}var l,m,n,o,p,q,r,s,t,u,v,w,x=a.navigator,y="platform"in x&&/iphone|ipod|ipad/gi.test(x.platform),z=0,A=0,B=0,C={autostart:!0,returningVisitor:!1,animationIn:"drop",animationOut:"fade",startDelay:2e3,lifespan:15e3,bottomOffset:14,expire:0,message:"",touchIcon:!1,arrow:!0,hookOnLoad:!0,closeButton:!0,iterations:100},D={ar:'<span dir="rtl">قم بتثبيت هذا التطبيق على <span dir="ltr">%device:</span>انقر<span dir="ltr">%icon</span> ،<strong>ثم اضفه الى الشاشة الرئيسية.</strong></span>',ca_es:"Per instal·lar aquesta aplicació al vostre %device premeu %icon i llavors <strong>Afegir a pantalla d'inici</strong>.",cs_cz:"Pro instalaci aplikace na Váš %device, stiskněte %icon a v nabídce <strong>Přidat na plochu</strong>.",da_dk:"Tilføj denne side til din %device: tryk på %icon og derefter <strong>Føj til hjemmeskærm</strong>.",de_de:"Installieren Sie diese App auf Ihrem %device: %icon antippen und dann <strong>Zum Home-Bildschirm</strong>.",el_gr:"Εγκαταστήσετε αυτήν την Εφαρμογή στήν συσκευή σας %device: %icon μετά πατάτε <strong>Προσθήκη σε Αφετηρία</strong>.",en_us:"Install this web app on your %device: tap %icon and then <strong>Add to Home Screen</strong>.",es_es:"Para instalar esta app en su %device, pulse %icon y seleccione <strong>Añadir a pantalla de inicio</strong>.",fi_fi:"Asenna tämä web-sovellus laitteeseesi %device: paina %icon ja sen jälkeen valitse <strong>Lisää Koti-valikkoon</strong>.",fr_fr:"Ajoutez cette application sur votre %device en cliquant sur %icon, puis <strong>Ajouter à l'écran d'accueil</strong>.",he_il:'<span dir="rtl">התקן אפליקציה זו על ה-%device שלך: הקש %icon ואז <strong>הוסף למסך הבית</strong>.</span>',hr_hr:"Instaliraj ovu aplikaciju na svoj %device: klikni na %icon i odaberi <strong>Dodaj u početni zaslon</strong>.",hu_hu:"Telepítse ezt a web-alkalmazást az Ön %device-jára: nyomjon a %icon-ra majd a <strong>Főképernyőhöz adás</strong> gombra.",it_it:"Installa questa applicazione sul tuo %device: premi su %icon e poi <strong>Aggiungi a Home</strong>.",ja_jp:"このウェブアプリをあなたの%deviceにインストールするには%iconをタップして<strong>ホーム画面に追加</strong>を選んでください。",ko_kr:'%device에 웹앱을 설치하려면 %icon을 터치 후 "홈화면에 추가"를 선택하세요',nb_no:"Installer denne appen på din %device: trykk på %icon og deretter <strong>Legg til på Hjem-skjerm</strong>",nl_nl:"Installeer deze webapp op uw %device: tik %icon en dan <strong>Voeg toe aan beginscherm</strong>.",pl_pl:"Aby zainstalować tę aplikacje na %device: naciśnij %icon a następnie <strong>Dodaj jako ikonę</strong>.",pt_br:"Instale este aplicativo em seu %device: aperte %icon e selecione <strong>Adicionar à Tela Inicio</strong>.",pt_pt:"Para instalar esta aplicação no seu %device, prima o %icon e depois o <strong>Adicionar ao ecrã principal</strong>.",ru_ru:"Установите это веб-приложение на ваш %device: нажмите %icon, затем <strong>Добавить в «Домой»</strong>.",sv_se:"Lägg till denna webbapplikation på din %device: tryck på %icon och därefter <strong>Lägg till på hemskärmen</strong>.",th_th:"ติดตั้งเว็บแอพฯ นี้บน %device ของคุณ: แตะ %icon และ <strong>เพิ่มที่หน้าจอโฮม</strong>",tr_tr:"Bu uygulamayı %device'a eklemek için %icon simgesine sonrasında <strong>Ana Ekrana Ekle</strong> düğmesine basın.",zh_cn:"您可以将此应用程式安装到您的 %device 上。请按 %icon 然后点选<strong>添加至主屏幕</strong>。",zh_tw:"您可以將此應用程式安裝到您的 %device 上。請按 %icon 然後點選<strong>加入主畫面螢幕</strong>。"};return b(),{show:e,close:f,reset:j}}(window),m_add_bonus=[],addd_b=0;ClassAddBonus.prototype.Show=function(a,b,c){for(this.rand=6*Math.random()<<0;addd_b==this.rand;)this.rand=6*Math.random()<<0;addd_b=this.rand,this.gift_st.gotoAndStop("bonus"+this.rand+"0_i"),this.gift_st.regX=23*devise_size,this.gift_st.regY=21*devise_size,this.gift_st.x=a,this.gift_st.y=b,this.gift_st.visible=c,this.gift.gotoAndStop("bonus"+this.rand+"0_i"),this.speed=(a-(m_add_bonus[this.rand]-29*devise_size))/14,this.gift.regX=23*devise_size,this.gift.regY=21*devise_size,this.gift.x=a,this.gift.y=b,this.gift.visible=c,this.t=0},ClassAddBonus.prototype.Hide=function(){this.gift.visible&&(this.gift_st.visible=!1,this.gift.visible=!1,game.bonus.Add(this.rand,1))},ClassAddBonus.prototype.Drw=function(){this.gift.y<270*devise_size?(this.gift.x-=this.speed,this.gift.y+=8*devise_size):(this.t++,this.gift.paused&&this.gift.visible&&(game.bonus.Add(this.rand,1),this.gift.regX=77*devise_size,this.gift.regY=77*devise_size,this.gift.gotoAndPlay("pets"),audio_supported&&s_get_reward.play())),this.t>24&&(this.t=0,this.gift.visible=!1)},ClassAllJ.prototype.Create=function(){this.moves.getImg.visible=0==game.bonus_lvl,this.job.getImg.visible=0==game.bonus_lvl,this.time_bar.getImg.visible=0!=game.bonus_lvl,this.moves.Create(),this.job.Create(),this.time_bar.Create()},ClassAllJ.prototype.Drw=function(){0!=game.bonus_lvl&&this.time_bar.Drw()},ClassAllJ.prototype.isEnd=function(){0!=game.bonus_lvl?this.time_bar.isEnd()&&(this.win=game.level_num==config.lvls.length-1?"complete":"bwin",game.grid.gr.getImg.mouseEnabled=!1):this.job.isEnd()?(this.win="clear",game.grid.gr.getImg.mouseEnabled=!1):this.moves.isEnd()&&(this.win="fail",game.grid.gr.getImg.mouseEnabled=!1)},ClassAllJ.prototype.goEnd=function(){"clear"==this.win&&(game.fly.Create(),this.job.AllEnd()),window_controller.Show(this.win)},ClassBg.prototype.Re=function(){game_area.style.backgroundColor=config.lvls[game.level_num].bonus_lvl?"#fcb1f8":"#99cd26";for(var a=0;8>a;a++)for(var b=0;4>b;b++)a>=game.grid.height||2*b+a%2>=game.grid.width||-1==game.grid.mass[a][2*b+a%2].ID?this.img_bg[a][b].visible=!1:(this.img_bg[a][b].gotoAndStop("block"+(config.lvls[game.level_num].bonus_lvl?1:0)),this.img_bg[a][b].visible=!0)},ClassBonus.prototype.Create=function(){this.bg_block[0].visible=!game.bonus_lvl,this.img_bonus[0].visible=!game.bonus_lvl,this.text_count[0].getImg.visible=!game.bonus_lvl,this.lvl_text.visible=game.bonus_lvl,this.lvl_text_num.getImg.visible=game.bonus_lvl,this.lvl_text_num.setText((game.level_num+1).toString()),this.Upd()},ClassBonus.prototype.Upd=function(){for(var a=0;6>a;a++)0==game.save.bonus[a]?(this.bg_block[a].mouseEnabled=!1,this.img_bonus[a].alpha=.5):(this.bg_block[a].mouseEnabled=!0,this.img_bonus[a].alpha=1),this.text_count[a].setText(game.save.bonus[a].toString()),this.text_count[a].getImg.regX=this.text_count[a].getImg.width},ClassBonus.prototype.Add=function(a,b){game.save.bonus[a]+=b,game.save.SaveBonus(),this.Upd()},ClassBonus.prototype.setBonus=function(a){if(this.ID==a+1)this.ID=0,this.img_bonus[a].gotoAndStop("bonus"+a+"0");else{this.ID=a+1;for(var b=0;6>b;b++)this.img_bonus[b].gotoAndStop(a==b?"bonus"+b+"1":"bonus"+b+"0")}},ClassBonus.prototype.reBonus=function(){this.ID=0;for(var a=0;6>a;a++)this.img_bonus[a].gotoAndStop("bonus"+a+"0")};var m_bonus_bar=[];ClassBonusBar.prototype.Upd=function(){this.progress!=game.score.score&&(this.progress=Math.min(this.progress+3,game.score.score),this.center.scaleX=145*devise_size*Math.min(1,this.progress/config.lvls[game.level_num].max)<<0,this.end.x=14*devise_size+this.center.scaleX,this.text_count.setText((this.progress/5<<0).toString()),this.text_count.getImg.x=((87*devise_size-this.text_count.getImg.width*this.text_count.getImg.scaleX)/2<<0)-21*devise_size,this.text.x=this.text_count.getImg.x+this.text_count.getImg.width*this.text_count.getImg.scaleX<<0)},ClassBonusBar.prototype.Show=function(){this.ef.visible=!1,this.progress=0,this.center.scaleX=0,this.end.x=11*devise_size},ClassBonusBar.prototype.isLoad=function(){return this.progress!=game.score.score},ClassBot.prototype.ifMix=function(){for(this.max.y1=0,this.max.x1=0,this.max.y2=0,this.max.x2=0,this.max.l=0;0==this.max.l;){for(var a=0;a<game.grid.length_h;a++)for(var b=0;b<game.grid.length_w;b++)game.bot.Find(a,b);0==this.max.l&&game.grid.Mix()}},ClassBot.prototype.Start=function(){game.grid.Swap(this.max.y1,this.max.x1,this.max.y2,this.max.x2)},ClassBot.prototype.Find=function(a,b){IsClampH(a)&&IsClampW(b)&&IsClampH(a+1)&&this.FindOne(a,b,a+1,b),IsClampH(a)&&IsClampW(b)&&IsClampH(a-1)&&this.FindOne(a,b,a-1,b),IsClampH(a)&&IsClampW(b)&&IsClampW(b+1)&&this.FindOne(a,b,a,b+1),IsClampH(a)&&IsClampW(b)&&IsClampW(b-1)&&this.FindOne(a,b,a,b-1)},ClassBot.prototype.FindOne=function(a,b,c,d){if(0==game.grid.elements[a][b].ID&&0==game.grid.elements[c][d].ID&&0!=game.grid.grid[a][b]&&0!=game.grid.grid[c][d]){for(var e=0;e<game.grid.length_h;e++)for(var f=0;f<game.grid.length_w;f++)this.m[e][f]=0==game.grid.elements[e][f].ID&&2!=game.grid.elements[e][f].bonusID?game.grid.elements[e][f].value:0;for(this.m[a][b]+=this.m[c][d],this.m[c][d]=this.m[a][b]-this.m[c][d],this.m[a][b]-=this.m[c][d],this.find=!1,this.max_length=0,e=0;e<game.grid.length_h;e++)for(f=0;f<game.grid.length_w-1;)f+=this.getMatchW(e,f);for(f=0;f<game.grid.length_w;f++)for(e=0;e<game.grid.length_h-1;)e+=this.getMatchH(e,f);this.find&&this.max_length>=this.max.l&&(this.max.y1=a,this.max.x1=b,this.max.y2=c,this.max.x2=d,this.max.l=this.max_length)}},ClassBot.prototype.getMatchW=function(a,b){for(var c=1,d=1;b+d<game.grid.length_w;d++){if(0==this.m[a][b]||this.m[a][b]!=this.m[a][b+d])return c>=config.NUMBER_PETS&&(this.find=!0,this.max_length+=c),c;c++}return c>=config.NUMBER_PETS&&(this.find=!0,this.max_length+=c),c},ClassBot.prototype.getMatchH=function(a,b){for(var c=1,d=1;a+d<game.grid.length_h;d++){if(0==this.m[a][b]||this.m[a][b]!=this.m[a+d][b])return c>=config.NUMBER_PETS&&(this.find=!0,this.max_length+=c),c;c++}return c>=config.NUMBER_PETS&&(this.find=!0,this.max_length+=c),c},ClassCombo.prototype.Create=function(){this.getImg.visible=!1,this.time=0},ClassCombo.prototype.Set=function(a){5==a?(this.getImg.visible=!0,this.getImg.gotoAndStop("text_perfect"),this.getImg.regX=79*devise_size,this.time=30,game.grid.AddBonus("glow")):6==a?(this.getImg.visible=!0,this.getImg.gotoAndStop("text_great"),this.getImg.regX=64*devise_size,this.time=30,game.grid.AddBonus("glow")):a>=7&&(this.getImg.visible=!0,this.getImg.gotoAndStop("text_excellent"),this.getImg.regX=104*devise_size,this.time=30,game.grid.AddBonus("glow"))},ClassCombo.prototype.Drw=function(){this.time>0&&(this.time--,0==this.time&&(this.getImg.visible=!1))},ClassEl.prototype.set=function(a,b){this.ID=a,this.val=b,this.bonusID=0,this.multi=1},ClassEl.prototype.setB=function(a){this.bonusID=a},ClassEl.prototype.addMulti=function(){this.multi=2},ClassFlyPets.prototype.Drw=function(){for(var a=0;a<this.img.length;a++)this.img[a].x+=this.img[a].speedX,this.img[a].y+=this.img[a].speedY,this.img[a].y<game.all_job.job.getImg.y+4&&(game.all_job.job.AddN(this.img[a].name,this.img[a].value),this.getImg.removeChild(this.img[a]),this.img.splice(a,1))},ClassFlyPets.prototype.Create=function(){for(var a=0;a<this.img.length;a++)this.getImg.removeChild(this.img[a]),this.img.splice(a,1),a--},ClassFlyPets.prototype.StartFly=function(){for(var a=0,b=0;b<game.grid.height;b++)for(var c=0;c<game.grid.width;c++)0!=game.grid.destroy[b][c]&&(game.fly.Add(game.grid.mass[b][c].ID,game.grid.mass[b][c].val,game.grid.mass[b][c].multi,b,c,a),a+=3)},ClassFlyPets.prototype.Add=function(a,b,c,d,e,f){for(var g=0;g<game.all_job.job.job_l.length;g++)0==a?game.all_job.job.job_l[g].current<game.all_job.job.job_l[g].count&&game.all_job.job.job_l[g].value==b&&game.all_job.job.job_l[g].ID==a&&(console.log("id 0=="+a),game.all_job.job.AddLg(g,c),this.img.push(ss_data.clone()),this.img[this.img.length-1].gotoAndStop(game.color[b]),this.img[this.img.length-1].name=g,this.img[this.img.length-1].value=c,this.img[this.img.length-1].scaleX=this.img[this.img.length-1].scaleY=.6,this.img[this.img.length-1].x=game.grid.getImg.x+40*e*devise_size,this.img[this.img.length-1].y=game.grid.getImg.y+40*d*devise_size,this.img[this.img.length-1].speedX=(game.all_job.job.getImg.x-game.all_job.job.getImg.regX+51*devise_size*g-this.img[this.img.length-1].x)/(30+f),this.img[this.img.length-1].speedY=(game.all_job.job.getImg.y+2*devise_size-this.img[this.img.length-1].y)/(30+f),this.getImg.addChild(this.img[this.img.length-1])):(3==a||4==a)&&game.all_job.job.job_l[g].current<game.all_job.job.job_l[g].count&&game.all_job.job.job_l[g].ID==a&&(console.log("id 3=="+a),game.all_job.job.AddLg(g,c),this.img.push(ss_data.clone()),this.img[this.img.length-1].gotoAndStop(3==game.all_job.job.job_l[g].ID?"pumpkin2":"watermelon2"),this.img[this.img.length-1].name=g,this.img[this.img.length-1].value=c,this.img[this.img.length-1].scaleX=this.img[this.img.length-1].scaleY=.6,this.img[this.img.length-1].x=game.grid.getImg.x+40*e*devise_size,this.img[this.img.length-1].y=game.grid.getImg.y+40*d*devise_size,this.img[this.img.length-1].speedX=(game.all_job.job.getImg.x-game.all_job.job.getImg.regX+51*devise_size*g-this.img[this.img.length-1].x)/(30+f),this.img[this.img.length-1].speedY=(game.all_job.job.getImg.y+2*devise_size-this.img[this.img.length-1].y)/(30+f),this.getImg.addChild(this.img[this.img.length-1]))},ClassFlys.prototype.Re=function(){for(var a=0;32>a;a++)this.fly[a].getImg.visible=!1},ClassFlys.prototype.StatrFly=function(){for(var a=0;8>a;a++)for(var b=0;8>b;b++)1==game.grid.destroy[a][b]&&game.grid.mass[a][b]<game.job.job.length&&game.job.job[game.grid.mass[a][b]]>0&&(game.job.AddNotV(game.grid.mass[a][b]),this.fly[this.i].set(game.grid.getImg.x+38*b*devise_size,game.grid.getImg.y+38*a*devise_size,game.grid.mass[a][b]),this.i++,this.i>31&&(this.i=0))},ClassFlys.prototype.Drw=function(){for(var a=0;32>a;a++)this.fly[a].getImg.visible&&this.fly[a].Drw()},ClassFlyWater.prototype.set=function(a,b){this.getImg.x=a,this.getImg.y=b,this.getImg.visible=!0,this.getImg.speedX=(this.getImg.x-80*devise_size)/20,this.getImg.speedY=(this.getImg.y-400*devise_size)/20},ClassFlyWater.prototype.Drw=function(){this.getImg.visible&&(this.getImg.x-=this.getImg.speedX,this.getImg.y-=this.getImg.speedY,this.getImg.y>393*devise_size&&(game.bonus.Add(0,1),this.getImg.visible=!1))},ClassText.prototype.setText=function(a){var b,c,d=0;if(a.length==this.getImg.getNumChildren()){for(var e=0;e<this.getImg.getNumChildren();e++)b=fonts[this.font].chars.indexOf(a[e]),c=this.getImg.getChildAt(e),c.gotoAndStop(b),c.x=d,d+=fonts[this.font].kerning[b];this.getImg.width=d}else{this.getImg.removeAllChildren();for(var e=0;e<a.length;e++)b=fonts[this.font].chars.indexOf(a[e]),c=fonts[this.font].ss.clone(),c.gotoAndStop(b),c.x=d,d+=fonts[this.font].kerning[b],this.getImg.addChild(c);this.getImg.width=d}},ClassGame.prototype.CreateLvl=function(a){this.move=!0,this.bot=!1,this.level_num=a,this.bonus_lvl=0!=config.lvls[game.level_num].bonus_lvl,this.ColorMix(),this.grid.Re(),this.combo.Create(),this.bonus.Create(),this.score.Create(),this.all_job.Create()},ClassGame.prototype.ColorMix=function(){for(var a=0,b="",c=0;c<this.color.length;c++)a=this.color.length*Math.random()<<0,b=this.color[c],this.color[c]=this.color[a],this.color[a]=b};var mouse_x,mouse_y;ClassGr.prototype.setV=function(a,b){switch(game.grid.mass[a][b].ID){case-1:this.img[a][b].visible=!1,this.img_bonus[a][b].visible=!1,this.img_glow[a][b].visible=!1,this.text_multi[a][b].getImg.visible=!1;break;case 0:switch(this.img[a][b].visible=!0,this.img[a][b].gotoAndStop(game.color[game.grid.mass[a][b].val]),1==game.grid.mass[a][b].multi?this.text_multi[a][b].getImg.visible=!1:game.all_job.job.isTrue(game.grid.mass[a][b].val)?(this.text_multi[a][b].getImg.visible=!0,this.text_multi[a][b].setText("x"+game.grid.mass[a][b].multi)):this.text_multi[a][b].getImg.visible=!1,game.grid.mass[a][b].bonusID){case 0:this.img_bonus[a][b].visible=!1,this.img_glow[a][b].visible=!1;break;case 1:this.img_bonus[a][b].visible=!1,this.img_glow[a][b].visible=!0;break;case 2:this.img_glow[a][b].visible=!1,this.img_bonus[a][b].visible=!0,this.img_bonus[a][b].gotoAndStop("lock");break;case 3:this.img_glow[a][b].visible=!1,this.img_bonus[a][b].visible=!0,this.img_bonus[a][b].gotoAndStop("gift")}break;case 1:this.img[a][b].visible=!0,this.img[a][b].gotoAndStop("heart"),this.img_bonus[a][b].visible=!1,this.img_glow[a][b].visible=!1,this.text_multi[a][b].getImg.visible=!1;break;case 2:this.img[a][b].visible=!0,this.img[a][b].gotoAndStop("bonus00_i"),this.img_bonus[a][b].visible=!1,this.img_glow[a][b].visible=!1,this.text_multi[a][b].getImg.visible=!1;break;case 3:this.img[a][b].visible=!0,this.img[a][b].gotoAndStop("pumpkin"+game.grid.mass[a][b].val),this.img_bonus[a][b].visible=!1,this.img_glow[a][b].visible=!1,this.text_multi[a][b].getImg.visible=!1;break;case 4:this.img[a][b].visible=!0,this.img[a][b].gotoAndStop("watermelon"+game.grid.mass[a][b].val),this.img_bonus[a][b].visible=!1,this.img_glow[a][b].visible=!1,this.text_multi[a][b].getImg.visible=!1}},ClassGr.prototype.Re=function(){this.getImg.mouseEnabled=!0;for(var a=0;8>a;a++)for(var b=0;8>b;b++)this.img[a][b].scaleX=this.img[a][b].scaleY=1,this.img[a][b].x=40*b*devise_size,this.img[a][b].y=(40*a+20)*devise_size;this.Upd()},ClassGr.prototype.Upd=function(){for(var a=0;8>a;a++)for(var b=0;8>b;b++)this.setV(a,b)},ClassGr.prototype.setAnimDes=function(){for(var a=0;a<game.grid.height;a++)for(var b=0;b<game.grid.width;b++)0!=game.grid.destroy[a][b]&&(this.img[a][b].gotoAndStop(this.img[a][b].currentAnimation+"m"),this.img_des[a][b].visible=!0,this.img_des[a][b].visible&&this.img_des[a][b].gotoAndPlay("pets"));audio_supported&&s_pop_pets.play(),this.time_bonus[0]=26},ClassGr.prototype.setAnimBonus1=function(){this.Upd(),this.time_bonus[1]=13},ClassGr.prototype.setAnimBonus2=function(){this.time_bonus[2]=13},ClassGr.prototype.setAnimBonus3=function(){this.time_bonus[3]=13},ClassGr.prototype.setAnimBonus4=function(){for(var a=0;a<game.grid.height;a++)for(var b=0;b<game.grid.width;b++)0!=game.grid.destroy[a][b]&&(this.img[a][b].gotoAndStop(this.img[a][b].currentAnimation+"m"),this.img_des[a][b].visible=!0,this.img_des[a][b].visible&&this.img_des[a][b].gotoAndPlay("pets"));this.time_bonus[4]=26},ClassGr.prototype.setAnimBonus5=function(){for(var a=0;a<game.grid.height;a++)for(var b=0;b<game.grid.width;b++)0!=game.grid.destroy[a][b]&&(this.img[a][b].gotoAndStop(this.img[a][b].currentAnimation+"m"),this.img_des[a][b].visible=!0,this.img_des[a][b].visible&&this.img_des[a][b].gotoAndPlay("pets"));this.time_bonus[5]=26},ClassGr.prototype.setAnimBonus6=function(){this.Upd(),this.time_bonus[6]=14},ClassGr.prototype.Drw=function(){var a,b,c=!0,d=!1;if(0!=this.time_bonus[0])c=!1,this.time_bonus[0]--,0==this.time_bonus[0]&&(game.fly.StartFly(),game.grid.Restroy());else if(0!=this.time_bonus[1])this.time_bonus[1]--,0==this.time_bonus[1]&&(game.fly.StartFly(),game.grid.Restroy());else if(0!=this.time_bonus[2])this.time_bonus[2]--,0==this.time_bonus[2]&&(game.fly.StartFly(),game.grid.Restroy());else if(0!=this.time_bonus[3])this.time_bonus[3]--,0==this.time_bonus[3]&&(game.fly.StartFly(),game.grid.Restroy());
else if(0!=this.time_bonus[4])this.time_bonus[4]--,0==this.time_bonus[4]&&(game.fly.StartFly(),game.grid.Restroy());else if(0!=this.time_bonus[5])this.time_bonus[5]--,0==this.time_bonus[5]&&(game.grid.FindLine(),game.grid.isDestroy()&&this.setAnimDes());else for(a=0;a<game.grid.height;a++)for(b=0;b<game.grid.width;b++){var e=!1;this.img[a][b].x>40*b*devise_size?(c=!1,e=!0,this.img[a][b].x-=config.speed*devise_size,this.img[a][b].x<=40*b*devise_size&&(this.img[a][b].x=40*b*devise_size),this.text_multi[a][b].getImg.x=this.img[a][b].x,this.img_bonus[a][b].x=this.img[a][b].x,this.img_glow[a][b].x=this.img[a][b].x):this.img[a][b].x<40*b*devise_size&&(c=!1,e=!0,this.img[a][b].x+=config.speed*devise_size,this.img[a][b].x>=40*b*devise_size&&(this.img[a][b].x=40*b*devise_size),this.text_multi[a][b].getImg.x=this.img[a][b].x,this.img_bonus[a][b].x=this.img[a][b].x,this.img_glow[a][b].x=this.img[a][b].x),this.img[a][b].y>(40*a+20)*devise_size?(c=!1,e=!0,this.img[a][b].y-=config.speed*devise_size,this.img[a][b].y<=(40*a+20)*devise_size&&(this.img[a][b].y=(40*a+20)*devise_size),this.text_multi[a][b].getImg.y=this.img[a][b].y-20*devise_size,this.img_bonus[a][b].y=this.img[a][b].y-20*devise_size,this.img_glow[a][b].y=this.img[a][b].y-20*devise_size):this.img[a][b].y<(40*a+20)*devise_size&&(c=!1,e=!0,this.img[a][b].y+=config.speed*devise_size,this.img[a][b].y>=(40*a+20)*devise_size&&(this.img[a][b].y=(40*a+20)*devise_size),this.text_multi[a][b].getImg.y=this.img[a][b].y-20*devise_size,this.img_bonus[a][b].y=this.img[a][b].y-20*devise_size,this.img_glow[a][b].y=this.img[a][b].y-20*devise_size),e&&(this.img[a][b].scaleY=Math.max(.6,this.img[a][b].scaleY-.1))}for(a=0;a<game.grid.height;a++)for(b=0;b<game.grid.width;b++)1!=this.img[a][b].scaleY&&(this.img[a][b].scaleY=Math.min(1,this.img[a][b].scaleY+.05),d=!0);!game.move&&c&&(stage_glow.removeAllChildren(),game.grid.FindLine(),game.grid.isDestroy()?(this.setAnimDes(),-1!=save_swap[0]&&game.all_job.moves.Add(-1)):(game.grid.FindAll(),game.all_job.isEnd(),game.bot?game.grid.MouseSwap(bot[0],bot[1],bot[2],bot[3]):game.grid.backSwap())),d||this.getImg.mouseEnabled||game.all_job.goEnd(),game.move=c},ClassGr.prototype.ToCor=function(a,b,c,d){this.img[a][b].x=40*d*devise_size,this.img[a][b].y=40*c*devise_size},ClassGr.prototype.ToImg=function(a,b,c,d){this.img[a][b].x=this.img[c][d].x,this.img[a][b].y=this.img[c][d].y},ClassGrid.prototype.rand=function(){for(var a=Math.random()*config.lvls[game.level_num].pets<<0;this.old_random==a;)a=Math.random()*config.lvls[game.level_num].pets<<0;return this.old_random=a,a},ClassGrid.prototype.Re=function(){global_glow=!0,this.height=levels[game.level_num].length,this.width=levels[game.level_num][0].length,game.grid.getImg.x=(20+20*(8-this.width))*devise_size,game.grid.getImg.y=(96+18*(8-this.height))*devise_size;for(var a=0;8>a;a++)for(var b=0;8>b;b++)b>=this.width||a>=this.height||0==levels[game.level_num][a][b]?this.mass[a][b].set(-1,0):this.mass[a][b].set(0,this.rand());for(this.FindLine();this.isDestroy();){for(a=0;a<this.height;a++)for(b=0;b<this.width;b++)1==this.destroy[a][b]&&(this.mass[a][b].set(0,this.rand()),this.destroy[a][b]=0);this.FindLine()}for(a=0;a<config.lvls[game.level_num].bonus.length;a++)this.AddBonus(config.lvls[game.level_num].bonus[a]);this.bg.Re(),stage_glow.removeAllChildren(),this.gr.Re()},ClassGrid.prototype.Drw=function(){this.gr.Drw()},ClassGrid.prototype.FindLine=function(){var a,b;for(this.glow_m=0,a=0;a<this.height;a++)for(b=0;b<this.width;b++)this.glow[a][b]=0;for(a=0;a<this.height;a++)for(b=0;b<this.width-1;)b+=this.getMatchW(a,b);for(b=0;b<this.width;b++)for(a=0;a<this.height-1;)a+=this.getMatchH(a,b);for(a=0;a<this.height;a++)for(b=0;b<this.width;b++)1==this.glow[a][b]&&0==this.destroy[a][b]&&(this.destroy[a][b]=1,this.glow_m++)},ClassGrid.prototype.getMatchW=function(a,b){var c=1,d=b;1==this.mass[a][b].ID&&(c++,d=b+1);for(var e=d;e<this.width-1;e++){if(!isDes(this.mass[a][d],this.mass[a][e+1]))return c>=config.NUMBER_PETS?this.addDestroyW(a,b,c):1==this.mass[a][e].ID&&c--,c;c++}return c>=config.NUMBER_PETS?this.addDestroyW(a,b,c):1==this.mass[a][e].ID&&c--,c},ClassGrid.prototype.getMatchH=function(a,b){var c=1,d=a;1==this.mass[a][b].ID&&(c++,d=a+1);for(var e=d;e<this.height-1;e++){if(!isDes(this.mass[d][b],this.mass[e+1][b]))return c>=config.NUMBER_PETS?this.addDestroyH(a,b,c):1==this.mass[e][b].ID&&c--,c;c++}return c>=config.NUMBER_PETS?this.addDestroyH(a,b,c):1==this.mass[e][b].ID&&c--,c},ClassGrid.prototype.addDestroyW=function(a,b,c){stage_glow.addChild(ClassBorder(this.getImg.x+40*b*devise_size-20*devise_size,this.getImg.y+40*a*devise_size-20*devise_size,40*c*devise_size+0*devise_size,40*devise_size));for(var d=b;b+c>d;d++)1==this.mass[a][d].bonusID&&(this.mass[a][d].bonusID=0,this.addDestroyHG(0,d,this.height)),this.destroy[a][d]=1},ClassGrid.prototype.addDestroyH=function(a,b,c){stage_glow.addChild(ClassBorder(this.getImg.x+40*b*devise_size-20*devise_size,this.getImg.y+40*a*devise_size-20*devise_size,40*devise_size,40*c*devise_size+0*devise_size));for(var d=a;a+c>d;d++)1==this.mass[d][b].bonusID&&1==this.mass[d][b].bonusID&&(this.mass[d][b].bonusID=0,this.addDestroyWG(d,0,this.width)),this.destroy[d][b]=1},ClassGrid.prototype.addDestroyWG=function(a,b,c){global_glow=!0;for(var d="",e=-1,f=0,g=0;g<this.width;g++)d+=this.mass[a][g].ID+" ",-1!=this.mass[a][g].ID&&(-1==e&&(e=g),f=g);stage_glow.addChild(ClassBorder(this.getImg.x+40*e*devise_size-20*devise_size,this.getImg.y+40*a*devise_size-20*devise_size,40*(f+1-e)*devise_size+0*devise_size,40*devise_size));for(var h=b;b+c>h;h++)1==this.mass[a][h].bonusID&&(this.mass[a][h].bonusID=0,this.addDestroyHG(e,h,f)),-1!=this.mass[a][h].ID&&2!=this.mass[a][h].bonusID&&(this.glow[a][h]=1)},ClassGrid.prototype.addDestroyHG=function(a,b,c){global_glow=!0;for(var d="",e=-1,f=0,g=0;g<this.height;g++)d+=this.mass[a][g].ID+" ",-1!=this.mass[g][b].ID&&(-1==e&&(e=g),f=g);stage_glow.addChild(ClassBorder(this.getImg.x+40*b*devise_size-20*devise_size,this.getImg.y+40*e*devise_size-20*devise_size,40*devise_size,40*(f+1-e)*devise_size+0*devise_size));for(var h=a;a+c>h;h++)1==this.mass[h][b].bonusID&&(this.mass[h][b].bonusID=0,this.addDestroyWG(h,e,f)),-1!=this.mass[h][b].ID&&2!=this.mass[h][b].bonusID&&(this.glow[h][b]=1)},ClassGrid.prototype.addMulti=function(){for(var a=0;a<this.height;a++)for(var b=0;b<this.width;b++)0==this.destroy[a][b]&&0==this.mass[a][b].ID&&0==this.mass[a][b].bonusID&&(a-1>=0&&b-1>=0&&0!=this.destroy[a-1][b-1]||a-1>=0&&0!=this.destroy[a-1][b]||a-1>=0&&b+1<this.width&&0!=this.destroy[a-1][b+1]||b-1>=0&&0!=this.destroy[a][b-1]||b+1<this.width&&0!=this.destroy[a][b+1]||a+1<this.height&&b-1>=0&&0!=this.destroy[a+1][b-1]||a+1<this.height&&0!=this.destroy[a+1][b]||a+1<this.height&&b+1<this.width&&0!=this.destroy[a+1][b+1])&&this.mass[a][b].addMulti()};var global_glow=!0;ClassGrid.prototype.AddBonus=function(a){for(var b=Math.random()*this.width<<0,c=Math.random()*this.height<<0;0!=this.mass[c][b].ID||0!=this.mass[c][b].bonusID;)b=Math.random()*this.width<<0,c=Math.random()*this.height<<0;switch(a){case"glow":global_glow&&(this.mass[c][b].bonusID=1,global_glow=!1);break;case"key":this.mass[c][b].bonusID=2;break;case"gift":this.mass[c][b].bonusID=3;break;case"heart":this.mass[c][b].ID=1;break;case"water":this.mass[c][b].ID=2,this.mass[c][b].val=12;break;case"pumpkin":this.mass[c][b].ID=3,this.mass[c][b].val=1;break;case"watermelons":this.mass[c][b].ID=4,this.mass[c][b].val=1}};var save_combo=0;ClassGrid.prototype.SetCombo1=function(){for(var a=0,b=0;b<this.height;b++)for(var c=0;c<this.width;c++)1==this.destroy[b][c]&&a++;save_combo=a-this.glow_m},ClassGrid.prototype.SetCombo2=function(){game.combo.Set(save_combo)},ClassGrid.prototype.fGift=function(){for(var a=0;a<this.height;a++)for(var b=0;b<this.width;b++)1==this.destroy[a][b]&&3==this.mass[a][b].bonusID&&window_controller.Show("gift")},ClassGrid.prototype.newRand=function(a,b){game.all_job.job.isWater()&&Math.random()<config.water_pr?(this.mass[a][b].ID=2,this.mass[a][b].value=12,this.mass[a][b].bonusID=0,this.mass[a][b].multi=1):this.mass[a][b].set(0,this.rand())},ClassGrid.prototype.Restroy=function(){stage_glow.removeAllChildren(),this.addMulti(),this.SetCombo1(),this.fGift(),save_swap[0]=-1;for(var a,b=1,c=0;c<this.width;c++){b=1;for(var d=this.height-1;d>-1;d--)1==this.destroy[d][c]&&(a=this.getUp(d,c),0>a?(b++,this.destroy[d][c]=0,this.newRand(d,c),this.gr.ToCor(d,c,-b,c)):(this.destroy[d][c]=0,this.destroy[a][c]=1,swapE(d,c,a,c),this.gr.ToImg(d,c,a,c)))}this.SetCombo2(),this.gr.Upd()},ClassGrid.prototype.getUp=function(a,b){for(var c=a-1;c>-1&&(1==this.destroy[c][b]||-1==this.mass[c][b].ID);)c--;return c};var save_swap=[];ClassGrid.prototype.MouseSwap=function(a,b,c,d){2!=this.mass[a][b].bonusID&&3!=this.mass[a][b].ID&&4!=this.mass[a][b].ID&&2!=this.mass[c][d].bonusID&&3!=this.mass[c][d].ID&&4!=this.mass[c][d].ID&&-1!=this.mass[a][b].ID&&-1!=this.mass[c][d].ID&&(stage_glow.addChild(ClassBorder(game.grid.getImg.x+40*b*devise_size-20*devise_size,game.grid.getImg.y+40*a*devise_size-20*devise_size,40*devise_size,40*devise_size)),stage_glow.addChild(ClassBorder(game.grid.getImg.x+40*d*devise_size-20*devise_size,game.grid.getImg.y+40*c*devise_size-20*devise_size,40*devise_size,40*devise_size)),save_swap=[a,b,c,d],swapE(a,b,c,d),this.gr.ToCor(a,b,c,d),this.gr.ToCor(c,d,a,b),this.gr.Upd())},ClassGrid.prototype.isDestroy=function(){for(var a=0,b=0;b<this.height;b++)for(var c=0;c<this.width;c++)a+=this.destroy[b][c];return game.score.Add(a),0!=a},ClassGrid.prototype.backSwap=function(){-1!=save_swap[0]&&(this.MouseSwap(save_swap[0],save_swap[1],save_swap[2],save_swap[3]),game.all_job.moves.Add(-1)),save_swap[0]=-1},ClassGrid.prototype.Bonus1=function(a,b){return 3==this.mass[a][b].ID||4==this.mass[a][b].ID?(2==this.mass[a][b].val?this.destroy[a][b]=1:this.mass[a][b].val++,this.gr.setAnimBonus6(),!0):!1},ClassGrid.prototype.Bonus2=function(a,b){return-1!=this.mass[a][b].ID&&2!=this.mass[a][b].bonusID?(this.destroy[a][b]=1,this.gr.setAnimBonus2(),!0):!1},ClassGrid.prototype.Bonus3=function(a,b){return-1!=this.mass[a][b].ID&&2!=this.mass[a][b].bonusID?(b+1<this.width&&-1!=this.mass[a][b+1].ID&&2!=this.mass[a][b+1].bonusID&&(this.destroy[a][b+1]=1),this.destroy[a][b]=1,b-1>=0&&-1!=this.mass[a][b-1].ID&&2!=this.mass[a][b-1].bonusID&&(this.destroy[a][b-1]=1),b+1<this.width&&a+1<this.height&&-1!=this.mass[a+1][b+1].ID&&2!=this.mass[a+1][b+1].bonusID&&(this.destroy[a+1][b+1]=1),a+1<this.height&&-1!=this.mass[a+1][b].ID&&2!=this.mass[a+1][b].bonusID&&(this.destroy[a+1][b]=1),b-1>=0&&a+1<this.height&&-1!=this.mass[a+1][b-1].ID&&2!=this.mass[a+1][b-1].bonusID&&(this.destroy[a+1][b-1]=1),b+1<this.width&&a-1>=0&&-1!=this.mass[a-1][b+1].ID&&2!=this.mass[a-1][b+1].bonusID&&(this.destroy[a-1][b+1]=1),a-1>=0&&-1!=this.mass[a-1][b].ID&&2!=this.mass[a-1][b].bonusID&&(this.destroy[a-1][b]=1),b-1>=0&&a-1>=0&&-1!=this.mass[a-1][b-1].ID&&2!=this.mass[a-1][b-1].bonusID&&(this.destroy[a-1][b-1]=1),this.gr.setAnimBonus3(),!0):!1},ClassGrid.prototype.Bonus4=function(a){for(var b=0;b<this.width;b++)-1!=this.mass[a][b].ID&&2!=this.mass[a][b].bonusID&&(this.destroy[a][b]=1);return this.gr.setAnimBonus4(),!0},ClassGrid.prototype.Bonus5=function(a,b){if(0==this.mass[a][b].ID){for(var c=0;c<this.height;c++)for(var d=0;d<this.width;d++)0==this.mass[c][d].ID&&this.mass[c][d].val==this.mass[a][b].val&&2!=this.mass[c][d].bonusID&&(this.destroy[c][d]=1);return this.gr.setAnimBonus5(),!0}return!1},ClassGrid.prototype.Bonus6=function(a,b){return-1!=this.mass[a][b].ID&&2==this.mass[a][b].bonusID?(this.mass[a][b].setB(0),this.gr.setAnimBonus6(),!0):!1},ClassGrid.prototype.Mix=function(){for(var a=0;a<this.height;a++)for(var b=0;b<this.width;b++)0==this.mass[a][b].ID&&this.mass[a][b].set(0,this.rand());for(this.FindLine();this.isDestroy();){for(a=0;a<this.height;a++)for(b=0;b<this.width;b++)1==this.destroy[a][b]&&(this.mass[a][b].set(0,this.rand()),this.destroy[a][b]=0);this.FindLine()}this.gr.Upd()};var bot=[0,0,0,0,0],f_bot=0;ClassGrid.prototype.FindAll=function(){bot=[0,0,0,0,0],f_bot=0;for(var a=0;a<this.height;a++)for(var b=0;b<this.width;b++)this.Find(a,b);var c=!0;if(0==game.bot)for(a=0;a<this.height;a++)for(b=0;b<this.width;b++)2==this.mass[a][b].ID&&(c=!1);0==bot[4]&&c&&(this.Mix(),this.FindAll())},ClassGrid.prototype.Find=function(a,b){a+1<this.height&&isSwp(a,b)&&isSwp(a+1,b)&&this.OneFind(a,b,a+1,b),a-1>=0&&isSwp(a,b)&&isSwp(a-1,b)&&this.OneFind(a,b,a-1,b),b+1<this.width&&isSwp(a,b)&&isSwp(a,b+1)&&this.OneFind(a,b,a,b+1),b-1>=0&&isSwp(a,b)&&isSwp(a,b-1)&&this.OneFind(a,b,a,b-1)},ClassGrid.prototype.Write=function(){for(var a="",b=0;b<this.height;b++){a+="[";for(var c=0;c<this.width;c++)a+=this.mass[b][c].bonusID+", ";a+="]"}a+="\n",console.log(a)},ClassGrid.prototype.OneFind=function(a,b,c,d){f_bot=0,swapE(a,b,c,d);var e,f;for(e=0;e<this.height;e++)for(f=0;f<this.width-1;)f+=this.OneMatchW(e,f);for(f=0;f<this.width;f++)for(e=0;e<this.height-1;)e+=this.OneMatchH(e,f);f_bot>bot[4]&&(bot[0]=a,bot[1]=b,bot[2]=c,bot[3]=d,bot[4]=f_bot),swapE(a,b,c,d)},ClassGrid.prototype.OneMatchW=function(a,b){var c=1,d=b;1==this.mass[a][b].ID&&(c++,d=b+1);for(var e=d;e<this.width-1;e++){if(!isDes(this.mass[a][d],this.mass[a][e+1]))return c>=config.NUMBER_PETS?f_bot+=c:1==this.mass[a][e].ID&&c--,c;c++}return c>=config.NUMBER_PETS?f_bot+=c:1==this.mass[a][e].ID&&c--,c},ClassGrid.prototype.OneMatchH=function(a,b){var c=1,d=a;1==this.mass[a][b].ID&&(c++,d=a+1);for(var e=d;e<this.height-1;e++){if(!isDes(this.mass[d][b],this.mass[e+1][b]))return c>=config.NUMBER_PETS?f_bot+=c:1==this.mass[e][b].ID&&c--,c;c++}return c>=config.NUMBER_PETS?f_bot+=c:1==this.mass[e][b].ID&&c--,c},ClassJob.prototype.Create=function(){this.job_v=JSON.parse(JSON.stringify(config.lvls[game.level_num].job)),this.job_l=JSON.parse(JSON.stringify(config.lvls[game.level_num].job)),this.getImg.regX=-(204*devise_size-51*this.job_v.length*devise_size)/2;for(var a=0;4>a;a++)this.job_v.length<=a?(this.bg[a].visible=!1,this.mark[a].visible=!1,this.text[a].getImg.visible=!1,this.pre[a].visible=!1):(this.bg[a].visible=!0,this.mark[a].visible=!1,this.text[a].getImg.visible=!0,this.pre[a].visible=!0,this.job_v[a].current=0,this.job_l[a].current=0,this.pre[a].gotoAndStop(this.job_v[a].ID<3?game.color[this.job_v[a].value]:3==this.job_v[a].ID?"pumpkin2":"watermelon2"),this.text[a].setText("0/"+this.job_v[a].count))},ClassJob.prototype.AddLg=function(a,b){this.job_l[a].current+=b},ClassJob.prototype.Write=function(){for(var a="",b=0;b<this.job_v.length;b++)a+=this.job_v[b].current+" ";for(a+="\n",b=0;b<this.job_l.length;b++)a+=this.job_l[b].current+" ";console.log(a)},ClassJob.prototype.AddN=function(a,b){this.job_v[a].current+=b,this.Upd()},ClassJob.prototype.Upd=function(){for(var a=0,b=0;b<this.job_v.length;b++)this.job_v[b].current>=this.job_v[b].count?(a++,this.text[b].getImg.visible=!1,this.mark[b].visible=!0):(this.text[b].getImg.visible=!0,this.text[b].setText(this.job_v[b].current+"/"+this.job_v[b].count),this.mark[b].visible=!1)},ClassJob.prototype.AllEnd=function(){for(var a=0;a<this.job_v.length;a++)this.text[a].getImg.visible=!1,this.mark[a].visible=!0},ClassJob.prototype.isTrue=function(a){for(var b=0;b<this.job_l.length;b++)if(this.job_l[b].value==a&&0==this.job_l[b].ID)return!0;return!1},ClassJob.prototype.isEnd=function(){for(var a=0,b=0;b<this.job_l.length;b++)this.job_l[b].count<=this.job_l[b].current&&a++;return a==this.job_l.length},ClassJob.prototype.isWater=function(){for(var a=0;a<this.job_l.length;a++)if(0!=this.job_l[a].ID&&this.job_l[a].count>this.job_l[a].current)return!0;return!1},ClassMoves.prototype.Create=function(){this.moves=config.lvls[game.level_num].moves,this.moves_save=config.lvls[game.level_num].moves,this.Upd()},ClassMoves.prototype.Upd=function(){this.text_moves.setText(Math.max(0,this.moves)+" "),this.text_moves.getImg.x=(90*devise_size-this.text_moves.getImg.width*this.text_moves.getImg.scaleX-69*devise_size*this.text.scaleX)/2<<0,this.text.x=this.text_moves.getImg.x+this.text_moves.getImg.width*this.text_moves.getImg.scaleX},ClassMoves.prototype.Add=function(a){this.moves+=a,this.moves_save=this.moves,this.Upd(),0==this.moves&&(game.grid.level_end=!0)},ClassMoves.prototype.setSave=function(){this.moves_save=this.moves},ClassMoves.prototype.isEnd=function(){return this.moves<=0};var m_progress_bar=[];ClassProgressBar.prototype.Show=function(a,b,c){this.max=a,this.progress_w=b,this.progress=0,this.center.scaleX=0,this.end.x=13*devise_size+this.center.scaleX,c>=1&&setTimeout(function(){var a=window_controller.windows[window_controller.getIDbyName("win")].progress;a.corn.gotoAndStop("corn1"),a.ef.x=m_progress_bar[0],a.ef.y=m_progress_bar[1],a.ef.visible=!0,a.ef.gotoAndPlay("a_lock")},1e3),c>=2&&setTimeout(function(){var a=window_controller.windows[window_controller.getIDbyName("win")].progress;a.corn.gotoAndStop("corn2"),a.ef.x=m_progress_bar[2],a.ef.y=m_progress_bar[3],a.ef.visible=!0,a.ef.gotoAndPlay("a_lock")},1500),3==c&&setTimeout(function(){var a=window_controller.windows[window_controller.getIDbyName("win")].progress;a.corn.gotoAndStop("corn3"),a.ef.x=m_progress_bar[4],a.ef.y=m_progress_bar[5],a.ef.visible=!0,a.ef.gotoAndPlay("a_lock")},2e3)},ClassProgressBar.prototype.isLoad=function(){return!(this.progress_w==this.progress)},ClassProgressBar.prototype.Upd=function(){if(this.progress!=this.progress_w){if(this.progress=Math.min(this.progress+7,this.progress_w),this.progress>999){var a=this.progress.toString();this.text.setText(a.substr(0,a.length-3)+","+a.substr(a.length-3,3))}else this.text.setText(this.progress.toString());this.text.getImg.x=72*devise_size-(this.text.getImg.width*this.text.getImg.scaleX+50*devise_size)/2,this.points.x=this.text.getImg.x+this.text.getImg.width-4*devise_size,this.center.scaleX=117*devise_size*Math.min(1,this.progress/this.max)<<0,this.end.x=13*devise_size+this.center.scaleX}},ClassSave.prototype.setMap=function(a){this.map[game.level_num]=Math.max(this.map[game.level_num],a),game.level_num<config.lvls.length&&(this.map[game.level_num+1]=Math.max(this.map[game.level_num+1],0)),window.localStorage.setItem("fpets_map","["+this.map.toString()+"]")},ClassSave.prototype.SaveMap=function(){window.localStorage.setItem("fpets_map","["+this.map.toString()+"]")},ClassSave.prototype.LoadMap=function(){if(null===window.localStorage.getItem("fpets_map")){for(var a=0;a<config.lvls.length;a++)this.map.push(-1);this.map[0]=0,this.SaveMap()}else this.map=JSON.parse(window.localStorage.getItem("fpets_map"))},ClassSave.prototype.SaveBonus=function(){window.localStorage.setItem("fpets_bonus","["+this.bonus.toString()+"]")},ClassSave.prototype.LoadBonus=function(){null===window.localStorage.getItem("fpets_bonus")?this.SaveBonus():this.bonus=JSON.parse(window.localStorage.getItem("fpets_bonus"))},ClassSave.prototype.SaveTut=function(){window.localStorage.setItem("fpets_tut",tut.toString())},ClassSave.prototype.LoadTut=function(){null===window.localStorage.getItem("fpets_tut")?(this.tut=!0,this.SaveTut()):this.tut="true"==window.localStorage.getItem("fpets_tut")},ClassScore.prototype.Create=function(){this.score=0},ClassScore.prototype.Add=function(a){this.score+=5*a},ClassTimeBar.prototype.Drw=function(){this.progress!=game.score.score&&(this.progress=Math.min(this.progress+9,game.score.score),this.center.scaleX=117*devise_size*Math.min(1,this.progress/config.lvls[game.level_num].max)<<0,this.end.x=167*devise_size+this.center.scaleX,this.progress>=.6*config.lvls[game.level_num].max&&this.progress-9<.6*config.lvls[game.level_num].max&&(this.corn[0].alpha=1),this.progress>=.75*config.lvls[game.level_num].max&&this.progress-9<.75*config.lvls[game.level_num].max&&(this.corn[1].alpha=1),this.progress>=config.lvls[game.level_num].max&&this.progress-9<config.lvls[game.level_num].max&&(this.corn[2].alpha=1)),this.time--,!(this.time<=0)||game.grid.swap&&0==game.grid.anim_destroy&&game.grid.anim_lock||game.all_job.isEnd(),this.text_time.setText((Math.max(0,this.time/30)<<0).toString())},ClassTimeBar.prototype.Create=function(){this.time=30*config.lvls[game.level_num].bonus_lvl,this.progress=0,this.corn[0].alpha=.5,this.corn[1].alpha=.5,this.corn[2].alpha=.5,this.center.scaleX=0,this.end.x=167*devise_size+this.center.scaleX,this.text_time.setText(config.lvls[game.level_num].bonus_lvl.toString())},ClassTimeBar.prototype.isEnd=function(){return this.time<=0},ClassWindow.prototype.isIn=function(){return 1==this.animation_step},ClassWindow.prototype.isSt=function(){return 0==this.animation_step},ClassWindow.prototype.isOut=function(){return-1==this.animation_step},ClassWindow.prototype._Show=function(){this.getImg.visible=!0,1==this.layer&&(window_controller.modal_bg.visible=!0)},ClassWindow.prototype._Hide=function(){this.getImg.visible=!1},ClassWindow.prototype.Show=function(){},ClassWindow.prototype.Hide=function(){},ClassWindow.prototype.AShow=function(){this.animation_step=1,this.animation_pos=0,this.Show()},ClassWindow.prototype.AHide=function(){this.animation_step=-1,this.animation_pos=0,this.Hide()},ClassWindow.prototype.__defineGetter__("animation",function(){return this.animation_pos}),ClassWindow.prototype.getAnimation=function(){return this.animation_pos},ClassWindow.prototype._Drw=function(){this.ADrw(),this.Drw()},ClassWindow.prototype.ADrw=function(){0!=this.animation_step&&(this.animation_pos+=this.animation_step,1==this.animation_step?this.DrwIn():this.DrwOut(),this.animation_pos==this.animation_time_in&&(this.animation_step=0,window_controller.AUpd()),this.animation_pos==-this.animation_time_out&&(this.animation_step=0,window_controller.ShowPost(),window_controller.AUpd()))},ClassWindow.prototype.Drw=function(){},ClassWindow.prototype.DrwIn=function(){},ClassWindow.prototype.DrwOut=function(){},ClassWindowController.prototype.Show=function(a){this.windows[this.active_ID].AHide(),this.next=a;var b=this.getIDbyName(a);0!=this.windows[b].animation_time_in&&this.windows[b]._Show(),0==this.windows[this.active_ID].animation_time_out&&this.ShowPost()},ClassWindowController.prototype.ShowPost=function(){this.active_ID=this.getIDbyName(this.next),this.windows[this.active_ID].AShow(),0==this.windows[this.active_ID].animation_time_in&&this.AUpd()},ClassWindowController.prototype.AUpd=function(){for(var a=this.path.length-1;a>=0&&this.path[a]!=this.active_ID;)a--;a>=0?this.path.splice(a+1,this.path.length-a-1):this.path.push(this.active_ID),this.Upd()},ClassWindowController.prototype.Upd=function(){this.modal_bg.visible=!1;for(var a=0;a<this.windows.length;a++)this.windows[a]._Hide();var b=!0;for(a=1;a>=0;a--){for(var c=this.path.length-1;c>=0&&this.windows[this.path[c]].layer!=a;)c--;c>=0&&(b?(this.windows[this.path[c]].getImg.mouseEnabled=!0,b=!1):this.windows[this.path[c]].getImg.mouseEnabled=!1,this.windows[this.path[c]]._Show(),1==a&&(this.modal_bg.visible=!0))}},ClassWindowController.prototype.getIDbyName=function(a){for(var b=0;this.windows[b].name!=a;)b++;return b},ClassWindowController.prototype.Drw=function(){this.windows[this.active_ID]._Drw()},WindowAbout.prototype=new ClassWindow,WindowBonusLevelComplete.prototype=new ClassWindow,WindowBonusLevelComplete.prototype.Hide=function(){this.gift0.Hide(),this.gift1.Hide()},WindowBonusLevelComplete.prototype.Show=function(){this.getImg.y=2048,this.progress.Show(),config.lvls[game.level_num].pt[0]<=game.score.score/5<<0?(this.lights.visible=!0,this.bonus_text.visible=!0,this.gift0.Show(85*devise_size,164*devise_size,!0),this.gift1.Show(135*devise_size,164*devise_size,!0)):config.lvls[game.level_num].pt[1]<=game.score.score/5<<0?(this.lights.visible=!0,this.bonus_text.visible=!0,this.gift0.Show(110*devise_size,164*devise_size,!0),this.gift1.Show(0,0,!1)):(this.lights.visible=!1,this.bonus_text.visible=!1,this.gift0.Show(0,0,!1),this.gift1.Show(0,0,!1)),game.save.setMap(.75*config.lvls[game.level_num].max<=game.score.score?3:.6*config.lvls[game.level_num].max<=game.score.score?2:1)},WindowBonusLevelComplete.prototype.Drw=function(){this.isSt()&&(this.progress.isLoad()?this.progress.Upd():this.gift0.gift.visible?this.gift0.Drw():this.gift1.gift.visible&&this.gift1.Drw())},WindowBonusLevelComplete.prototype.DrwIn=function(){this.getImg.y=(-105+345*(this.animation/this.animation_time_in))*devise_size},WindowBonusLevelComplete.prototype.DrwOut=function(){this.getImg.y=(240+345*(this.animation/-this.animation_time_out))*devise_size,this.animation==-this.animation_time_out&&(this.getImg.y=2048)},WindowBonusLevel.prototype=new ClassWindow,WindowBonusLevel.prototype.Show=function(){this.getImg.y=2048,this.time=0,this.sec_t.setText(config.lvls[game.level_num].bonus_lvl.toString()),this.sec_t.getImg.x=(121*devise_size-this.sec_t.getImg.width)/2,this.sec.gotoAndStop("text_white_seconds"),this.sec.x=this.sec_t.getImg.x+this.sec_t.getImg.width+5*devise_size},WindowBonusLevel.prototype.DrwIn=function(){this.getImg.y=(-105+345*(this.animation/this.animation_time_in))*devise_size},WindowBonusLevel.prototype.DrwOut=function(){this.getImg.y=(240+345*(this.animation/-this.animation_time_out))*devise_size,this.animation==-this.animation_time_out&&(this.getImg.y=2048)},WindowGameComplete.prototype=new ClassWindow,WindowGameComplete.prototype.Show=function(){this.getImg.y=2048,audio_supported&&s_level_completed.play()},WindowGameComplete.prototype.DrwIn=function(){this.getImg.y=(-105+345*(this.animation/this.animation_time_in))*devise_size},WindowGameComplete.prototype.DrwOut=function(){this.getImg.y=(240+345*(this.animation/-this.animation_time_out))*devise_size,this.animation==-this.animation_time_out&&(this.getImg.y=2048)},WindowJob.prototype=new ClassWindow,WindowJob.prototype.Show=function(){this.getImg.y=2048;for(var a=0;4>a;a++)game.all_job.job.job_v.length<=a?(this.pre[a].visible=!1,this.text_count[a].getImg.visible=!1):(this.pre[a].visible=!0,this.text_count[a].getImg.visible=!0,this.pre[a].x=219/(game.all_job.job.job_v.length+1)*(a+1)*devise_size<<0,this.text_count[a].getImg.x=this.pre[a].x,this.text_count[a].setText(game.all_job.job.job_v[a].count.toString()),this.text_count[a].getImg.regX=this.text_count[a].getImg.width/2,this.pre[a].gotoAndStop(game.all_job.job.pre[a].currentFrame))},WindowJob.prototype.DrwIn=function(){this.getImg.y=(-105+345*(this.animation/this.animation_time_in))*devise_size},WindowJob.prototype.DrwOut=function(){this.getImg.y=(240+345*(this.animation/-this.animation_time_out))*devise_size,this.animation==-this.animation_time_out&&(this.getImg.y=2048)},WindowLevelClear.prototype=new ClassWindow,WindowLevelClear.prototype.Show=function(){this.getImg.y=2048,this.time=0},WindowLevelClear.prototype.DrwIn=function(){this.getImg.y=(-105+345*(this.animation/this.animation_time_in))*devise_size},WindowLevelClear.prototype.DrwOut=function(){this.getImg.y=(240+345*(this.animation/-this.animation_time_out))*devise_size,this.animation==-this.animation_time_out&&(this.getImg.y=2048)},WindowLevelClear.prototype.Drw=function(){this.isSt()&&(this.time++,this.time>30&&(this.time=0,window_controller.Show(game.level_num==config.lvls.length-1?"complete":"win")))},WindowLevelComplete.prototype=new ClassWindow,WindowLevelComplete.prototype.Show=function(){this.getImg.y=2048;var a=0;.6*config.lvls[game.level_num].moves>=config.lvls[game.level_num].moves-game.all_job.moves.moves_save?(game.save.setMap(3),a=3):.75*config.lvls[game.level_num].moves>=config.lvls[game.level_num].moves-game.all_job.moves.moves_save?(game.save.setMap(2),a=2):(game.save.setMap(1),a=1),audio_supported&&s_level_completed.play(),this.progress.Show(config.lvls[game.level_num].max,game.score.score,a),.5*config.lvls[game.level_num].moves>=config.lvls[game.level_num].moves-game.all_job.moves.moves_save?(this.lights.visible=!0,this.bonus_text.visible=!0,this.gift0.Show(85*devise_size,164*devise_size,!0),this.gift1.Show(135*devise_size,164*devise_size,!0),this.progress.getImg.y=67*devise_size):.75*config.lvls[game.level_num].moves>=config.lvls[game.level_num].moves-game.all_job.moves.moves_save?(this.lights.visible=!0,this.bonus_text.visible=!0,this.gift0.Show(110*devise_size,164*devise_size,!0),this.gift1.Show(0,0,!1),this.progress.getImg.y=67*devise_size):(this.lights.visible=!1,this.bonus_text.visible=!1,this.gift0.Show(0,0,!1),this.gift1.Show(0,0,!1),this.progress.getImg.y=100*devise_size),this.text_num_lvl.setText((game.level_num+1).toString()),this.text_num_lvl.getImg.regX=this.text_num_lvl.getImg.width/2<<0},WindowLevelComplete.prototype.Hide=function(){this.gift0.Hide(),this.gift1.Hide()},WindowLevelComplete.prototype.Drw=function(){this.isSt()&&(this.progress.isLoad()?this.progress.Upd():this.gift0.gift.visible?this.gift0.Drw():this.gift1.gift.visible&&this.gift1.Drw())},WindowLevelComplete.prototype.DrwIn=function(){this.getImg.y=(-105+345*(this.animation/this.animation_time_in))*devise_size},WindowLevelComplete.prototype.DrwOut=function(){this.getImg.y=(240+345*(this.animation/-this.animation_time_out))*devise_size,this.animation==-this.animation_time_out&&(this.getImg.y=2048)},WindowLevelFailed.prototype=new ClassWindow,WindowLevelFailed.prototype.Show=function(){this.getImg.y=2048,audio_supported&&s_game_over.play()},WindowLevelFailed.prototype.DrwIn=function(){this.getImg.y=(-105+345*(this.animation/this.animation_time_in))*devise_size},WindowLevelFailed.prototype.DrwOut=function(){this.getImg.y=(240+345*(this.animation/-this.animation_time_out))*devise_size,this.animation==-this.animation_time_out&&(this.getImg.y=2048)};var stage_glow;WindowLocation.prototype=new ClassWindow,WindowLocation.prototype.Drw=function(){game.grid.Drw(),game.combo.Drw(),game.fly.Drw(),game.fly_w.Drw(),game.all_job.Drw()},WindowMainMenu.prototype=new ClassWindow;var home_cout,fb_cout;WindowMap.prototype=new ClassWindow,WindowMap.prototype.Show=function(){home_cout===config.add_home_post?(addToHome.show(!0),home_cout=0):home_cout++,fb_cout==config.fb_post?(FB.ui({method:"feed",name:config.fb_name,link:window.location.href,picture:window.location.href.substring(0,window.location.href.lastIndexOf("/")+1)+"assets/facebook.jpg",caption:config.fb_caption,description:config.fb_description},function(){}),fb_cout=0):fb_cout++;for(var a=0;a<config.lvls.length;a++)-1==game.save.map[a]?(this.point[a].mouseEnabled=!1,this.stars[a].gotoAndStop("lock"),this.stars[a].regX=-13*devise_size,this.stars[a].regY=-7*devise_size,this.stars[a].visible=!0,this.bonus[a].visible=config.lvls[a].bonus_lvl):(this.point[a].mouseEnabled=!0,0==game.save.map[a]?(this.bonus[a].visible=config.lvls[a].bonus_lvl,this.stars[a].visible=!1):(this.bonus[a].visible=!1,this.stars[a].gotoAndStop("corn_map"+game.save.map[a]),this.stars[a].regX=26*devise_size,this.stars[a].regY=-10*devise_size,this.stars[a].visible=!0)),this.point[a].gotoAndStop(config.lvls[a].bonus_lvl?"map_level_bonus":-1==game.save.map[a]?"map_level_off":"map_level_on");for(a=0;3>a;a++)this.markers[a].alpha=this.pointsX!=-a?.5:1;this.points.x=320*this.pointsX*devise_size,0==this.pointsX&&(this.btn_b.visible=!0,this.btn_b_up.visible=!0,this.btn_left.visible=!1,this.btn_right.visible=!0),-1==this.pointsX&&(this.btn_b.visible=!1,this.btn_b_up.visible=!1,this.btn_left.visible=!0,this.btn_right.visible=!0),-2==this.pointsX&&(this.btn_b.visible=!1,this.btn_b_up.visible=!1,this.btn_left.visible=!0,this.btn_right.visible=!1)},WindowMap.prototype.Swipe=function(a){this.pointsX=Math.max(-2,Math.min(0,this.pointsX+a));for(var b=0;3>b;b++)this.markers[b].alpha=this.pointsX!=-b?.5:1;0==this.pointsX&&(this.btn_b.visible=!0,this.btn_b_up.visible=!0,this.btn_left.visible=!1,this.btn_right.visible=!0),-1==this.pointsX&&(this.btn_b.visible=!1,this.btn_b_up.visible=!1,this.btn_left.visible=!0,this.btn_right.visible=!0),-2==this.pointsX&&(this.btn_b.visible=!1,this.btn_b_up.visible=!1,this.btn_left.visible=!0,this.btn_right.visible=!1)},WindowMap.prototype.Drw=function(){320*this.pointsX*devise_size>this.points.x&&(this.points.x+=20*devise_size),320*this.pointsX*devise_size<this.points.x&&(this.points.x-=20*devise_size)},WindowPause.prototype=new ClassWindow,WindowPause.prototype.Show=function(){this.getImg.y=2048,audio_supported&&void 0!=music&&(this.btn_sound_up.alpha=s_use_of_bonus_award.getMute()?.5:1,this.btn_music_up.alpha=music.getMute()?.5:1)
},WindowPause.prototype.DrwIn=function(){this.getImg.y=(-105+345*(this.animation/this.animation_time_in))*devise_size},WindowPause.prototype.DrwOut=function(){this.getImg.y=(240+345*(this.animation/-this.animation_time_out))*devise_size,this.animation==-this.animation_time_out&&(this.getImg.y=2048)},WindowSetting.prototype=new ClassWindow,WindowSetting.prototype.Show=function(){audio_supported&&void 0!=music&&(this.btn_sound_up.alpha=s_use_of_bonus_award.getMute()?.5:1,this.btn_music_up.alpha=music.getMute()?.5:1)},WindowSScr.prototype=new ClassWindow,WindowSScr.prototype.Show=function(){this.time=0},WindowSScr.prototype.Drw=function(){this.time++,this.time<20?this.bg.alpha=this.time/20:this.time>40?(this.bg.alpha=1-(this.time-40)/20,this.time>60&&window_controller.Show("main_menu")):this.bg.alpha=1},WindowTarget.prototype=new ClassWindow,WindowTarget.prototype.Show=function(){this.getImg.y=2048,this.time=0},WindowTarget.prototype.DrwIn=function(){this.getImg.y=(-105+345*(this.animation/this.animation_time_in))*devise_size},WindowTarget.prototype.DrwOut=function(){this.getImg.y=(240+345*(this.animation/-this.animation_time_out))*devise_size,this.animation==-this.animation_time_out&&(this.getImg.y=2048)},WindowTarget.prototype.Drw=function(){this.isSt()&&(this.time++,this.time>30&&(this.time=0,window_controller.Show("location")))};var tut=-1;WindowTut.prototype=new ClassWindow,WindowTut.prototype.Add=function(a){this.num_tut+=a,this.num_tut<1?window_controller.Show(-2==tut?"location":-1==tut?"setting":"map"):this.num_tut>3?-2==tut?window_controller.Show("location"):-1==tut?window_controller.Show("setting"):(game.save.tut=!1,game.save.SaveTut(),game.CreateLvl(tut),window_controller.Show("location"),window_controller.Show(config.lvls[tut].bonus_lvl?"bonuslvl":"job")):(this.tut.gotoAndStop("instructions"+this.num_tut),this.tut.x=this.a[this.num_tut-1].x*devise_size,this.tut.y=this.a[this.num_tut-1].y*devise_size)},WindowTut.prototype.Show=function(){this.num_tut=1,this.tut.gotoAndStop("instructions"+this.num_tut),this.tut.x=this.a[this.num_tut-1].x*devise_size,this.tut.y=this.a[this.num_tut-1].y*devise_size},WindowGift.prototype=new ClassWindow,WindowGift.prototype.Show=function(){this.getImg.y=2048,audio_supported&&s_use_of_bonus_award.play(),this.gift.Show(110*devise_size,164*devise_size,!0),this.t=0},WindowGift.prototype.DrwIn=function(){this.getImg.y=(-105+345*(this.animation/this.animation_time_in))*devise_size},WindowGift.prototype.DrwOut=function(){this.getImg.y=(240+345*(this.animation/-this.animation_time_out))*devise_size,this.animation==-this.animation_time_out&&(this.getImg.y=2048)},WindowGift.prototype.Drw=function(){this.isSt()&&(this.t++,this.t>40&&this.gift.Drw(),this.t>80&&window_controller.Show("location"))};