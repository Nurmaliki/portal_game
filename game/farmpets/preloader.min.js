/*! tweensoft.com 2014-09-11 11:02:46 */
function ClassLoad(){this.queue=new createjs.LoadQueue(!0),this.queue.loadManifest([{id:"load",src:"assets/load"+devise_size+".jpg"},{id:"load_progress",src:"assets/load_progress"+devise_size+".png"}]),this.queue.addEventListener("complete",function(){load.Start()},!1)}function MusicPlay(){window_controller.windows[window_controller.getIDbyName("pause")].btn_mc.on("mousedown",function(){music.setMute(!music.getMute()),window_controller.windows[window_controller.getIDbyName("pause")].btn_music_up.alpha=music.getMute()?.5:1}),window_controller.windows[window_controller.getIDbyName("pause")].btn_s.on("mousedown",function(){s_game_over.setMute(!s_use_of_bonus_award.getMute()),s_get_reward.setMute(!s_use_of_bonus_award.getMute()),s_level_completed.setMute(!s_use_of_bonus_award.getMute()),s_pop_pets.setMute(!s_use_of_bonus_award.getMute()),s_use_of_bonus_award.setMute(!s_use_of_bonus_award.getMute()),window_controller.windows[window_controller.getIDbyName("pause")].btn_sound_up.alpha=s_use_of_bonus_award.getMute()?.5:1}),window_controller.windows[window_controller.getIDbyName("setting")].btn_sound.on("mousedown",function(){s_game_over.setMute(!s_use_of_bonus_award.getMute()),s_get_reward.setMute(!s_use_of_bonus_award.getMute()),s_level_completed.setMute(!s_use_of_bonus_award.getMute()),s_pop_pets.setMute(!s_use_of_bonus_award.getMute()),s_use_of_bonus_award.setMute(!s_use_of_bonus_award.getMute()),window_controller.windows[window_controller.getIDbyName("setting")].btn_sound_up.alpha=s_use_of_bonus_award.getMute()?.5:1}),window_controller.windows[window_controller.getIDbyName("setting")].btn_music.on("mousedown",function(){music.setMute(!music.getMute()),window_controller.windows[window_controller.getIDbyName("setting")].btn_music_up.alpha=music.getMute()?.5:1}),s_game_over=createjs.Sound.createInstance("game_over"),s_get_reward=createjs.Sound.createInstance("get_reward"),s_level_completed=createjs.Sound.createInstance("level_completed"),s_pop_pets=createjs.Sound.createInstance("pop_pets"),s_use_of_bonus_award=createjs.Sound.createInstance("use_of_bonus_award"),music=createjs.Sound.createInstance("music"),music.play({loop:-1})}function init(){document.bgColor="#000",devise_size=window.innerWidth<640||window.innerHeight<744?1:2,game_area=document.getElementById("game_area"),canvas=document.getElementById("my_canvas"),canvas.width=320*devise_size,canvas.height=480*devise_size,stage=new createjs.Stage(canvas),createjs.Touch.enable(stage),void 0!==window.orientation&&(rotate=document.createElement("img"),rotate.id="img_rotate",rotate.src="assets/rotate.jpg",rotate.unselectable="on",document.body.appendChild(rotate)),load=new ClassLoad,Resize(),window.addEventListener("resize",Resize,!1)}function StartGame(){for(var a=0,b=0;b<config.lvls.length;b++){for(config.lvls[b].job=[],config.lvls[b].bonus=[],void 0==config.lvls[b].bonus_lvl&&(config.lvls[b].bonus_lvl=0),a=0;a<config.lvls[b].job_pets.length;a++)config.lvls[b].job.push({ID:0,value:a,count:config.lvls[b].job_pets[a]});if(0!=config.lvls[b].watermelon)for(config.lvls[b].job.push({ID:4,value:0,count:config.lvls[b].watermelon}),a=0;a<config.lvls[b].watermelon;a++)config.lvls[b].bonus.push("watermelons");if(0!=config.lvls[b].pumpkin)for(config.lvls[b].job.push({ID:3,value:0,count:config.lvls[b].pumpkin}),a=0;a<config.lvls[b].pumpkin;a++)config.lvls[b].bonus.push("pumpkin");if(0!=config.lvls[b].locks)for(a=0;a<config.lvls[b].locks;a++)config.lvls[b].bonus.push("key");if(0!=config.lvls[b].gifts)for(a=0;a<config.lvls[b].gifts;a++)config.lvls[b].bonus.push("gift");if(0!=config.lvls[b].hearts)for(a=0;a<config.lvls[b].hearts;a++)config.lvls[b].bonus.push("heart")}game=new ClassGame,window_controller=new ClassWindowController,window_controller.next="s_scr",window_controller.ShowPost(),createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",Upd)}function Upd(){window_controller.Drw(),stage.update()}function Resize(){if(document.body.style.height=(2*window.innerHeight<<0)+"px",window.scrollTo(0,1),width=window.innerWidth,height=window.innerHeight,void 0!=rotate&&width>height){document.bgColor="#fff";var a=Math.min(height,Math.min(width,400));game_area.style.display="none",rotate.style.display="block",rotate.style.height=a+"px",rotate.style.width=a+"px",rotate.style.marginLeft=a/-2+"px",rotate.style.marginTop=a/-2+"px"}else{document.bgColor="#000";var b=width/height,c=640/744;b>=c?(width=height*(640/744),height=height/744*960):height=width/(640/960),void 0!=rotate&&(rotate.style.display="none"),game_area.style.display="block",game_area.style.width=(width<<0)+"px",game_area.style.height=(height<<0)+"px",game_area.style.marginLeft=(-width/2<<0)+"px",game_area.style.marginTop=(-height/2<<0)+"px"}}ClassLoad.prototype.Start=function(){this.img_load=new createjs.Bitmap(this.queue.getResult("load")),stage.addChild(this.img_load),this.img_load_progress=new createjs.Bitmap(this.queue.getResult("load_progress")),this.img_load_progress.x=66*devise_size,this.img_load_progress.y=336*devise_size,this.img_load_progress.regX=15*devise_size,this.img_load_progress.regY=15*devise_size,stage.addChild(this.img_load_progress),this.queue.removeAllEventListeners("complete"),this.queue.addEventListener("complete",function(){load.EndLoad()},!1),this.queue.addEventListener("progress",function(){load.Drw()},!1),this.queue.loadManifest([{id:"pack1",src:"assets/pack1"+devise_size+".png"},{id:"pack2",src:"assets/pack2"+devise_size+".png"},{id:"bg_main",src:"assets/bg_main"+devise_size+".jpg"},{id:"bg_menu",src:"assets/bg_menu"+devise_size+".jpg"},{id:"scr",src:"assets/scr"+devise_size+".jpg"},{id:"font0",src:"assets/fnt/font0"+devise_size+".png"},{id:"font1",src:"assets/fnt/font1"+devise_size+".png"},{id:"font2",src:"assets/fnt/font2"+devise_size+".png"},{id:"font3",src:"assets/fnt/font3"+devise_size+".png"},{id:"font4",src:"assets/fnt/font4"+devise_size+".png"},{id:"config",src:"config.js",type:createjs.LoadQueue.JAVASCRIPT},{id:"levels",src:"levels.js",type:createjs.LoadQueue.JAVASCRIPT},{id:"data",src:"data"+devise_size+".js",type:createjs.LoadQueue.JAVASCRIPT},{id:"fonts",src:"fonts"+devise_size+".js",type:createjs.LoadQueue.JAVASCRIPT},{id:"minigame",src:"game.min.js",type:createjs.LoadQueue.JAVASCRIPT}])},ClassLoad.prototype.Drw=function(){this.img_load_progress.x=(66+176*this.queue.progress<<0)*devise_size,stage.update()},ClassLoad.prototype.EndLoad=function(){stage.removeAllChildren(),CreateFonts(),StartGame()},ClassLoad.prototype.LoadAudio=function(){lock_audio&&(lock_audio=!1,createjs.Sound.registerPlugins([createjs.WebAudioPlugin]),audio_supported=createjs.WebAudioPlugin.isSupported(),audio_supported&&(createjs.Sound.alternateExtensions=["ogg"],this.queue.installPlugin(createjs.Sound),this.queue.removeAllEventListeners(),this.queue.addEventListener("complete",MusicPlay,!1),this.queue.loadManifest([{id:"game_over",src:"assets/sound/game_over.mp3",type:createjs.LoadQueue.SOUND},{id:"get_reward",src:"assets/sound/get_reward.mp3",type:createjs.LoadQueue.SOUND},{id:"level_completed",src:"assets/sound/level_completed.mp3",type:createjs.LoadQueue.SOUND},{id:"pop_pets",src:"assets/sound/pop_pets.mp3",type:createjs.LoadQueue.SOUND},{id:"use_of_bonus_award",src:"assets/sound/use_of_bonus_award.mp3",type:createjs.LoadQueue.SOUND},{id:"music",src:"assets/sound/music.mp3",type:createjs.LoadQueue.SOUND}])))};var s_game_over,s_get_reward,s_level_completed,s_pop_pets,s_use_of_bonus_award,music,lock_audio=!0,audio_supported,game_area,canvas,stage,rotate,devise_size,width,height,load,test,bg,addToHomeConfig={autostart:!1};!function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/all.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk");var job,game,window_controller;window.onpageshow=function(){},window.onpagehide=function(){};