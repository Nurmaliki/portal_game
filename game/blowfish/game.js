var CRENDER_DEBUG=!1;
function ImagesPreloader(){function a(){var e=0,f=0,g;for(g in c.loadedImages)c.loadedImages[g].complete&&e++,f++;e>=f?c.endCallback&&c.endCallback(c.loadedImages):(c.processCallback&&c.processCallback(Math.floor(e/f*100)),setTimeout(a,50))}var c=this;this.curItem=-1;this.loadedImages={};this.processCallback=this.endCallback=this.data=null;this.load=function(c,f,g){this.data=c;this.endCallback=f;this.processCallback=g;for(c=0;c<this.data.length;c++)f=this.data[c],g=new Image,g.src=f.src,this.loadedImages[f.name]=
g;a()}}
var Utils={touchScreen:"ontouchstart"in window,globalScale:1,setCookie:function(a,c){try{window.localStorage.setItem(a,c)}catch(e){var f=new Date;f.setDate(f.getDate()+3650);document.cookie=a+"="+c+"; expires="+f.toUTCString()}},getCookie:function(a){var c;try{c=window.localStorage.getItem(a)}catch(e){a+="=";c=document.cookie.indexOf(a);if(-1==c)return null;var f=document.cookie.indexOf(";",c+a.length);-1==f&&(f=document.cookie.length);c=unescape(document.cookie.substring(c+a.length,f))}return c},bindEvent:function(a,
c,e){a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent&&a.attachEvent("on"+c,e)},getObjectLeft:function(a){var c=a.offsetLeft;a.offsetParent&&(c+=Utils.getObjectLeft(a.offsetParent));return c},getObjectTop:function(a){var c=a.offsetTop;a.offsetParent&&(c+=Utils.getObjectTop(a.offsetParent));return c},parseGet:function(){var a={},c=new String(window.location),e=c.indexOf("?");if(-1!=e)for(var c=c.substr(e+1,c.length),e=c.split("&"),f=0;f<e.length;f++)c=e[f].split("="),a[c[0]]=c[1];return a},
globalPixelScale:1,getMouseCoord:function(a,c){var e=a||window.event;e.touches&&(e=e.touches[0]);if(!e)return{x:0,y:0};var f=0,g=0,h=0,k=0;c&&(f=Utils.getObjectLeft(c),g=Utils.getObjectTop(c));if(e.pageX||e.pageY)h=e.pageX,k=e.pageY;else if(e.clientX||e.clientY)h=e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)-document.documentElement.clientLeft,k=e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)-document.documentElement.clientTop;return{x:h-f,y:k-g}},
extend:function(a,c){var e=function(){};e.prototype=c.prototype;a.prototype=new e;a.prototype.constructor=a;a.superclass=c.prototype},removeFromArray:function(a,c){for(var e=[],f=0;f<a.length;f++)a[f]!=c&&e.push(a[f]);return e},showLoadProgress:function(a){var c=Utils.globalScale,e;e="Loading: "+a+"%<br><br>";e+='<div style="display: block; background: #000; width: '+a*c*2+"px; height: "+10*c+'px;">&nbsp;</div>';document.getElementById("progress").innerHTML=e},hideAddressBarLock:!1,mobileHideAddressBar:function(){Utils.hideAddressBarLock||
window.scrollTo(0,1)},mobileCheckIphone4:function(){return window.devicePixelRatio&&-1!=navigator.userAgent.indexOf("iPhone")&&2==window.devicePixelRatio?!0:!1},mobileCheckBrokenGalaxyPhones:function(){return!window.devicePixelRatio||-1==navigator.userAgent.indexOf("GT-I9300")&&-1==navigator.userAgent.indexOf("GT-I8190")&&-1==navigator.userAgent.indexOf("Android 4.")?!1:!0},checkSpilgamesEnvironment:function(){return"undefined"!=typeof ExternalAPI&&"Spilgames"==ExternalAPI.type&&ExternalAPI.check()},
mobileCorrectPixelRatio:function(){var a=document.createElement("meta");a.name="viewport";var c=1/(window.devicePixelRatio?window.devicePixelRatio:1);a.content="target-densitydpi=device-dpi, user-scalable=0"+(", initial-scale="+c+", maximum-scale="+c+", minimum-scale="+c);document.getElementsByTagName("head")[0].appendChild(a)},getMobileScreenResolution:function(a){var c=1,e=[{scale:1,width:320,height:480},{scale:1.5,width:480,height:720},{scale:2,width:640,height:960}],f={width:0,height:0},g="";
Utils.touchScreen?(f.width=Math.min(window.innerWidth,window.innerHeight),f.height=Math.max(window.innerWidth,window.innerHeight)):(f.width=window.innerWidth,f.height=window.innerHeight);for(var g="height",h=Number.MAX_VALUE,k=0;k<e.length;k++){var l=Math.abs(f[g]-e[k][g]);h>l&&(h=l,c=e[k].scale)}return Utils.getScaleScreenResolution(c,a)},getScaleScreenResolution:function(a,c){var e,f;e=Math.round(320*a);f=Math.round(480*a);if(c){var g=e;e=f;f=g}return{width:e,height:f,scale:a}},imagesRoot:"images",
initialResolution:{width:320,height:480,scale:1},createLayout:function(a,c,e,f){var g=Utils.globalScale;Utils.initialResolution=c;e=window.innerHeight;"orientation"in window?e=2048:document.body.style.overflow="hidden";g=""+('<div id="progress_container" align="center" style="width: 100%; height: '+e+'px; display: block; width: 100%; position: absolute; left: 0px; top: 0px;">')+('<table cellspacing="0" cellpadding="0"><tr><td id="progress" align="center" valign="middle" style="width: '+c.width+"px; height: "+
c.height+"px; color: #000; background: #fff; font-weight: bold; font-family: Verdana; font-size: "+12*g+'px; vertical-align: middle;"></td></tr></table>');g+="</div>";g+='<div id="screen_background_container" align="center" style="width: 100%; height: '+e+'px; position: absolute; left: 0px; top: 0px; display: none; z-index: 2;">';g+='<div id="screen_background_wrapper" style="width: '+c.width+"px; height: "+c.height+'px; overflow: hidden; position: relative;">';f||(g+='<canvas id="screen_background" width="'+
c.width+'" height="'+c.height+'"></canvas>');g+="</div>";g+="</div>";g+='<div id="screen_container" align="center" style="width: 100%; height: '+e+'px; position: absolute; left: 0px; top: 0px; display: none; z-index: 3;">';g+='<div id="screen_wrapper" width="'+c.width+'" height="'+c.height+'" style="width: '+c.width+"px; height: "+c.height+'px; overflow: hidden; position: relative;">';f||(g+='<canvas id="screen" style="position: absolute; left: 0px; top: 0px; z-index: 1000000;" width="'+c.width+'" height="'+
c.height+'">You browser does not support this application :(</canvas>');g+="</div>";g+="</div>";a.innerHTML=g;a=document.createElement("div");a.setAttribute("id","p2l_container");a.setAttribute("align","center");c=c.width;a.setAttribute("style","width: 100%; height: "+e+"px; position: absolute; left: 0px; top: 0px; display: none; z-index: 1000; background: #fff;");a.innerHTML='<img id="p2l" src="'+Utils.imagesRoot+'/p2l.jpg" style="padding-top: '+(c-240)/2+'px" />';document.body.appendChild(a)},preventEvent:function(a){a.preventDefault();
a.stopPropagation();a.cancelBubble=!0;return a.returnValue=!1},addMobileListeners:function(a,c){!c&&navigator.userAgent.match(/(iPad|iPhone|iPod).*CPU.*OS 7_\d/i)||Utils.bindEvent(document.body,"touchstart",Utils.preventEvent);Utils.bindEvent(window,"scroll",function(a){setTimeout(Utils.mobileHideAddressBar,300)});setInterval("Utils.checkOrientation("+(a?"true":"false")+")",500);setTimeout(Utils.mobileHideAddressBar,500)},storeOrient:null,noCheckOrient:!1,checkOrientation:function(a){if(Utils.touchScreen&&
document.getElementById("screen_container")){var c=Utils.parseGet();if(!Utils.noCheckOrient&&1!=c.nocheckorient){c=!1;if(window==window.parent)c=window.innerWidth>window.innerHeight;else var e=Math.max(screen.width,screen.height),c=Math.min(screen.width,screen.height),e=Math.abs(window.innerWidth-e),c=Math.abs(window.innerWidth-c),c=e<c;Utils.storeOrient!==c&&(Utils.storeOrient=c,c!=a?(Utils.dispatchEvent("lockscreen"),document.getElementById("p2l_container").style.display="block",document.getElementById("screen_background_container").style.display=
"none",document.getElementById("screen_container").style.display="none"):(Utils.dispatchEvent("unlockscreen"),document.getElementById("p2l_container").style.display="none",document.getElementById("screen_background_container").style.display="block",document.getElementById("screen_container").style.display="block"),Utils.checkSpilgamesEnvironment()&&(document.getElementById("p2l_container").style.display="none"),setTimeout(Utils.mobileHideAddressBar,1E3),setTimeout(Utils.fitLayoutToScreen,1E3))}}},
fitLayoutTimer:null,addFitLayoutListeners:function(){Utils.fitLayoutTimer=setInterval(Utils.fitLayoutToScreen,500)},removeFitLayoutListeners:function(){clearInterval(Utils.fitLayoutTimer)},fitLayoutLock:!1,fitLayoutCorrectHeight:0,fitLayoutToScreen:function(a){if(!Utils.fitLayoutLock){var c,e,f;"object"==typeof a&&a.width||(e=window.innerWidth,f=window.innerHeight,Utils.checkSpilgamesEnvironment()&&(f-=25),f+=Utils.fitLayoutCorrectHeight,a={width:e,height:f});if(c=document.getElementById("screen_wrapper")){c.initWidth||
(c.initWidth=Utils.initialResolution.width,c.initHeight=Utils.initialResolution.height);e=c.initWidth;f=c.initHeight;var g=1,g=a.width/e;a=a.height/f;g=g<a?g:a;Utils.globalPixelScale=g;e=Math.floor(e*g);f=Math.floor(f*g);if(c.lastWidth!=e||c.lastHeight!=f){c.lastWidth=e;c.lastHeight=f;Utils.resizeElement("screen",e,f);Utils.resizeElement("screen_background",e,f);if(c=document.getElementById("progress"))c.style.width=~~e+"px",c.style.height=~~f+"px";if(c=document.getElementById("screen_wrapper"))c.style.width=
~~e+"px",c.style.height=~~f+"px";if(c=document.getElementById("screen_background_wrapper"))c.style.width=~~e+"px",c.style.height=~~f+"px";if(c=document.getElementById("p2l_container"))c.style.width=~~window.innerWidth+"px",c.style.height="2048px";Utils.dispatchEvent("fitlayout");setTimeout(Utils.mobileHideAddressBar,50)}}}},resizeElement:function(a,c,e){if(a=document.getElementById(a))a.setAttribute("width",c),a.setAttribute("height",e),a.style.width=c+"px",a.style.height=e+"px"},drawIphoneLimiter:function(a,
c){c?a.drawRectangle(240,295,480,54,"#f00",!0,0.5,!0):a.drawRectangle(160,448,320,64,"#f00",!0,0.5,!0)},drawGrid:function(a,c,e){"undefined"==typeof c&&(c=!1);"undefined"==typeof e&&(e="#FFF");var f=1/Utils.globalScale/Utils.globalPixelScale,g=c?480:320;c=c?320:480;for(var h=10;h<g;h+=10){var k=0.1+(h-10)/10%10*0.1;a.drawLine(h,0,h,c,f,e,k)}for(h=10;h<c;h+=10)k=0.1+(h-10)/10%10*0.1,a.drawLine(0,h,g,h,f,e,k)},drawScaleFix:function(a,c){0.75==Utils.globalScale&&(c?a.drawRectangle(507,160,54,320,"#000",
!0,1,!0):a.drawRectangle(160,507,320,54,"#000",!0,1,!0));1.5==Utils.globalScale&&(c?a.drawRectangle(510,160,60,320,"#000",!0,1,!0):a.drawRectangle(160,510,320,60,"#000",!0,1,!0))},grad2radian:function(a){return a/(180/Math.PI)},radian2grad:function(a){return 180/Math.PI*a},eventsListeners:[],onlockscreen:null,onunlockscreen:null,onfitlayout:null,addEventListener:function(a,c){EventsManager.addEvent(Utils,a,c)},removeEventListener:function(a,c){EventsManager.removeEvent(Utils,a,c)},dispatchEvent:function(a,
c){return EventsManager.dispatchEvent(Utils,a,c)}},EventsManager={addEvent:function(a,c,e){if(a.eventsListeners){for(var f=0;f<a.eventsListeners.length;f++)if(a.eventsListeners[f].type===c&&a.eventsListeners[f].callback===e)return;a.eventsListeners.push({type:c,callback:e})}},removeEvent:function(a,c,e){if(a.eventsListeners)for(var f=0;f<a.eventsListeners.length;f++)if(a.eventsListeners[f].type===c&&a.eventsListeners[f].callback===e){a.eventsListeners=Utils.removeFromArray(a.eventsListeners,a.eventsListeners[f]);
break}},dispatchEvent:function(a,c,e){if(a.eventsListeners){var f;if("function"==typeof a["on"+c]&&(f=a["on"+c](e),!1===f))return!1;for(var g=0;g<a.eventsListeners.length;g++)if(a.eventsListeners[g].type===c&&(f=a.eventsListeners[g].callback(e),!1===f))return!1}}},ANCHOR_ALIGN_LEFT=-1,ANCHOR_ALIGN_CENTER=0,ANCHOR_ALIGN_RIGHT=1,ANCHOR_VALIGN_TOP=-1,ANCHOR_VALIGN_MIDDLE=0,ANCHOR_VALIGN_BOTTOM=1;
function Sprite(a,c,e,f,g){this.uid=0;this.stage=null;this.y=this.x=0;this.width=c;this.height=e;this.offset={left:0,top:0};this.anchor={x:0,y:0};this.scaleY=this.scaleX=1;this.zIndex=this.rotation=0;this.visible=!0;this.opacity=1;this.ignoreViewport=this["static"]=!1;this.animated=!0;this.currentFrame=0;this.totalFrames=Math.max(1,~~f);1>=this.totalFrames&&(this.animated=!1);this.currentLayer=0;this.totalLayers=Math.max(1,~~g);this.bitmap=a;this.mask=null;this.destroy=this.fillColor=!1;this.animStep=
0;this.animDelay=1;this.dragged=this.drawAlways=!1;this.dragY=this.dragX=0;this.getX=function(){return Math.round(this.x*Utils.globalScale)};this.getY=function(){return Math.round(this.y*Utils.globalScale)};this.getWidth=function(){return this.width*Math.abs(this.scaleX)*Utils.globalScale};this.getHeight=function(){return this.height*Math.abs(this.scaleY)*Utils.globalScale};this.startDrag=function(a,c){this.dragged=!0;this.dragX=a;this.dragY=c};this.stopDrag=function(){this.dragged=!1;this.dragY=
this.dragX=0};this.play=function(){this.animated=!0};this.stop=function(){this.animated=!1};this.gotoAndStop=function(a){this.currentFrame=a;this.stop()};this.gotoAndPlay=function(a){this.currentFrame=a;this.play()};this.removeTweens=function(){this.stage&&this.stage.clearObjectTweens(this)};this.addTween=function(a,c,e,f,g,p){if(this.stage){var q=this[a];if(!isNaN(q))return a=stage.createTween(this,a,q,c,e,f),a.onchange=p,a.onfinish=g,a}};this.moveTo=function(a,c,e,f,g,p){e=~~e;0>=e?this.setPosition(a,
c):((a=this.addTween("x",a,e,f,g,p))&&a.play(),(c=this.addTween("y",c,e,f,a?null:g,a?null:p))&&c.play());return this};this.moveBy=function(a,c,e,f,g,p){return this.moveTo(this.x+a,this.y+c,e,f,g,p)};this.fadeTo=function(a,c,e,f,g){c=~~c;0>=c?this.opacity=a:(a=this.addTween("opacity",a,c,e,f,g))&&a.play();return this};this.fadeBy=function(a,c,e,f,g){a=Math.max(0,Math.min(1,this.opacity+a));return this.fadeTo(a,c,e,f,g)};this.rotateTo=function(a,c,e,f,g){c=~~c;0>=c?this.rotation=a:(a=this.addTween("rotation",
a,c,e,f,g))&&a.play();return this};this.rotateBy=function(a,c,e,f,g){return this.rotateTo(this.rotation+a,c,e,f,g)};this.scaleTo=function(a,c,e,f,g){c=~~c;if(0>=c)this.scaleX=this.scaleY=a;else{var p=this.addTween("scaleX",a,c,e,f,g);p&&p.play();(a=this.addTween("scaleY",a,c,e,p?null:f,p?null:g))&&a.play()}return this};this.nextFrame=function(){this.dispatchEvent("enterframe",{target:this});this.animated&&(this.animStep++,this.animStep>=this.animDelay&&(this.currentFrame++,this.animStep=0),this.currentFrame>=
this.totalFrames&&(this.currentFrame=0))};this.eventsWhenInvisible=!1;this.onbox2dsync=this.onremove=this.onadd=this.onrender=this.onprerender=this.onenterframe=this.onmousemove=this.oncontextmenu=this.onclick=this.onmouseup=this.onmousedown=this.onmouseout=this.onmouseover=null;this.mouseOn=!1;this.getPosition=function(){return{x:this.x,y:this.y}};this.setPosition=function(a,c){if("undefined"==typeof c&&"undefined"!=typeof a.x&&"undefined"!=typeof a.y)return this.setPosition(a.x,a.y);this.x=parseFloat(a);
this.y=parseFloat(c)};this.getAnchor=function(){return this.anchor};this.setAnchor=function(a,c){if("undefined"==typeof c&&"undefined"!=typeof a.x&&"undefined"!=typeof a.y)return this.setAnchor(a.x,a.y);this.anchor.x=parseFloat(a);this.anchor.y=parseFloat(c)};this.alignAnchor=function(a,c){a=parseInt(a);isNaN(a)&&(a=ANCHOR_ALIGN_CENTER);0>a&&(a=ANCHOR_ALIGN_LEFT);0<a&&(a=ANCHOR_ALIGN_RIGHT);c=parseInt(c);isNaN(c)&&(c=ANCHOR_VALIGN_MIDDLE);0>c&&(c=ANCHOR_VALIGN_TOP);0<c&&(c=ANCHOR_VALIGN_BOTTOM);this.anchor.x=
this.width*a/2;this.anchor.y=this.height*c/2;return this.getAnchor()};this.getAbsoluteAnchor=function(){return this.getPosition()};this.getRelativeCenter=function(){var a=this.getAnchor();if(0==a.x&&0==a.y)return a;a=new Vector(-a.x*this.scaleX,-a.y*this.scaleY);a.rotate(-this.rotation);return a};this.getAbsoluteCenter=function(){var a=this.getRelativeCenter(),a={x:a.x,y:a.y};a.x+=this.x;a.y+=this.y;return a};this.getCenter=function(){return this.getAbsoluteCenter()};this.getDrawRectangle=function(){var a=
this.getCenter(),c=new Rectangle(0,0,this.width*Math.abs(this.scaleX),this.height*Math.abs(this.scaleY),this.rotation);c.move(a.x,a.y);return c};this.getAABBRectangle=function(){var a=this.getDrawRectangle(),c=a.AABB[1].x-a.AABB[0].x,e=a.AABB[1].y-a.AABB[0].y;return new Rectangle(a.AABB[0].x+c/2,a.AABB[0].y+e/2,c,e,0)};this.localToGlobal=function(a,c){var e="object"==typeof a&&"undefined"!=typeof a.x&&"undefined"!=typeof a.y?new Vector(a.x+0,a.y+0):new Vector(a,c);e.rotate(this.rotation).add(this.getPosition());
return e};this.globalToLocal=function(a,c){var e="object"==typeof a&&"undefined"!=typeof a.x&&"undefined"!=typeof a.y?new Vector(a.x+0,a.y+0):new Vector(a,c);e.subtract(this.getPosition()).rotate(-this.rotation);return e};this.allowDebugDrawing=!0;this.debugDraw=function(){if(this.visible&&this.allowDebugDrawing){var a=this.getPosition(),c=this.getCenter(),e=this.getDrawRectangle(),f=this.getAABBRectangle();stage.drawCircle(a.x,a.y,1,1,"rgba(255,0,0,0.9)");stage.drawCircle(c.x,c.y,1,1,"rgba(0,255,0,0.9)");
stage.drawLine(a.x,a.y,c.x,c.y,1,"rgba(255,255,255,0.5)");stage.drawPolygon(e.vertices,0.5,"rgba(255,0,255,0.5)",1);stage.drawLine(f.vertices[0].x,f.vertices[0].y,f.vertices[2].x,f.vertices[2].y,0.1,"rgba(255,255,255,0.5)");stage.drawLine(f.vertices[2].x,f.vertices[0].y,f.vertices[0].x,f.vertices[2].y,0.1,"rgba(255,255,255,0.5)");stage.drawPolygon(f.vertices,0.5,"rgba(255,255,255,0.5)")}};this.setZIndex=function(a){this.zIndex=~~a;this.stage&&this.stage.setZIndex(this,~~a)};this.eventsListeners=[];
this.addEventListener=function(a,c){EventsManager.addEvent(this,a,c)};this.removeEventListener=function(a,c){EventsManager.removeEvent(this,a,c)};this.dispatchEvent=function(a,c){return EventsManager.dispatchEvent(this,a,c)};this.hitTestPoint=function(a,c,e,f,g){return this.stage?this.stage.hitTestPointObject(this,a,c,e,f,g):!1}}
function Tween(a,c,e,f,g,h){var k=this;"object"!=typeof a&&(a=null);if(a){if("undefined"==typeof a[c])throw Error('Trying to tween undefined property "'+c+'"');if(isNaN(a[c]))throw Error("Tweened value can not be "+typeof a[c]);}else if(isNaN(c))throw Error("Tweened value can not be "+typeof c);"function"!=typeof h&&(h=Easing.linear.easeIn);this.obj=a;this.prop=c;this.onfinish=this.onchange=null;this.start=e;this.end=f;this.duration=~~g;this.callback=h;this.playing=!1;this._pos=-1;this.play=function(){k.playing=
!0;k.tick()};this.pause=function(){k.playing=!1};this.rewind=function(){k._pos=-1};this.forward=function(){k._pos=this.duration};this.stop=function(){k.pause();k.rewind()};this.updateValue=function(a){k.obj?k.obj[k.prop]=a:k.prop=a};this.tick=function(){if(!k.playing)return!1;k._pos++;if(0>k._pos)return!1;if(k._pos>k.duration)return k.finish();var a=k.callback,a=a(k._pos,k.start,k.end-k.start,k.duration);this.updateValue(a);k.dispatchEvent("change",{target:k,value:a});return!1};this.finish=function(){k.stop();
k.updateValue(k.end);return k.dispatchEvent("finish",{target:k,value:k.end})};this.eventsListeners=[];this.addEventListener=function(a,c){EventsManager.addEvent(this,a,c)};this.removeEventListener=function(a,c){EventsManager.removeEvent(this,a,c)};this.dispatchEvent=function(a,c){return EventsManager.dispatchEvent(this,a,c)}}
var Easing={back:{easeIn:function(a,c,e,f){return e*(a/=f)*a*(2.70158*a-1.70158)+c},easeOut:function(a,c,e,f){return e*((a=a/f-1)*a*(2.70158*a+1.70158)+1)+c},easeInOut:function(a,c,e,f){var g=1.70158;return 1>(a/=f/2)?e/2*a*a*(((g*=1.525)+1)*a-g)+c:e/2*((a-=2)*a*(((g*=1.525)+1)*a+g)+2)+c}},bounce:{easeIn:function(a,c,e,f){return e-Easing.bounce.easeOut(f-a,0,e,f)+c},easeOut:function(a,c,e,f){return(a/=f)<1/2.75?7.5625*e*a*a+c:a<2/2.75?e*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?e*(7.5625*(a-=2.25/
2.75)*a+0.9375)+c:e*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOut:function(a,c,e,f){return a<f/2?0.5*Easing.bounce.easeIn(2*a,0,e,f)+c:0.5*Easing.bounce.easeOut(2*a-f,0,e,f)+0.5*e+c}},circular:{easeIn:function(a,c,e,f){return-e*(Math.sqrt(1-(a/=f)*a)-1)+c},easeOut:function(a,c,e,f){return e*Math.sqrt(1-(a=a/f-1)*a)+c},easeInOut:function(a,c,e,f){return 1>(a/=f/2)?-e/2*(Math.sqrt(1-a*a)-1)+c:e/2*(Math.sqrt(1-(a-=2)*a)+1)+c}},cubic:{easeIn:function(a,c,e,f){return e*(a/=f)*a*a+c},easeOut:function(a,
c,e,f){return e*((a=a/f-1)*a*a+1)+c},easeInOut:function(a,c,e,f){return 1>(a/=f/2)?e/2*a*a*a+c:e/2*((a-=2)*a*a+2)+c}},exponential:{easeIn:function(a,c,e,f){return 0==a?c:e*Math.pow(2,10*(a/f-1))+c},easeOut:function(a,c,e,f){return a==f?c+e:e*(-Math.pow(2,-10*a/f)+1)+c},easeInOut:function(a,c,e,f){return 0==a?c:a==f?c+e:1>(a/=f/2)?e/2*Math.pow(2,10*(a-1))+c:e/2*(-Math.pow(2,-10*--a)+2)+c}},linear:{easeIn:function(a,c,e,f){return e*a/f+c},easeOut:function(a,c,e,f){return e*a/f+c},easeInOut:function(a,
c,e,f){return e*a/f+c}},quadratic:{easeIn:function(a,c,e,f){return e*(a/=f)*a+c},easeOut:function(a,c,e,f){return-e*(a/=f)*(a-2)+c},easeInOut:function(a,c,e,f){return 1>(a/=f/2)?e/2*a*a+c:-e/2*(--a*(a-2)-1)+c}},quartic:{easeIn:function(a,c,e,f){return e*(a/=f)*a*a*a+c},easeOut:function(a,c,e,f){return-e*((a=a/f-1)*a*a*a-1)+c},easeInOut:function(a,c,e,f){return 1>(a/=f/2)?e/2*a*a*a*a+c:-e/2*((a-=2)*a*a*a-2)+c}},quintic:{easeIn:function(a,c,e,f){return e*(a/=f)*a*a*a*a+c},easeOut:function(a,c,e,f){return e*
((a=a/f-1)*a*a*a*a+1)+c},easeInOut:function(a,c,e,f){return 1>(a/=f/2)?e/2*a*a*a*a*a+c:e/2*((a-=2)*a*a*a*a+2)+c}},sine:{easeIn:function(a,c,e,f){return-e*Math.cos(a/f*(Math.PI/2))+e+c},easeOut:function(a,c,e,f){return e*Math.sin(a/f*(Math.PI/2))+c},easeInOut:function(a,c,e,f){return-e/2*(Math.cos(Math.PI*a/f)-1)+c}}};
function StageTimer(a,c,e){this.repeat=e;this.timeout=this.initialTimeout=c;this.callback=a;this.paused=!1;this.update=function(){if(!this.paused){this.timeout--;if(0>=this.timeout)if("function"==typeof this.callback&&this.callback(),"string"==typeof this.callback&&eval(this.callback),this.repeat)this.timeout=this.initialTimeout;else return!0;return!1}};this.resume=function(){this.paused=!1};this.pause=function(){this.paused=!0}}
function Stage(a,c,e){function f(){h.lastFPS=h.fps;h.fps=0;h.started&&(h.tmFPS=setTimeout(f,1E3))}function g(){clearTimeout(h.tmMain);var a=(new Date).getTime();h.updateTweens();h.updateTimers();h.dispatchEvent("pretick");h.drawScene(h.canvas,!1);h.showFPS&&(h.setTextStyle("sans-serif",10,"bold","#fff","#000"),h.drawText("FPS: "+h.lastFPS,2,10,1,!0));h.dispatchEvent("posttick");a=(new Date).getTime()-a;a=h.delay-a-1;1>a&&(a=1);h.fps++;h.started&&(h.tmMain=setTimeout(g,a))}var h=this;this.canvas=null;
a&&(this.canvas=document.getElementById(a),this.canvas.ctx=this.canvas.getContext("2d"));this.backBuffer=null;this.screenWidth=c;this.screenHeight=e;this.viewport={x:0,y:0};this.objects=[];this.objectsCounter=0;try{this.buffer=document.createElement("canvas"),this.buffer.width=c*Utils.globalScale,this.buffer.height=e*Utils.globalScale,this.buffer.ctx=this.buffer.getContext("2d")}catch(k){this.buffer=this.canvas}this.delay=40;this.started=this.fillColor=!1;this.lastFPS=this.fps=0;this.ceilSizes=this.pixelMouseMoveEvent=
this.pixelMouseDownEvent=this.pixelMouseUpEvent=this.pixelClickEvent=this.showFPS=!1;this.tmMain;this.tmFPS;this.clearLock=!1;this.destroy=function(){clearTimeout(this.tmMain);clearTimeout(this.tmFPS);this.stop();this.clear();this.clearScreen(this.canvas)};this.clearScreen=function(a){this.clearLock||a.ctx.clearRect(0,0,this.screenWidth*Utils.globalScale*Utils.globalPixelScale,this.screenHeight*Utils.globalScale*Utils.globalPixelScale)};this.findMaxZIndex=function(){for(var a=-1,c=!1,e=0;e<this.objects.length;e++)this.objects[e].zIndex>
a&&(a=this.objects[e].zIndex,c=e);return{index:c,zIndex:a}};this.findMinZIndex=function(){for(var a=-1,c=!1,e=0;e<this.objects.length;e++)0==e&&(a=this.objects[e].zIndex,c=0),this.objects[e].zIndex<a&&(a=this.objects[e].zIndex,c=e);return{index:c,zIndex:a}};this.addChild=function(a){var c=this.findMaxZIndex(),e=a.zIndex;a.zIndex=!1!==c.index?c.zIndex+1:0;this.objectsCounter++;a.uid=this.objectsCounter;a.stage=this;this.objects.push(a);0!=e&&this.setZIndex(a,~~e);a.dispatchEvent("add",{target:a});
return a};this.removeChild=function(a){a&&(this.clearObjectTweens(a),a.dispatchEvent("remove",{target:a}),a.stage=null,this.objects=Utils.removeFromArray(this.objects,a))};this.setZIndex=function(a,c){a.zIndex=c;this.objects=this.objects.sort(function(a,c){return a.zIndex==c.zIndex?a.uid>c.uid?1:-1:a.zIndex>c.zIndex?1:-1})};this.hitTestPointObject=function(a,c,e,f,g,h){var k,v,x,z,y,A;x=a.width*Math.abs(a.scaleX);z=a.height*Math.abs(a.scaleY);k=a.x-x/2;v=a.y-z/2;y=c;A=e;a.ignoreViewport||(y+=this.viewport.x,
A+=this.viewport.y);h=!1;0==a.rotation?k<=y&&v<=A&&k+x>=y&&v+z>=A&&(h=!0):(k=a.getDrawRectangle(),k.hitTestPoint(new Vector(y,A))&&(h=!0));h&&f&&(this.buffer.width=this.screenWidth*Utils.globalScale*Utils.globalPixelScale,this.buffer.height=this.screenHeight*Utils.globalScale*Utils.globalPixelScale,this.clearScreen(this.buffer),this.renderObject(this.buffer,a),c=this.buffer.ctx.getImageData(Math.floor(c*Utils.globalScale*Utils.globalPixelScale),Math.floor(e*Utils.globalScale*Utils.globalPixelScale),
1,1),0==c.data[3]&&(h=!1));!h&&g&&a.dragged&&(h=!0);return h};this.getObjectsStackByCoord=function(a,c,e,f,g){for(var h,k=[],v=0;v<this.objects.length;v++)if(this.objects[v].visible||this.objects[v].eventsWhenInvisible)h=this.objects[v],this.hitTestPointObject(h,a,c,e,f,g)&&k.push(h);return k};this.getMaxZIndexInStack=function(a){for(var c=-1,e=0,f=0;f<a.length;f++)a[f].zIndex>c&&(c=a[f].zIndex,e=f);return e};this.sortStack=function(a,c){for(var e=!0,f,g;e;)for(e=!1,g=0;g<a.length-1;g++)f=!1,a[g].zIndex<
a[g+1].zIndex&&!c&&(f=!0),a[g].zIndex>a[g+1].zIndex&&c&&(f=!0),f&&(e=a[g],a[g]=a[g+1],a[g+1]=e,e=!0);return a};this.finalizeMouseCoords=function(a,c){if(!a)return c;var e=this.prepareMouseCoord(c.x),f=this.prepareMouseCoord(c.y);a.ignoreViewport||(e+=this.viewport.x,f+=this.viewport.y);e-=a.x;f-=a.y;return{x:e,y:f}};this.prepareMouseCoord=function(a){return a/Utils.globalScale/Utils.globalPixelScale};this.checkClick=function(a){a=Utils.getMouseCoord(a,this.inputController);var c=this.getObjectsStackByCoord(this.prepareMouseCoord(a.x),
this.prepareMouseCoord(a.y),this.pixelClickEvent,!1,!0),e;if(0<c.length)for(var c=this.sortStack(c),f=0;f<c.length&&(e=this.finalizeMouseCoords(c[f],a),e=c[f].dispatchEvent("click",{target:c[f],x:e.x,y:e.y}),!1!==e);f++);};this.checkContextMenu=function(a){a=Utils.getMouseCoord(a,this.inputController);var c=this.getObjectsStackByCoord(this.prepareMouseCoord(a.x),this.prepareMouseCoord(a.y),this.pixelClickEvent),e;if(0<c.length)for(var c=this.sortStack(c),f=0;f<c.length&&(e=this.finalizeMouseCoords(c[f],
a),e=c[f].dispatchEvent("contextmenu",{target:c[f],x:e.x,y:e.y}),!1!==e);f++);};this.checkMouseMove=function(a){a=Utils.getMouseCoord(a,this.inputController);for(f=0;f<this.objects.length;f++)if(this.objects[f].dragged){var c=a.x/Utils.globalScale/Utils.globalPixelScale,e=a.y/Utils.globalScale/Utils.globalPixelScale;this.objects[f].ignoreViewport||(c+=this.viewport.x,e+=this.viewport.y);this.objects[f].x=c-this.objects[f].dragX;this.objects[f].y=e-this.objects[f].dragY}var c=this.getObjectsStackByCoord(this.prepareMouseCoord(a.x),
this.prepareMouseCoord(a.y),this.pixelMouseMoveEvent),f,g,h,e=[];if(0<c.length){c=this.sortStack(c);for(f=0;f<c.length&&(e.push(c[f]),h=this.finalizeMouseCoords(c[f],a),c[f].mouseOn||(g=c[f].dispatchEvent("mouseover",{target:c[f],x:h.x,y:h.y})),c[f].mouseOn=!0,!1!==g);f++);for(f=0;f<c.length&&(h=this.finalizeMouseCoords(c[f],a),g=c[f].dispatchEvent("mousemove",{target:c[f],x:h.x,y:h.y}),!1!==g);f++);}for(f=0;f<this.objects.length;f++)if(this.objects[f].mouseOn){h=!1;for(g=0;g<e.length;g++)e[g]==this.objects[f]&&
(h=!0);if(!h&&(this.objects[f].mouseOn=!1,h=this.finalizeMouseCoords(c[f],a),g=this.objects[f].dispatchEvent("mouseout",{target:this.objects[f],x:h.x,y:h.y}),!1===g))break}};this.checkMouseDown=function(a){a=Utils.getMouseCoord(a,this.inputController);var c=this.getObjectsStackByCoord(this.prepareMouseCoord(a.x),this.prepareMouseCoord(a.y),this.pixelMouseDownEvent),e;if(0<c.length)for(var c=this.sortStack(c),f=0;f<c.length&&(e=this.finalizeMouseCoords(c[f],a),e=c[f].dispatchEvent("mousedown",{target:c[f],
x:e.x,y:e.y}),!1!==e);f++);};this.checkMouseUp=function(a){a=Utils.getMouseCoord(a,this.inputController);var c=this.getObjectsStackByCoord(this.prepareMouseCoord(a.x),this.prepareMouseCoord(a.y),this.pixelMouseUpEvent,!0),e;if(0<c.length)for(var c=this.sortStack(c),f=0;f<c.length&&(e=this.finalizeMouseCoords(c[f],a),e=c[f].dispatchEvent("mouseup",{target:c[f],x:e.x,y:e.y}),!1!==e);f++);};this.clear=function(){for(var a=0;a<this.objects.length;a++)this.objects[a].dispatchEvent("remove",{target:this.objects[a]});
this.objects=[];this.tweens=[];this.timers=[];this.eventsListeners=[];this.objectsCounter=0};this.hitTest=function(a,c){if(0==a.rotation&&0==c.rotation){var e=a.getX()-a.getWidth()/2,f=a.getY()-a.getHeight()/2,g=c.getX()-c.getWidth()/2,h=c.getY()-c.getHeight()/2,k=Math.max(f,h),v=Math.max(e,g),e=Math.min(e+a.getWidth(),g+c.getWidth()),f=Math.min(f+a.getHeight(),h+c.getHeight())-k;return 0<e-v&&0<f?!0:!1}v=a.getDrawRectangle();f=c.getDrawRectangle();return v.hitTestRectangle(f)};this.drawRectangle=
function(a,c,e,f,g,h,k,v){var x=this.canvas;x.ctx.globalAlpha="undefined"!=typeof k?k:1;x.ctx.fillStyle=g;x.ctx.strokeStyle=g;v||(a-=this.viewport.x,c-=this.viewport.y);a=a*Utils.globalScale*Utils.globalPixelScale;c=c*Utils.globalScale*Utils.globalPixelScale;e=e*Utils.globalScale*Utils.globalPixelScale;f=f*Utils.globalScale*Utils.globalPixelScale;h?x.ctx.fillRect(a-e/2,c-f/2,e,f):x.ctx.strokeRect(a-e/2,c-f/2,e,f)};this.drawCircle=function(a,c,e,f,g,h,k){this.drawArc(a,c,e,0,2*Math.PI,!1,f,g,h,k)};
this.drawArc=function(a,c,e,f,g,h,k,v,x,z){var y=this.canvas,A=y.ctx.lineWidth;"undefined"==typeof v&&(v="#000");y.ctx.strokeStyle=v;"undefined"==typeof k&&(k=1);y.ctx.lineWidth=k*Utils.globalScale*Utils.globalPixelScale;"undefined"==typeof x&&(x=1);y.ctx.globalAlpha=x;z||(a-=this.viewport.x,c-=this.viewport.y);a=a*Utils.globalScale*Utils.globalPixelScale;c=c*Utils.globalScale*Utils.globalPixelScale;e=e*Utils.globalScale*Utils.globalPixelScale;y.ctx.beginPath();y.ctx.arc(a,c,e,f,g,h);y.ctx.stroke();
y.ctx.lineWidth=A};this.drawPolygon=function(a,c,e,f,g){if("object"==typeof a&&a instanceof Array&&!(2>a.length)){for(var h=0;h<a.length-1;h++)this.drawLine(a[h].x,a[h].y,a[h+1].x,a[h+1].y,c,e,f,g);this.drawLine(a[h].x,a[h].y,a[0].x,a[0].y,c,e,f,g)}};this.drawLine=function(a,c,e,f,g,h,k,v){var x=this.canvas,z=x.ctx.lineWidth;x.ctx.strokeStyle=h?h:"#000";x.ctx.lineWidth=g?g*Utils.globalScale*Utils.globalPixelScale:1*Utils.globalScale*Utils.globalPixelScale;x.ctx.globalAlpha=k?k:1;v||(a-=this.viewport.x,
c-=this.viewport.y,e-=this.viewport.x,f-=this.viewport.y);a=a*Utils.globalScale*Utils.globalPixelScale;c=c*Utils.globalScale*Utils.globalPixelScale;e=e*Utils.globalScale*Utils.globalPixelScale;f=f*Utils.globalScale*Utils.globalPixelScale;x.ctx.beginPath();x.ctx.moveTo(a,c);x.ctx.lineTo(e,f);x.ctx.stroke();x.ctx.lineWidth=z};this.start=function(){this.started||(this.started=!0,f(),g())};this.forceRender=function(){this.started&&g()};this.stop=function(){this.started=!1};this.setTextStyle=function(a,
c,e,f,g,h){h=h?h:this.canvas;h.ctx.fillStyle=f;h.ctx.strokeStyle=g;f="";e&&(f+=e+" ");c&&(f+=Math.floor(c*Utils.globalScale*Utils.globalPixelScale)+"px ");a&&(f+=a);h.ctx.font=f};this.drawText=function(a,c,e,f,g,h,k){k=k?k:this.canvas;k.ctx.globalAlpha="undefined"==typeof f?1:f;g||(c-=this.viewport.x,e-=this.viewport.y);c=c*Utils.globalScale*Utils.globalPixelScale;e=e*Utils.globalScale*Utils.globalPixelScale;h&&(c-=this.getTextWidth(a)/2);k.ctx.fillText(a,c,e)};this.strokeText=function(a,c,e,f,g,
h,k){k=k?k:this.canvas;k.ctx.globalAlpha="undefined"==typeof f?1:f;g||(c-=this.viewport.x,e-=this.viewport.y);c=c*Utils.globalScale*Utils.globalPixelScale;e=e*Utils.globalScale*Utils.globalPixelScale;h&&(c-=this.getTextWidth(a)/2);k.ctx.strokeText(a,c,e)};this.getTextWidth=function(a,c){return(c?c:this.canvas).ctx.measureText(a).width};this.allowStaticDebugDrawing=this.allowDebugDrawing=!1;this.renderObject=function(a,c){if(!1!==c.dispatchEvent("prerender",{target:c,canvas:a})){var e=c.getAbsoluteCenter();
ow=c.width*Utils.globalScale;oh=c.height*Utils.globalScale;ox=e.x*Utils.globalPixelScale*Utils.globalScale-Math.floor(ow/2);oy=e.y*Utils.globalPixelScale*Utils.globalScale-Math.floor(oh/2);or=c.rotation;scX=c.scaleX*Utils.globalPixelScale;scY=c.scaleY*Utils.globalPixelScale;canvasMod=Boolean(0!=or||1!=scX||1!=scY);c.ignoreViewport||(ox-=this.viewport.x*Utils.globalPixelScale*Utils.globalScale,oy-=this.viewport.y*Utils.globalPixelScale*Utils.globalScale);canvasMod&&(a.ctx.save(),a.ctx.translate(ox+
Math.floor(ow/2),oy+Math.floor(oh/2)),a.ctx.rotate(or),a.ctx.scale(scX,scY),ox=-Math.floor(ow/2),oy=-Math.floor(oh/2));a.ctx.globalAlpha=c.opacity;this.ceilSizes&&(ow=Math.ceil(ow),oh=Math.ceil(oh));c.fillColor&&(a.ctx.fillStyle=c.fillColor,a.ctx.strokeStyle=c.fillColor,a.ctx.fillRect(ox,oy,ow,oh));if(c.bitmap){var e=c.bitmap.width,f=c.bitmap.height,g=c.currentLayer*ow+c.offset.left*Utils.globalScale,h=c.currentFrame*oh+c.offset.top*Utils.globalScale;if(g<e&&h<f){var k=ow,v=oh,x=!1;g+k>e&&(k=e-g);
h+v>f&&(v=f-h);c.mask&&(this.buffer.ctx.save(),this.buffer.ctx.clearRect(0,0,k,v),this.buffer.ctx.drawImage(c.bitmap,g,h,k,v,0,0,k,v),this.buffer.ctx.globalCompositeOperation="destination-in",this.buffer.ctx.drawImage(c.mask,0,0),h=g=0,x=!0);try{a.ctx.drawImage(x?this.buffer:c.bitmap,~~g,~~h,~~k,~~v,~~ox,~~oy,~~ow,~~oh)}catch(z){}x&&this.buffer.ctx.restore()}}canvasMod&&a.ctx.restore();this.allowDebugDrawing&&c.allowDebugDrawing&&(!this.allowStaticDebugDrawing&&c.static||c.debugDraw());c.dispatchEvent("render",
{target:c,canvas:a})}};this.drawBackAlways=Utils.mobileCheckBrokenGalaxyPhones();this.drawBackBuffer=function(a,c){!c&&this.backBuffer&&this.drawBackAlways&&a.ctx.drawImage(this.backBuffer,0,0,a.width,a.height)};this.drawScene=function(a,c){var e,f;a&&!a.ctx&&(a.ctx=a.getContext("2d"));this.fillColor?(a.ctx.fillStyle=this.fillColor,a.ctx.fillRect(0,0,this.screenWidth*Utils.globalScale*Utils.globalPixelScale,this.screenHeight*Utils.globalScale*Utils.globalPixelScale),this.drawBackBuffer(a,c)):this.clearLock||
(this.clearScreen(a),this.drawBackBuffer(a,c));for(var g=0;g<this.objects.length;g++)e=this.objects[g],f=!1,c||e["static"]||(f=!0),c&&e["static"]&&(f=!0),f&&(e.destroy?(this.removeChild(e),g--):(e.nextFrame(),e.visible&&this.renderObject(a,e)));c&&(this.backBuffer=a)};this.tweens=[];this.createTween=function(a,c,e,f,g,k){a=new Tween(a,c,e,f,g,k);h.tweens.push(a);return a};this.removeTween=function(a){var c=null;if(isNaN(a))for(var e=0;e<h.tweens.length;e++){if(h.tweens[e]===a){c=e;break}}else c=a;
h.tweens[c].pause();h.tweens.splice(c,1);return c};this.clearObjectTweens=function(a){for(var c=0;c<h.tweens.length;c++)h.tweens[c].obj===a&&(c=h.removeTween(c),c--)};this.updateTweens=function(){for(var a=0;a<h.tweens.length;a++)h.tweens[a].tick()&&(a=h.removeTween(a))};this.timers=[];this.setTimeout=function(a,c){var e=new StageTimer(a,c);this.timers.push(e);return e};this.clearTimeout=function(a){this.timers=Utils.removeFromArray(this.timers,a)};this.setInterval=function(a,c){var e=new StageTimer(a,
c,!0);this.timers.push(e);return e};this.clearInterval=function(a){this.clearTimeout(a)};this.updateTimers=function(){for(var a=0;a<this.timers.length;a++)this.timers[a].update()&&(this.clearTimeout(this.timers[a]),a--)};this.box2dSync=function(a){for(b=a.m_bodyList;b;b=b.m_next)b.sprite&&(b.sprite.rotation=b.GetRotation(),a=b.GetPosition(),b.sprite.x=a.x,b.sprite.y=a.y,b.sprite.dispatchEvent("box2dsync",{target:b.sprite}))};this.processTouchEvent=function(a,c){for(var e=0;e<a.length;e++)h[c]({clientX:a[e].clientX,
clientY:a[e].clientY})};this.inputController=null;this.addInputListeners=function(a){-1!=navigator.userAgent.toLowerCase().indexOf("firefox")&&navigator.userAgent.toLowerCase().indexOf("mobile");this.inputController=a;"ontouchstart"in a?(a.ontouchstart=function(a){h.processTouchEvent(a.touches,"checkMouseDown");h.processTouchEvent(a.touches,"checkClick")},a.ontouchmove=function(a){h.processTouchEvent(a.touches,"checkMouseMove")},a.ontouchend=function(a){h.processTouchEvent(a.changedTouches,"checkMouseUp")}):
(a.onclick=function(a){h.checkClick(a)},a.onmousemove=function(a){h.checkMouseMove(a)},a.onmousedown=function(a){0==a.button&&h.checkMouseDown(a)},a.onmouseup=function(a){0==a.button&&h.checkMouseUp(a)},a.oncontextmenu=function(a){h.checkContextMenu(a)})};this.canvas&&this.addInputListeners(this.canvas);this.onposttick=this.onpretick=null;this.eventsListeners=[];this.addEventListener=function(a,c){EventsManager.addEvent(this,a,c)};this.removeEventListener=function(a,c){EventsManager.removeEvent(this,
a,c)};this.dispatchEvent=function(a,c){return EventsManager.dispatchEvent(this,a,c)}}
function Vector(a,c){"undefined"==typeof a&&(a=0);this.x=a;"undefined"==typeof c&&(c=0);this.y=c;this.isZero=function(){return 0==this.x&&0==this.y};this.clone=function(){return new Vector(this.x,this.y)};this.add=function(a){this.x+=a.x;this.y+=a.y;return this};this.subtract=function(a){this.x-=a.x;this.y-=a.y;return this};this.mult=function(a){this.x*=a;this.y*=a;return this};this.invert=function(){this.mult(-1);return this};this.rotate=function(a,c){"undefined"==typeof c&&(c=new Vector(0,0));var g=
this.clone();g.subtract(c);g.x=this.x*Math.cos(a)+this.y*Math.sin(a);g.y=this.x*-Math.sin(a)+this.y*Math.cos(a);g.add(c);this.x=g.x;this.y=g.y;return this};this.normalize=function(a,c){"undefined"==typeof c&&(c=new Vector(0,0));this.subtract(c);this.rotate(-a);return this};this.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};this.distanceTo=function(a){p2=this.clone();p2.subtract(a);return p2.getLength()}}
var Rectangle=function(a,c,e,f,g){this.center=new Vector(a,c);this.width=e;this.height=f;this.angle=g;this.vertices=[];this.AABB=[];this.clone=function(){return new Rectangle(this.center.x,this.center.y,this.width,this.height,this.angle)};this.refreshVertices=function(){var a=this.width/2,c=this.height/2;this.vertices=[];this.vertices.push(new Vector(-a,c));this.vertices.push(new Vector(a,c));this.vertices.push(new Vector(a,-c));this.vertices.push(new Vector(-a,-c));this.AABB=[this.center.clone(),
this.center.clone()];for(a=0;4>a;a++)this.vertices[a].rotate(-this.angle,this.center),this.vertices[a].x<this.AABB[0].x&&(this.AABB[0].x=this.vertices[a].x),this.vertices[a].x>this.AABB[1].x&&(this.AABB[1].x=this.vertices[a].x),this.vertices[a].y<this.AABB[0].y&&(this.AABB[0].y=this.vertices[a].y),this.vertices[a].y>this.AABB[1].y&&(this.AABB[1].y=this.vertices[a].y)};this.move=function(a,c){this.center.add(new Vector(a,c));this.refreshVertices()};this.rotate=function(a){this.angle+=a;this.refreshVertices()};
this.hitTestPoint=function(a){a=a.clone();a.normalize(-this.angle,this.center);return Math.abs(a.x)<=this.width/2&&Math.abs(a.y)<=this.height/2};this.hitTestRectangle=function(a){var c=this.clone();a=a.clone();var e,f,g;c.move(-this.center.x,-this.center.y);a.move(-this.center.x,-this.center.y);a.center.rotate(this.angle);c.rotate(-this.angle);a.rotate(-this.angle);e=Math.max(c.AABB[0].x,c.AABB[1].x,a.AABB[0].x,a.AABB[1].x)-Math.min(c.AABB[0].x,c.AABB[1].x,a.AABB[0].x,a.AABB[1].x);f=c.AABB[1].x-c.AABB[0].x;
g=a.AABB[1].x-a.AABB[0].x;if(e>f+g)return!1;e=Math.max(c.AABB[0].y,c.AABB[1].y,a.AABB[0].y,a.AABB[1].y)-Math.min(c.AABB[0].y,c.AABB[1].y,a.AABB[0].y,a.AABB[1].y);f=c.AABB[1].y-c.AABB[0].y;g=a.AABB[1].y-a.AABB[0].y;if(e>f+g)return!1;c.move(-a.center.x,-a.center.y);a.move(-a.center.x,-a.center.y);c.center.rotate(a.angle);c.refreshVertices();c.rotate(-a.angle);a.rotate(-a.angle);e=Math.max(c.AABB[0].x,c.AABB[1].x,a.AABB[0].x,a.AABB[1].x)-Math.min(c.AABB[0].x,c.AABB[1].x,a.AABB[0].x,a.AABB[1].x);f=c.AABB[1].x-
c.AABB[0].x;g=a.AABB[1].x-a.AABB[0].x;if(e>f+g)return!1;e=Math.max(c.AABB[0].y,c.AABB[1].y,a.AABB[0].y,a.AABB[1].y)-Math.min(c.AABB[0].y,c.AABB[1].y,a.AABB[0].y,a.AABB[1].y);f=c.AABB[1].y-c.AABB[0].y;g=a.AABB[1].y-a.AABB[0].y;return e>f+g?!1:!0};this.refreshVertices()},Asset=function(a,c,e,f,g,h){this.name=a+"";this.src=c+"";this.width=e;this.height=f;this.frames=g;this.layers=h;this.object=this.bitmap=null;this.ready=this.width&&this.height;this.detectSize=function(){if(!this.bitmap)return!1;try{isNaN(this.width)&&
(this.width=this.bitmap.width?parseInt(this.bitmap.width):0),isNaN(this.height)&&(this.height=this.bitmap.height?parseInt(this.bitmap.height):0)}catch(a){CRENDER_DEBUG&&console.log(a)}return!isNaN(this.width)&&!isNaN(this.height)};this.normalize=function(a){if(!this.ready&&this.detectSize()){if(isNaN(this.frames)||1>this.frames)this.frames=1;if(isNaN(this.layers)||1>this.layers)this.layers=1;this.width=Math.ceil(this.width/this.layers/a);this.height=Math.ceil(this.height/this.frames/a);this.ready=
!0}}},AssetsLibrary=function(a,c,e){var f=this;this.path="images";this.scale=1;this.items={};this.bitmaps={};this.loaded=!1;this.onloadprogress=this.onload=null;this.spriteClass=Sprite;this.init=function(a,c){"undefined"!=typeof a&&(this.path=a+"");"undefined"!=typeof c&&(this.scale=parseFloat(c),isNaN(this.scale)&&(this.scale=1))};this.addAssets=function(a){if("undefined"!=typeof a&&"object"==typeof a)for(var c=0;c<a.length;c++){var e=a[c];e.noscale="undefined"==typeof e.noscale?!1:e.noscale;e.noscale||
(e.src="%SCALE%/"+e.src);this.addAsset(e.src,e.name,e.width,e.height,e.frames,e.layers)}};this.addAsset=function(a,c,e,f,m,n){a=a.replace("%SCALE%","%PATH%/"+this.scale);a=a.replace("%PATH%",this.path);"undefined"==typeof c&&(c=a.split("/"),c=c.pop(),c=c.split("."),c=c.shift()+"");a=new Asset(c,a,e,f,m,n);return this.items[c]=a};this.addObject=function(a){var c=this.addAsset("%SCALE%/"+a.image,a.name,a.width*this.scale,a.height*this.scale,a.frames,a.layers);c&&(c.object=a);return c};this.load=function(a,
c){this.onload=a;this.onloadprogress=c;var e=new ImagesPreloader,l=[],m;for(m in this.items)l.push(this.items[m]);e.load(l,f.onLoadHandler,f.onLoadProgressHandler)};this.onLoadProgressHandler=function(a){if("function"==typeof f.onloadprogress)f.onloadprogress(a)};this.onLoadHandler=function(a){f.loaded=!0;for(var c in a){var e=f.items[c];e.bitmap=a[c];e.normalize(f.scale)}if("function"==typeof f.onload)f.onload(f.items)};this.getAsset=function(a,c){var e=null;"undefined"!=typeof this.items[a]&&this.items[a].bitmap&&
(e="undefined"!=typeof c&&!c||this.items[a].ready?this.items[a]:null);if(!e)throw Error('Trying to get undefined asset "'+a+'"');return e};this.getSprite=function(a,c){var e=null;try{var f=this.getAsset(a,!0),e=new this.spriteClass(f.bitmap,f.width,f.height,f.frames,f.layers)}catch(m){e=new this.spriteClass(null,1,1,1,1)}if("object"==typeof c)for(var n in c)e[n]=c[n];return e};this.getBitmap=function(a){try{return this.getAsset(a,!0).bitmap}catch(c){return null}};this.init(a,c);this.addAssets(e)};
"undefined"==typeof console&&(console={log:function(){}});
function SpritesGroup(a){var c=this;this.stage=a;this.rotation=this.y=this.x=0;this.opacity=this.scaleY=this.scaleX=1;this.sprites=[];this.addChild=function(a,c){"undefined"==typeof a.gscaleX&&(a.gscaleX=1);"undefined"==typeof a.gscaleY&&(a.gscaleY=1);"undefined"==typeof a.grotation&&(a.grotation=0);"undefined"==typeof a.gopacity&&(a.gopacity=1);this.sprites.push(a);c&&this.stage.addChild(a);this.update()};this.removeChild=function(a,c){this.sprites=Utils.removeFromArray(this.sprites,a);c&&(a.destroy=
!0)};this.remove=function(){for(var a=0;a<this.sprites.length;a++)this.sprites[a].destroy=!0;this.sprites=[]};this.update=function(){for(var a,f=0;f<c.sprites.length;f++){a=c.sprites[f];var g=a.gx,h=a.gy,k=new Vector(g,h);k.rotate(-c.rotation);g+=k.x;h+=k.y;g*=c.scaleX;h*=c.scaleY;g+=c.x;h+=c.y;a.x=g;a.y=h;a.scaleX=a.gscaleX*c.scaleX;a.scaleY=a.gscaleY*c.scaleY;a.rotation=a.grotation+c.rotation;a.opacity=a.gopacity*c.opacity}};a.addEventListener("pretick",this.update)}
var TEXT_ALIGN_LEFT=0,TEXT_ALIGN_CENTER=1,TEXT_ALIGN_RIGHT=2,TEXT_VALIGN_TOP=0,TEXT_VALIGN_MIDDLE=1,TEXT_VALIGN_BOTTOM=2,TEXT_SPRITE_FONT_DEFAULT="sans-serif";
function TextSprite(a,c,e,f,g){var h=this;TextSprite.superclass.constructor.call(this,a,c,e,f,g);this.text="";this.style={font:TEXT_SPRITE_FONT_DEFAULT,size:10,color:"#fff",borderColor:"#000",borderWidth:0,bold:!1,italic:!1,lineHeight:10};this.padding={left:0,right:0,top:0,bottom:0};this.align=TEXT_ALIGN_LEFT;this.valign=TEXT_VALIGN_TOP;this.wordWrap=!0;this.showTextAlways=!1;this.prepareLine=function(a,c,e){var f=this.width-this.padding.left-this.padding.right,g=this.height-this.padding.top-this.padding.bottom;
c+=this.style.lineHeight;if(c>=g)return{ret:e,y:0,next:!1};a=a.split(" ");for(var h=g="",u=!1,r=0;r<a.length;r++)if(h+=(0<r?" ":"")+a[r],this.stage.getTextWidth(h,this.canvas)/Utils.globalScale/Utils.globalPixelScale>f){this.wordWrap&&(u=!0);break}else g=h;h=this.x-this.width/2+this.padding.left;if(this.align!=TEXT_ALIGN_LEFT){var v=this.stage.getTextWidth(g,this.canvas)/Utils.globalScale/Utils.globalPixelScale;this.align==TEXT_ALIGN_CENTER&&(h=this.x-v/2,h+=(this.padding.left-this.padding.right)/
2);this.align==TEXT_ALIGN_RIGHT&&(h=this.x+f/2-v-this.padding.right)}e.push({text:g,x:h});if(u){g="";for(f=r;f<a.length;f++)g+=(f>r?" ":"")+a[f];h=this.prepareLine(g,c,e);e=h.ret;c=h.y}return{ret:e,y:c,next:!0}};this.prepareText=function(){for(var a=[],c=0,e,f=(this.text+"").split("\n"),g=0;g<f.length&&(e=this.prepareLine(f[g],c,a),a=e.ret,c=e.y,!1!==e.next);g++);return a};this.renderText=function(a){h.canvas=a.canvas;a=h.canvas.ctx.lineWidth;var c="";h.style.bold&&(c+="bold ");h.style.italic&&(c+=
"italic ");h.stage.setTextStyle(h.style.font,h.style.size,c,h.style.color,h.style.borderColor,h.canvas);h.canvas.ctx.lineWidth=h.style.borderWidth*Utils.globalScale*Utils.globalPixelScale;var c=h.prepareText(),e=0;h.valign==TEXT_VALIGN_TOP&&(e=h.y-h.height/2+h.padding.top);h.valign==TEXT_VALIGN_MIDDLE&&(e=h.y,e+=(h.padding.top-h.padding.bottom)/2,e-=c.length*h.style.lineHeight/2);h.valign==TEXT_VALIGN_BOTTOM&&(e=h.y+h.height/2-h.padding.bottom-c.length*h.style.lineHeight);for(var e=e+h.style.lineHeight,
f,g,q,u,r,v,x=0;x<c.length;x++){g=e+x*h.style.lineHeight;f=c[x].x;q=f-h.x;u=g-h.y;v=!1;r=h.ignoreViewport;if(0!=h.rotation||1!=h.scaleX||1!=h.scaleY){v=!0;r=h.width*Utils.globalScale;var z=h.height*Utils.globalScale;f=h.getX()*Utils.globalPixelScale-Math.floor(r/2);g=h.getY()*Utils.globalPixelScale-Math.floor(z/2);h.ignoreViewport||(f-=h.stage.viewport.x*Utils.globalPixelScale*Utils.globalScale,g-=h.stage.viewport.y*Utils.globalPixelScale*Utils.globalScale);h.canvas.ctx.save();h.canvas.ctx.translate(f+
Math.floor(r/2),g+Math.floor(z/2));h.canvas.ctx.rotate(h.rotation);h.canvas.ctx.scale(h.scaleX,h.scaleY);f=q;g=u;r=!0}0<h.style.borderWidth&&h.stage.strokeText(c[x].text,f,g,h.showTextAlways?1:h.opacity,r,!1,h.canvas);h.stage.drawText(c[x].text,f,g,h.showTextAlways?1:h.opacity,r,!1,h.canvas);v&&h.canvas.ctx.restore()}h.canvas.ctx.lineWidth=a};this.addEventListener("render",this.renderText)}Utils.extend(TextSprite,Sprite);
var FontsManager={fonts:[],embed:function(a,c){for(var e=0;e<FontsManager.fonts.length;e++)if(FontsManager.fonts[e].url==c&&FontsManager.fonts[e].name==a)return;e=document.createElement("style");e.type="text/css";e.innerHTML='@font-face {font-family: "'+a+'"; src: url("'+c+'");}';document.getElementsByTagName("head")[0].appendChild(e)}};
function SimpleText(a,c,e){this.ALIGN_LEFT=0;this.ALIGN_RIGHT=1;this.ALIGN_CENTER=2;this.font=a;this.y=this.x=0;this.width=c;this.height=e;this.align=this.ALIGN_LEFT;this.charSpacing=this.rotation=0;this.scale=1;this.static=!1;this.charMap="0123456789".split("");this.charWidth=[];this.sprites=[];this.text="";this.manageSprites=function(a){var c,e=a.length,k=this.sprites.length;if(k<e)for(a=0;a<e-k;a++)c=new Sprite(this.font,this.width,this.height,this.charMap.length),this.sprites.push(c),stage.addChild(c);
if(k>e){for(a=0;a<k-e;a++)stage.removeChild(this.sprites[a]);this.sprites.splice(0,k-e)}};this.getCharIx=function(a){for(var c=0;c<this.charMap.length;c++)if(this.charMap[c]==a)return c;return-1};this.getCharWidth=function(a){a=this.getCharIx(a);return 0<=a?this.charWidth[a]?this.charWidth[a]:this.width:this.width};this.getWidth=function(){for(var a=0,c=0;c<this.text.length;c++)a+=this.getCharWidth(this.text.substr(c,1))+this.charSpacing;return a};this.write=function(a){var c,e,k,l;this.text=a+="";
this.manageSprites(a);c=this.x;this.align==this.ALIGN_CENTER&&(c=this.x-this.getWidth()/2*this.scale+this.getCharWidth(this.text.substr(0,1))/2);this.align==this.ALIGN_RIGHT&&(c=this.x-this.getWidth()*this.scale);k=new Vector(c-this.x,0);k.rotate(-this.rotation);c=k.x+this.x;e=k.y+this.y;k=new Vector(0,0);for(var m=0;m<a.length;m++)if(this.sprites[m].visible=!0,l=this.charMap.indexOf(a.substr(m,1)),0>l)this.sprites[m].visible=!1;else{var n=this.getCharWidth(this.text.substr(m,1));this.sprites[m].scaleX=
this.sprites[m].scaleY=this.scale;this.sprites[m].gotoAndStop(l);l=k.clone();l.x*=this.scale;l.rotate(-this.rotation);this.sprites[m].x=l.x+(","==this.text.substr(m,1)?c-n/2:c);this.sprites[m].y=l.y+e;this.sprites[m].rotation=this.rotation;this.sprites[m].static=this.static;k.x+=n+this.charSpacing}};this.refresh=function(){this.write(this.text)};this.addToGroup=function(a){for(var c=0;c<this.sprites.length;c++)this.sprites[c].gx=this.sprites[c].x/2,this.sprites[c].gy=this.sprites[c].y,a.addChild(this.sprites[c],
!1)}}
function AudioPlayer(){var a=this;this.disabled=!1;this.basePath="";this.mp3Support=!0;this.delayPlay=!1;this.audioWrapper=null;this.busy=this.locked=!1;this.startPlayTime=0;this.onend=null;this.createNewAudio=function(){if(AudioMixer.isWebAudioSupport()){var a=AudioMixer.waContext.createBufferSource();a.connect(AudioMixer.waContext.destination);return a}return document.createElement("audio")};this.init=function(a){this.basePath=a?a:"";this.delayPlay="ontouchstart"in window;this.audioWrapper=this.createNewAudio();
a=document.createElement("audio");a.canPlayType?this.mp3Support=""!=a.canPlayType("audio/mpeg"):this.disabled=!0;return!this.disabled};this.play=function(a,e){if(this.disabled)return!1;var f=this.basePath+"/"+a+(this.mp3Support?".mp3":".ogg");this.stop();this.audioWrapper=this.createNewAudio();this.audioWrapper.doLoop=e?!0:!1;if(AudioMixer.isWebAudioSupport()){var g=this;this.loadSound(f,function(a){g.audioWrapper.buffer=a;g.audioWrapper.noteOn(0);g.startPlayTime=(new Date).getTime();g.audioWrapper.loop=
e;g.waCheckInterval=setInterval(function(){g.audioWrapper?g.audioWrapper.playbackState==g.audioWrapper.FINISHED_STATE&&g.controlPlay():clearInterval(g.waCheckInterval)},100)})}else this.audioWrapper.src=f,this.audioWrapper.type=this.mp3Support?"audio/mpeg":"audio/ogg",this.audioWrapper.loop=!1,this.audioWrapper.preload="auto",this.audioWrapper.load(),this.delayPlay?this.audioWrapper.addEventListener("canplay",this.readyToPlay):this.audioWrapper.play(),this.audioWrapper.addEventListener("ended",this.controlPlay,
!1);this.busy=!0;this.startPlayTime=(new Date).getTime()};this.loadSound=function(a,e){if(AudioMixer.buffer[a])e&&e(AudioMixer.buffer[a]);else{var f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType="arraybuffer";f.onload=function(){AudioMixer.waContext.decodeAudioData(this.response,function(f){AudioMixer.buffer[a]=f;e&&e(f)})};f.send()}};this.readyToPlay=function(a){a.currentTarget.play()};this.stop=function(){this.busy=!1;try{AudioMixer.isWebAudioSupport()?this.audioWrapper.noteOff(0):(this.audioWrapper.removeEventListener("canplay",
this.readyToPlay),this.audioWrapper.pause(),this.audioWrapper.currentTime=0),this.audioWrapper=null}catch(a){}};this.pause=function(){AudioMixer.isWebAudioSupport()?a.audioWrapper&&a.audioWrapper.disconnect():this.audioWrapper.pause()};this.resume=function(){AudioMixer.isWebAudioSupport()?a.audioWrapper&&a.audioWrapper.connect(AudioMixer.waContext.destination):this.audioWrapper.play()};this.controlPlay=function(){if(a.audioWrapper.doLoop)AudioMixer.isWebAudioSupport()||(a.audioWrapper.pause(),a.audioWrapper.currentTime=
0,a.audioWrapper.play());else{a.busy=!1;if("function"==typeof a.onend)a.onend();this.waCheckInterval&&clearInterval(this.waCheckInterval)}};this.getPosition=function(){if(AudioMixer.isWebAudioSupport()){if(!this.startPlayTime)return 0;var a=this.getDuration();if(!a)return 0;var e=((new Date).getTime()-this.startPlayTime)/1E3;return e<=a?e:this.audioWrapper.doLoop?e-Math.floor(e/a)*a:a}return this.audioWrapper.currentTime?this.audioWrapper.currentTime:0};this.getDuration=function(){return AudioMixer.isWebAudioSupport()?
this.audioWrapper.buffer?this.audioWrapper.buffer.duration:0:this.audioWrapper.duration?this.audioWrapper.duration:0}}
function AudioMixer(a,c){this.singleChannelMode=!1;this.channels=[];this.init=function(a,c){if(AudioMixer.isWebAudioSupport()){AudioMixer.waContext=new webkitAudioContext;var g=AudioMixer.waContext.createBuffer(1,1,22050);sound=AudioMixer.waContext.createBufferSource();sound.buffer=g;sound.connect(AudioMixer.waContext.destination);sound.noteOn(0)}AudioMixer.isWebAudioSupport()||-1==navigator.userAgent.toLowerCase().indexOf("mac")||(this.singleChannelMode=!0,c=1);this.path=a;this.channels=[];for(g=
0;g<c;g++)this.channels[g]=new AudioPlayer,this.channels[g].init(a);var h,k;"undefined"!==typeof document.hidden?(h="hidden",k="visibilitychange"):"undefined"!==typeof document.mozHidden?(h="mozHidden",k="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(h="msHidden",k="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(h="webkitHidden",k="webkitvisibilitychange");var l=this;document.addEventListener(k,function(){if(document[h])for(var a=0;a<l.channels.length;a++)l.channels[a].pause();
else for(a=0;a<l.channels.length;a++)l.channels[a].resume()},!1)};this.play=function(a,c,g,h){var k=-1,k="number"==typeof h?h:this.getFreeChannel(g);0<=k&&k<this.channels.length&&(this.channels[k].stop(),this.channels[k].play(a,c));return this.channels[k]};this.stop=function(a){0<=a&&a<this.channels.length&&this.channels[a].stop()};this.getFreeChannel=function(a){for(var c=-1,g=[],h=-1,k=-1,l=0,m=0;m<this.channels.length;m++)this.channels[m].locked||(this.channels[m].busy?(l=(new Date).getTime(),
l-=this.channels[m].startPlayTime,l>k&&(k=l,h=m)):g.push(m));0==g.length?!a&&0<=h&&(c=h):c=g[0];return c};this.init(a,c)}AudioMixer.isWebAudioSupport=function(){return"webkitAudioContext"in window};AudioMixer.buffer={};AudioMixer.waContext=null;
function JointsDrawer(a){JointsDrawer.superclass.constructor.call(this,null,1,1);var c=this;this.world=a;this.ignoreList=[];this.distanceColor="#264f05";this.prismaticColor="#FF00FF";this.draw=function(){for(var a=!0,f=c.world,g=c.stage,h=f.m_jointList;h;h=h.m_next){var k=h.m_body1,l=h.m_body2,m=k.m_position,n=l.m_position,p=h.GetAnchor1(),q=h.GetAnchor2();h.sprite&&(h.sprite.x=p.x,h.sprite.y=p.y);if(h.m_type==b2Joint.e_distanceJoint||h.m_type==b2Joint.e_prismaticJoint)if(a=!0,c.ignoreList&&0<=c.ignoreList.indexOf(h)&&
(a=!1),a){if(h.m_type==b2Joint.e_distanceJoint){var a=p.x-q.x,u=p.y-q.y;20<=Math.sqrt(a*a+u*u)&&g.drawLine(p.x,p.y,q.x,q.y,1,c.distanceColor)}h.m_type==b2Joint.e_prismaticJoint&&(k==f.m_groundBody?g.drawLine(p.x,p.y,n.x,n.y,1,c.prismaticColor):l==f.m_groundBody?g.drawLine(p.x,p.y,m.x,m.y,1,c.prismaticColor):g.drawLine(q.x,q.y,m.x,m.y,1,c.prismaticColor))}}};this.addEventListener("render",this.draw)}Utils.extend(JointsDrawer,Sprite);
function box2DCreateWorld(a){var c=new b2AABB;c.minVertex.Set(-1E3,-1E3);c.maxVertex.Set(1E3,1E3);a="undefined"!=typeof a?new b2Vec2(0,a):new b2Vec2(0,300);return new b2World(c,a,!0)}function box2DCreateGround(a,c,e){var f=new b2BoxDef;f.extents.Set(1E4,50);f.restitution=c?c:0.2;c=new b2BodyDef;c.AddShape(f);c.position.Set(-500,e?e:480);a=a.CreateBody(c);a.bodyDef=c;return a}
function box2DCreateCircle(a,c,e,f,g,h,k,l,m){"undefined"==typeof h&&(h=!0);var n=new b2CircleDef;h||(n.density=k?k:0.8,n.restitution=l?l:0.1,n.friction=m?m:3);n.radius=f;f=new b2BodyDef;f.rotation=g;f.AddShape(n);f.position.Set(c,e);a=a.CreateBody(f);a.bodyDef=f;return a}
function box2DCreateBox(a,c,e,f,g,h,k,l,m,n){"undefined"==typeof k&&(k=!0);var p=new b2BoxDef;k||(p.density=l?l:1,p.restitution=m?m:0.2,p.friction=n?n:0.3);p.extents.Set(f,g);f=new b2BodyDef;f.rotation=h;f.AddShape(p);f.position.Set(c,e);a=a.CreateBody(f);a.bodyDef=f;return a}
function box2DCreatePoly(a,c,e,f,g,h,k,l,m){var n=new b2BodyDef;n.rotation=g;for(g=0;g<f.length;g++){var p=f[g],q=new b2PolyDef;h||(q.density=k?k:1,q.restitution=l?l:0.2,q.friction=m?m:0.3);q.vertexCount=p.length;for(var u=0;u<p.length;u++)q.vertices[u].Set(p[u][0],p[u][1]);n.AddShape(q)}n.position.Set(c,e);a=a.CreateBody(n);a.bodyDef=n;return a}
function box2DCreateRevoluteJoint(a,c,e,f,g){var h=new b2RevoluteJointDef;h.body1=c;h.body2=e;h.anchorPoint=f;h.collideConnected=!0;g&&(h.motorSpeed=g,h.motorTorque=5E8,h.enableMotor=!0);return a.CreateJoint(h)}function box2DCreateDistanceJoint(a,c,e,f,g){var h=new b2DistanceJointDef;h.body1=c;h.body2=e;h.anchorPoint1=f;h.anchorPoint2=g;h.collideConnected=!0;return a.CreateJoint(h)}
function box2DCreatePrismaticJoint(a,c,e,f,g){var h=new b2PrismaticJointDef;h.anchorPoint.Set(f.x,f.y);h.body1=c;h.body2=e;h.axis.Set(0,1);g&&(h.motorSpeed=g,h.motorForce=1E5,h.enableMotor=!0);return a.CreateJoint(h)}
var Prototype={Version:"1.6.0.2",Browser:{IE:!(!window.attachEvent||window.opera),Opera:!!window.opera,WebKit:-1<navigator.userAgent.indexOf("AppleWebKit/"),Gecko:-1<navigator.userAgent.indexOf("Gecko")&&-1==navigator.userAgent.indexOf("KHTML"),MobileSafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/)},BrowserFeatures:{XPath:!!document.evaluate,ElementExtensions:!!window.HTMLElement,SpecificElementExtensions:document.createElement("div").__proto__&&document.createElement("div").__proto__!==
document.createElement("form").__proto__},ScriptFragment:"<script[^>]*>([\\S\\s]*?)\x3c/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);
var Class={create:function(){function a(){this.initialize.apply(this,arguments)}var c=null,e=$A(arguments);Object.isFunction(e[0])&&(c=e.shift());Object.extend(a,Class.Methods);a.superclass=c;a.subclasses=[];if(c){var f=function(){};f.prototype=c.prototype;a.prototype=new f;c.subclasses.push(a)}for(c=0;c<e.length;c++)a.addMethods(e[c]);a.prototype.initialize||(a.prototype.initialize=Prototype.emptyFunction);return a.prototype.constructor=a},Methods:{addMethods:function(a){var c=this.superclass&&this.superclass.prototype,
e=Object.keys(a);Object.keys({toString:!0}).length||e.push("toString","valueOf");for(var f=0,g=e.length;f<g;f++){var h=e[f],k=a[h];if(c&&Object.isFunction(k)&&"$super"==k.argumentNames().first())var l=k,k=Object.extend(function(a){return function(){return c[a].apply(this,arguments)}}(h).wrap(l),{valueOf:function(){return l},toString:function(){return l.toString()}});this.prototype[h]=k}return this}}},Abstract={};Object.extend=function(a,c){for(var e in c)a[e]=c[e];return a};
Object.extend(Object,{inspect:function(a){try{return Object.isUndefined(a)?"undefined":null===a?"null":a.inspect?a.inspect():String(a)}catch(c){if(c instanceof RangeError)return"...";throw c;}},toJSON:function(a){switch(typeof a){case "undefined":case "function":case "unknown":return;case "boolean":return a.toString()}if(null===a)return"null";if(a.toJSON)return a.toJSON();if(!Object.isElement(a)){var c=[],e;for(e in a){var f=Object.toJSON(a[e]);Object.isUndefined(f)||c.push(e.toJSON()+": "+f)}return"{"+
c.join(", ")+"}"}},toQueryString:function(a){return $H(a).toQueryString()},toHTML:function(a){return a&&a.toHTML?a.toHTML():String.interpret(a)},keys:function(a){var c=[],e;for(e in a)c.push(e);return c},values:function(a){var c=[],e;for(e in a)c.push(a[e]);return c},clone:function(a){return Object.extend({},a)},isElement:function(a){return a&&1==a.nodeType},isArray:function(a){return null!=a&&"object"==typeof a&&"splice"in a&&"join"in a},isHash:function(a){return a instanceof Hash},isFunction:function(a){return"function"==
typeof a},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isUndefined:function(a){return"undefined"==typeof a}});
Object.extend(Function.prototype,{argumentNames:function(){var a=this.toString().match(/^[\s\(]*function[^(]*\((.*?)\)/)[1].split(",").invoke("strip");return 1!=a.length||a[0]?a:[]},bind:function(){if(2>arguments.length&&Object.isUndefined(arguments[0]))return this;var a=this,c=$A(arguments),e=c.shift();return function(){return a.apply(e,c.concat($A(arguments)))}},bindAsEventListener:function(){var a=this,c=$A(arguments),e=c.shift();return function(f){return a.apply(e,[f||window.event].concat(c))}},
curry:function(){if(!arguments.length)return this;var a=this,c=$A(arguments);return function(){return a.apply(this,c.concat($A(arguments)))}},delay:function(){var a=this,c=$A(arguments),e=1E3*c.shift();return window.setTimeout(function(){return a.apply(a,c)},e)},wrap:function(a){var c=this;return function(){return a.apply(this,[c.bind(this)].concat($A(arguments)))}},methodize:function(){if(this._methodized)return this._methodized;var a=this;return this._methodized=function(){return a.apply(null,[this].concat($A(arguments)))}}});
Function.prototype.defer=Function.prototype.delay.curry(0.01);Object.extend(String,{interpret:function(a){return null==a?"":String(a)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,{gsub:function(a,c){var e="",f=this,g;for(c=arguments.callee.prepareReplacement(c);0<f.length;)(g=f.match(a))?(e+=f.slice(0,g.index),e+=String.interpret(c(g)),f=f.slice(g.index+g[0].length)):(e+=f,f="");return e},sub:function(a,c,e){c=this.gsub.prepareReplacement(c);e=Object.isUndefined(e)?1:e;return this.gsub(a,function(a){return 0>--e?a[0]:c(a)})},scan:function(a,c){this.gsub(a,c);return String(this)},truncate:function(a,c){a=a||30;c=Object.isUndefined(c)?"...":c;
return this.length>a?this.slice(0,a-c.length)+c:String(this)},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},stripScripts:function(){return this.replace(RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var a=RegExp(Prototype.ScriptFragment,"im");return(this.match(RegExp(Prototype.ScriptFragment,"img"))||[]).map(function(c){return(c.match(a)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(a){return eval(a)})},
escapeHTML:function(){var a=arguments.callee;a.text.data=this;return a.div.innerHTML},unescapeHTML:function(){var a=new Element("div");a.innerHTML=this.stripTags();return a.childNodes[0]?1<a.childNodes.length?$A(a.childNodes).inject("",function(a,e){return a+e.nodeValue}):a.childNodes[0].nodeValue:""},toQueryParams:function(a){var c=this.strip().match(/([^?#]*)(#.*)?$/);return c?c[1].split(a||"&").inject({},function(a,c){if((c=c.split("="))[0]){var g=decodeURIComponent(c.shift()),h=1<c.length?c.join("="):
c[0];void 0!=h&&(h=decodeURIComponent(h));g in a?(Object.isArray(a[g])||(a[g]=[a[g]]),a[g].push(h)):a[g]=h}return a}):{}},toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(a){return 1>a?"":Array(a+1).join(this)},camelize:function(){var a=this.split("-"),c=a.length;if(1==c)return a[0];for(var e="-"==this.charAt(0)?a[0].charAt(0).toUpperCase()+a[0].substring(1):a[0],f=1;f<c;f++)e+=a[f].charAt(0).toUpperCase()+
a[f].substring(1);return e},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.gsub(/::/,"/").gsub(/([A-Z]+)([A-Z][a-z])/,"#{1}_#{2}").gsub(/([a-z\d])([A-Z])/,"#{1}_#{2}").gsub(/-/,"_").toLowerCase()},dasherize:function(){return this.gsub(/_/,"-")},inspect:function(a){var c=this.gsub(/[\x00-\x1f\\]/,function(a){var c=String.specialChar[a[0]];return c?c:"\\u00"+a[0].charCodeAt().toPaddedString(2,16)});return a?'"'+c.replace(/"/g,
'\\"')+'"':"'"+c.replace(/'/g,"\\'")+"'"},toJSON:function(){return this.inspect(!0)},unfilterJSON:function(a){return this.sub(a||Prototype.JSONFilter,"#{1}")},isJSON:function(){var a;if(this.blank())return!1;a=this.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(a)},evalJSON:function(a){var c=this.unfilterJSON();try{if(!a||c.isJSON())return eval("("+c+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());},include:function(a){return-1<
this.indexOf(a)},startsWith:function(a){return 0===this.indexOf(a)},endsWith:function(a){var c=this.length-a.length;return 0<=c&&this.lastIndexOf(a)===c},empty:function(){return""==this},blank:function(){return/^\s*$/.test(this)},interpolate:function(a,c){return(new Template(this,c)).evaluate(a)}});
(Prototype.Browser.WebKit||Prototype.Browser.IE)&&Object.extend(String.prototype,{escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(){return this.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")}});String.prototype.gsub.prepareReplacement=function(a){if(Object.isFunction(a))return a;var c=new Template(a);return function(a){return c.evaluate(a)}};String.prototype.parseQuery=String.prototype.toQueryParams;
Object.extend(String.prototype.escapeHTML,{div:document.createElement("div"),text:document.createTextNode("")});with(String.prototype.escapeHTML)div.appendChild(text);
var Template=Class.create({initialize:function(a,c){this.template=a.toString();this.pattern=c||Template.Pattern},evaluate:function(a){Object.isFunction(a.toTemplateReplacements)&&(a=a.toTemplateReplacements());return this.template.gsub(this.pattern,function(c){if(null==a)return"";var e=c[1]||"";if("\\"==e)return c[2];var f=a,g=c[3],h=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;c=h.exec(g);if(null==c)return e;for(;null!=c;){var k=c[1].startsWith("[")?c[2].gsub("\\\\]","]"):c[1],f=f[k];if(null==f||""==
c[3])break;g=g.substring("["==c[3]?c[1].length:c[0].length);c=h.exec(g)}return e+String.interpret(f)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;
var $break={},Enumerable={each:function(a,c){var e=0;a=a.bind(c);try{this._each(function(c){a(c,e++)})}catch(f){if(f!=$break)throw f;}return this},eachSlice:function(a,c,e){c=c?c.bind(e):Prototype.K;for(var f=-a,g=[],h=this.toArray();(f+=a)<h.length;)g.push(h.slice(f,f+a));return g.collect(c,e)},all:function(a,c){a=a?a.bind(c):Prototype.K;var e=!0;this.each(function(c,g){e=e&&!!a(c,g);if(!e)throw $break;});return e},any:function(a,c){a=a?a.bind(c):Prototype.K;var e=!1;this.each(function(c,g){if(e=
!!a(c,g))throw $break;});return e},collect:function(a,c){a=a?a.bind(c):Prototype.K;var e=[];this.each(function(c,g){e.push(a(c,g))});return e},detect:function(a,c){a=a.bind(c);var e;this.each(function(c,g){if(a(c,g))throw e=c,$break;});return e},findAll:function(a,c){a=a.bind(c);var e=[];this.each(function(c,g){a(c,g)&&e.push(c)});return e},grep:function(a,c,e){c=c?c.bind(e):Prototype.K;var f=[];Object.isString(a)&&(a=RegExp(a));this.each(function(e,h){a.match(e)&&f.push(c(e,h))});return f},include:function(a){if(Object.isFunction(this.indexOf)&&
-1!=this.indexOf(a))return!0;var c=!1;this.each(function(e){if(e==a)throw c=!0,$break;});return c},inGroupsOf:function(a,c){c=Object.isUndefined(c)?null:c;return this.eachSlice(a,function(e){for(;e.length<a;)e.push(c);return e})},inject:function(a,c,e){c=c.bind(e);this.each(function(e,g){a=c(a,e,g)});return a},invoke:function(a){var c=$A(arguments).slice(1);return this.map(function(e){return e[a].apply(e,c)})},max:function(a,c){a=a?a.bind(c):Prototype.K;var e;this.each(function(c,g){c=a(c,g);if(null==
e||c>=e)e=c});return e},min:function(a,c){a=a?a.bind(c):Prototype.K;var e;this.each(function(c,g){c=a(c,g);if(null==e||c<e)e=c});return e},partition:function(a,c){a=a?a.bind(c):Prototype.K;var e=[],f=[];this.each(function(c,h){(a(c,h)?e:f).push(c)});return[e,f]},pluck:function(a){var c=[];this.each(function(e){c.push(e[a])});return c},reject:function(a,c){a=a.bind(c);var e=[];this.each(function(c,g){a(c,g)||e.push(c)});return e},sortBy:function(a,c){a=a.bind(c);return this.map(function(c,f){return{value:c,
criteria:a(c,f)}}).sort(function(a,c){var g=a.criteria,h=c.criteria;return g<h?-1:g>h?1:0}).pluck("value")},toArray:function(){return this.map()},zip:function(){var a=Prototype.K,c=$A(arguments);Object.isFunction(c.last())&&(a=c.pop());var e=[this].concat(c).map($A);return this.map(function(c,g){return a(e.pluck(g))})},size:function(){return this.toArray().length},inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"}};
Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,filter:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray,every:Enumerable.all,some:Enumerable.any});function $A(a){if(!a)return[];if(a.toArray)return a.toArray();for(var c=a.length||0,e=Array(c);c--;)e[c]=a[c];return e}
Prototype.Browser.WebKit&&($A=function(a){if(!a)return[];if((!Object.isFunction(a)||"[object NodeList]"!=a)&&a.toArray)return a.toArray();for(var c=a.length||0,e=Array(c);c--;)e[c]=a[c];return e});Array.from=$A;Object.extend(Array.prototype,Enumerable);Array.prototype._reverse||(Array.prototype._reverse=Array.prototype.reverse);
Object.extend(Array.prototype,{_each:function(a){for(var c=0,e=this.length;c<e;c++)a(this[c])},clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(a){return null!=a})},flatten:function(){return this.inject([],function(a,c){return a.concat(Object.isArray(c)?c.flatten():[c])})},without:function(){var a=$A(arguments);return this.select(function(c){return!a.include(c)})},reverse:function(a){return(!1!==
a?this:this.toArray())._reverse()},reduce:function(){return 1<this.length?this:this[0]},uniq:function(a){return this.inject([],function(c,e,f){0!=f&&(a?c.last()==e:c.include(e))||c.push(e);return c})},intersect:function(a){return this.uniq().findAll(function(c){return a.detect(function(a){return c===a})})},clone:function(){return[].concat(this)},size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"},toJSON:function(){var a=[];this.each(function(c){c=
Object.toJSON(c);Object.isUndefined(c)||a.push(c)});return"["+a.join(", ")+"]"}});Object.isFunction(Array.prototype.forEach)&&(Array.prototype._each=Array.prototype.forEach);Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){c||(c=0);var e=this.length;for(0>c&&(c=e+c);c<e;c++)if(this[c]===a)return c;return-1});
Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a,c){c=isNaN(c)?this.length:(0>c?this.length+c:c)+1;var e=this.slice(0,c).reverse().indexOf(a);return 0>e?e:c-e-1});Array.prototype.toArray=Array.prototype.clone;var b2Settings=Class.create();b2Settings.prototype={initialize:function(){}};b2Settings.USHRT_MAX=65535;b2Settings.b2_pi=Math.PI;b2Settings.b2_massUnitsPerKilogram=1;b2Settings.b2_timeUnitsPerSecond=1;b2Settings.b2_lengthUnitsPerMeter=30;b2Settings.b2_maxManifoldPoints=2;
b2Settings.b2_maxShapesPerBody=64;b2Settings.b2_maxPolyVertices=8;b2Settings.b2_maxProxies=1024;b2Settings.b2_maxPairs=8*b2Settings.b2_maxProxies;b2Settings.b2_linearSlop=0.005*b2Settings.b2_lengthUnitsPerMeter;b2Settings.b2_angularSlop=2/180*b2Settings.b2_pi;b2Settings.b2_velocityThreshold=1*b2Settings.b2_lengthUnitsPerMeter/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_maxLinearCorrection=0.2*b2Settings.b2_lengthUnitsPerMeter;b2Settings.b2_maxAngularCorrection=8/180*b2Settings.b2_pi;
b2Settings.b2_contactBaumgarte=0.2;b2Settings.b2_timeToSleep=0.5*b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_linearSleepTolerance=0.01*b2Settings.b2_lengthUnitsPerMeter/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_angularSleepTolerance=2/180/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2Assert=function(a){a||(void 0).x++};var b2Vec2=Class.create();
b2Vec2.prototype={initialize:function(a,c){this.x=a;this.y=c},SetZero:function(){this.y=this.x=0},Set:function(a,c){this.x=a;this.y=c},SetV:function(a){this.x=a.x;this.y=a.y},Negative:function(){return new b2Vec2(-this.x,-this.y)},Copy:function(){return new b2Vec2(this.x,this.y)},Add:function(a){this.x+=a.x;this.y+=a.y},Subtract:function(a){this.x-=a.x;this.y-=a.y},Multiply:function(a){this.x*=a;this.y*=a},MulM:function(a){var c=this.x;this.x=a.col1.x*c+a.col2.x*this.y;this.y=a.col1.y*c+a.col2.y*
this.y},MulTM:function(a){var c=b2Math.b2Dot(this,a.col1);this.y=b2Math.b2Dot(this,a.col2);this.x=c},CrossVF:function(a){var c=this.x;this.x=a*this.y;this.y=-a*c},CrossFV:function(a){var c=this.x;this.x=-a*this.y;this.y=a*c},MinV:function(a){this.x=this.x<a.x?this.x:a.x;this.y=this.y<a.y?this.y:a.y},MaxV:function(a){this.x=this.x>a.x?this.x:a.x;this.y=this.y>a.y?this.y:a.y},Abs:function(){this.x=Math.abs(this.x);this.y=Math.abs(this.y)},Length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},
Normalize:function(){var a=this.Length();if(a<Number.MIN_VALUE)return 0;var c=1/a;this.x*=c;this.y*=c;return a},IsValid:function(){return b2Math.b2IsValid(this.x)&&b2Math.b2IsValid(this.y)},x:null,y:null};b2Vec2.Make=function(a,c){return new b2Vec2(a,c)};var b2Mat22=Class.create();
b2Mat22.prototype={initialize:function(a,c,e){null==a&&(a=0);this.col1=new b2Vec2;this.col2=new b2Vec2;null!=c&&null!=e?(this.col1.SetV(c),this.col2.SetV(e)):(c=Math.cos(a),a=Math.sin(a),this.col1.x=c,this.col2.x=-a,this.col1.y=a,this.col2.y=c)},Set:function(a){var c=Math.cos(a);a=Math.sin(a);this.col1.x=c;this.col2.x=-a;this.col1.y=a;this.col2.y=c},SetVV:function(a,c){this.col1.SetV(a);this.col2.SetV(c)},Copy:function(){return new b2Mat22(0,this.col1,this.col2)},SetM:function(a){this.col1.SetV(a.col1);
this.col2.SetV(a.col2)},AddM:function(a){this.col1.x+=a.col1.x;this.col1.y+=a.col1.y;this.col2.x+=a.col2.x;this.col2.y+=a.col2.y},SetIdentity:function(){this.col1.x=1;this.col2.x=0;this.col1.y=0;this.col2.y=1},SetZero:function(){this.col1.x=0;this.col2.x=0;this.col1.y=0;this.col2.y=0},Invert:function(a){var c=this.col1.x,e=this.col2.x,f=this.col1.y,g=this.col2.y,h;h=1/(c*g-e*f);a.col1.x=h*g;a.col2.x=-h*e;a.col1.y=-h*f;a.col2.y=h*c;return a},Solve:function(a,c,e){var f=this.col1.x,g=this.col2.x,h=
this.col1.y,k=this.col2.y,l;l=1/(f*k-g*h);a.x=l*(k*c-g*e);a.y=l*(f*e-h*c);return a},Abs:function(){this.col1.Abs();this.col2.Abs()},col1:new b2Vec2,col2:new b2Vec2};var b2Math=Class.create();b2Math.prototype={initialize:function(){}};b2Math.b2IsValid=function(a){return isFinite(a)};b2Math.b2Dot=function(a,c){return a.x*c.x+a.y*c.y};b2Math.b2CrossVV=function(a,c){return a.x*c.y-a.y*c.x};b2Math.b2CrossVF=function(a,c){return new b2Vec2(c*a.y,-c*a.x)};
b2Math.b2CrossFV=function(a,c){return new b2Vec2(-a*c.y,a*c.x)};b2Math.b2MulMV=function(a,c){return new b2Vec2(a.col1.x*c.x+a.col2.x*c.y,a.col1.y*c.x+a.col2.y*c.y)};b2Math.b2MulTMV=function(a,c){return new b2Vec2(b2Math.b2Dot(c,a.col1),b2Math.b2Dot(c,a.col2))};b2Math.AddVV=function(a,c){return new b2Vec2(a.x+c.x,a.y+c.y)};b2Math.SubtractVV=function(a,c){return new b2Vec2(a.x-c.x,a.y-c.y)};b2Math.MulFV=function(a,c){return new b2Vec2(a*c.x,a*c.y)};
b2Math.AddMM=function(a,c){return new b2Mat22(0,b2Math.AddVV(a.col1,c.col1),b2Math.AddVV(a.col2,c.col2))};b2Math.b2MulMM=function(a,c){return new b2Mat22(0,b2Math.b2MulMV(a,c.col1),b2Math.b2MulMV(a,c.col2))};b2Math.b2MulTMM=function(a,c){var e=new b2Vec2(b2Math.b2Dot(a.col1,c.col1),b2Math.b2Dot(a.col2,c.col1)),f=new b2Vec2(b2Math.b2Dot(a.col1,c.col2),b2Math.b2Dot(a.col2,c.col2));return new b2Mat22(0,e,f)};b2Math.b2Abs=function(a){return 0<a?a:-a};
b2Math.b2AbsV=function(a){return new b2Vec2(b2Math.b2Abs(a.x),b2Math.b2Abs(a.y))};b2Math.b2AbsM=function(a){return new b2Mat22(0,b2Math.b2AbsV(a.col1),b2Math.b2AbsV(a.col2))};b2Math.b2Min=function(a,c){return a<c?a:c};b2Math.b2MinV=function(a,c){return new b2Vec2(b2Math.b2Min(a.x,c.x),b2Math.b2Min(a.y,c.y))};b2Math.b2Max=function(a,c){return a>c?a:c};b2Math.b2MaxV=function(a,c){return new b2Vec2(b2Math.b2Max(a.x,c.x),b2Math.b2Max(a.y,c.y))};
b2Math.b2Clamp=function(a,c,e){return b2Math.b2Max(c,b2Math.b2Min(a,e))};b2Math.b2ClampV=function(a,c,e){return b2Math.b2MaxV(c,b2Math.b2MinV(a,e))};b2Math.b2Swap=function(a,c){var e=a[0];a[0]=c[0];c[0]=e};b2Math.b2Random=function(){return 2*Math.random()-1};b2Math.b2NextPowerOfTwo=function(a){a|=a>>1&2147483647;a|=a>>2&1073741823;a|=a>>4&268435455;a|=a>>8&16777215;return(a|a>>16&65535)+1};b2Math.b2IsPowerOfTwo=function(a){return 0<a&&0==(a&a-1)};b2Math.tempVec2=new b2Vec2;b2Math.tempVec3=new b2Vec2;
b2Math.tempVec4=new b2Vec2;b2Math.tempVec5=new b2Vec2;b2Math.tempMat=new b2Mat22;var b2AABB=Class.create();b2AABB.prototype={IsValid:function(){var a=this.maxVertex.x,c=this.maxVertex.y,a=this.maxVertex.x,c=this.maxVertex.y,a=a-this.minVertex.x,c=c-this.minVertex.y;return a=0<=a&&0<=c&&this.minVertex.IsValid()&&this.maxVertex.IsValid()},minVertex:new b2Vec2,maxVertex:new b2Vec2,initialize:function(){this.minVertex=new b2Vec2;this.maxVertex=new b2Vec2}};var b2Bound=Class.create();
b2Bound.prototype={IsLower:function(){return 0==(this.value&1)},IsUpper:function(){return 1==(this.value&1)},Swap:function(a){var c=this.value,e=this.proxyId,f=this.stabbingCount;this.value=a.value;this.proxyId=a.proxyId;this.stabbingCount=a.stabbingCount;a.value=c;a.proxyId=e;a.stabbingCount=f},value:0,proxyId:0,stabbingCount:0,initialize:function(){}};var b2BoundValues=Class.create();
b2BoundValues.prototype={lowerValues:[0,0],upperValues:[0,0],initialize:function(){this.lowerValues=[0,0];this.upperValues=[0,0]}};var b2Pair=Class.create();
b2Pair.prototype={SetBuffered:function(){this.status|=b2Pair.e_pairBuffered},ClearBuffered:function(){this.status&=~b2Pair.e_pairBuffered},IsBuffered:function(){return(this.status&b2Pair.e_pairBuffered)==b2Pair.e_pairBuffered},SetRemoved:function(){this.status|=b2Pair.e_pairRemoved},ClearRemoved:function(){this.status&=~b2Pair.e_pairRemoved},IsRemoved:function(){return(this.status&b2Pair.e_pairRemoved)==b2Pair.e_pairRemoved},SetFinal:function(){this.status|=b2Pair.e_pairFinal},IsFinal:function(){return(this.status&
b2Pair.e_pairFinal)==b2Pair.e_pairFinal},userData:null,proxyId1:0,proxyId2:0,next:0,status:0,initialize:function(){}};b2Pair.b2_nullPair=b2Settings.USHRT_MAX;b2Pair.b2_nullProxy=b2Settings.USHRT_MAX;b2Pair.b2_tableCapacity=b2Settings.b2_maxPairs;b2Pair.b2_tableMask=b2Pair.b2_tableCapacity-1;b2Pair.e_pairBuffered=1;b2Pair.e_pairRemoved=2;b2Pair.e_pairFinal=4;var b2PairCallback=Class.create();b2PairCallback.prototype={PairAdded:function(a,c){return null},PairRemoved:function(a,c,e){},initialize:function(){}};
var b2BufferedPair=Class.create();b2BufferedPair.prototype={proxyId1:0,proxyId2:0,initialize:function(){}};var b2PairManager=Class.create();
b2PairManager.prototype={initialize:function(){var a=0;this.m_hashTable=Array(b2Pair.b2_tableCapacity);for(a=0;a<b2Pair.b2_tableCapacity;++a)this.m_hashTable[a]=b2Pair.b2_nullPair;this.m_pairs=Array(b2Settings.b2_maxPairs);for(a=0;a<b2Settings.b2_maxPairs;++a)this.m_pairs[a]=new b2Pair;this.m_pairBuffer=Array(b2Settings.b2_maxPairs);for(a=0;a<b2Settings.b2_maxPairs;++a)this.m_pairBuffer[a]=new b2BufferedPair;for(a=0;a<b2Settings.b2_maxPairs;++a)this.m_pairs[a].proxyId1=b2Pair.b2_nullProxy,this.m_pairs[a].proxyId2=
b2Pair.b2_nullProxy,this.m_pairs[a].userData=null,this.m_pairs[a].status=0,this.m_pairs[a].next=a+1;this.m_pairs[b2Settings.b2_maxPairs-1].next=b2Pair.b2_nullPair;this.m_pairCount=0},Initialize:function(a,c){this.m_broadPhase=a;this.m_callback=c},AddBufferedPair:function(a,c){var e=this.AddPair(a,c);!1==e.IsBuffered()&&(e.SetBuffered(),this.m_pairBuffer[this.m_pairBufferCount].proxyId1=e.proxyId1,this.m_pairBuffer[this.m_pairBufferCount].proxyId2=e.proxyId2,++this.m_pairBufferCount);e.ClearRemoved();
b2BroadPhase.s_validate&&this.ValidateBuffer()},RemoveBufferedPair:function(a,c){var e=this.Find(a,c);null!=e&&(!1==e.IsBuffered()&&(e.SetBuffered(),this.m_pairBuffer[this.m_pairBufferCount].proxyId1=e.proxyId1,this.m_pairBuffer[this.m_pairBufferCount].proxyId2=e.proxyId2,++this.m_pairBufferCount),e.SetRemoved(),b2BroadPhase.s_validate&&this.ValidateBuffer())},Commit:function(){for(var a=0,c=0,e=this.m_broadPhase.m_proxyPool,a=0;a<this.m_pairBufferCount;++a){var f=this.Find(this.m_pairBuffer[a].proxyId1,
this.m_pairBuffer[a].proxyId2);f.ClearBuffered();var g=e[f.proxyId1],h=e[f.proxyId2];f.IsRemoved()?(!0==f.IsFinal()&&this.m_callback.PairRemoved(g.userData,h.userData,f.userData),this.m_pairBuffer[c].proxyId1=f.proxyId1,this.m_pairBuffer[c].proxyId2=f.proxyId2,++c):!1==f.IsFinal()&&(f.userData=this.m_callback.PairAdded(g.userData,h.userData),f.SetFinal())}for(a=0;a<c;++a)this.RemovePair(this.m_pairBuffer[a].proxyId1,this.m_pairBuffer[a].proxyId2);this.m_pairBufferCount=0;b2BroadPhase.s_validate&&
this.ValidateTable()},AddPair:function(a,c){if(a>c){var e=a;a=c;c=e}var e=b2PairManager.Hash(a,c)&b2Pair.b2_tableMask,f=f=this.FindHash(a,c,e);if(null!=f)return f;var g=this.m_freePair,f=this.m_pairs[g];this.m_freePair=f.next;f.proxyId1=a;f.proxyId2=c;f.status=0;f.userData=null;f.next=this.m_hashTable[e];this.m_hashTable[e]=g;++this.m_pairCount;return f},RemovePair:function(a,c){if(a>c){var e=a;a=c;c=e}for(var f=b2PairManager.Hash(a,c)&b2Pair.b2_tableMask,g=this.m_hashTable[f],h=null;g!=b2Pair.b2_nullPair;){if(b2PairManager.Equals(this.m_pairs[g],
a,c))return e=g,h?h.next=this.m_pairs[g].next:this.m_hashTable[f]=this.m_pairs[g].next,f=this.m_pairs[e],g=f.userData,f.next=this.m_freePair,f.proxyId1=b2Pair.b2_nullProxy,f.proxyId2=b2Pair.b2_nullProxy,f.userData=null,f.status=0,this.m_freePair=e,--this.m_pairCount,g;h=this.m_pairs[g];g=h.next}return null},Find:function(a,c){if(a>c){var e=a;a=c;c=e}e=b2PairManager.Hash(a,c)&b2Pair.b2_tableMask;return this.FindHash(a,c,e)},FindHash:function(a,c,e){for(e=this.m_hashTable[e];e!=b2Pair.b2_nullPair&&
!1==b2PairManager.Equals(this.m_pairs[e],a,c);)e=this.m_pairs[e].next;return e==b2Pair.b2_nullPair?null:this.m_pairs[e]},ValidateBuffer:function(){},ValidateTable:function(){},m_broadPhase:null,m_callback:null,m_pairs:null,m_freePair:0,m_pairCount:0,m_pairBuffer:null,m_pairBufferCount:0,m_hashTable:null};b2PairManager.Hash=function(a,c){var e=c<<16&4294901760|a,e=~e+(e<<15&4294934528),e=e^e>>12&1048575,e=e+(e<<2&4294967292),e=2057*(e^e>>4&268435455);return e^=e>>16&65535};
b2PairManager.Equals=function(a,c,e){return a.proxyId1==c&&a.proxyId2==e};b2PairManager.EqualsPair=function(a,c){return a.proxyId1==c.proxyId1&&a.proxyId2==c.proxyId2};var b2BroadPhase=Class.create();
b2BroadPhase.prototype={initialize:function(a,c){this.m_pairManager=new b2PairManager;this.m_proxyPool=Array(b2Settings.b2_maxPairs);this.m_bounds=Array(2*b2Settings.b2_maxProxies);this.m_queryResults=Array(b2Settings.b2_maxProxies);this.m_quantizationFactor=new b2Vec2;var e=0;this.m_pairManager.Initialize(this,c);this.m_worldAABB=a;for(e=this.m_proxyCount=0;e<b2Settings.b2_maxProxies;e++)this.m_queryResults[e]=0;this.m_bounds=Array(2);for(e=0;2>e;e++){this.m_bounds[e]=Array(2*b2Settings.b2_maxProxies);
for(var f=0;f<2*b2Settings.b2_maxProxies;f++)this.m_bounds[e][f]=new b2Bound}e=a.maxVertex.x;f=a.maxVertex.y;e-=a.minVertex.x;f-=a.minVertex.y;this.m_quantizationFactor.x=b2Settings.USHRT_MAX/e;this.m_quantizationFactor.y=b2Settings.USHRT_MAX/f;for(e=0;e<b2Settings.b2_maxProxies-1;++e)f=new b2Proxy,this.m_proxyPool[e]=f,f.SetNext(e+1),f.timeStamp=0,f.overlapCount=b2BroadPhase.b2_invalid,f.userData=null;f=new b2Proxy;this.m_proxyPool[b2Settings.b2_maxProxies-1]=f;f.SetNext(b2Pair.b2_nullProxy);f.timeStamp=
0;f.overlapCount=b2BroadPhase.b2_invalid;f.userData=null;this.m_freeProxy=0;this.m_timeStamp=1;this.m_queryResultCount=0},InRange:function(a){var c,e,f,g;c=a.minVertex.x;e=a.minVertex.y;c-=this.m_worldAABB.maxVertex.x;e-=this.m_worldAABB.maxVertex.y;f=this.m_worldAABB.minVertex.x;g=this.m_worldAABB.minVertex.y;f-=a.maxVertex.x;g-=a.maxVertex.y;c=b2Math.b2Max(c,f);e=b2Math.b2Max(e,g);return 0>b2Math.b2Max(c,e)},GetProxy:function(a){return a==b2Pair.b2_nullProxy||!1==this.m_proxyPool[a].IsValid()?null:
this.m_proxyPool[a]},CreateProxy:function(a,c){var e=0,f,g=this.m_freeProxy;f=this.m_proxyPool[g];this.m_freeProxy=f.GetNext();f.overlapCount=0;f.userData=c;f=2*this.m_proxyCount;var h=[],k=[];this.ComputeBounds(h,k,a);for(var l=0;2>l;++l){var m=this.m_bounds[l],n=0,p=0,n=[n],p=[p];this.Query(n,p,h[l],k[l],m,f,l);for(var n=n[0],p=p[0],e=[],q=0,u=f-p,r,v,q=0;q<u;q++)e[q]=new b2Bound,r=e[q],v=m[p+q],r.value=v.value,r.proxyId=v.proxyId,r.stabbingCount=v.stabbingCount;for(var u=e.length,x=p+2,q=0;q<u;q++)v=
e[q],r=m[x+q],r.value=v.value,r.proxyId=v.proxyId,r.stabbingCount=v.stabbingCount;e=[];u=p-n;for(q=0;q<u;q++)e[q]=new b2Bound,r=e[q],v=m[n+q],r.value=v.value,r.proxyId=v.proxyId,r.stabbingCount=v.stabbingCount;u=e.length;x=n+1;for(q=0;q<u;q++)v=e[q],r=m[x+q],r.value=v.value,r.proxyId=v.proxyId,r.stabbingCount=v.stabbingCount;++p;m[n].value=h[l];m[n].proxyId=g;m[p].value=k[l];m[p].proxyId=g;m[n].stabbingCount=0==n?0:m[n-1].stabbingCount;m[p].stabbingCount=m[p-1].stabbingCount;for(e=n;e<p;++e)m[e].stabbingCount++;
for(e=n;e<f+2;++e)n=this.m_proxyPool[m[e].proxyId],m[e].IsLower()?n.lowerBounds[l]=e:n.upperBounds[l]=e}++this.m_proxyCount;for(f=0;f<this.m_queryResultCount;++f)this.m_pairManager.AddBufferedPair(g,this.m_queryResults[f]);this.m_pairManager.Commit();this.m_queryResultCount=0;this.IncrementTimeStamp();return g},DestroyProxy:function(a){for(var c=this.m_proxyPool[a],e=2*this.m_proxyCount,f=0;2>f;++f){for(var g=this.m_bounds[f],h=c.lowerBounds[f],k=c.upperBounds[f],l=g[h].value,m=g[k].value,n=[],p=
0,q=k-h-1,u,r,p=0;p<q;p++)n[p]=new b2Bound,u=n[p],r=g[h+1+p],u.value=r.value,u.proxyId=r.proxyId,u.stabbingCount=r.stabbingCount;for(var q=n.length,v=h,p=0;p<q;p++)r=n[p],u=g[v+p],u.value=r.value,u.proxyId=r.proxyId,u.stabbingCount=r.stabbingCount;n=[];q=e-k-1;for(p=0;p<q;p++)n[p]=new b2Bound,u=n[p],r=g[k+1+p],u.value=r.value,u.proxyId=r.proxyId,u.stabbingCount=r.stabbingCount;q=n.length;v=k-1;for(p=0;p<q;p++)r=n[p],u=g[v+p],u.value=r.value,u.proxyId=r.proxyId,u.stabbingCount=r.stabbingCount;q=e-
2;for(n=h;n<q;++n)p=this.m_proxyPool[g[n].proxyId],g[n].IsLower()?p.lowerBounds[f]=n:p.upperBounds[f]=n;for(q=k-1;h<q;++h)g[h].stabbingCount--;this.Query([0],[0],l,m,g,e-2,f)}for(e=0;e<this.m_queryResultCount;++e)this.m_pairManager.RemoveBufferedPair(a,this.m_queryResults[e]);this.m_pairManager.Commit();this.m_queryResultCount=0;this.IncrementTimeStamp();c.userData=null;c.overlapCount=b2BroadPhase.b2_invalid;c.lowerBounds[0]=b2BroadPhase.b2_invalid;c.lowerBounds[1]=b2BroadPhase.b2_invalid;c.upperBounds[0]=
b2BroadPhase.b2_invalid;c.upperBounds[1]=b2BroadPhase.b2_invalid;c.SetNext(this.m_freeProxy);this.m_freeProxy=a;--this.m_proxyCount},MoveProxy:function(a,c){var e=0,f=0,g,h,k=0,l;if(!(a==b2Pair.b2_nullProxy||b2Settings.b2_maxProxies<=a)&&!1!=c.IsValid()){var m=2*this.m_proxyCount,n=this.m_proxyPool[a],p=new b2BoundValues;this.ComputeBounds(p.lowerValues,p.upperValues,c);for(var q=new b2BoundValues,e=0;2>e;++e)q.lowerValues[e]=this.m_bounds[e][n.lowerBounds[e]].value,q.upperValues[e]=this.m_bounds[e][n.upperBounds[e]].value;
for(e=0;2>e;++e){var u=this.m_bounds[e],r=n.lowerBounds[e],v=n.upperBounds[e],x=p.lowerValues[e],z=p.upperValues[e],y=x-u[r].value,A=z-u[v].value;u[r].value=x;u[v].value=z;if(0>y)for(f=r;0<f&&x<u[f-1].value;)g=u[f],h=u[f-1],k=h.proxyId,l=this.m_proxyPool[h.proxyId],h.stabbingCount++,!0==h.IsUpper()?(this.TestOverlap(p,l)&&this.m_pairManager.AddBufferedPair(a,k),l.upperBounds[e]++,g.stabbingCount++):(l.lowerBounds[e]++,g.stabbingCount--),n.lowerBounds[e]--,g.Swap(h),--f;if(0<A)for(f=v;f<m-1&&u[f+1].value<=
z;)g=u[f],h=u[f+1],k=h.proxyId,l=this.m_proxyPool[k],h.stabbingCount++,!0==h.IsLower()?(this.TestOverlap(p,l)&&this.m_pairManager.AddBufferedPair(a,k),l.lowerBounds[e]--,g.stabbingCount++):(l.upperBounds[e]--,g.stabbingCount--),n.upperBounds[e]++,g.Swap(h),f++;if(0<y)for(f=r;f<m-1&&u[f+1].value<=x;)g=u[f],h=u[f+1],k=h.proxyId,l=this.m_proxyPool[k],h.stabbingCount--,h.IsUpper()?(this.TestOverlap(q,l)&&this.m_pairManager.RemoveBufferedPair(a,k),l.upperBounds[e]--,g.stabbingCount--):(l.lowerBounds[e]--,
g.stabbingCount++),n.lowerBounds[e]++,g.Swap(h),f++;if(0>A)for(f=v;0<f&&z<u[f-1].value;)g=u[f],h=u[f-1],k=h.proxyId,l=this.m_proxyPool[k],h.stabbingCount--,!0==h.IsLower()?(this.TestOverlap(q,l)&&this.m_pairManager.RemoveBufferedPair(a,k),l.lowerBounds[e]++,g.stabbingCount--):(l.upperBounds[e]++,g.stabbingCount++),n.upperBounds[e]--,g.Swap(h),f--}}},Commit:function(){this.m_pairManager.Commit()},QueryAABB:function(a,c,e){var f=[],g=[];this.ComputeBounds(f,g,a);a=[0];var h=[0];this.Query(a,h,f[0],
g[0],this.m_bounds[0],2*this.m_proxyCount,0);this.Query(a,h,f[1],g[1],this.m_bounds[1],2*this.m_proxyCount,1);for(g=f=0;g<this.m_queryResultCount&&f<e;++g,++f)c[g]=this.m_proxyPool[this.m_queryResults[g]].userData;this.m_queryResultCount=0;this.IncrementTimeStamp();return f},Validate:function(){for(var a=0;2>a;++a)for(var c=this.m_bounds[a],e=2*this.m_proxyCount,f=0,g=0;g<e;++g)!0==c[g].IsLower()?f++:f--},ComputeBounds:function(a,c,e){var f=e.minVertex.x,g=e.minVertex.y,f=b2Math.b2Min(f,this.m_worldAABB.maxVertex.x),
g=b2Math.b2Min(g,this.m_worldAABB.maxVertex.y),f=b2Math.b2Max(f,this.m_worldAABB.minVertex.x),g=b2Math.b2Max(g,this.m_worldAABB.minVertex.y),h=e.maxVertex.x;e=e.maxVertex.y;h=b2Math.b2Min(h,this.m_worldAABB.maxVertex.x);e=b2Math.b2Min(e,this.m_worldAABB.maxVertex.y);h=b2Math.b2Max(h,this.m_worldAABB.minVertex.x);e=b2Math.b2Max(e,this.m_worldAABB.minVertex.y);a[0]=this.m_quantizationFactor.x*(f-this.m_worldAABB.minVertex.x)&b2Settings.USHRT_MAX-1;c[0]=this.m_quantizationFactor.x*(h-this.m_worldAABB.minVertex.x)&
65535|1;a[1]=this.m_quantizationFactor.y*(g-this.m_worldAABB.minVertex.y)&b2Settings.USHRT_MAX-1;c[1]=this.m_quantizationFactor.y*(e-this.m_worldAABB.minVertex.y)&65535|1},TestOverlapValidate:function(a,c){for(var e=0;2>e;++e){var f=this.m_bounds[e];if(f[a.lowerBounds[e]].value>f[c.upperBounds[e]].value||f[a.upperBounds[e]].value<f[c.lowerBounds[e]].value)return!1}return!0},TestOverlap:function(a,c){for(var e=0;2>e;++e){var f=this.m_bounds[e];if(a.lowerValues[e]>f[c.upperBounds[e]].value||a.upperValues[e]<
f[c.lowerBounds[e]].value)return!1}return!0},Query:function(a,c,e,f,g,h,k){e=b2BroadPhase.BinarySearch(g,h,e);f=b2BroadPhase.BinarySearch(g,h,f);for(h=e;h<f;++h)g[h].IsLower()&&this.IncrementOverlapCount(g[h].proxyId);if(0<e){h=e-1;for(var l=g[h].stabbingCount;l;)g[h].IsLower()&&e<=this.m_proxyPool[g[h].proxyId].upperBounds[k]&&(this.IncrementOverlapCount(g[h].proxyId),--l),--h}a[0]=e;c[0]=f},IncrementOverlapCount:function(a){var c=this.m_proxyPool[a];c.timeStamp<this.m_timeStamp?(c.timeStamp=this.m_timeStamp,
c.overlapCount=1):(c.overlapCount=2,this.m_queryResults[this.m_queryResultCount]=a,++this.m_queryResultCount)},IncrementTimeStamp:function(){if(this.m_timeStamp==b2Settings.USHRT_MAX){for(var a=0;a<b2Settings.b2_maxProxies;++a)this.m_proxyPool[a].timeStamp=0;this.m_timeStamp=1}else++this.m_timeStamp},m_pairManager:new b2PairManager,m_proxyPool:Array(b2Settings.b2_maxPairs),m_freeProxy:0,m_bounds:Array(2*b2Settings.b2_maxProxies),m_queryResults:Array(b2Settings.b2_maxProxies),m_queryResultCount:0,
m_worldAABB:null,m_quantizationFactor:new b2Vec2,m_proxyCount:0,m_timeStamp:0};b2BroadPhase.s_validate=!1;b2BroadPhase.b2_invalid=b2Settings.USHRT_MAX;b2BroadPhase.b2_nullEdge=b2Settings.USHRT_MAX;b2BroadPhase.BinarySearch=function(a,c,e){var f=0;for(c-=1;f<=c;){var g=Math.floor((f+c)/2);if(a[g].value>e)c=g-1;else if(a[g].value<e)f=g+1;else return g}return f};var b2Collision=Class.create();b2Collision.prototype={initialize:function(){}};b2Collision.b2_nullFeature=255;
b2Collision.ClipSegmentToLine=function(a,c,e,f){var g=0,h=c[0].v,k=c[1].v,l=b2Math.b2Dot(e,c[0].v)-f;e=b2Math.b2Dot(e,c[1].v)-f;0>=l&&(a[g++]=c[0]);0>=e&&(a[g++]=c[1]);0>l*e&&(e=l/(l-e),f=a[g].v,f.x=h.x+e*(k.x-h.x),f.y=h.y+e*(k.y-h.y),a[g].id=0<l?c[0].id:c[1].id,++g);return g};
b2Collision.EdgeSeparation=function(a,c,e){for(var f=a.m_vertices,g=e.m_vertexCount,h=e.m_vertices,k=a.m_normals[c].x,l=a.m_normals[c].y,m=k,n=a.m_R,k=n.col1.x*m+n.col2.x*l,l=n.col1.y*m+n.col2.y*l,p=k,q=l,n=e.m_R,m=p*n.col1.x+q*n.col1.y,q=p*n.col2.x+q*n.col2.y,p=m,m=0,n=Number.MAX_VALUE,u=0;u<g;++u){var r=h[u],r=r.x*p+r.y*q;r<n&&(n=r,m=u)}n=a.m_R;g=a.m_position.x+(n.col1.x*f[c].x+n.col2.x*f[c].y);a=a.m_position.y+(n.col1.y*f[c].x+n.col2.y*f[c].y);n=e.m_R;c=e.m_position.x+(n.col1.x*h[m].x+n.col2.x*
h[m].y);e=e.m_position.y+(n.col1.y*h[m].x+n.col2.y*h[m].y);return(c-g)*k+(e-a)*l};
b2Collision.FindMaxSeparation=function(a,c,e,f){for(var g=c.m_vertexCount,h=e.m_position.x-c.m_position.x,k=e.m_position.y-c.m_position.y,l=h*c.m_R.col1.x+k*c.m_R.col1.y,k=h*c.m_R.col2.x+k*c.m_R.col2.y,h=0,m=-Number.MAX_VALUE,n=0;n<g;++n){var p=c.m_normals[n].x*l+c.m_normals[n].y*k;p>m&&(m=p,h=n)}l=b2Collision.EdgeSeparation(c,h,e);if(0<l&&!1==f)return l;n=0<=h-1?h-1:g-1;p=b2Collision.EdgeSeparation(c,n,e);if(0<p&&!1==f)return p;var q=h+1<g?h+1:0,u=b2Collision.EdgeSeparation(c,q,e);if(0<u&&!1==f)return u;
m=k=0;if(p>l&&p>u)m=-1,k=n,n=p;else if(u>l)m=1,k=q,n=u;else return a[0]=h,l;for(;;){h=-1==m?0<=k-1?k-1:g-1:k+1<g?k+1:0;l=b2Collision.EdgeSeparation(c,h,e);if(0<l&&!1==f)return l;if(l>n)k=h,n=l;else break}a[0]=k;return n};
b2Collision.FindIncidentEdge=function(a,c,e,f){var g=c.m_vertices,h=f.m_vertexCount,k=f.m_vertices,l=g[e+1==c.m_vertexCount?0:e+1],m=l.x,n=l.y,l=g[e],m=m-l.x,n=n-l.y,l=m,m=n,n=-l,l=1/Math.sqrt(m*m+n*n),m=m*l,n=n*l,l=m,g=c.m_R,m=g.col1.x*l+g.col2.x*n,n=g.col1.y*l+g.col2.y*n;c=m;g=f.m_R;l=c*g.col1.x+n*g.col1.y;n=c*g.col2.x+n*g.col2.y;c=l;for(var g=m=0,p=Number.MAX_VALUE,q=0;q<h;++q){var u=q,r=q+1<h?q+1:0,l=k[r],v=l.x,x=l.y,l=k[u],v=v-l.x,x=x-l.y,l=v,v=x,x=-l,l=1/Math.sqrt(v*v+x*x),v=v*l,x=x*l,l=v*c+
x*n;l<p&&(p=l,m=u,g=r)}h=a[0];l=h.v;l.SetV(k[m]);l.MulM(f.m_R);l.Add(f.m_position);h.id.features.referenceFace=e;h.id.features.incidentEdge=m;h.id.features.incidentVertex=m;h=a[1];l=h.v;l.SetV(k[g]);l.MulM(f.m_R);l.Add(f.m_position);h.id.features.referenceFace=e;h.id.features.incidentEdge=m;h.id.features.incidentVertex=g};b2Collision.b2CollidePolyTempVec=new b2Vec2;
b2Collision.b2CollidePoly=function(a,c,e,f){a.pointCount=0;var g,h=[0],k=b2Collision.FindMaxSeparation(h,c,e,f);g=h[0];if(!(0<k&&!1==f)){var l,h=[0],m=b2Collision.FindMaxSeparation(h,e,c,f);l=h[0];if(!(0<m&&!1==f)){var n=0,h=0;m>0.98*k+0.001?(k=e,n=l,h=1):(k=c,c=e,n=g,h=0);e=[new ClipVertex,new ClipVertex];b2Collision.FindIncidentEdge(e,k,n,c);c=k.m_vertices;var p=c[n],q=n+1<k.m_vertexCount?c[n+1]:c[0];g=q.x-p.x;l=q.y-p.y;var u=g,r=k.m_R;g=r.col1.x*u+r.col2.x*l;l=r.col1.y*u+r.col2.y*l;n=1/Math.sqrt(g*
g+l*l);g*=n;l*=n;u=g;n=l;c=-u;var m=p.x,v=p.y,u=m,r=k.m_R,m=r.col1.x*u+r.col2.x*v,v=r.col1.y*u+r.col2.y*v,m=m+k.m_position.x,v=v+k.m_position.y,p=q.x,q=q.y,u=p,r=k.m_R,p=r.col1.x*u+r.col2.x*q,q=r.col1.y*u+r.col2.y*q,p=p+k.m_position.x,q=q+k.m_position.y,k=n*m+c*v,u=-(g*m+l*v),p=g*p+l*q,q=[new ClipVertex,new ClipVertex],m=[new ClipVertex,new ClipVertex],r=0;b2Collision.b2CollidePolyTempVec.Set(-g,-l);r=b2Collision.ClipSegmentToLine(q,e,b2Collision.b2CollidePolyTempVec,u);if(!(2>r||(b2Collision.b2CollidePolyTempVec.Set(g,
l),r=b2Collision.ClipSegmentToLine(m,q,b2Collision.b2CollidePolyTempVec,p),2>r))){h?a.normal.Set(-n,-c):a.normal.Set(n,c);for(g=e=0;g<b2Settings.b2_maxManifoldPoints;++g)if(l=m[g].v,l=n*l.x+c*l.y-k,0>=l||!0==f)p=a.points[e],p.separation=l,p.position.SetV(m[g].v),p.id.Set(m[g].id),p.id.features.flip=h,++e;a.pointCount=e}}}};
b2Collision.b2CollideCircle=function(a,c,e,f){a.pointCount=0;var g=e.m_position.x-c.m_position.x,h=e.m_position.y-c.m_position.y,k=g*g+h*h;c=c.m_radius+e.m_radius;k>c*c&&!1==f||(k<Number.MIN_VALUE?(f=-c,a.normal.Set(0,1)):(k=Math.sqrt(k),f=k-c,k=1/k,a.normal.x=k*g,a.normal.y=k*h),a.pointCount=1,g=a.points[0],g.id.set_key(0),g.separation=f,g.position.x=e.m_position.x-e.m_radius*a.normal.x,g.position.y=e.m_position.y-e.m_radius*a.normal.y)};
b2Collision.b2CollidePolyAndCircle=function(a,c,e,f){a.pointCount=0;var g,h;h=e.m_position.x-c.m_position.x;var k=e.m_position.y-c.m_position.y;f=c.m_R;var l=h*f.col1.x+k*f.col1.y,k=h*f.col2.x+k*f.col2.y;h=l;var m=0,n=-Number.MAX_VALUE,l=e.m_radius;for(g=0;g<c.m_vertexCount;++g){var p=c.m_normals[g].x*(h-c.m_vertices[g].x)+c.m_normals[g].y*(k-c.m_vertices[g].y);if(p>l)return;p>n&&(n=p,m=g)}if(n<Number.MIN_VALUE)a.pointCount=1,c=c.m_normals[m],a.normal.x=f.col1.x*c.x+f.col2.x*c.y,a.normal.y=f.col1.y*
c.x+f.col2.y*c.y,g=a.points[0],g.id.features.incidentEdge=m,g.id.features.incidentVertex=b2Collision.b2_nullFeature,g.id.features.referenceFace=b2Collision.b2_nullFeature,g.id.features.flip=0,g.position.x=e.m_position.x-l*a.normal.x,g.position.y=e.m_position.y-l*a.normal.y,g.separation=n-l;else{var n=m+1<c.m_vertexCount?m+1:0,q=c.m_vertices[n].x-c.m_vertices[m].x,p=c.m_vertices[n].y-c.m_vertices[m].y,u=Math.sqrt(q*q+p*p),q=q/u,p=p/u;if(u<Number.MIN_VALUE)h-=c.m_vertices[m].x,c=k-c.m_vertices[m].y,
k=Math.sqrt(h*h+c*c),h/=k,c/=k,k>l||(a.pointCount=1,a.normal.Set(f.col1.x*h+f.col2.x*c,f.col1.y*h+f.col2.y*c),g=a.points[0],g.id.features.incidentEdge=b2Collision.b2_nullFeature,g.id.features.incidentVertex=m,g.id.features.referenceFace=b2Collision.b2_nullFeature,g.id.features.flip=0,g.position.x=e.m_position.x-l*a.normal.x,g.position.y=e.m_position.y-l*a.normal.y,g.separation=k-l);else{var r=(h-c.m_vertices[m].x)*q+(k-c.m_vertices[m].y)*p;g=a.points[0];g.id.features.incidentEdge=b2Collision.b2_nullFeature;
g.id.features.incidentVertex=b2Collision.b2_nullFeature;g.id.features.referenceFace=b2Collision.b2_nullFeature;g.id.features.flip=0;0>=r?(q=c.m_vertices[m].x,c=c.m_vertices[m].y,g.id.features.incidentVertex=m):r>=u?(q=c.m_vertices[n].x,c=c.m_vertices[n].y,g.id.features.incidentVertex=n):(q=q*r+c.m_vertices[m].x,c=p*r+c.m_vertices[m].y,g.id.features.incidentEdge=m);h-=q;c=k-c;k=Math.sqrt(h*h+c*c);h/=k;c/=k;k>l||(a.pointCount=1,a.normal.Set(f.col1.x*h+f.col2.x*c,f.col1.y*h+f.col2.y*c),g.position.x=
e.m_position.x-l*a.normal.x,g.position.y=e.m_position.y-l*a.normal.y,g.separation=k-l)}}};b2Collision.b2TestOverlap=function(a,c){var e=c.minVertex,f=a.maxVertex,g=e.x-f.x,h=e.y-f.y,e=a.minVertex,f=c.maxVertex,k=e.y-f.y;return 0<g||0<h||0<e.x-f.x||0<k?!1:!0};var Features=Class.create();
Features.prototype={set_referenceFace:function(a){this._referenceFace=a;this._m_id._key=this._m_id._key&4294967040|this._referenceFace&255},get_referenceFace:function(){return this._referenceFace},_referenceFace:0,set_incidentEdge:function(a){this._incidentEdge=a;this._m_id._key=this._m_id._key&4294902015|this._incidentEdge<<8&65280},get_incidentEdge:function(){return this._incidentEdge},_incidentEdge:0,set_incidentVertex:function(a){this._incidentVertex=a;this._m_id._key=this._m_id._key&4278255615|
this._incidentVertex<<16&16711680},get_incidentVertex:function(){return this._incidentVertex},_incidentVertex:0,set_flip:function(a){this._flip=a;this._m_id._key=this._m_id._key&16777215|this._flip<<24&4278190080},get_flip:function(){return this._flip},_flip:0,_m_id:null,initialize:function(){}};var b2ContactID=Class.create();
b2ContactID.prototype={initialize:function(){this.features=new Features;this.features._m_id=this},Set:function(a){this.set_key(a._key)},Copy:function(){var a=new b2ContactID;a.set_key(this._key);return a},get_key:function(){return this._key},set_key:function(a){this._key=a;this.features._referenceFace=this._key&255;this.features._incidentEdge=(this._key&65280)>>8&255;this.features._incidentVertex=(this._key&16711680)>>16&255;this.features._flip=(this._key&4278190080)>>24&255},features:new Features,
_key:0};var b2ContactPoint=Class.create();b2ContactPoint.prototype={position:new b2Vec2,separation:null,normalImpulse:null,tangentImpulse:null,id:new b2ContactID,initialize:function(){this.position=new b2Vec2;this.id=new b2ContactID}};var b2Distance=Class.create();b2Distance.prototype={initialize:function(){}};
b2Distance.ProcessTwo=function(a,c,e,f,g){var h=-g[1].x,k=-g[1].y,l=g[0].x-g[1].x,m=g[0].y-g[1].y,n=Math.sqrt(l*l+m*m),h=l/n*h+m/n*k;if(0>=h||n<Number.MIN_VALUE)return a.SetV(e[1]),c.SetV(f[1]),e[0].SetV(e[1]),f[0].SetV(f[1]),g[0].SetV(g[1]),1;h/=n;a.x=e[1].x+h*(e[0].x-e[1].x);a.y=e[1].y+h*(e[0].y-e[1].y);c.x=f[1].x+h*(f[0].x-f[1].x);c.y=f[1].y+h*(f[0].y-f[1].y);return 2};
b2Distance.ProcessThree=function(a,c,e,f,g){var h=g[0].x,k=g[0].y,l=g[1].x,m=g[1].y,n=g[2].x,p=g[2].y,q=l-h,u=m-k,r=n-h,v=p-k,x=n-l,z=p-m,y=-(h*r+k*v),A=n*r+p*v,F=-(l*x+m*z),x=n*x+p*z;if(0>=A&&0>=x)return a.SetV(e[2]),c.SetV(f[2]),e[0].SetV(e[2]),f[0].SetV(f[2]),g[0].SetV(g[2]),1;u=q*v-u*r;q=u*(h*m-k*l);l=u*(l*p-m*n);if(0>=l&&0<=F&&0<=x)return y=F/(F+x),a.x=e[1].x+y*(e[2].x-e[1].x),a.y=e[1].y+y*(e[2].y-e[1].y),c.x=f[1].x+y*(f[2].x-f[1].x),c.y=f[1].y+y*(f[2].y-f[1].y),e[0].SetV(e[2]),f[0].SetV(f[2]),
g[0].SetV(g[2]),2;h=u*(n*k-p*h);if(0>=h&&0<=y&&0<=A)return y/=y+A,a.x=e[0].x+y*(e[2].x-e[0].x),a.y=e[0].y+y*(e[2].y-e[0].y),c.x=f[0].x+y*(f[2].x-f[0].x),c.y=f[0].y+y*(f[2].y-f[0].y),e[1].SetV(e[2]),f[1].SetV(f[2]),g[1].SetV(g[2]),2;y=1/(l+h+q);g=l*y;y*=h;A=1-g-y;a.x=g*e[0].x+y*e[1].x+A*e[2].x;a.y=g*e[0].y+y*e[1].y+A*e[2].y;c.x=g*f[0].x+y*f[1].x+A*f[2].x;c.y=g*f[0].y+y*f[1].y+A*f[2].y;return 3};b2Distance.InPoinsts=function(a,c,e){for(var f=0;f<e;++f)if(a.x==c[f].x&&a.y==c[f].y)return!0;return!1};
b2Distance.Distance=function(a,c,e,f){var g=Array(3),h=Array(3),k=Array(3),l=0;a.SetV(e.m_position);c.SetV(f.m_position);for(var m=0,n=0;20>n;++n){var p=c.x-a.x,q=c.y-a.y,u=e.Support(p,q),r=f.Support(-p,-q),m=p*p+q*q,v=r.x-u.x,x=r.y-u.y;if(m-b2Dot(p*v+q*x)<=0.01*m)return 0==l&&(a.SetV(u),c.SetV(r)),b2Distance.g_GJK_Iterations=n,Math.sqrt(m);switch(l){case 0:g[0].SetV(u);h[0].SetV(r);k[0]=w;a.SetV(g[0]);c.SetV(h[0]);++l;break;case 1:g[1].SetV(u);h[1].SetV(r);k[1].x=v;k[1].y=x;l=b2Distance.ProcessTwo(a,
c,g,h,k);break;case 2:g[2].SetV(u),h[2].SetV(r),k[2].x=v,k[2].y=x,l=b2Distance.ProcessThree(a,c,g,h,k)}if(3==l)return b2Distance.g_GJK_Iterations=n,0;p=-Number.MAX_VALUE;for(q=0;q<l;++q)p=b2Math.b2Max(p,k[q].x*k[q].x+k[q].y*k[q].y);if(3==l||m<=100*Number.MIN_VALUE*p)return b2Distance.g_GJK_Iterations=n,Math.sqrt(m)}b2Distance.g_GJK_Iterations=20;return Math.sqrt(m)};b2Distance.g_GJK_Iterations=0;var b2Manifold=Class.create();
b2Manifold.prototype={initialize:function(){this.points=Array(b2Settings.b2_maxManifoldPoints);for(var a=0;a<b2Settings.b2_maxManifoldPoints;a++)this.points[a]=new b2ContactPoint;this.normal=new b2Vec2},points:null,normal:null,pointCount:0};var b2OBB=Class.create();b2OBB.prototype={R:new b2Mat22,center:new b2Vec2,extents:new b2Vec2,initialize:function(){this.R=new b2Mat22;this.center=new b2Vec2;this.extents=new b2Vec2}};var b2Proxy=Class.create();
b2Proxy.prototype={GetNext:function(){return this.lowerBounds[0]},SetNext:function(a){this.lowerBounds[0]=a},IsValid:function(){return this.overlapCount!=b2BroadPhase.b2_invalid},lowerBounds:[0,0],upperBounds:[0,0],overlapCount:0,timeStamp:0,userData:null,initialize:function(){this.lowerBounds=[0,0];this.upperBounds=[0,0]}};var ClipVertex=Class.create();ClipVertex.prototype={v:new b2Vec2,id:new b2ContactID,initialize:function(){this.v=new b2Vec2;this.id=new b2ContactID}};var b2Shape=Class.create();
b2Shape.prototype={TestPoint:function(a){return!1},GetUserData:function(){return this.m_userData},GetType:function(){return this.m_type},GetBody:function(){return this.m_body},GetPosition:function(){return this.m_position},GetRotationMatrix:function(){return this.m_R},ResetProxy:function(a){},GetNext:function(){return this.m_next},initialize:function(a,c){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=
c;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex},DestroyProxy:function(){this.m_proxyId!=b2Pair.b2_nullProxy&&(this.m_body.m_world.m_broadPhase.DestroyProxy(this.m_proxyId),this.m_proxyId=b2Pair.b2_nullProxy)},Synchronize:function(a,c,e,f){},QuickSync:function(a,c){},Support:function(a,c,e){},GetMaxRadius:function(){return this.m_maxRadius},m_next:null,m_R:new b2Mat22,m_position:new b2Vec2,m_type:0,
m_userData:null,m_body:null,m_friction:null,m_restitution:null,m_maxRadius:null,m_proxyId:0,m_categoryBits:0,m_maskBits:0,m_groupIndex:0};b2Shape.Create=function(a,c,e){switch(a.type){case b2Shape.e_circleShape:return new b2CircleShape(a,c,e);case b2Shape.e_boxShape:case b2Shape.e_polyShape:return new b2PolyShape(a,c,e)}return null};b2Shape.Destroy=function(a){a.m_proxyId!=b2Pair.b2_nullProxy&&a.m_body.m_world.m_broadPhase.DestroyProxy(a.m_proxyId)};b2Shape.e_unknownShape=-1;
b2Shape.e_circleShape=0;b2Shape.e_boxShape=1;b2Shape.e_polyShape=2;b2Shape.e_meshShape=3;b2Shape.e_shapeTypeCount=4;
b2Shape.PolyMass=function(a,c,e,f){var g=new b2Vec2;g.SetZero();for(var h=0,k=0,l=new b2Vec2(0,0),m=1/3,n=0;n<e;++n){var p=l,q=c[n],u=n+1<e?c[n+1]:c[0],r=b2Math.SubtractVV(q,p),v=b2Math.SubtractVV(u,p),x=b2Math.b2CrossVV(r,v),z=0.5*x,h=h+z,y=new b2Vec2;y.SetV(p);y.Add(q);y.Add(u);y.Multiply(m*z);g.Add(y);q=p.x;p=p.y;u=r.x;r=r.y;z=v.x;v=v.y;k+=x*(m*(0.25*(u*u+z*u+z*z)+(q*u+q*z))+0.5*q*q+(m*(0.25*(r*r+v*r+v*v)+(p*r+p*v))+0.5*p*p))}a.mass=f*h;g.Multiply(1/h);a.center=g;k=f*(k-h*b2Math.b2Dot(g,g));a.I=
k};b2Shape.PolyCentroid=function(a,c,e){for(var f=0,g=0,h=0,k=1/3,l=0;l<c;++l)var m=a[l].x,n=a[l].y,p=l+1<c?a[l+1].x:a[0].x,q=l+1<c?a[l+1].y:a[0].y,u=0.5*((m-0)*(q-0)-(n-0)*(p-0)),h=h+u,f=f+u*k*(0+m+p),g=g+u*k*(0+n+q);e.Set(1/h*f,1/h*g)};var b2ShapeDef=Class.create();
b2ShapeDef.prototype={initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0},ComputeMass:function(a){a.center=new b2Vec2(0,0);0==this.density&&(a.mass=0,a.center.Set(0,0),a.I=0);switch(this.type){case b2Shape.e_circleShape:a.mass=this.density*b2Settings.b2_pi*this.radius*this.radius;a.center.Set(0,0);a.I=0.5*a.mass*
this.radius*this.radius;break;case b2Shape.e_boxShape:a.mass=4*this.density*this.extents.x*this.extents.y;a.center.Set(0,0);a.I=a.mass/3*b2Math.b2Dot(this.extents,this.extents);break;case b2Shape.e_polyShape:b2Shape.PolyMass(a,this.vertices,this.vertexCount,this.density);break;default:a.mass=0,a.center.Set(0,0),a.I=0}},type:0,userData:null,localPosition:null,localRotation:null,friction:null,restitution:null,density:null,categoryBits:0,maskBits:0,groupIndex:0};var b2BoxDef=Class.create();
Object.extend(b2BoxDef.prototype,b2ShapeDef.prototype);Object.extend(b2BoxDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.type=b2Shape.e_boxShape;this.extents=new b2Vec2(1,1)},extents:null});var b2CircleDef=Class.create();Object.extend(b2CircleDef.prototype,b2ShapeDef.prototype);
Object.extend(b2CircleDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.type=b2Shape.e_circleShape;this.radius=1},radius:null});var b2CircleShape=Class.create();Object.extend(b2CircleShape.prototype,b2Shape.prototype);
Object.extend(b2CircleShape.prototype,{TestPoint:function(a){var c=new b2Vec2;c.SetV(a);c.Subtract(this.m_position);return b2Math.b2Dot(c,c)<=this.m_radius*this.m_radius},initialize:function(a,c,e){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=c;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex;this.m_localPosition=
new b2Vec2;this.m_localPosition.Set(a.localPosition.x-e.x,a.localPosition.y-e.y);this.m_type=b2Shape.e_circleShape;this.m_radius=a.radius;this.m_R.SetM(this.m_body.m_R);a=this.m_R.col1.x*this.m_localPosition.x+this.m_R.col2.x*this.m_localPosition.y;c=this.m_R.col1.y*this.m_localPosition.x+this.m_R.col2.y*this.m_localPosition.y;this.m_position.x=this.m_body.m_position.x+a;this.m_position.y=this.m_body.m_position.y+c;this.m_maxRadius=Math.sqrt(a*a+c*c)+this.m_radius;a=new b2AABB;a.minVertex.Set(this.m_position.x-
this.m_radius,this.m_position.y-this.m_radius);a.maxVertex.Set(this.m_position.x+this.m_radius,this.m_position.y+this.m_radius);c=this.m_body.m_world.m_broadPhase;c.InRange(a)?this.m_proxyId=c.CreateProxy(a,this):this.m_proxyId=b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()},Synchronize:function(a,c,e,f){this.m_R.SetM(f);this.m_position.x=f.col1.x*this.m_localPosition.x+f.col2.x*this.m_localPosition.y+e.x;this.m_position.y=f.col1.y*this.m_localPosition.x+f.col2.y*this.m_localPosition.y+
e.y;if(this.m_proxyId!=b2Pair.b2_nullProxy){e=a.x+(c.col1.x*this.m_localPosition.x+c.col2.x*this.m_localPosition.y);f=a.y+(c.col1.y*this.m_localPosition.x+c.col2.y*this.m_localPosition.y);a=Math.min(e,this.m_position.x);c=Math.min(f,this.m_position.y);e=Math.max(e,this.m_position.x);var g=Math.max(f,this.m_position.y);f=new b2AABB;f.minVertex.Set(a-this.m_radius,c-this.m_radius);f.maxVertex.Set(e+this.m_radius,g+this.m_radius);a=this.m_body.m_world.m_broadPhase;a.InRange(f)?a.MoveProxy(this.m_proxyId,
f):this.m_body.Freeze()}},QuickSync:function(a,c){this.m_R.SetM(c);this.m_position.x=c.col1.x*this.m_localPosition.x+c.col2.x*this.m_localPosition.y+a.x;this.m_position.y=c.col1.y*this.m_localPosition.x+c.col2.y*this.m_localPosition.y+a.y},ResetProxy:function(a){if(this.m_proxyId!=b2Pair.b2_nullProxy){a.GetProxy(this.m_proxyId);a.DestroyProxy(this.m_proxyId);var c=new b2AABB;c.minVertex.Set(this.m_position.x-this.m_radius,this.m_position.y-this.m_radius);c.maxVertex.Set(this.m_position.x+this.m_radius,
this.m_position.y+this.m_radius);a.InRange(c)?this.m_proxyId=a.CreateProxy(c,this):this.m_proxyId=b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()}},Support:function(a,c,e){var f=Math.sqrt(a*a+c*c);e.Set(this.m_position.x+a/f*this.m_radius,this.m_position.y+c/f*this.m_radius)},m_localPosition:new b2Vec2,m_radius:null});var b2MassData=Class.create();b2MassData.prototype={mass:0,center:new b2Vec2(0,0),I:0,initialize:function(){this.center=new b2Vec2(0,0)}};
var b2PolyDef=Class.create();Object.extend(b2PolyDef.prototype,b2ShapeDef.prototype);
Object.extend(b2PolyDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.vertices=Array(b2Settings.b2_maxPolyVertices);this.type=b2Shape.e_polyShape;for(var a=this.vertexCount=0;a<b2Settings.b2_maxPolyVertices;a++)this.vertices[a]=new b2Vec2},vertices:Array(b2Settings.b2_maxPolyVertices),vertexCount:0});
var b2PolyShape=Class.create();Object.extend(b2PolyShape.prototype,b2Shape.prototype);
Object.extend(b2PolyShape.prototype,{TestPoint:function(a){var c=new b2Vec2;c.SetV(a);c.Subtract(this.m_position);c.MulTM(this.m_R);for(a=0;a<this.m_vertexCount;++a){var e=new b2Vec2;e.SetV(c);e.Subtract(this.m_vertices[a]);if(0<b2Math.b2Dot(this.m_normals[a],e))return!1}return!0},initialize:function(a,c,e){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=c;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=
0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex;this.syncAABB=new b2AABB;this.syncMat=new b2Mat22;this.m_localCentroid=new b2Vec2;this.m_localOBB=new b2OBB;var f=0,g;c=new b2AABB;this.m_vertices=Array(b2Settings.b2_maxPolyVertices);this.m_coreVertices=Array(b2Settings.b2_maxPolyVertices);this.m_normals=Array(b2Settings.b2_maxPolyVertices);this.m_type=b2Shape.e_polyShape;var h=new b2Mat22(a.localRotation);if(a.type==b2Shape.e_boxShape){this.m_localCentroid.x=
a.localPosition.x-e.x;this.m_localCentroid.y=a.localPosition.y-e.y;this.m_vertexCount=4;e=a.extents.x;g=a.extents.y;a=Math.max(0,e-2*b2Settings.b2_linearSlop);var k=Math.max(0,g-2*b2Settings.b2_linearSlop),f=this.m_vertices[0]=new b2Vec2;f.x=h.col1.x*e+h.col2.x*g;f.y=h.col1.y*e+h.col2.y*g;f=this.m_vertices[1]=new b2Vec2;f.x=h.col1.x*-e+h.col2.x*g;f.y=h.col1.y*-e+h.col2.y*g;f=this.m_vertices[2]=new b2Vec2;f.x=h.col1.x*-e+h.col2.x*-g;f.y=h.col1.y*-e+h.col2.y*-g;f=this.m_vertices[3]=new b2Vec2;f.x=h.col1.x*
e+h.col2.x*-g;f.y=h.col1.y*e+h.col2.y*-g;f=this.m_coreVertices[0]=new b2Vec2;f.x=h.col1.x*a+h.col2.x*k;f.y=h.col1.y*a+h.col2.y*k;f=this.m_coreVertices[1]=new b2Vec2;f.x=h.col1.x*-a+h.col2.x*k;f.y=h.col1.y*-a+h.col2.y*k;f=this.m_coreVertices[2]=new b2Vec2;f.x=h.col1.x*-a+h.col2.x*-k;f.y=h.col1.y*-a+h.col2.y*-k;f=this.m_coreVertices[3]=new b2Vec2;f.x=h.col1.x*a+h.col2.x*-k;f.y=h.col1.y*a+h.col2.y*-k}else{this.m_vertexCount=a.vertexCount;b2Shape.PolyCentroid(a.vertices,a.vertexCount,b2PolyShape.tempVec);
var k=b2PolyShape.tempVec.x,l=b2PolyShape.tempVec.y;this.m_localCentroid.x=a.localPosition.x+(h.col1.x*k+h.col2.x*l)-e.x;this.m_localCentroid.y=a.localPosition.y+(h.col1.y*k+h.col2.y*l)-e.y;for(f=0;f<this.m_vertexCount;++f){this.m_vertices[f]=new b2Vec2;this.m_coreVertices[f]=new b2Vec2;e=a.vertices[f].x-k;g=a.vertices[f].y-l;this.m_vertices[f].x=h.col1.x*e+h.col2.x*g;this.m_vertices[f].y=h.col1.y*e+h.col2.y*g;e=this.m_vertices[f].x;g=this.m_vertices[f].y;var m=Math.sqrt(e*e+g*g);m>Number.MIN_VALUE&&
(e*=1/m,g*=1/m);this.m_coreVertices[f].x=this.m_vertices[f].x-2*b2Settings.b2_linearSlop*e;this.m_coreVertices[f].y=this.m_vertices[f].y-2*b2Settings.b2_linearSlop*g}}a=h=Number.MAX_VALUE;e=-Number.MAX_VALUE;g=-Number.MAX_VALUE;for(f=this.m_maxRadius=0;f<this.m_vertexCount;++f)k=this.m_vertices[f],h=Math.min(h,k.x),a=Math.min(a,k.y),e=Math.max(e,k.x),g=Math.max(g,k.y),this.m_maxRadius=Math.max(this.m_maxRadius,k.Length());this.m_localOBB.R.SetIdentity();this.m_localOBB.center.Set(0.5*(h+e),0.5*(a+
g));this.m_localOBB.extents.Set(0.5*(e-h),0.5*(g-a));for(f=a=h=0;f<this.m_vertexCount;++f)this.m_normals[f]=new b2Vec2,h=f,a=f+1<this.m_vertexCount?f+1:0,this.m_normals[f].x=this.m_vertices[a].y-this.m_vertices[h].y,this.m_normals[f].y=-(this.m_vertices[a].x-this.m_vertices[h].x),this.m_normals[f].Normalize();for(f=0;f<this.m_vertexCount;++f);this.m_R.SetM(this.m_body.m_R);this.m_position.x=this.m_body.m_position.x+(this.m_R.col1.x*this.m_localCentroid.x+this.m_R.col2.x*this.m_localCentroid.y);this.m_position.y=
this.m_body.m_position.y+(this.m_R.col1.y*this.m_localCentroid.x+this.m_R.col2.y*this.m_localCentroid.y);b2PolyShape.tAbsR.col1.x=this.m_R.col1.x*this.m_localOBB.R.col1.x+this.m_R.col2.x*this.m_localOBB.R.col1.y;b2PolyShape.tAbsR.col1.y=this.m_R.col1.y*this.m_localOBB.R.col1.x+this.m_R.col2.y*this.m_localOBB.R.col1.y;b2PolyShape.tAbsR.col2.x=this.m_R.col1.x*this.m_localOBB.R.col2.x+this.m_R.col2.x*this.m_localOBB.R.col2.y;b2PolyShape.tAbsR.col2.y=this.m_R.col1.y*this.m_localOBB.R.col2.x+this.m_R.col2.y*
this.m_localOBB.R.col2.y;b2PolyShape.tAbsR.Abs();e=b2PolyShape.tAbsR.col1.x*this.m_localOBB.extents.x+b2PolyShape.tAbsR.col2.x*this.m_localOBB.extents.y;g=b2PolyShape.tAbsR.col1.y*this.m_localOBB.extents.x+b2PolyShape.tAbsR.col2.y*this.m_localOBB.extents.y;f=this.m_position.x+(this.m_R.col1.x*this.m_localOBB.center.x+this.m_R.col2.x*this.m_localOBB.center.y);h=this.m_position.y+(this.m_R.col1.y*this.m_localOBB.center.x+this.m_R.col2.y*this.m_localOBB.center.y);c.minVertex.x=f-e;c.minVertex.y=h-g;
c.maxVertex.x=f+e;c.maxVertex.y=h+g;f=this.m_body.m_world.m_broadPhase;f.InRange(c)?this.m_proxyId=f.CreateProxy(c,this):this.m_proxyId=b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()},syncAABB:new b2AABB,syncMat:new b2Mat22,Synchronize:function(a,c,e,f){this.m_R.SetM(f);this.m_position.x=this.m_body.m_position.x+(f.col1.x*this.m_localCentroid.x+f.col2.x*this.m_localCentroid.y);this.m_position.y=this.m_body.m_position.y+(f.col1.y*this.m_localCentroid.x+f.col2.y*this.m_localCentroid.y);
if(this.m_proxyId!=b2Pair.b2_nullProxy){var g,h;g=c.col1;h=c.col2;var k=this.m_localOBB.R.col1,l=this.m_localOBB.R.col2;this.syncMat.col1.x=g.x*k.x+h.x*k.y;this.syncMat.col1.y=g.y*k.x+h.y*k.y;this.syncMat.col2.x=g.x*l.x+h.x*l.y;this.syncMat.col2.y=g.y*l.x+h.y*l.y;this.syncMat.Abs();g=this.m_localCentroid.x+this.m_localOBB.center.x;h=this.m_localCentroid.y+this.m_localOBB.center.y;k=a.x+(c.col1.x*g+c.col2.x*h);a=a.y+(c.col1.y*g+c.col2.y*h);g=this.syncMat.col1.x*this.m_localOBB.extents.x+this.syncMat.col2.x*
this.m_localOBB.extents.y;h=this.syncMat.col1.y*this.m_localOBB.extents.x+this.syncMat.col2.y*this.m_localOBB.extents.y;this.syncAABB.minVertex.x=k-g;this.syncAABB.minVertex.y=a-h;this.syncAABB.maxVertex.x=k+g;this.syncAABB.maxVertex.y=a+h;g=f.col1;h=f.col2;k=this.m_localOBB.R.col1;l=this.m_localOBB.R.col2;this.syncMat.col1.x=g.x*k.x+h.x*k.y;this.syncMat.col1.y=g.y*k.x+h.y*k.y;this.syncMat.col2.x=g.x*l.x+h.x*l.y;this.syncMat.col2.y=g.y*l.x+h.y*l.y;this.syncMat.Abs();g=this.m_localCentroid.x+this.m_localOBB.center.x;
h=this.m_localCentroid.y+this.m_localOBB.center.y;k=e.x+(f.col1.x*g+f.col2.x*h);a=e.y+(f.col1.y*g+f.col2.y*h);g=this.syncMat.col1.x*this.m_localOBB.extents.x+this.syncMat.col2.x*this.m_localOBB.extents.y;h=this.syncMat.col1.y*this.m_localOBB.extents.x+this.syncMat.col2.y*this.m_localOBB.extents.y;this.syncAABB.minVertex.x=Math.min(this.syncAABB.minVertex.x,k-g);this.syncAABB.minVertex.y=Math.min(this.syncAABB.minVertex.y,a-h);this.syncAABB.maxVertex.x=Math.max(this.syncAABB.maxVertex.x,k+g);this.syncAABB.maxVertex.y=
Math.max(this.syncAABB.maxVertex.y,a+h);e=this.m_body.m_world.m_broadPhase;e.InRange(this.syncAABB)?e.MoveProxy(this.m_proxyId,this.syncAABB):this.m_body.Freeze()}},QuickSync:function(a,c){this.m_R.SetM(c);this.m_position.x=a.x+(c.col1.x*this.m_localCentroid.x+c.col2.x*this.m_localCentroid.y);this.m_position.y=a.y+(c.col1.y*this.m_localCentroid.x+c.col2.y*this.m_localCentroid.y)},ResetProxy:function(a){if(this.m_proxyId!=b2Pair.b2_nullProxy){a.GetProxy(this.m_proxyId);a.DestroyProxy(this.m_proxyId);
var c=b2Math.b2MulMM(this.m_R,this.m_localOBB.R),c=b2Math.b2AbsM(c),c=b2Math.b2MulMV(c,this.m_localOBB.extents),e=b2Math.b2MulMV(this.m_R,this.m_localOBB.center);e.Add(this.m_position);var f=new b2AABB;f.minVertex.SetV(e);f.minVertex.Subtract(c);f.maxVertex.SetV(e);f.maxVertex.Add(c);a.InRange(f)?this.m_proxyId=a.CreateProxy(f,this):this.m_proxyId=b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()}},Support:function(a,c,e){var f=a*this.m_R.col1.x+c*this.m_R.col1.y;a=a*this.m_R.col2.x+
c*this.m_R.col2.y;c=0;for(var g=this.m_coreVertices[0].x*f+this.m_coreVertices[0].y*a,h=1;h<this.m_vertexCount;++h){var k=this.m_coreVertices[h].x*f+this.m_coreVertices[h].y*a;k>g&&(c=h,g=k)}e.Set(this.m_position.x+(this.m_R.col1.x*this.m_coreVertices[c].x+this.m_R.col2.x*this.m_coreVertices[c].y),this.m_position.y+(this.m_R.col1.y*this.m_coreVertices[c].x+this.m_R.col2.y*this.m_coreVertices[c].y))},m_localCentroid:new b2Vec2,m_localOBB:new b2OBB,m_vertices:null,m_coreVertices:null,m_vertexCount:0,
m_normals:null});b2PolyShape.tempVec=new b2Vec2;b2PolyShape.tAbsR=new b2Mat22;var b2Body=Class.create();
b2Body.prototype={SetOriginPosition:function(a,c){if(!this.IsFrozen()){this.m_rotation=c;this.m_R.Set(this.m_rotation);this.m_position=b2Math.AddVV(a,b2Math.b2MulMV(this.m_R,this.m_center));this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;for(var e=this.m_shapeList;null!=e;e=e.m_next)e.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R);this.m_world.m_broadPhase.Commit()}},GetOriginPosition:function(){return b2Math.SubtractVV(this.m_position,b2Math.b2MulMV(this.m_R,
this.m_center))},SetCenterPosition:function(a,c){if(!this.IsFrozen()){this.m_rotation=c;this.m_R.Set(this.m_rotation);this.m_position.SetV(a);this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;for(var e=this.m_shapeList;null!=e;e=e.m_next)e.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R);this.m_world.m_broadPhase.Commit()}},GetCenterPosition:function(){return this.m_position},GetPosition:function(){var a,c;a=this.m_position.x;c=this.m_position.y;if(0!=this.m_center.x||
0!=this.m_center.y)a-=this.m_center.x*Math.cos(-this.m_rotation)+this.m_center.y*Math.sin(-this.m_rotation),c-=this.m_center.x*-Math.sin(-this.m_rotation)+this.m_center.y*Math.cos(-this.m_rotation);return new b2Vec2(a,c)},GetRotation:function(){return this.m_rotation},GetRotationMatrix:function(){return this.m_R},SetLinearVelocity:function(a){this.m_linearVelocity.SetV(a)},GetLinearVelocity:function(){return this.m_linearVelocity},SetAngularVelocity:function(a){this.m_angularVelocity=a},GetAngularVelocity:function(){return this.m_angularVelocity},
ApplyForce:function(a,c){!1==this.IsSleeping()&&(this.m_force.Add(a),this.m_torque+=b2Math.b2CrossVV(b2Math.SubtractVV(c,this.m_position),a))},ApplyTorque:function(a){!1==this.IsSleeping()&&(this.m_torque+=a)},ApplyImpulse:function(a,c){!1==this.IsSleeping()&&(this.m_linearVelocity.Add(b2Math.MulFV(this.m_invMass,a)),this.m_angularVelocity+=this.m_invI*b2Math.b2CrossVV(b2Math.SubtractVV(c,this.m_position),a))},GetMass:function(){return this.m_mass},GetInertia:function(){return this.m_I},GetWorldPoint:function(a){return b2Math.AddVV(this.m_position,
b2Math.b2MulMV(this.m_R,a))},GetWorldVector:function(a){return b2Math.b2MulMV(this.m_R,a)},GetLocalPoint:function(a){return b2Math.b2MulTMV(this.m_R,b2Math.SubtractVV(a,this.m_position))},GetLocalVector:function(a){return b2Math.b2MulTMV(this.m_R,a)},IsStatic:function(){return(this.m_flags&b2Body.e_staticFlag)==b2Body.e_staticFlag},IsFrozen:function(){return(this.m_flags&b2Body.e_frozenFlag)==b2Body.e_frozenFlag},IsSleeping:function(){return(this.m_flags&b2Body.e_sleepFlag)==b2Body.e_sleepFlag},AllowSleeping:function(a){a?
this.m_flags|=b2Body.e_allowSleepFlag:(this.m_flags&=~b2Body.e_allowSleepFlag,this.WakeUp())},WakeUp:function(){this.m_flags&=~b2Body.e_sleepFlag;this.m_sleepTime=0},GoToSleep:function(){this.m_flags|=b2Body.e_sleepFlag;this.m_linearVelocity.SetZero();this.m_angularVelocity=0},GetShapeList:function(){return this.m_shapeList},GetContactList:function(){return this.m_contactList},GetJointList:function(){return this.m_jointList},GetNext:function(){return this.m_next},GetUserData:function(){return this.m_userData},
initialize:function(a,c){this.sMat0=new b2Mat22;this.m_position=new b2Vec2;this.m_R=new b2Mat22(0);this.m_position0=new b2Vec2;var e=0,f,g;this.m_flags=0;this.m_position.SetV(a.position);this.m_rotation=a.rotation;this.m_R.Set(this.m_rotation);this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;this.m_world=c;this.m_linearDamping=b2Math.b2Clamp(1-a.linearDamping,0,1);this.m_angularDamping=b2Math.b2Clamp(1-a.angularDamping,0,1);this.m_force=new b2Vec2(0,0);this.m_mass=this.m_torque=
0;for(var h=Array(b2Settings.b2_maxShapesPerBody),e=0;e<b2Settings.b2_maxShapesPerBody;e++)h[e]=new b2MassData;this.m_shapeCount=0;this.m_center=new b2Vec2(0,0);for(e=0;e<b2Settings.b2_maxShapesPerBody;++e){f=a.shapes[e];if(null==f)break;g=h[e];f.ComputeMass(g);this.m_mass+=g.mass;this.m_center.x+=g.mass*(f.localPosition.x+g.center.x);this.m_center.y+=g.mass*(f.localPosition.y+g.center.y);++this.m_shapeCount}0<this.m_mass?(this.m_center.Multiply(1/this.m_mass),this.m_position.Add(b2Math.b2MulMV(this.m_R,
this.m_center))):this.m_flags|=b2Body.e_staticFlag;for(e=this.m_I=0;e<this.m_shapeCount;++e)f=a.shapes[e],g=h[e],this.m_I+=g.I,f=b2Math.SubtractVV(b2Math.AddVV(f.localPosition,g.center),this.m_center),this.m_I+=g.mass*b2Math.b2Dot(f,f);this.m_invMass=0<this.m_mass?1/this.m_mass:0;this.m_invI=0<this.m_I&&!1==a.preventRotation?1/this.m_I:this.m_I=0;this.m_linearVelocity=b2Math.AddVV(a.linearVelocity,b2Math.b2CrossFV(a.angularVelocity,this.m_center));this.m_angularVelocity=a.angularVelocity;this.m_shapeList=
this.m_next=this.m_prev=this.m_contactList=this.m_jointList=null;for(e=0;e<this.m_shapeCount;++e)f=a.shapes[e],g=b2Shape.Create(f,this,this.m_center),g.m_next=this.m_shapeList,this.m_shapeList=g;this.m_sleepTime=0;a.allowSleep&&(this.m_flags|=b2Body.e_allowSleepFlag);a.isSleeping&&(this.m_flags|=b2Body.e_sleepFlag);if(this.m_flags&b2Body.e_sleepFlag||0==this.m_invMass)this.m_linearVelocity.Set(0,0),this.m_angularVelocity=0;this.m_userData=a.userData},Destroy:function(){for(var a=this.m_shapeList;a;){var c=
a,a=a.m_next;b2Shape.Destroy(c)}},sMat0:new b2Mat22,SynchronizeShapes:function(){this.sMat0.Set(this.m_rotation0);for(var a=this.m_shapeList;null!=a;a=a.m_next)a.Synchronize(this.m_position0,this.sMat0,this.m_position,this.m_R)},QuickSyncShapes:function(){for(var a=this.m_shapeList;null!=a;a=a.m_next)a.QuickSync(this.m_position,this.m_R)},IsConnected:function(a){for(var c=this.m_jointList;null!=c;c=c.next)if(c.other==a)return!1==c.joint.m_collideConnected;return!1},Freeze:function(){this.m_flags|=
b2Body.e_frozenFlag;this.m_linearVelocity.SetZero();this.m_angularVelocity=0;for(var a=this.m_shapeList;null!=a;a=a.m_next)a.DestroyProxy()},m_flags:0,m_position:new b2Vec2,m_rotation:null,m_R:new b2Mat22(0),m_position0:new b2Vec2,m_rotation0:null,m_linearVelocity:null,m_angularVelocity:null,m_force:null,m_torque:null,m_center:null,m_world:null,m_prev:null,m_next:null,m_shapeList:null,m_shapeCount:0,m_jointList:null,m_contactList:null,m_mass:null,m_invMass:null,m_I:null,m_invI:null,m_linearDamping:null,
m_angularDamping:null,m_sleepTime:null,m_userData:null};b2Body.e_staticFlag=1;b2Body.e_frozenFlag=2;b2Body.e_islandFlag=4;b2Body.e_sleepFlag=8;b2Body.e_allowSleepFlag=16;b2Body.e_destroyFlag=32;var b2BodyDef=Class.create();
b2BodyDef.prototype={initialize:function(){this.shapes=[];this.userData=null;for(var a=0;a<b2Settings.b2_maxShapesPerBody;a++)this.shapes[a]=null;this.position=new b2Vec2(0,0);this.rotation=0;this.linearVelocity=new b2Vec2(0,0);this.angularDamping=this.linearDamping=this.angularVelocity=0;this.allowSleep=!0;this.preventRotation=this.isSleeping=!1},userData:null,shapes:[],position:null,rotation:null,linearVelocity:null,angularVelocity:null,linearDamping:null,angularDamping:null,allowSleep:null,isSleeping:null,
preventRotation:null,AddShape:function(a){for(var c=0;c<b2Settings.b2_maxShapesPerBody;++c)if(null==this.shapes[c]){this.shapes[c]=a;break}}};var b2CollisionFilter=Class.create();b2CollisionFilter.prototype={ShouldCollide:function(a,c){return a.m_groupIndex==c.m_groupIndex&&0!=a.m_groupIndex?0<a.m_groupIndex:0!=(a.m_maskBits&c.m_categoryBits)&&0!=(a.m_categoryBits&c.m_maskBits)},initialize:function(){}};b2CollisionFilter.b2_defaultFilter=new b2CollisionFilter;var b2Island=Class.create();
b2Island.prototype={initialize:function(a,c,e,f){var g=0;this.m_bodyCapacity=a;this.m_contactCapacity=c;this.m_jointCapacity=e;this.m_jointCount=this.m_contactCount=this.m_bodyCount=0;this.m_bodies=Array(a);for(g=0;g<a;g++)this.m_bodies[g]=null;this.m_contacts=Array(c);for(g=0;g<c;g++)this.m_contacts[g]=null;this.m_joints=Array(e);for(g=0;g<e;g++)this.m_joints[g]=null;this.m_allocator=f},Clear:function(){this.m_jointCount=this.m_contactCount=this.m_bodyCount=0},Solve:function(a,c){for(var e=0,f,e=
0;e<this.m_bodyCount;++e)f=this.m_bodies[e],0!=f.m_invMass&&(f.m_linearVelocity.Add(b2Math.MulFV(a.dt,b2Math.AddVV(c,b2Math.MulFV(f.m_invMass,f.m_force)))),f.m_angularVelocity+=a.dt*f.m_invI*f.m_torque,f.m_linearVelocity.Multiply(f.m_linearDamping),f.m_angularVelocity*=f.m_angularDamping,f.m_position0.SetV(f.m_position),f.m_rotation0=f.m_rotation);var g=new b2ContactSolver(this.m_contacts,this.m_contactCount,this.m_allocator);g.PreSolve();for(e=0;e<this.m_jointCount;++e)this.m_joints[e].PrepareVelocitySolver();
for(e=0;e<a.iterations;++e)for(g.SolveVelocityConstraints(),f=0;f<this.m_jointCount;++f)this.m_joints[f].SolveVelocityConstraints(a);for(e=0;e<this.m_bodyCount;++e)f=this.m_bodies[e],0!=f.m_invMass&&(f.m_position.x+=a.dt*f.m_linearVelocity.x,f.m_position.y+=a.dt*f.m_linearVelocity.y,f.m_rotation+=a.dt*f.m_angularVelocity,f.m_R.Set(f.m_rotation));for(e=0;e<this.m_jointCount;++e)this.m_joints[e].PreparePositionSolver();if(b2World.s_enablePositionCorrection)for(b2Island.m_positionIterationCount=0;b2Island.m_positionIterationCount<
a.iterations;++b2Island.m_positionIterationCount){f=g.SolvePositionConstraints(b2Settings.b2_contactBaumgarte);for(var h=!0,e=0;e<this.m_jointCount;++e)var k=this.m_joints[e].SolvePositionConstraints(),h=h&&k;if(f&&h)break}g.PostSolve();for(e=0;e<this.m_bodyCount;++e)f=this.m_bodies[e],0!=f.m_invMass&&(f.m_R.Set(f.m_rotation),f.SynchronizeShapes(),f.m_force.Set(0,0),f.m_torque=0)},UpdateSleep:function(a){for(var c=0,e,f=Number.MAX_VALUE,g=b2Settings.b2_linearSleepTolerance*b2Settings.b2_linearSleepTolerance,
h=b2Settings.b2_angularSleepTolerance*b2Settings.b2_angularSleepTolerance,c=0;c<this.m_bodyCount;++c)e=this.m_bodies[c],0!=e.m_invMass&&(0==(e.m_flags&b2Body.e_allowSleepFlag)&&(f=e.m_sleepTime=0),0==(e.m_flags&b2Body.e_allowSleepFlag)||e.m_angularVelocity*e.m_angularVelocity>h||b2Math.b2Dot(e.m_linearVelocity,e.m_linearVelocity)>g?f=e.m_sleepTime=0:(e.m_sleepTime+=a,f=b2Math.b2Min(f,e.m_sleepTime)));if(f>=b2Settings.b2_timeToSleep)for(c=0;c<this.m_bodyCount;++c)e=this.m_bodies[c],e.m_flags|=b2Body.e_sleepFlag,
e.m_linearVelocity.SetZero(),e.m_angularVelocity=0},AddBody:function(a){this.m_bodies[this.m_bodyCount++]=a},AddContact:function(a){this.m_contacts[this.m_contactCount++]=a},AddJoint:function(a){this.m_joints[this.m_jointCount++]=a},m_allocator:null,m_bodies:null,m_contacts:null,m_joints:null,m_bodyCount:0,m_jointCount:0,m_contactCount:0,m_bodyCapacity:0,m_contactCapacity:0,m_jointCapacity:0,m_positionError:null};b2Island.m_positionIterationCount=0;var b2TimeStep=Class.create();
b2TimeStep.prototype={dt:null,inv_dt:null,iterations:0,initialize:function(){}};var b2ContactNode=Class.create();b2ContactNode.prototype={other:null,contact:null,prev:null,next:null,initialize:function(){}};var b2Contact=Class.create();
b2Contact.prototype={GetManifolds:function(){return null},GetManifoldCount:function(){return this.m_manifoldCount},GetNext:function(){return this.m_next},GetShape1:function(){return this.m_shape1},GetShape2:function(){return this.m_shape2},initialize:function(a,c){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;a&&c?(this.m_shape1=a,this.m_shape2=c,this.m_manifoldCount=0,this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction),this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,
this.m_shape2.m_restitution),this.m_next=this.m_prev=null,this.m_node1.contact=null,this.m_node1.prev=null,this.m_node1.next=null,this.m_node1.other=null,this.m_node2.contact=null,this.m_node2.prev=null,this.m_node2.next=null,this.m_node2.other=null):this.m_shape2=this.m_shape1=null},Evaluate:function(){},m_flags:0,m_prev:null,m_next:null,m_node1:new b2ContactNode,m_node2:new b2ContactNode,m_shape1:null,m_shape2:null,m_manifoldCount:0,m_friction:null,m_restitution:null};b2Contact.e_islandFlag=1;
b2Contact.e_destroyFlag=2;b2Contact.AddType=function(a,c,e,f){b2Contact.s_registers[e][f].createFcn=a;b2Contact.s_registers[e][f].destroyFcn=c;b2Contact.s_registers[e][f].primary=!0;e!=f&&(b2Contact.s_registers[f][e].createFcn=a,b2Contact.s_registers[f][e].destroyFcn=c,b2Contact.s_registers[f][e].primary=!1)};
b2Contact.InitializeRegisters=function(){b2Contact.s_registers=Array(b2Shape.e_shapeTypeCount);for(var a=0;a<b2Shape.e_shapeTypeCount;a++){b2Contact.s_registers[a]=Array(b2Shape.e_shapeTypeCount);for(var c=0;c<b2Shape.e_shapeTypeCount;c++)b2Contact.s_registers[a][c]=new b2ContactRegister}b2Contact.AddType(b2CircleContact.Create,b2CircleContact.Destroy,b2Shape.e_circleShape,b2Shape.e_circleShape);b2Contact.AddType(b2PolyAndCircleContact.Create,b2PolyAndCircleContact.Destroy,b2Shape.e_polyShape,b2Shape.e_circleShape);
b2Contact.AddType(b2PolyContact.Create,b2PolyContact.Destroy,b2Shape.e_polyShape,b2Shape.e_polyShape)};b2Contact.Create=function(a,c,e){!1==b2Contact.s_initialized&&(b2Contact.InitializeRegisters(),b2Contact.s_initialized=!0);var f=a.m_type,g=c.m_type,h=b2Contact.s_registers[f][g].createFcn;if(h){if(b2Contact.s_registers[f][g].primary)return h(a,c,e);a=h(c,a,e);for(c=0;c<a.GetManifoldCount();++c)e=a.GetManifolds()[c],e.normal=e.normal.Negative();return a}return null};
b2Contact.Destroy=function(a,c){0<a.GetManifoldCount()&&(a.m_shape1.m_body.WakeUp(),a.m_shape2.m_body.WakeUp());var e=b2Contact.s_registers[a.m_shape1.m_type][a.m_shape2.m_type].destroyFcn;e(a,c)};b2Contact.s_registers=null;b2Contact.s_initialized=!1;var b2ContactConstraint=Class.create();
b2ContactConstraint.prototype={initialize:function(){this.normal=new b2Vec2;this.points=Array(b2Settings.b2_maxManifoldPoints);for(var a=0;a<b2Settings.b2_maxManifoldPoints;a++)this.points[a]=new b2ContactConstraintPoint},points:null,normal:new b2Vec2,manifold:null,body1:null,body2:null,friction:null,restitution:null,pointCount:0};var b2ContactConstraintPoint=Class.create();
b2ContactConstraintPoint.prototype={localAnchor1:new b2Vec2,localAnchor2:new b2Vec2,normalImpulse:null,tangentImpulse:null,positionImpulse:null,normalMass:null,tangentMass:null,separation:null,velocityBias:null,initialize:function(){this.localAnchor1=new b2Vec2;this.localAnchor2=new b2Vec2}};var b2ContactRegister=Class.create();b2ContactRegister.prototype={createFcn:null,destroyFcn:null,primary:null,initialize:function(){}};var b2ContactSolver=Class.create();
b2ContactSolver.prototype={initialize:function(a,c,e){this.m_constraints=[];this.m_allocator=e;e=0;var f,g;for(e=this.m_constraintCount=0;e<c;++e)this.m_constraintCount+=a[e].GetManifoldCount();for(e=0;e<this.m_constraintCount;e++)this.m_constraints[e]=new b2ContactConstraint;var h=0;for(e=0;e<c;++e)for(var k=a[e],l=k.m_shape1.m_body,m=k.m_shape2.m_body,n=k.GetManifoldCount(),p=k.GetManifolds(),q=k.m_friction,k=k.m_restitution,u=l.m_linearVelocity.x,r=l.m_linearVelocity.y,v=m.m_linearVelocity.x,x=
m.m_linearVelocity.y,z=l.m_angularVelocity,y=m.m_angularVelocity,A=0;A<n;++A){var F=p[A],D=F.normal.x,H=F.normal.y,E=this.m_constraints[h];E.body1=l;E.body2=m;E.manifold=F;E.normal.x=D;E.normal.y=H;E.pointCount=F.pointCount;E.friction=q;E.restitution=k;for(var I=0;I<E.pointCount;++I){var C=F.points[I],B=E.points[I];B.normalImpulse=C.normalImpulse;B.tangentImpulse=C.tangentImpulse;B.separation=C.separation;var G=C.position.x-l.m_position.x,J=C.position.y-l.m_position.y,L=C.position.x-m.m_position.x,
C=C.position.y-m.m_position.y;f=B.localAnchor1;g=l.m_R;f.x=G*g.col1.x+J*g.col1.y;f.y=G*g.col2.x+J*g.col2.y;f=B.localAnchor2;g=m.m_R;f.x=L*g.col1.x+C*g.col1.y;f.y=L*g.col2.x+C*g.col2.y;f=G*G+J*J;g=L*L+C*C;var K=G*D+J*H,N=L*D+C*H,M=l.m_invMass+m.m_invMass,M=M+(l.m_invI*(f-K*K)+m.m_invI*(g-N*N));B.normalMass=1/M;N=H;M=-D;K=G*N+J*M;N=L*N+C*M;M=l.m_invMass+m.m_invMass;M+=l.m_invI*(f-K*K)+m.m_invI*(g-N*N);B.tangentMass=1/M;B.velocityBias=0;0<B.separation&&(B.velocityBias=-60*B.separation);G=E.normal.x*
(v+-y*C-u- -z*J)+E.normal.y*(x+y*L-r-z*G);G<-b2Settings.b2_velocityThreshold&&(B.velocityBias+=-E.restitution*G)}++h}},PreSolve:function(){for(var a,c,e=0;e<this.m_constraintCount;++e){var f=this.m_constraints[e],g=f.body1,h=f.body2,k=g.m_invMass,l=g.m_invI,m=h.m_invMass,n=h.m_invI,p=f.normal.x,q=f.normal.y,u=q,r=-p,v=0,x=0;if(b2World.s_enableWarmStarting)for(x=f.pointCount,v=0;v<x;++v){var z=f.points[v],y=z.normalImpulse*p+z.tangentImpulse*u,A=z.normalImpulse*q+z.tangentImpulse*r;c=g.m_R;a=z.localAnchor1;
var F=c.col1.x*a.x+c.col2.x*a.y,D=c.col1.y*a.x+c.col2.y*a.y;c=h.m_R;a=z.localAnchor2;var H=c.col1.x*a.x+c.col2.x*a.y;a=c.col1.y*a.x+c.col2.y*a.y;g.m_angularVelocity-=l*(F*A-D*y);g.m_linearVelocity.x-=k*y;g.m_linearVelocity.y-=k*A;h.m_angularVelocity+=n*(H*A-a*y);h.m_linearVelocity.x+=m*y;h.m_linearVelocity.y+=m*A;z.positionImpulse=0}else for(x=f.pointCount,v=0;v<x;++v)g=f.points[v],g.normalImpulse=0,g.tangentImpulse=0,g.positionImpulse=0}},SolveVelocityConstraints:function(){for(var a=0,c,e,f,g,h,
k,l,m,n=0;n<this.m_constraintCount;++n){for(var p=this.m_constraints[n],q=p.body1,u=p.body2,r=q.m_angularVelocity,v=q.m_linearVelocity,x=u.m_angularVelocity,z=u.m_linearVelocity,y=q.m_invMass,A=q.m_invI,F=u.m_invMass,D=u.m_invI,H=p.normal.x,E=p.normal.y,I=E,C=-H,B=p.pointCount,a=0;a<B;++a)c=p.points[a],h=q.m_R,k=c.localAnchor1,e=h.col1.x*k.x+h.col2.x*k.y,f=h.col1.y*k.x+h.col2.y*k.y,h=u.m_R,k=c.localAnchor2,g=h.col1.x*k.x+h.col2.x*k.y,h=h.col1.y*k.x+h.col2.y*k.y,k=z.x+-x*h-v.x- -r*f,l=z.y+x*g-v.y-
r*e,k=-c.normalMass*(k*H+l*E-c.velocityBias),l=b2Math.b2Max(c.normalImpulse+k,0),k=l-c.normalImpulse,m=k*H,k*=E,v.x-=y*m,v.y-=y*k,r-=A*(e*k-f*m),z.x+=F*m,z.y+=F*k,x+=D*(g*k-h*m),c.normalImpulse=l,k=z.x+-x*h-v.x- -r*f,l=z.y+x*g-v.y-r*e,k=c.tangentMass*-(k*I+l*C),l=p.friction*c.normalImpulse,l=b2Math.b2Clamp(c.tangentImpulse+k,-l,l),k=l-c.tangentImpulse,m=k*I,k*=C,v.x-=y*m,v.y-=y*k,r-=A*(e*k-f*m),z.x+=F*m,z.y+=F*k,x+=D*(g*k-h*m),c.tangentImpulse=l;q.m_angularVelocity=r;u.m_angularVelocity=x}},SolvePositionConstraints:function(a){for(var c=
0,e,f,g=0;g<this.m_constraintCount;++g){for(var h=this.m_constraints[g],k=h.body1,l=h.body2,m=k.m_position,n=k.m_rotation,p=l.m_position,q=l.m_rotation,u=k.m_invMass,r=k.m_invI,v=l.m_invMass,x=l.m_invI,z=h.normal.x,y=h.normal.y,A=h.pointCount,F=0;F<A;++F){var D=h.points[F];e=k.m_R;f=D.localAnchor1;var H=e.col1.x*f.x+e.col2.x*f.y,E=e.col1.y*f.x+e.col2.y*f.y;e=l.m_R;f=D.localAnchor2;var I=e.col1.x*f.x+e.col2.x*f.y;e=e.col1.y*f.x+e.col2.y*f.y;f=(p.x+I-(m.x+H))*z+(p.y+e-(m.y+E))*y+D.separation;c=b2Math.b2Min(c,
f);f=a*b2Math.b2Clamp(f+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);f*=-D.normalMass;var C=D.positionImpulse;D.positionImpulse=b2Math.b2Max(C+f,0);f=D.positionImpulse-C;D=f*z;f*=y;m.x-=u*D;m.y-=u*f;n-=r*(H*f-E*D);k.m_R.Set(n);p.x+=v*D;p.y+=v*f;q+=x*(I*f-e*D);l.m_R.Set(q)}k.m_rotation=n;l.m_rotation=q}return c>=-b2Settings.b2_linearSlop},PostSolve:function(){for(var a=0;a<this.m_constraintCount;++a)for(var c=this.m_constraints[a],e=c.manifold,f=0;f<c.pointCount;++f){var g=e.points[f],
h=c.points[f];g.normalImpulse=h.normalImpulse;g.tangentImpulse=h.tangentImpulse}},m_allocator:null,m_constraints:[],m_constraintCount:0};var b2CircleContact=Class.create();Object.extend(b2CircleContact.prototype,b2Contact.prototype);
Object.extend(b2CircleContact.prototype,{initialize:function(a,c){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;a&&c?(this.m_shape1=a,this.m_shape2=c,this.m_manifoldCount=0,this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction),this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution),this.m_next=this.m_prev=null,this.m_node1.contact=null,this.m_node1.prev=null,this.m_node1.next=null,this.m_node1.other=null,this.m_node2.contact=
null,this.m_node2.prev=null,this.m_node2.next=null,this.m_node2.other=null,this.m_manifold=[new b2Manifold],this.m_manifold[0].pointCount=0,this.m_manifold[0].points[0].normalImpulse=0,this.m_manifold[0].points[0].tangentImpulse=0):this.m_shape2=this.m_shape1=null},Evaluate:function(){b2Collision.b2CollideCircle(this.m_manifold[0],this.m_shape1,this.m_shape2,!1);this.m_manifoldCount=0<this.m_manifold[0].pointCount?1:0},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});
b2CircleContact.Create=function(a,c,e){return new b2CircleContact(a,c)};b2CircleContact.Destroy=function(a,c){};var b2Conservative=Class.create();b2Conservative.prototype={initialize:function(){}};b2Conservative.R1=new b2Mat22;b2Conservative.R2=new b2Mat22;b2Conservative.x1=new b2Vec2;b2Conservative.x2=new b2Vec2;
b2Conservative.Conservative=function(a,c){var e=a.GetBody(),f=c.GetBody(),g=e.m_position.x-e.m_position0.x,h=e.m_position.y-e.m_position0.y,k=e.m_rotation-e.m_rotation0,l=f.m_position.x-f.m_position0.x,m=f.m_position.y-f.m_position0.y,n=f.m_rotation-f.m_rotation0,p=a.GetMaxRadius(),q=c.GetMaxRadius(),u=e.m_position0.x,r=e.m_position0.y,v=e.m_rotation0,x=f.m_position0.x,z=f.m_position0.y,y=f.m_rotation0,A=u,F=r,D=v,H=x,E=z,I=y;b2Conservative.R1.Set(D);b2Conservative.R2.Set(I);a.QuickSync(p1,b2Conservative.R1);
c.QuickSync(p2,b2Conservative.R2);var C=0,B,G;B=0;for(var J=!0,L=0;10>L;++L){var K=b2Distance.Distance(b2Conservative.x1,b2Conservative.x2,a,c);if(K<b2Settings.b2_linearSlop){J=0==L?!1:!0;break}if(0==L){B=b2Conservative.x2.x-b2Conservative.x1.x;G=b2Conservative.x2.y-b2Conservative.x1.y;Math.sqrt(B*B+G*G);B=B*(g-l)+G*(h-m)+Math.abs(k)*p+Math.abs(n)*q;if(Math.abs(B)<Number.MIN_VALUE){J=!1;break}B=1/B}K=C+K*B;if(0>K||1<K){J=!1;break}if(K<(1+100*Number.MIN_VALUE)*C){J=!0;break}C=K;A=u+C*v1.x;F=r+C*v1.y;
D=v+C*k;H=x+C*v2.x;E=z+C*v2.y;I=y+C*n;b2Conservative.R1.Set(D);b2Conservative.R2.Set(I);a.QuickSync(p1,b2Conservative.R1);c.QuickSync(p2,b2Conservative.R2)}if(J)return B=b2Conservative.x2.x-b2Conservative.x1.x,G=b2Conservative.x2.y-b2Conservative.x1.y,g=Math.sqrt(B*B+G*G),g>FLT_EPSILON&&(d*=b2_linearSlop/g),e.IsStatic()?(e.m_position.x=A,e.m_position.y=F):(e.m_position.x=A-B,e.m_position.y=F-G),e.m_rotation=D,e.m_R.Set(D),e.QuickSyncShapes(),f.IsStatic()?(f.m_position.x=H,f.m_position.y=E):(f.m_position.x=
H+B,f.m_position.y=E+G),f.m_position.x=H+B,f.m_position.y=E+G,f.m_rotation=I,f.m_R.Set(I),f.QuickSyncShapes(),!0;a.QuickSync(e.m_position,e.m_R);c.QuickSync(f.m_position,f.m_R);return!1};var b2NullContact=Class.create();Object.extend(b2NullContact.prototype,b2Contact.prototype);
Object.extend(b2NullContact.prototype,{initialize:function(a,c){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;a&&c?(this.m_shape1=a,this.m_shape2=c,this.m_manifoldCount=0,this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction),this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution),this.m_next=this.m_prev=null,this.m_node1.contact=null,this.m_node1.prev=null,this.m_node1.next=null,this.m_node1.other=null,this.m_node2.contact=
null,this.m_node2.prev=null,this.m_node2.next=null,this.m_node2.other=null):this.m_shape2=this.m_shape1=null},Evaluate:function(){},GetManifolds:function(){return null}});var b2PolyAndCircleContact=Class.create();Object.extend(b2PolyAndCircleContact.prototype,b2Contact.prototype);
Object.extend(b2PolyAndCircleContact.prototype,{initialize:function(a,c){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;a&&c?(this.m_shape1=a,this.m_shape2=c,this.m_manifoldCount=0,this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction),this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution),this.m_next=this.m_prev=null,this.m_node1.contact=null,this.m_node1.prev=null,this.m_node1.next=null,this.m_node1.other=null,
this.m_node2.contact=null,this.m_node2.prev=null,this.m_node2.next=null,this.m_node2.other=null,this.m_manifold=[new b2Manifold],b2Settings.b2Assert(this.m_shape1.m_type==b2Shape.e_polyShape),b2Settings.b2Assert(this.m_shape2.m_type==b2Shape.e_circleShape),this.m_manifold[0].pointCount=0,this.m_manifold[0].points[0].normalImpulse=0,this.m_manifold[0].points[0].tangentImpulse=0):this.m_shape2=this.m_shape1=null},Evaluate:function(){b2Collision.b2CollidePolyAndCircle(this.m_manifold[0],this.m_shape1,
this.m_shape2,!1);this.m_manifoldCount=0<this.m_manifold[0].pointCount?1:0},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});b2PolyAndCircleContact.Create=function(a,c,e){return new b2PolyAndCircleContact(a,c)};b2PolyAndCircleContact.Destroy=function(a,c){};var b2PolyContact=Class.create();Object.extend(b2PolyContact.prototype,b2Contact.prototype);
Object.extend(b2PolyContact.prototype,{initialize:function(a,c){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;a&&c?(this.m_shape1=a,this.m_shape2=c,this.m_manifoldCount=0,this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction),this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution),this.m_next=this.m_prev=null,this.m_node1.contact=null,this.m_node1.prev=null,this.m_node1.next=null,this.m_node1.other=null,this.m_node2.contact=
null,this.m_node2.prev=null,this.m_node2.next=null,this.m_node2.other=null,this.m0=new b2Manifold,this.m_manifold=[new b2Manifold],this.m_manifold[0].pointCount=0):this.m_shape2=this.m_shape1=null},m0:new b2Manifold,Evaluate:function(){for(var a=this.m_manifold[0],c=this.m0.points,e=0;e<a.pointCount;e++){var f=c[e],g=a.points[e];f.normalImpulse=g.normalImpulse;f.tangentImpulse=g.tangentImpulse;f.id=g.id.Copy()}this.m0.pointCount=a.pointCount;b2Collision.b2CollidePoly(a,this.m_shape1,this.m_shape2,
!1);if(0<a.pointCount){c=[!1,!1];for(e=0;e<a.pointCount;++e){f=a.points[e];f.normalImpulse=0;f.tangentImpulse=0;for(var g=f.id.key,h=0;h<this.m0.pointCount;++h)if(!0!=c[h]){var k=this.m0.points[h];if(k.id.key==g){c[h]=!0;f.normalImpulse=k.normalImpulse;f.tangentImpulse=k.tangentImpulse;break}}}this.m_manifoldCount=1}else this.m_manifoldCount=0},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});b2PolyContact.Create=function(a,c,e){return new b2PolyContact(a,c)};
b2PolyContact.Destroy=function(a,c){};var b2ContactManager=Class.create();Object.extend(b2ContactManager.prototype,b2PairCallback.prototype);
Object.extend(b2ContactManager.prototype,{initialize:function(){this.m_nullContact=new b2NullContact;this.m_world=null;this.m_destroyImmediate=!1},PairAdded:function(a,c){var e=a,f=c,g=e.m_body,h=f.m_body;if(g.IsStatic()&&h.IsStatic()||e.m_body==f.m_body||h.IsConnected(g)||null!=this.m_world.m_filter&&!1==this.m_world.m_filter.ShouldCollide(e,f))return this.m_nullContact;0==h.m_invMass&&(g=e,e=f,f=g);e=b2Contact.Create(e,f,this.m_world.m_blockAllocator);if(null==e)return this.m_nullContact;e.m_prev=
null;e.m_next=this.m_world.m_contactList;null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=e);this.m_world.m_contactList=e;this.m_world.m_contactCount++;return e},PairRemoved:function(a,c,e){null!=e&&e!=this.m_nullContact&&(!0==this.m_destroyImmediate?this.DestroyContact(e):e.m_flags|=b2Contact.e_destroyFlag)},DestroyContact:function(a){a.m_prev&&(a.m_prev.m_next=a.m_next);a.m_next&&(a.m_next.m_prev=a.m_prev);a==this.m_world.m_contactList&&(this.m_world.m_contactList=a.m_next);
if(0<a.GetManifoldCount()){var c=a.m_shape1.m_body,e=a.m_shape2.m_body,f=a.m_node1,g=a.m_node2;c.WakeUp();e.WakeUp();f.prev&&(f.prev.next=f.next);f.next&&(f.next.prev=f.prev);f==c.m_contactList&&(c.m_contactList=f.next);f.prev=null;f.next=null;g.prev&&(g.prev.next=g.next);g.next&&(g.next.prev=g.prev);g==e.m_contactList&&(e.m_contactList=g.next);g.prev=null;g.next=null}b2Contact.Destroy(a,this.m_world.m_blockAllocator);--this.m_world.m_contactCount},CleanContactList:function(){for(var a=this.m_world.m_contactList;null!=
a;){var c=a,a=a.m_next;c.m_flags&b2Contact.e_destroyFlag&&this.DestroyContact(c)}},Collide:function(){for(var a,c,e,f,g=this.m_world.m_contactList;null!=g;g=g.m_next)g.m_shape1.m_body.IsSleeping()&&g.m_shape2.m_body.IsSleeping()||(a=g.GetManifoldCount(),g.Evaluate(),c=g.GetManifoldCount(),0==a&&0<c?(a=g.m_shape1.m_body,c=g.m_shape2.m_body,e=g.m_node1,f=g.m_node2,e.contact=g,e.other=c,e.prev=null,e.next=a.m_contactList,null!=e.next&&(e.next.prev=g.m_node1),a.m_contactList=g.m_node1,f.contact=g,f.other=
a,f.prev=null,f.next=c.m_contactList,null!=f.next&&(f.next.prev=f),c.m_contactList=f):0<a&&0==c&&(a=g.m_shape1.m_body,c=g.m_shape2.m_body,e=g.m_node1,f=g.m_node2,e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e==a.m_contactList&&(a.m_contactList=e.next),e.prev=null,e.next=null,f.prev&&(f.prev.next=f.next),f.next&&(f.next.prev=f.prev),f==c.m_contactList&&(c.m_contactList=f.next),f.prev=null,f.next=null))},m_world:null,m_nullContact:new b2NullContact,m_destroyImmediate:null});
var b2World=Class.create();
b2World.prototype={initialize:function(a,c,e){this.step=new b2TimeStep;this.m_contactManager=new b2ContactManager;this.m_listener=null;this.m_filter=b2CollisionFilter.b2_defaultFilter;this.m_jointList=this.m_contactList=this.m_bodyList=null;this.m_jointCount=this.m_contactCount=this.m_bodyCount=0;this.m_bodyDestroyList=null;this.m_allowSleep=e;this.m_gravity=c;this.m_contactManager.m_world=this;this.m_broadPhase=new b2BroadPhase(a,this.m_contactManager);a=new b2BodyDef;this.m_groundBody=this.CreateBody(a)},
SetListener:function(a){this.m_listener=a},SetFilter:function(a){this.m_filter=a},CreateBody:function(a){a=new b2Body(a,this);a.m_prev=null;if(a.m_next=this.m_bodyList)this.m_bodyList.m_prev=a;this.m_bodyList=a;++this.m_bodyCount;return a},DestroyBody:function(a){a.m_flags&b2Body.e_destroyFlag||(a.m_prev&&(a.m_prev.m_next=a.m_next),a.m_next&&(a.m_next.m_prev=a.m_prev),a==this.m_bodyList&&(this.m_bodyList=a.m_next),a.m_flags|=b2Body.e_destroyFlag,--this.m_bodyCount,a.m_prev=null,a.m_next=this.m_bodyDestroyList,
this.m_bodyDestroyList=a)},CleanBodyList:function(){this.m_contactManager.m_destroyImmediate=!0;for(var a=this.m_bodyDestroyList;a;){for(var c=a,a=a.m_next,e=c.m_jointList;e;){var f=e,e=e.next;this.m_listener&&this.m_listener.NotifyJointDestroyed(f.joint);this.DestroyJoint(f.joint)}c.Destroy()}this.m_bodyDestroyList=null;this.m_contactManager.m_destroyImmediate=!1},CreateJoint:function(a){var c=b2Joint.Create(a,this.m_blockAllocator);c.m_prev=null;if(c.m_next=this.m_jointList)this.m_jointList.m_prev=
c;this.m_jointList=c;++this.m_jointCount;c.m_node1.joint=c;c.m_node1.other=c.m_body2;c.m_node1.prev=null;if(c.m_node1.next=c.m_body1.m_jointList)c.m_body1.m_jointList.prev=c.m_node1;c.m_body1.m_jointList=c.m_node1;c.m_node2.joint=c;c.m_node2.other=c.m_body1;c.m_node2.prev=null;if(c.m_node2.next=c.m_body2.m_jointList)c.m_body2.m_jointList.prev=c.m_node2;c.m_body2.m_jointList=c.m_node2;if(!1==a.collideConnected)for(a=(a.body1.m_shapeCount<a.body2.m_shapeCount?a.body1:a.body2).m_shapeList;a;a=a.m_next)a.ResetProxy(this.m_broadPhase);
return c},DestroyJoint:function(a){var c=a.m_collideConnected;a.m_prev&&(a.m_prev.m_next=a.m_next);a.m_next&&(a.m_next.m_prev=a.m_prev);a==this.m_jointList&&(this.m_jointList=a.m_next);var e=a.m_body1,f=a.m_body2;e.WakeUp();f.WakeUp();a.m_node1.prev&&(a.m_node1.prev.next=a.m_node1.next);a.m_node1.next&&(a.m_node1.next.prev=a.m_node1.prev);a.m_node1==e.m_jointList&&(e.m_jointList=a.m_node1.next);a.m_node1.prev=null;a.m_node1.next=null;a.m_node2.prev&&(a.m_node2.prev.next=a.m_node2.next);a.m_node2.next&&
(a.m_node2.next.prev=a.m_node2.prev);a.m_node2==f.m_jointList&&(f.m_jointList=a.m_node2.next);a.m_node2.prev=null;a.m_node2.next=null;b2Joint.Destroy(a,this.m_blockAllocator);--this.m_jointCount;if(!1==c)for(a=(e.m_shapeCount<f.m_shapeCount?e:f).m_shapeList;a;a=a.m_next)a.ResetProxy(this.m_broadPhase)},GetGroundBody:function(){return this.m_groundBody},step:new b2TimeStep,Step:function(a,c){var e,f;this.step.dt=a;this.step.iterations=c;this.step.inv_dt=0<a?1/a:0;this.m_positionIterationCount=0;this.m_contactManager.CleanContactList();
this.CleanBodyList();this.m_contactManager.Collide();var g=new b2Island(this.m_bodyCount,this.m_contactCount,this.m_jointCount,this.m_stackAllocator);for(e=this.m_bodyList;null!=e;e=e.m_next)e.m_flags&=~b2Body.e_islandFlag;for(var h=this.m_contactList;null!=h;h=h.m_next)h.m_flags&=~b2Contact.e_islandFlag;for(h=this.m_jointList;null!=h;h=h.m_next)h.m_islandFlag=!1;for(var h=Array(this.m_bodyCount),k=0;k<this.m_bodyCount;k++)h[k]=null;for(k=this.m_bodyList;null!=k;k=k.m_next)if(!(k.m_flags&(b2Body.e_staticFlag|
b2Body.e_islandFlag|b2Body.e_sleepFlag|b2Body.e_frozenFlag))){g.Clear();var l=0;h[l++]=k;for(k.m_flags|=b2Body.e_islandFlag;0<l;)if(e=h[--l],g.AddBody(e),e.m_flags&=~b2Body.e_sleepFlag,!(e.m_flags&b2Body.e_staticFlag)){for(var m=e.m_contactList;null!=m;m=m.next)m.contact.m_flags&b2Contact.e_islandFlag||(g.AddContact(m.contact),m.contact.m_flags|=b2Contact.e_islandFlag,f=m.other,f.m_flags&b2Body.e_islandFlag||(h[l++]=f,f.m_flags|=b2Body.e_islandFlag));for(e=e.m_jointList;null!=e;e=e.next)!0!=e.joint.m_islandFlag&&
(g.AddJoint(e.joint),e.joint.m_islandFlag=!0,f=e.other,f.m_flags&b2Body.e_islandFlag||(h[l++]=f,f.m_flags|=b2Body.e_islandFlag))}g.Solve(this.step,this.m_gravity);this.m_positionIterationCount=b2Math.b2Max(this.m_positionIterationCount,b2Island.m_positionIterationCount);this.m_allowSleep&&g.UpdateSleep(a);for(f=0;f<g.m_bodyCount;++f)e=g.m_bodies[f],e.m_flags&b2Body.e_staticFlag&&(e.m_flags&=~b2Body.e_islandFlag),e.IsFrozen()&&this.m_listener&&this.m_listener.NotifyBoundaryViolated(e)==b2WorldListener.b2_destroyBody&&
(this.DestroyBody(e),g.m_bodies[f]=null)}this.m_broadPhase.Commit()},Query:function(a,c,e){var f=[];a=this.m_broadPhase.QueryAABB(a,f,e);for(e=0;e<a;++e)c[e]=f[e];return a},GetBodyList:function(){return this.m_bodyList},GetJointList:function(){return this.m_jointList},GetContactList:function(){return this.m_contactList},m_blockAllocator:null,m_stackAllocator:null,m_broadPhase:null,m_contactManager:new b2ContactManager,m_bodyList:null,m_contactList:null,m_jointList:null,m_bodyCount:0,m_contactCount:0,
m_jointCount:0,m_bodyDestroyList:null,m_gravity:null,m_allowSleep:null,m_groundBody:null,m_listener:null,m_filter:null,m_positionIterationCount:0};b2World.s_enablePositionCorrection=1;b2World.s_enableWarmStarting=1;var b2WorldListener=Class.create();b2WorldListener.prototype={NotifyJointDestroyed:function(a){},NotifyBoundaryViolated:function(a){return b2WorldListener.b2_freezeBody},initialize:function(){}};b2WorldListener.b2_freezeBody=0;b2WorldListener.b2_destroyBody=1;var b2JointNode=Class.create();
b2JointNode.prototype={other:null,joint:null,prev:null,next:null,initialize:function(){}};var b2Joint=Class.create();
b2Joint.prototype={GetType:function(){return this.m_type},GetAnchor1:function(){return null},GetAnchor2:function(){return null},GetReactionForce:function(a){return null},GetReactionTorque:function(a){return 0},GetBody1:function(){return this.m_body1},GetBody2:function(){return this.m_body2},GetNext:function(){return this.m_next},GetUserData:function(){return this.m_userData},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_next=this.m_prev=
null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=!1;this.m_userData=a.userData},PrepareVelocitySolver:function(){},SolveVelocityConstraints:function(a){},PreparePositionSolver:function(){},SolvePositionConstraints:function(){return!1},m_type:0,m_prev:null,m_next:null,m_node1:new b2JointNode,m_node2:new b2JointNode,m_body1:null,m_body2:null,m_islandFlag:null,m_collideConnected:null,m_userData:null};
b2Joint.Create=function(a,c){var e=null;switch(a.type){case b2Joint.e_distanceJoint:e=new b2DistanceJoint(a);break;case b2Joint.e_mouseJoint:e=new b2MouseJoint(a);break;case b2Joint.e_prismaticJoint:e=new b2PrismaticJoint(a);break;case b2Joint.e_revoluteJoint:e=new b2RevoluteJoint(a);break;case b2Joint.e_pulleyJoint:e=new b2PulleyJoint(a);break;case b2Joint.e_gearJoint:e=new b2GearJoint(a)}return e};b2Joint.Destroy=function(a,c){};b2Joint.e_unknownJoint=0;b2Joint.e_revoluteJoint=1;
b2Joint.e_prismaticJoint=2;b2Joint.e_distanceJoint=3;b2Joint.e_pulleyJoint=4;b2Joint.e_mouseJoint=5;b2Joint.e_gearJoint=6;b2Joint.e_inactiveLimit=0;b2Joint.e_atLowerLimit=1;b2Joint.e_atUpperLimit=2;b2Joint.e_equalLimits=3;var b2JointDef=Class.create();b2JointDef.prototype={initialize:function(){this.type=b2Joint.e_unknownJoint;this.body2=this.body1=this.userData=null;this.collideConnected=!1},type:0,userData:null,body1:null,body2:null,collideConnected:null};var b2DistanceJoint=Class.create();
Object.extend(b2DistanceJoint.prototype,b2Joint.prototype);
Object.extend(b2DistanceJoint.prototype,{initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_next=this.m_prev=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=!1;this.m_userData=a.userData;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_u=new b2Vec2;var c,e,f;c=this.m_body1.m_R;e=a.anchorPoint1.x-this.m_body1.m_position.x;f=a.anchorPoint1.y-this.m_body1.m_position.y;
this.m_localAnchor1.x=e*c.col1.x+f*c.col1.y;this.m_localAnchor1.y=e*c.col2.x+f*c.col2.y;c=this.m_body2.m_R;e=a.anchorPoint2.x-this.m_body2.m_position.x;f=a.anchorPoint2.y-this.m_body2.m_position.y;this.m_localAnchor2.x=e*c.col1.x+f*c.col1.y;this.m_localAnchor2.y=e*c.col2.x+f*c.col2.y;e=a.anchorPoint2.x-a.anchorPoint1.x;f=a.anchorPoint2.y-a.anchorPoint1.y;this.m_length=Math.sqrt(e*e+f*f);this.m_impulse=0},PrepareVelocitySolver:function(){var a;a=this.m_body1.m_R;var c=a.col1.x*this.m_localAnchor1.x+
a.col2.x*this.m_localAnchor1.y,e=a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y;a=this.m_body2.m_R;var f=a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y;a=a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y;this.m_u.x=this.m_body2.m_position.x+f-this.m_body1.m_position.x-c;this.m_u.y=this.m_body2.m_position.y+a-this.m_body1.m_position.y-e;var g=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);g>b2Settings.b2_linearSlop?this.m_u.Multiply(1/g):this.m_u.SetZero();
var g=c*this.m_u.y-e*this.m_u.x,h=f*this.m_u.y-a*this.m_u.x;this.m_mass=this.m_body1.m_invMass+this.m_body1.m_invI*g*g+this.m_body2.m_invMass+this.m_body2.m_invI*h*h;this.m_mass=1/this.m_mass;b2World.s_enableWarmStarting?(g=this.m_impulse*this.m_u.x,h=this.m_impulse*this.m_u.y,this.m_body1.m_linearVelocity.x-=this.m_body1.m_invMass*g,this.m_body1.m_linearVelocity.y-=this.m_body1.m_invMass*h,this.m_body1.m_angularVelocity-=this.m_body1.m_invI*(c*h-e*g),this.m_body2.m_linearVelocity.x+=this.m_body2.m_invMass*
g,this.m_body2.m_linearVelocity.y+=this.m_body2.m_invMass*h,this.m_body2.m_angularVelocity+=this.m_body2.m_invI*(f*h-a*g)):this.m_impulse=0},SolveVelocityConstraints:function(a){var c;c=this.m_body1.m_R;a=c.col1.x*this.m_localAnchor1.x+c.col2.x*this.m_localAnchor1.y;var e=c.col1.y*this.m_localAnchor1.x+c.col2.y*this.m_localAnchor1.y;c=this.m_body2.m_R;var f=c.col1.x*this.m_localAnchor2.x+c.col2.x*this.m_localAnchor2.y;c=c.col1.y*this.m_localAnchor2.x+c.col2.y*this.m_localAnchor2.y;var g=-this.m_mass*
(this.m_u.x*(this.m_body2.m_linearVelocity.x+-this.m_body2.m_angularVelocity*c-(this.m_body1.m_linearVelocity.x+-this.m_body1.m_angularVelocity*e))+this.m_u.y*(this.m_body2.m_linearVelocity.y+this.m_body2.m_angularVelocity*f-(this.m_body1.m_linearVelocity.y+this.m_body1.m_angularVelocity*a)));this.m_impulse+=g;var h=g*this.m_u.x,g=g*this.m_u.y;this.m_body1.m_linearVelocity.x-=this.m_body1.m_invMass*h;this.m_body1.m_linearVelocity.y-=this.m_body1.m_invMass*g;this.m_body1.m_angularVelocity-=this.m_body1.m_invI*
(a*g-e*h);this.m_body2.m_linearVelocity.x+=this.m_body2.m_invMass*h;this.m_body2.m_linearVelocity.y+=this.m_body2.m_invMass*g;this.m_body2.m_angularVelocity+=this.m_body2.m_invI*(f*g-c*h)},SolvePositionConstraints:function(){var a;a=this.m_body1.m_R;var c=a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y,e=a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y;a=this.m_body2.m_R;var f=a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y;a=a.col1.y*this.m_localAnchor2.x+
a.col2.y*this.m_localAnchor2.y;var g=this.m_body2.m_position.x+f-this.m_body1.m_position.x-c,h=this.m_body2.m_position.y+a-this.m_body1.m_position.y-e,k=Math.sqrt(g*g+h*h),g=g/k,h=h/k,k=k-this.m_length,k=b2Math.b2Clamp(k,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection),l=-this.m_mass*k;this.m_u.Set(g,h);g=l*this.m_u.x;h=l*this.m_u.y;this.m_body1.m_position.x-=this.m_body1.m_invMass*g;this.m_body1.m_position.y-=this.m_body1.m_invMass*h;this.m_body1.m_rotation-=this.m_body1.m_invI*
(c*h-e*g);this.m_body2.m_position.x+=this.m_body2.m_invMass*g;this.m_body2.m_position.y+=this.m_body2.m_invMass*h;this.m_body2.m_rotation+=this.m_body2.m_invI*(f*h-a*g);this.m_body1.m_R.Set(this.m_body1.m_rotation);this.m_body2.m_R.Set(this.m_body2.m_rotation);return b2Math.b2Abs(k)<b2Settings.b2_linearSlop},GetAnchor1:function(){return b2Math.AddVV(this.m_body1.m_position,b2Math.b2MulMV(this.m_body1.m_R,this.m_localAnchor1))},GetAnchor2:function(){return b2Math.AddVV(this.m_body2.m_position,b2Math.b2MulMV(this.m_body2.m_R,
this.m_localAnchor2))},GetReactionForce:function(a){var c=new b2Vec2;c.SetV(this.m_u);c.Multiply(this.m_impulse*a);return c},GetReactionTorque:function(a){return 0},m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_u:new b2Vec2,m_impulse:null,m_mass:null,m_length:null});var b2DistanceJointDef=Class.create();Object.extend(b2DistanceJointDef.prototype,b2JointDef.prototype);
Object.extend(b2DistanceJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.body2=this.body1=this.userData=null;this.collideConnected=!1;this.anchorPoint1=new b2Vec2;this.anchorPoint2=new b2Vec2;this.type=b2Joint.e_distanceJoint},anchorPoint1:new b2Vec2,anchorPoint2:new b2Vec2});var b2Jacobian=Class.create();
b2Jacobian.prototype={linear1:new b2Vec2,angular1:null,linear2:new b2Vec2,angular2:null,SetZero:function(){this.linear1.SetZero();this.angular1=0;this.linear2.SetZero();this.angular2=0},Set:function(a,c,e,f){this.linear1.SetV(a);this.angular1=c;this.linear2.SetV(e);this.angular2=f},Compute:function(a,c,e,f){return this.linear1.x*a.x+this.linear1.y*a.y+this.angular1*c+(this.linear2.x*e.x+this.linear2.y*e.y)+this.angular2*f},initialize:function(){this.linear1=new b2Vec2;this.linear2=new b2Vec2}};
var b2GearJoint=Class.create();Object.extend(b2GearJoint.prototype,b2Joint.prototype);
Object.extend(b2GearJoint.prototype,{GetAnchor1:function(){var a=this.m_body1.m_R;return new b2Vec2(this.m_body1.m_position.x+(a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y),this.m_body1.m_position.y+(a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y))},GetAnchor2:function(){var a=this.m_body2.m_R;return new b2Vec2(this.m_body2.m_position.x+(a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y),this.m_body2.m_position.y+(a.col1.y*this.m_localAnchor2.x+a.col2.y*
this.m_localAnchor2.y))},GetReactionForce:function(a){return new b2Vec2},GetReactionTorque:function(a){return 0},GetRatio:function(){return this.m_ratio},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_next=this.m_prev=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=!1;this.m_userData=a.userData;this.m_groundAnchor1=new b2Vec2;this.m_groundAnchor2=new b2Vec2;this.m_localAnchor1=new b2Vec2;
this.m_localAnchor2=new b2Vec2;this.m_J=new b2Jacobian;this.m_prismatic2=this.m_revolute2=this.m_prismatic1=this.m_revolute1=null;var c,e;this.m_ground1=a.joint1.m_body1;this.m_body1=a.joint1.m_body2;a.joint1.m_type==b2Joint.e_revoluteJoint?(this.m_revolute1=a.joint1,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),c=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=a.joint1,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),
this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),c=this.m_prismatic1.GetJointTranslation());this.m_ground2=a.joint2.m_body1;this.m_body2=a.joint2.m_body2;a.joint2.m_type==b2Joint.e_revoluteJoint?(this.m_revolute2=a.joint2,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),e=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=a.joint2,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),
e=this.m_prismatic2.GetJointTranslation());this.m_ratio=a.ratio;this.m_constant=c+this.m_ratio*e;this.m_impulse=0},PrepareVelocitySolver:function(){var a=this.m_ground1,c=this.m_ground2,e=this.m_body1,f=this.m_body2,g,h,k,l=0;this.m_J.SetZero();this.m_revolute1?(this.m_J.angular1=-1,l+=e.m_invI):(k=a.m_R,g=this.m_prismatic1.m_localXAxis1,a=k.col1.x*g.x+k.col2.x*g.y,g=k.col1.y*g.x+k.col2.y*g.y,k=e.m_R,h=k.col1.x*this.m_localAnchor1.x+k.col2.x*this.m_localAnchor1.y,k=k.col1.y*this.m_localAnchor1.x+
k.col2.y*this.m_localAnchor1.y,h=h*g-k*a,this.m_J.linear1.Set(-a,-g),this.m_J.angular1=-h,l+=e.m_invMass+e.m_invI*h*h);this.m_revolute2?(this.m_J.angular2=-this.m_ratio,l+=this.m_ratio*this.m_ratio*f.m_invI):(k=c.m_R,g=this.m_prismatic2.m_localXAxis1,a=k.col1.x*g.x+k.col2.x*g.y,g=k.col1.y*g.x+k.col2.y*g.y,k=f.m_R,h=k.col1.x*this.m_localAnchor2.x+k.col2.x*this.m_localAnchor2.y,k=k.col1.y*this.m_localAnchor2.x+k.col2.y*this.m_localAnchor2.y,h=h*g-k*a,this.m_J.linear2.Set(-this.m_ratio*a,-this.m_ratio*
g),this.m_J.angular2=-this.m_ratio*h,l+=this.m_ratio*this.m_ratio*(f.m_invMass+f.m_invI*h*h));this.m_mass=1/l;e.m_linearVelocity.x+=e.m_invMass*this.m_impulse*this.m_J.linear1.x;e.m_linearVelocity.y+=e.m_invMass*this.m_impulse*this.m_J.linear1.y;e.m_angularVelocity+=e.m_invI*this.m_impulse*this.m_J.angular1;f.m_linearVelocity.x+=f.m_invMass*this.m_impulse*this.m_J.linear2.x;f.m_linearVelocity.y+=f.m_invMass*this.m_impulse*this.m_J.linear2.y;f.m_angularVelocity+=f.m_invI*this.m_impulse*this.m_J.angular2},
SolveVelocityConstraints:function(a){a=this.m_body1;var c=this.m_body2,e=this.m_J.Compute(a.m_linearVelocity,a.m_angularVelocity,c.m_linearVelocity,c.m_angularVelocity),e=-this.m_mass*e;this.m_impulse+=e;a.m_linearVelocity.x+=a.m_invMass*e*this.m_J.linear1.x;a.m_linearVelocity.y+=a.m_invMass*e*this.m_J.linear1.y;a.m_angularVelocity+=a.m_invI*e*this.m_J.angular1;c.m_linearVelocity.x+=c.m_invMass*e*this.m_J.linear2.x;c.m_linearVelocity.y+=c.m_invMass*e*this.m_J.linear2.y;c.m_angularVelocity+=c.m_invI*
e*this.m_J.angular2},SolvePositionConstraints:function(){var a=this.m_body1,c=this.m_body2,e,f;e=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation();f=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation();e=-this.m_mass*(this.m_constant-(e+this.m_ratio*f));a.m_position.x+=a.m_invMass*e*this.m_J.linear1.x;a.m_position.y+=a.m_invMass*e*this.m_J.linear1.y;a.m_rotation+=a.m_invI*e*this.m_J.angular1;c.m_position.x+=c.m_invMass*e*
this.m_J.linear2.x;c.m_position.y+=c.m_invMass*e*this.m_J.linear2.y;c.m_rotation+=c.m_invI*e*this.m_J.angular2;a.m_R.Set(a.m_rotation);c.m_R.Set(c.m_rotation);return 0<b2Settings.b2_linearSlop},m_ground1:null,m_ground2:null,m_revolute1:null,m_prismatic1:null,m_revolute2:null,m_prismatic2:null,m_groundAnchor1:new b2Vec2,m_groundAnchor2:new b2Vec2,m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_J:new b2Jacobian,m_constant:null,m_ratio:null,m_mass:null,m_impulse:null});var b2GearJointDef=Class.create();
Object.extend(b2GearJointDef.prototype,b2JointDef.prototype);Object.extend(b2GearJointDef.prototype,{initialize:function(){this.type=b2Joint.e_gearJoint;this.joint2=this.joint1=null;this.ratio=1},joint1:null,joint2:null,ratio:null});var b2MouseJoint=Class.create();Object.extend(b2MouseJoint.prototype,b2Joint.prototype);
Object.extend(b2MouseJoint.prototype,{GetAnchor1:function(){return this.m_target},GetAnchor2:function(){var a=b2Math.b2MulMV(this.m_body2.m_R,this.m_localAnchor);a.Add(this.m_body2.m_position);return a},GetReactionForce:function(a){var c=new b2Vec2;c.SetV(this.m_impulse);c.Multiply(a);return c},GetReactionTorque:function(a){return 0},SetTarget:function(a){this.m_body2.WakeUp();this.m_target=a},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_next=
this.m_prev=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=!1;this.m_userData=a.userData;this.K=new b2Mat22;this.K1=new b2Mat22;this.K2=new b2Mat22;this.m_localAnchor=new b2Vec2;this.m_target=new b2Vec2;this.m_impulse=new b2Vec2;this.m_ptpMass=new b2Mat22;this.m_C=new b2Vec2;this.m_target.SetV(a.target);var c=this.m_target.x-this.m_body2.m_position.x,e=this.m_target.y-this.m_body2.m_position.y;this.m_localAnchor.x=c*this.m_body2.m_R.col1.x+
e*this.m_body2.m_R.col1.y;this.m_localAnchor.y=c*this.m_body2.m_R.col2.x+e*this.m_body2.m_R.col2.y;this.m_maxForce=a.maxForce;this.m_impulse.SetZero();var e=this.m_body2.m_mass,f=2*b2Settings.b2_pi*a.frequencyHz,c=2*e*a.dampingRatio*f,e=e*f*f;this.m_gamma=1/(c+a.timeStep*e);this.m_beta=a.timeStep*e/(c+a.timeStep*e)},K:new b2Mat22,K1:new b2Mat22,K2:new b2Mat22,PrepareVelocitySolver:function(){var a=this.m_body2,c;c=a.m_R;var e=c.col1.x*this.m_localAnchor.x+c.col2.x*this.m_localAnchor.y;c=c.col1.y*
this.m_localAnchor.x+c.col2.y*this.m_localAnchor.y;var f=a.m_invMass,g=a.m_invI;this.K1.col1.x=f;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=f;this.K2.col1.x=g*c*c;this.K2.col2.x=-g*e*c;this.K2.col1.y=-g*e*c;this.K2.col2.y=g*e*e;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.col1.x+=this.m_gamma;this.K.col2.y+=this.m_gamma;this.K.Invert(this.m_ptpMass);this.m_C.x=a.m_position.x+e-this.m_target.x;this.m_C.y=a.m_position.y+c-this.m_target.y;a.m_angularVelocity*=0.98;var h=this.m_impulse.x,k=
this.m_impulse.y;a.m_linearVelocity.x+=f*h;a.m_linearVelocity.y+=f*k;a.m_angularVelocity+=g*(e*k-c*h)},SolveVelocityConstraints:function(a){var c=this.m_body2,e;e=c.m_R;var f=e.col1.x*this.m_localAnchor.x+e.col2.x*this.m_localAnchor.y,g=e.col1.y*this.m_localAnchor.x+e.col2.y*this.m_localAnchor.y,h=c.m_linearVelocity.x+-c.m_angularVelocity*g,k=c.m_linearVelocity.y+c.m_angularVelocity*f;e=this.m_ptpMass;var h=h+this.m_beta*a.inv_dt*this.m_C.x+this.m_gamma*this.m_impulse.x,l=k+this.m_beta*a.inv_dt*this.m_C.y+
this.m_gamma*this.m_impulse.y,k=-(e.col1.x*h+e.col2.x*l),l=-(e.col1.y*h+e.col2.y*l);e=this.m_impulse.x;h=this.m_impulse.y;this.m_impulse.x+=k;this.m_impulse.y+=l;k=this.m_impulse.Length();k>a.dt*this.m_maxForce&&this.m_impulse.Multiply(a.dt*this.m_maxForce/k);k=this.m_impulse.x-e;l=this.m_impulse.y-h;c.m_linearVelocity.x+=c.m_invMass*k;c.m_linearVelocity.y+=c.m_invMass*l;c.m_angularVelocity+=c.m_invI*(f*l-g*k)},SolvePositionConstraints:function(){return!0},m_localAnchor:new b2Vec2,m_target:new b2Vec2,
m_impulse:new b2Vec2,m_ptpMass:new b2Mat22,m_C:new b2Vec2,m_maxForce:null,m_beta:null,m_gamma:null});var b2MouseJointDef=Class.create();Object.extend(b2MouseJointDef.prototype,b2JointDef.prototype);
Object.extend(b2MouseJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.body2=this.body1=this.userData=null;this.collideConnected=!1;this.target=new b2Vec2;this.type=b2Joint.e_mouseJoint;this.maxForce=0;this.frequencyHz=5;this.dampingRatio=0.7;this.timeStep=1/60},target:new b2Vec2,maxForce:null,frequencyHz:null,dampingRatio:null,timeStep:null});var b2PrismaticJoint=Class.create();Object.extend(b2PrismaticJoint.prototype,b2Joint.prototype);
Object.extend(b2PrismaticJoint.prototype,{GetAnchor1:function(){var a=this.m_body1,c=new b2Vec2;c.SetV(this.m_localAnchor1);c.MulM(a.m_R);c.Add(a.m_position);return c},GetAnchor2:function(){var a=this.m_body2,c=new b2Vec2;c.SetV(this.m_localAnchor2);c.MulM(a.m_R);c.Add(a.m_position);return c},GetJointTranslation:function(){var a=this.m_body1,c=this.m_body2,e;e=a.m_R;var f=e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y,g=e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y;
e=c.m_R;f=c.m_position.x+(e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y)-(a.m_position.x+f);c=c.m_position.y+(e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y)-(a.m_position.y+g);e=a.m_R;return(e.col1.x*this.m_localXAxis1.x+e.col2.x*this.m_localXAxis1.y)*f+(e.col1.y*this.m_localXAxis1.x+e.col2.y*this.m_localXAxis1.y)*c},GetJointSpeed:function(){var a=this.m_body1,c=this.m_body2,e;e=a.m_R;var f=e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y,g=e.col1.y*this.m_localAnchor1.x+
e.col2.y*this.m_localAnchor1.y;e=c.m_R;var h=e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y,k=e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y,l=c.m_position.x+h-(a.m_position.x+f),m=c.m_position.y+k-(a.m_position.y+g);e=a.m_R;var n=e.col1.x*this.m_localXAxis1.x+e.col2.x*this.m_localXAxis1.y;e=e.col1.y*this.m_localXAxis1.x+e.col2.y*this.m_localXAxis1.y;var p=a.m_linearVelocity,q=c.m_linearVelocity,a=a.m_angularVelocity,c=c.m_angularVelocity;return l*-a*e+m*a*n+(n*(q.x+
-c*k-p.x- -a*g)+e*(q.y+c*h-p.y-a*f))},GetMotorForce:function(a){return a*this.m_motorImpulse},SetMotorSpeed:function(a){this.m_motorSpeed=a},SetMotorForce:function(a){this.m_maxMotorForce=a},GetReactionForce:function(a){a*=this.m_limitImpulse;var c;c=this.m_body1.m_R;return new b2Vec2(a*(c.col1.x*this.m_localXAxis1.x+c.col2.x*this.m_localXAxis1.y)+a*(c.col1.x*this.m_localYAxis1.x+c.col2.x*this.m_localYAxis1.y),a*(c.col1.y*this.m_localXAxis1.x+c.col2.y*this.m_localXAxis1.y)+a*(c.col1.y*this.m_localYAxis1.x+
c.col2.y*this.m_localYAxis1.y))},GetReactionTorque:function(a){return a*this.m_angularImpulse},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_next=this.m_prev=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=!1;this.m_userData=a.userData;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_localXAxis1=new b2Vec2;this.m_localYAxis1=new b2Vec2;this.m_linearJacobian=
new b2Jacobian;this.m_motorJacobian=new b2Jacobian;var c,e,f;c=this.m_body1.m_R;e=a.anchorPoint.x-this.m_body1.m_position.x;f=a.anchorPoint.y-this.m_body1.m_position.y;this.m_localAnchor1.Set(e*c.col1.x+f*c.col1.y,e*c.col2.x+f*c.col2.y);c=this.m_body2.m_R;e=a.anchorPoint.x-this.m_body2.m_position.x;f=a.anchorPoint.y-this.m_body2.m_position.y;this.m_localAnchor2.Set(e*c.col1.x+f*c.col1.y,e*c.col2.x+f*c.col2.y);c=this.m_body1.m_R;e=a.axis.x;f=a.axis.y;this.m_localXAxis1.Set(e*c.col1.x+f*c.col1.y,e*
c.col2.x+f*c.col2.y);this.m_localYAxis1.x=-this.m_localXAxis1.y;this.m_localYAxis1.y=this.m_localXAxis1.x;this.m_initialAngle=this.m_body2.m_rotation-this.m_body1.m_rotation;this.m_linearJacobian.SetZero();this.m_angularImpulse=this.m_angularMass=this.m_linearImpulse=this.m_linearMass=0;this.m_motorJacobian.SetZero();this.m_limitPositionImpulse=this.m_limitImpulse=this.m_motorImpulse=this.m_motorMass=0;this.m_lowerTranslation=a.lowerTranslation;this.m_upperTranslation=a.upperTranslation;this.m_maxMotorForce=
a.motorForce;this.m_motorSpeed=a.motorSpeed;this.m_enableLimit=a.enableLimit;this.m_enableMotor=a.enableMotor},PrepareVelocitySolver:function(){var a=this.m_body1,c=this.m_body2,e;e=a.m_R;var f=e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y,g=e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y;e=c.m_R;var h=e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y,k=e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y,l=a.m_invMass,m=c.m_invMass,n=a.m_invI,p=
c.m_invI;e=a.m_R;var q=e.col1.x*this.m_localYAxis1.x+e.col2.x*this.m_localYAxis1.y;e=e.col1.y*this.m_localYAxis1.x+e.col2.y*this.m_localYAxis1.y;var u=c.m_position.x+h-a.m_position.x,r=c.m_position.y+k-a.m_position.y;this.m_linearJacobian.linear1.x=-q;this.m_linearJacobian.linear1.y=-e;this.m_linearJacobian.linear2.x=q;this.m_linearJacobian.linear2.y=e;this.m_linearJacobian.angular1=-(u*e-r*q);this.m_linearJacobian.angular2=h*e-k*q;this.m_linearMass=l+n*this.m_linearJacobian.angular1*this.m_linearJacobian.angular1+
m+p*this.m_linearJacobian.angular2*this.m_linearJacobian.angular2;this.m_linearMass=1/this.m_linearMass;this.m_angularMass=1/(n+p);if(this.m_enableLimit||this.m_enableMotor)e=a.m_R,q=e.col1.x*this.m_localXAxis1.x+e.col2.x*this.m_localXAxis1.y,e=e.col1.y*this.m_localXAxis1.x+e.col2.y*this.m_localXAxis1.y,this.m_motorJacobian.linear1.x=-q,this.m_motorJacobian.linear1.y=-e,this.m_motorJacobian.linear2.x=q,this.m_motorJacobian.linear2.y=e,this.m_motorJacobian.angular1=-(u*e-r*q),this.m_motorJacobian.angular2=
h*e-k*q,this.m_motorMass=l+n*this.m_motorJacobian.angular1*this.m_motorJacobian.angular1+m+p*this.m_motorJacobian.angular2*this.m_motorJacobian.angular2,this.m_motorMass=1/this.m_motorMass,this.m_enableLimit&&(f=q*(u-f)+e*(r-g),b2Math.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b2Settings.b2_linearSlop?this.m_limitState=b2Joint.e_equalLimits:f<=this.m_lowerTranslation?(this.m_limitState!=b2Joint.e_atLowerLimit&&(this.m_limitImpulse=0),this.m_limitState=b2Joint.e_atLowerLimit):f>=this.m_upperTranslation?
(this.m_limitState!=b2Joint.e_atUpperLimit&&(this.m_limitImpulse=0),this.m_limitState=b2Joint.e_atUpperLimit):(this.m_limitState=b2Joint.e_inactiveLimit,this.m_limitImpulse=0));!1==this.m_enableMotor&&(this.m_motorImpulse=0);!1==this.m_enableLimit&&(this.m_limitImpulse=0);b2World.s_enableWarmStarting?(f=this.m_linearImpulse*this.m_linearJacobian.linear1.y+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear1.y,g=this.m_linearImpulse*this.m_linearJacobian.linear2.x+(this.m_motorImpulse+
this.m_limitImpulse)*this.m_motorJacobian.linear2.x,h=this.m_linearImpulse*this.m_linearJacobian.linear2.y+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear2.y,k=this.m_linearImpulse*this.m_linearJacobian.angular1-this.m_angularImpulse+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.angular1,u=this.m_linearImpulse*this.m_linearJacobian.angular2+this.m_angularImpulse+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.angular2,a.m_linearVelocity.x+=l*(this.m_linearImpulse*
this.m_linearJacobian.linear1.x+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear1.x),a.m_linearVelocity.y+=l*f,a.m_angularVelocity+=n*k,c.m_linearVelocity.x+=m*g,c.m_linearVelocity.y+=m*h,c.m_angularVelocity+=p*u):this.m_motorImpulse=this.m_limitImpulse=this.m_angularImpulse=this.m_linearImpulse=0;this.m_limitPositionImpulse=0},SolveVelocityConstraints:function(a){var c=this.m_body1,e=this.m_body2,f=c.m_invMass,g=e.m_invMass,h=c.m_invI,k=e.m_invI,l=this.m_linearJacobian.Compute(c.m_linearVelocity,
c.m_angularVelocity,e.m_linearVelocity,e.m_angularVelocity),l=-this.m_linearMass*l;this.m_linearImpulse+=l;c.m_linearVelocity.x+=f*l*this.m_linearJacobian.linear1.x;c.m_linearVelocity.y+=f*l*this.m_linearJacobian.linear1.y;c.m_angularVelocity+=h*l*this.m_linearJacobian.angular1;e.m_linearVelocity.x+=g*l*this.m_linearJacobian.linear2.x;e.m_linearVelocity.y+=g*l*this.m_linearJacobian.linear2.y;e.m_angularVelocity+=k*l*this.m_linearJacobian.angular2;l=-this.m_angularMass*(e.m_angularVelocity-c.m_angularVelocity);
this.m_angularImpulse+=l;c.m_angularVelocity-=h*l;e.m_angularVelocity+=k*l;if(this.m_enableMotor&&this.m_limitState!=b2Joint.e_equalLimits){var l=this.m_motorJacobian.Compute(c.m_linearVelocity,c.m_angularVelocity,e.m_linearVelocity,e.m_angularVelocity)-this.m_motorSpeed,l=-this.m_motorMass*l,m=this.m_motorImpulse;this.m_motorImpulse=b2Math.b2Clamp(this.m_motorImpulse+l,-a.dt*this.m_maxMotorForce,a.dt*this.m_maxMotorForce);l=this.m_motorImpulse-m;c.m_linearVelocity.x+=f*l*this.m_motorJacobian.linear1.x;
c.m_linearVelocity.y+=f*l*this.m_motorJacobian.linear1.y;c.m_angularVelocity+=h*l*this.m_motorJacobian.angular1;e.m_linearVelocity.x+=g*l*this.m_motorJacobian.linear2.x;e.m_linearVelocity.y+=g*l*this.m_motorJacobian.linear2.y;e.m_angularVelocity+=k*l*this.m_motorJacobian.angular2}this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit&&(a=this.m_motorJacobian.Compute(c.m_linearVelocity,c.m_angularVelocity,e.m_linearVelocity,e.m_angularVelocity),l=-this.m_motorMass*a,this.m_limitState==b2Joint.e_equalLimits?
this.m_limitImpulse+=l:this.m_limitState==b2Joint.e_atLowerLimit?(a=this.m_limitImpulse,this.m_limitImpulse=b2Math.b2Max(this.m_limitImpulse+l,0),l=this.m_limitImpulse-a):this.m_limitState==b2Joint.e_atUpperLimit&&(a=this.m_limitImpulse,this.m_limitImpulse=b2Math.b2Min(this.m_limitImpulse+l,0),l=this.m_limitImpulse-a),c.m_linearVelocity.x+=f*l*this.m_motorJacobian.linear1.x,c.m_linearVelocity.y+=f*l*this.m_motorJacobian.linear1.y,c.m_angularVelocity+=h*l*this.m_motorJacobian.angular1,e.m_linearVelocity.x+=
g*l*this.m_motorJacobian.linear2.x,e.m_linearVelocity.y+=g*l*this.m_motorJacobian.linear2.y,e.m_angularVelocity+=k*l*this.m_motorJacobian.angular2)},SolvePositionConstraints:function(){var a,c,e=this.m_body1,f=this.m_body2,g=e.m_invMass,h=f.m_invMass,k=e.m_invI,l=f.m_invI;a=e.m_R;var m=a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y,n=a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y;a=f.m_R;var p=a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y;a=a.col1.y*this.m_localAnchor2.x+
a.col2.y*this.m_localAnchor2.y;var m=e.m_position.x+m,n=e.m_position.y+n,p=f.m_position.x+p,q=f.m_position.y+a;a=e.m_R;var u=(a.col1.x*this.m_localYAxis1.x+a.col2.x*this.m_localYAxis1.y)*(p-m)+(a.col1.y*this.m_localYAxis1.x+a.col2.y*this.m_localYAxis1.y)*(q-n),u=b2Math.b2Clamp(u,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection);c=-this.m_linearMass*u;e.m_position.x+=g*c*this.m_linearJacobian.linear1.x;e.m_position.y+=g*c*this.m_linearJacobian.linear1.y;e.m_rotation+=k*c*this.m_linearJacobian.angular1;
f.m_position.x+=h*c*this.m_linearJacobian.linear2.x;f.m_position.y+=h*c*this.m_linearJacobian.linear2.y;f.m_rotation+=l*c*this.m_linearJacobian.angular2;u=b2Math.b2Abs(u);c=f.m_rotation-e.m_rotation-this.m_initialAngle;c=b2Math.b2Clamp(c,-b2Settings.b2_maxAngularCorrection,b2Settings.b2_maxAngularCorrection);var r=-this.m_angularMass*c;e.m_rotation-=e.m_invI*r;e.m_R.Set(e.m_rotation);f.m_rotation+=f.m_invI*r;f.m_R.Set(f.m_rotation);r=b2Math.b2Abs(c);this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit&&
(a=e.m_R,m=a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y,n=a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y,a=f.m_R,p=a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y,a=a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y,m=e.m_position.x+m,n=e.m_position.y+n,p=f.m_position.x+p,q=f.m_position.y+a,a=e.m_R,m=(a.col1.x*this.m_localXAxis1.x+a.col2.x*this.m_localXAxis1.y)*(p-m)+(a.col1.y*this.m_localXAxis1.x+a.col2.y*this.m_localXAxis1.y)*(q-n),a=0,this.m_limitState==
b2Joint.e_equalLimits?(a=b2Math.b2Clamp(m,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection),a*=-this.m_motorMass,u=b2Math.b2Max(u,b2Math.b2Abs(c))):this.m_limitState==b2Joint.e_atLowerLimit?(a=m-this.m_lowerTranslation,u=b2Math.b2Max(u,-a),a=b2Math.b2Clamp(a+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0),a*=-this.m_motorMass,c=this.m_limitPositionImpulse,this.m_limitPositionImpulse=b2Math.b2Max(this.m_limitPositionImpulse+a,0),a=this.m_limitPositionImpulse-c):this.m_limitState==
b2Joint.e_atUpperLimit&&(a=m-this.m_upperTranslation,u=b2Math.b2Max(u,a),a=b2Math.b2Clamp(a-b2Settings.b2_linearSlop,0,b2Settings.b2_maxLinearCorrection),a*=-this.m_motorMass,c=this.m_limitPositionImpulse,this.m_limitPositionImpulse=b2Math.b2Min(this.m_limitPositionImpulse+a,0),a=this.m_limitPositionImpulse-c),e.m_position.x+=g*a*this.m_motorJacobian.linear1.x,e.m_position.y+=g*a*this.m_motorJacobian.linear1.y,e.m_rotation+=k*a*this.m_motorJacobian.angular1,e.m_R.Set(e.m_rotation),f.m_position.x+=
h*a*this.m_motorJacobian.linear2.x,f.m_position.y+=h*a*this.m_motorJacobian.linear2.y,f.m_rotation+=l*a*this.m_motorJacobian.angular2,f.m_R.Set(f.m_rotation));return u<=b2Settings.b2_linearSlop&&r<=b2Settings.b2_angularSlop},m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_localXAxis1:new b2Vec2,m_localYAxis1:new b2Vec2,m_initialAngle:null,m_linearJacobian:new b2Jacobian,m_linearMass:null,m_linearImpulse:null,m_angularMass:null,m_angularImpulse:null,m_motorJacobian:new b2Jacobian,m_motorMass:null,
m_motorImpulse:null,m_limitImpulse:null,m_limitPositionImpulse:null,m_lowerTranslation:null,m_upperTranslation:null,m_maxMotorForce:null,m_motorSpeed:null,m_enableLimit:null,m_enableMotor:null,m_limitState:0});var b2PrismaticJointDef=Class.create();Object.extend(b2PrismaticJointDef.prototype,b2JointDef.prototype);
Object.extend(b2PrismaticJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.body2=this.body1=this.userData=null;this.collideConnected=!1;this.type=b2Joint.e_prismaticJoint;this.anchorPoint=new b2Vec2(0,0);this.axis=new b2Vec2(0,0);this.motorSpeed=this.motorForce=this.upperTranslation=this.lowerTranslation=0;this.enableMotor=this.enableLimit=!1},anchorPoint:null,axis:null,lowerTranslation:null,upperTranslation:null,motorForce:null,motorSpeed:null,enableLimit:null,enableMotor:null});
var b2PulleyJoint=Class.create();Object.extend(b2PulleyJoint.prototype,b2Joint.prototype);
Object.extend(b2PulleyJoint.prototype,{GetAnchor1:function(){var a=this.m_body1.m_R;return new b2Vec2(this.m_body1.m_position.x+(a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y),this.m_body1.m_position.y+(a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y))},GetAnchor2:function(){var a=this.m_body2.m_R;return new b2Vec2(this.m_body2.m_position.x+(a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y),this.m_body2.m_position.y+(a.col1.y*this.m_localAnchor2.x+a.col2.y*
this.m_localAnchor2.y))},GetGroundPoint1:function(){return new b2Vec2(this.m_ground.m_position.x+this.m_groundAnchor1.x,this.m_ground.m_position.y+this.m_groundAnchor1.y)},GetGroundPoint2:function(){return new b2Vec2(this.m_ground.m_position.x+this.m_groundAnchor2.x,this.m_ground.m_position.y+this.m_groundAnchor2.y)},GetReactionForce:function(a){return new b2Vec2},GetReactionTorque:function(a){return 0},GetLength1:function(){var a;a=this.m_body1.m_R;var c=this.m_body1.m_position.x+(a.col1.x*this.m_localAnchor1.x+
a.col2.x*this.m_localAnchor1.y)-(this.m_ground.m_position.x+this.m_groundAnchor1.x);a=this.m_body1.m_position.y+(a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y)-(this.m_ground.m_position.y+this.m_groundAnchor1.y);return Math.sqrt(c*c+a*a)},GetLength2:function(){var a;a=this.m_body2.m_R;var c=this.m_body2.m_position.x+(a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y)-(this.m_ground.m_position.x+this.m_groundAnchor2.x);a=this.m_body2.m_position.y+(a.col1.y*this.m_localAnchor2.x+
a.col2.y*this.m_localAnchor2.y)-(this.m_ground.m_position.y+this.m_groundAnchor2.y);return Math.sqrt(c*c+a*a)},GetRatio:function(){return this.m_ratio},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_next=this.m_prev=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=!1;this.m_userData=a.userData;this.m_groundAnchor1=new b2Vec2;this.m_groundAnchor2=new b2Vec2;this.m_localAnchor1=new b2Vec2;
this.m_localAnchor2=new b2Vec2;this.m_u1=new b2Vec2;this.m_u2=new b2Vec2;var c,e,f;this.m_ground=this.m_body1.m_world.m_groundBody;this.m_groundAnchor1.x=a.groundPoint1.x-this.m_ground.m_position.x;this.m_groundAnchor1.y=a.groundPoint1.y-this.m_ground.m_position.y;this.m_groundAnchor2.x=a.groundPoint2.x-this.m_ground.m_position.x;this.m_groundAnchor2.y=a.groundPoint2.y-this.m_ground.m_position.y;c=this.m_body1.m_R;e=a.anchorPoint1.x-this.m_body1.m_position.x;f=a.anchorPoint1.y-this.m_body1.m_position.y;
this.m_localAnchor1.x=e*c.col1.x+f*c.col1.y;this.m_localAnchor1.y=e*c.col2.x+f*c.col2.y;c=this.m_body2.m_R;e=a.anchorPoint2.x-this.m_body2.m_position.x;f=a.anchorPoint2.y-this.m_body2.m_position.y;this.m_localAnchor2.x=e*c.col1.x+f*c.col1.y;this.m_localAnchor2.y=e*c.col2.x+f*c.col2.y;this.m_ratio=a.ratio;e=a.groundPoint1.x-a.anchorPoint1.x;f=a.groundPoint1.y-a.anchorPoint1.y;c=Math.sqrt(e*e+f*f);e=a.groundPoint2.x-a.anchorPoint2.x;f=a.groundPoint2.y-a.anchorPoint2.y;e=Math.sqrt(e*e+f*f);f=b2Math.b2Max(0.5*
b2PulleyJoint.b2_minPulleyLength,c);e=b2Math.b2Max(0.5*b2PulleyJoint.b2_minPulleyLength,e);this.m_constant=f+this.m_ratio*e;this.m_maxLength1=b2Math.b2Clamp(a.maxLength1,f,this.m_constant-this.m_ratio*b2PulleyJoint.b2_minPulleyLength);this.m_maxLength2=b2Math.b2Clamp(a.maxLength2,e,(this.m_constant-b2PulleyJoint.b2_minPulleyLength)/this.m_ratio);this.m_limitImpulse2=this.m_limitImpulse1=this.m_pulleyImpulse=0},PrepareVelocitySolver:function(){var a=this.m_body1,c=this.m_body2,e;e=a.m_R;var f=e.col1.x*
this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y,g=e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y;e=c.m_R;var h=e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y;e=e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y;var k=c.m_position.x+h,l=c.m_position.y+e,m=this.m_ground.m_position.x+this.m_groundAnchor2.x,n=this.m_ground.m_position.y+this.m_groundAnchor2.y;this.m_u1.Set(a.m_position.x+f-(this.m_ground.m_position.x+this.m_groundAnchor1.x),a.m_position.y+
g-(this.m_ground.m_position.y+this.m_groundAnchor1.y));this.m_u2.Set(k-m,l-n);k=this.m_u1.Length();l=this.m_u2.Length();k>b2Settings.b2_linearSlop?this.m_u1.Multiply(1/k):this.m_u1.SetZero();l>b2Settings.b2_linearSlop?this.m_u2.Multiply(1/l):this.m_u2.SetZero();k<this.m_maxLength1?(this.m_limitState1=b2Joint.e_inactiveLimit,this.m_limitImpulse1=0):(this.m_limitState1=b2Joint.e_atUpperLimit,this.m_limitPositionImpulse1=0);l<this.m_maxLength2?(this.m_limitState2=b2Joint.e_inactiveLimit,this.m_limitImpulse2=
0):(this.m_limitState2=b2Joint.e_atUpperLimit,this.m_limitPositionImpulse2=0);k=f*this.m_u1.y-g*this.m_u1.x;l=h*this.m_u2.y-e*this.m_u2.x;this.m_limitMass1=a.m_invMass+a.m_invI*k*k;this.m_limitMass2=c.m_invMass+c.m_invI*l*l;this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2;this.m_limitMass1=1/this.m_limitMass1;this.m_limitMass2=1/this.m_limitMass2;this.m_pulleyMass=1/this.m_pulleyMass;k=(-this.m_pulleyImpulse-this.m_limitImpulse1)*this.m_u1.x;l=(-this.m_pulleyImpulse-
this.m_limitImpulse1)*this.m_u1.y;m=(-this.m_ratio*this.m_pulleyImpulse-this.m_limitImpulse2)*this.m_u2.x;n=(-this.m_ratio*this.m_pulleyImpulse-this.m_limitImpulse2)*this.m_u2.y;a.m_linearVelocity.x+=a.m_invMass*k;a.m_linearVelocity.y+=a.m_invMass*l;a.m_angularVelocity+=a.m_invI*(f*l-g*k);c.m_linearVelocity.x+=c.m_invMass*m;c.m_linearVelocity.y+=c.m_invMass*n;c.m_angularVelocity+=c.m_invI*(h*n-e*m)},SolveVelocityConstraints:function(a){a=this.m_body1;var c=this.m_body2,e;e=a.m_R;var f=e.col1.x*this.m_localAnchor1.x+
e.col2.x*this.m_localAnchor1.y,g=e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y;e=c.m_R;var h=e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y;e=e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y;var k,l,m,n;k=a.m_linearVelocity.x+-a.m_angularVelocity*g;l=a.m_linearVelocity.y+a.m_angularVelocity*f;m=c.m_linearVelocity.x+-c.m_angularVelocity*e;n=c.m_linearVelocity.y+c.m_angularVelocity*h;k=-(this.m_u1.x*k+this.m_u1.y*l)-this.m_ratio*(this.m_u2.x*m+this.m_u2.y*
n);n=-this.m_pulleyMass*k;this.m_pulleyImpulse+=n;k=-n*this.m_u1.x;l=-n*this.m_u1.y;m=-this.m_ratio*n*this.m_u2.x;n=-this.m_ratio*n*this.m_u2.y;a.m_linearVelocity.x+=a.m_invMass*k;a.m_linearVelocity.y+=a.m_invMass*l;a.m_angularVelocity+=a.m_invI*(f*l-g*k);c.m_linearVelocity.x+=c.m_invMass*m;c.m_linearVelocity.y+=c.m_invMass*n;c.m_angularVelocity+=c.m_invI*(h*n-e*m);this.m_limitState1==b2Joint.e_atUpperLimit&&(k=a.m_linearVelocity.x+-a.m_angularVelocity*g,l=a.m_linearVelocity.y+a.m_angularVelocity*
f,k=-(this.m_u1.x*k+this.m_u1.y*l),n=-this.m_limitMass1*k,k=this.m_limitImpulse1,this.m_limitImpulse1=b2Math.b2Max(0,this.m_limitImpulse1+n),n=this.m_limitImpulse1-k,k=-n*this.m_u1.x,l=-n*this.m_u1.y,a.m_linearVelocity.x+=a.m_invMass*k,a.m_linearVelocity.y+=a.m_invMass*l,a.m_angularVelocity+=a.m_invI*(f*l-g*k));this.m_limitState2==b2Joint.e_atUpperLimit&&(m=c.m_linearVelocity.x+-c.m_angularVelocity*e,n=c.m_linearVelocity.y+c.m_angularVelocity*h,k=-(this.m_u2.x*m+this.m_u2.y*n),n=-this.m_limitMass2*
k,k=this.m_limitImpulse2,this.m_limitImpulse2=b2Math.b2Max(0,this.m_limitImpulse2+n),n=this.m_limitImpulse2-k,m=-n*this.m_u2.x,n=-n*this.m_u2.y,c.m_linearVelocity.x+=c.m_invMass*m,c.m_linearVelocity.y+=c.m_invMass*n,c.m_angularVelocity+=c.m_invI*(h*n-e*m))},SolvePositionConstraints:function(){var a=this.m_body1,c=this.m_body2,e,f=this.m_ground.m_position.x+this.m_groundAnchor1.x,g=this.m_ground.m_position.y+this.m_groundAnchor1.y,h=this.m_ground.m_position.x+this.m_groundAnchor2.x,k=this.m_ground.m_position.y+
this.m_groundAnchor2.y,l,m,n,p,q,u,r,v=0;e=a.m_R;l=e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y;m=e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y;e=c.m_R;n=e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y;e=e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y;p=a.m_position.x+l;q=a.m_position.y+m;u=c.m_position.x+n;r=c.m_position.y+e;this.m_u1.Set(p-f,q-g);this.m_u2.Set(u-h,r-k);p=this.m_u1.Length();q=this.m_u2.Length();p>b2Settings.b2_linearSlop?
this.m_u1.Multiply(1/p):this.m_u1.SetZero();q>b2Settings.b2_linearSlop?this.m_u2.Multiply(1/q):this.m_u2.SetZero();p=this.m_constant-p-this.m_ratio*q;v=b2Math.b2Max(v,Math.abs(p));p=b2Math.b2Clamp(p,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection);r=-this.m_pulleyMass*p;p=-r*this.m_u1.x;q=-r*this.m_u1.y;u=-this.m_ratio*r*this.m_u2.x;r=-this.m_ratio*r*this.m_u2.y;a.m_position.x+=a.m_invMass*p;a.m_position.y+=a.m_invMass*q;a.m_rotation+=a.m_invI*(l*q-m*p);c.m_position.x+=c.m_invMass*
u;c.m_position.y+=c.m_invMass*r;c.m_rotation+=c.m_invI*(n*r-e*u);a.m_R.Set(a.m_rotation);c.m_R.Set(c.m_rotation);this.m_limitState1==b2Joint.e_atUpperLimit&&(e=a.m_R,l=e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y,m=e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y,p=a.m_position.x+l,q=a.m_position.y+m,this.m_u1.Set(p-f,q-g),p=this.m_u1.Length(),p>b2Settings.b2_linearSlop?(this.m_u1.x*=1/p,this.m_u1.y*=1/p):this.m_u1.SetZero(),p=this.m_maxLength1-p,v=b2Math.b2Max(v,-p),
p=b2Math.b2Clamp(p+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0),r=-this.m_limitMass1*p,f=this.m_limitPositionImpulse1,this.m_limitPositionImpulse1=b2Math.b2Max(0,this.m_limitPositionImpulse1+r),r=this.m_limitPositionImpulse1-f,p=-r*this.m_u1.x,q=-r*this.m_u1.y,a.m_position.x+=a.m_invMass*p,a.m_position.y+=a.m_invMass*q,a.m_rotation+=a.m_invI*(l*q-m*p),a.m_R.Set(a.m_rotation));this.m_limitState2==b2Joint.e_atUpperLimit&&(e=c.m_R,n=e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y,
e=e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y,u=c.m_position.x+n,r=c.m_position.y+e,this.m_u2.Set(u-h,r-k),q=this.m_u2.Length(),q>b2Settings.b2_linearSlop?(this.m_u2.x*=1/q,this.m_u2.y*=1/q):this.m_u2.SetZero(),p=this.m_maxLength2-q,v=b2Math.b2Max(v,-p),p=b2Math.b2Clamp(p+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0),r=-this.m_limitMass2*p,f=this.m_limitPositionImpulse2,this.m_limitPositionImpulse2=b2Math.b2Max(0,this.m_limitPositionImpulse2+r),r=this.m_limitPositionImpulse2-
f,u=-r*this.m_u2.x,r=-r*this.m_u2.y,c.m_position.x+=c.m_invMass*u,c.m_position.y+=c.m_invMass*r,c.m_rotation+=c.m_invI*(n*r-e*u),c.m_R.Set(c.m_rotation));return v<b2Settings.b2_linearSlop},m_ground:null,m_groundAnchor1:new b2Vec2,m_groundAnchor2:new b2Vec2,m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_u1:new b2Vec2,m_u2:new b2Vec2,m_constant:null,m_ratio:null,m_maxLength1:null,m_maxLength2:null,m_pulleyMass:null,m_limitMass1:null,m_limitMass2:null,m_pulleyImpulse:null,m_limitImpulse1:null,
m_limitImpulse2:null,m_limitPositionImpulse1:null,m_limitPositionImpulse2:null,m_limitState1:0,m_limitState2:0});b2PulleyJoint.b2_minPulleyLength=b2Settings.b2_lengthUnitsPerMeter;var b2PulleyJointDef=Class.create();Object.extend(b2PulleyJointDef.prototype,b2JointDef.prototype);
Object.extend(b2PulleyJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.body2=this.body1=this.userData=null;this.collideConnected=!1;this.groundPoint1=new b2Vec2;this.groundPoint2=new b2Vec2;this.anchorPoint1=new b2Vec2;this.anchorPoint2=new b2Vec2;this.type=b2Joint.e_pulleyJoint;this.groundPoint1.Set(-1,1);this.groundPoint2.Set(1,1);this.anchorPoint1.Set(-1,0);this.anchorPoint2.Set(1,0);this.maxLength1=0.5*b2PulleyJoint.b2_minPulleyLength;this.maxLength2=0.5*b2PulleyJoint.b2_minPulleyLength;
this.ratio=1;this.collideConnected=!0},groundPoint1:new b2Vec2,groundPoint2:new b2Vec2,anchorPoint1:new b2Vec2,anchorPoint2:new b2Vec2,maxLength1:null,maxLength2:null,ratio:null});var b2RevoluteJoint=Class.create();Object.extend(b2RevoluteJoint.prototype,b2Joint.prototype);
Object.extend(b2RevoluteJoint.prototype,{GetAnchor1:function(){var a=this.m_body1.m_R;return new b2Vec2(this.m_body1.m_position.x+(a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y),this.m_body1.m_position.y+(a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y))},GetAnchor2:function(){var a=this.m_body2.m_R;return new b2Vec2(this.m_body2.m_position.x+(a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y),this.m_body2.m_position.y+(a.col1.y*this.m_localAnchor2.x+a.col2.y*
this.m_localAnchor2.y))},GetJointAngle:function(){return this.m_body2.m_rotation-this.m_body1.m_rotation},GetJointSpeed:function(){return this.m_body2.m_angularVelocity-this.m_body1.m_angularVelocity},GetMotorTorque:function(a){return a*this.m_motorImpulse},SetMotorSpeed:function(a){this.m_motorSpeed=a},SetMotorTorque:function(a){this.m_maxMotorTorque=a},GetReactionForce:function(a){var c=this.m_ptpImpulse.Copy();c.Multiply(a);return c},GetReactionTorque:function(a){return a*this.m_limitImpulse},
initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_next=this.m_prev=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=!1;this.m_userData=a.userData;this.K=new b2Mat22;this.K1=new b2Mat22;this.K2=new b2Mat22;this.K3=new b2Mat22;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_ptpImpulse=new b2Vec2;this.m_ptpMass=new b2Mat22;var c,e,f;c=this.m_body1.m_R;e=a.anchorPoint.x-
this.m_body1.m_position.x;f=a.anchorPoint.y-this.m_body1.m_position.y;this.m_localAnchor1.x=e*c.col1.x+f*c.col1.y;this.m_localAnchor1.y=e*c.col2.x+f*c.col2.y;c=this.m_body2.m_R;e=a.anchorPoint.x-this.m_body2.m_position.x;f=a.anchorPoint.y-this.m_body2.m_position.y;this.m_localAnchor2.x=e*c.col1.x+f*c.col1.y;this.m_localAnchor2.y=e*c.col2.x+f*c.col2.y;this.m_intialAngle=this.m_body2.m_rotation-this.m_body1.m_rotation;this.m_ptpImpulse.Set(0,0);this.m_limitPositionImpulse=this.m_limitImpulse=this.m_motorImpulse=
0;this.m_lowerAngle=a.lowerAngle;this.m_upperAngle=a.upperAngle;this.m_maxMotorTorque=a.motorTorque;this.m_motorSpeed=a.motorSpeed;this.m_enableLimit=a.enableLimit;this.m_enableMotor=a.enableMotor},K:new b2Mat22,K1:new b2Mat22,K2:new b2Mat22,K3:new b2Mat22,PrepareVelocitySolver:function(){var a=this.m_body1,c=this.m_body2,e;e=a.m_R;var f=e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y,g=e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y;e=c.m_R;var h=e.col1.x*this.m_localAnchor2.x+
e.col2.x*this.m_localAnchor2.y;e=e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y;var k=a.m_invMass,l=c.m_invMass,m=a.m_invI,n=c.m_invI;this.K1.col1.x=k+l;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=k+l;this.K2.col1.x=m*g*g;this.K2.col2.x=-m*f*g;this.K2.col1.y=-m*f*g;this.K2.col2.y=m*f*f;this.K3.col1.x=n*e*e;this.K3.col2.x=-n*h*e;this.K3.col1.y=-n*h*e;this.K3.col2.y=n*h*h;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.AddM(this.K3);this.K.Invert(this.m_ptpMass);this.m_motorMass=
1/(m+n);!1==this.m_enableMotor&&(this.m_motorImpulse=0);if(this.m_enableLimit){var p=c.m_rotation-a.m_rotation-this.m_intialAngle;b2Math.b2Abs(this.m_upperAngle-this.m_lowerAngle)<2*b2Settings.b2_angularSlop?this.m_limitState=b2Joint.e_equalLimits:p<=this.m_lowerAngle?(this.m_limitState!=b2Joint.e_atLowerLimit&&(this.m_limitImpulse=0),this.m_limitState=b2Joint.e_atLowerLimit):p>=this.m_upperAngle?(this.m_limitState!=b2Joint.e_atUpperLimit&&(this.m_limitImpulse=0),this.m_limitState=b2Joint.e_atUpperLimit):
(this.m_limitState=b2Joint.e_inactiveLimit,this.m_limitImpulse=0)}else this.m_limitImpulse=0;b2World.s_enableWarmStarting?(a.m_linearVelocity.x-=k*this.m_ptpImpulse.x,a.m_linearVelocity.y-=k*this.m_ptpImpulse.y,a.m_angularVelocity-=m*(f*this.m_ptpImpulse.y-g*this.m_ptpImpulse.x+this.m_motorImpulse+this.m_limitImpulse),c.m_linearVelocity.x+=l*this.m_ptpImpulse.x,c.m_linearVelocity.y+=l*this.m_ptpImpulse.y,c.m_angularVelocity+=n*(h*this.m_ptpImpulse.y-e*this.m_ptpImpulse.x+this.m_motorImpulse+this.m_limitImpulse)):
(this.m_ptpImpulse.SetZero(),this.m_limitImpulse=this.m_motorImpulse=0);this.m_limitPositionImpulse=0},SolveVelocityConstraints:function(a){var c=this.m_body1,e=this.m_body2,f;f=c.m_R;var g=f.col1.x*this.m_localAnchor1.x+f.col2.x*this.m_localAnchor1.y,h=f.col1.y*this.m_localAnchor1.x+f.col2.y*this.m_localAnchor1.y;f=e.m_R;var k=f.col1.x*this.m_localAnchor2.x+f.col2.x*this.m_localAnchor2.y;f=f.col1.y*this.m_localAnchor2.x+f.col2.y*this.m_localAnchor2.y;var l=e.m_linearVelocity.x+-e.m_angularVelocity*
f-c.m_linearVelocity.x- -c.m_angularVelocity*h,m=e.m_linearVelocity.y+e.m_angularVelocity*k-c.m_linearVelocity.y-c.m_angularVelocity*g,n=-(this.m_ptpMass.col1.x*l+this.m_ptpMass.col2.x*m),l=-(this.m_ptpMass.col1.y*l+this.m_ptpMass.col2.y*m);this.m_ptpImpulse.x+=n;this.m_ptpImpulse.y+=l;c.m_linearVelocity.x-=c.m_invMass*n;c.m_linearVelocity.y-=c.m_invMass*l;c.m_angularVelocity-=c.m_invI*(g*l-h*n);e.m_linearVelocity.x+=e.m_invMass*n;e.m_linearVelocity.y+=e.m_invMass*l;e.m_angularVelocity+=e.m_invI*
(k*l-f*n);this.m_enableMotor&&this.m_limitState!=b2Joint.e_equalLimits&&(g=-this.m_motorMass*(e.m_angularVelocity-c.m_angularVelocity-this.m_motorSpeed),h=this.m_motorImpulse,this.m_motorImpulse=b2Math.b2Clamp(this.m_motorImpulse+g,-a.dt*this.m_maxMotorTorque,a.dt*this.m_maxMotorTorque),g=this.m_motorImpulse-h,c.m_angularVelocity-=c.m_invI*g,e.m_angularVelocity+=e.m_invI*g);this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit&&(g=-this.m_motorMass*(e.m_angularVelocity-c.m_angularVelocity),
this.m_limitState==b2Joint.e_equalLimits?this.m_limitImpulse+=g:this.m_limitState==b2Joint.e_atLowerLimit?(a=this.m_limitImpulse,this.m_limitImpulse=b2Math.b2Max(this.m_limitImpulse+g,0),g=this.m_limitImpulse-a):this.m_limitState==b2Joint.e_atUpperLimit&&(a=this.m_limitImpulse,this.m_limitImpulse=b2Math.b2Min(this.m_limitImpulse+g,0),g=this.m_limitImpulse-a),c.m_angularVelocity-=c.m_invI*g,e.m_angularVelocity+=e.m_invI*g)},SolvePositionConstraints:function(){var a,c=this.m_body1,e=this.m_body2,f=
0,f=c.m_R,g=f.col1.x*this.m_localAnchor1.x+f.col2.x*this.m_localAnchor1.y,h=f.col1.y*this.m_localAnchor1.x+f.col2.y*this.m_localAnchor1.y,f=e.m_R;a=f.col1.x*this.m_localAnchor2.x+f.col2.x*this.m_localAnchor2.y;var k=f.col1.y*this.m_localAnchor2.x+f.col2.y*this.m_localAnchor2.y,l=e.m_position.x+a-(c.m_position.x+g),m=e.m_position.y+k-(c.m_position.y+h),f=Math.sqrt(l*l+m*m),n=c.m_invMass,p=e.m_invMass,q=c.m_invI,u=e.m_invI;this.K1.col1.x=n+p;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=n+p;this.K2.col1.x=
q*h*h;this.K2.col2.x=-q*g*h;this.K2.col1.y=-q*g*h;this.K2.col2.y=q*g*g;this.K3.col1.x=u*k*k;this.K3.col2.x=-u*a*k;this.K3.col1.y=-u*a*k;this.K3.col2.y=u*a*a;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.AddM(this.K3);this.K.Solve(b2RevoluteJoint.tImpulse,-l,-m);l=b2RevoluteJoint.tImpulse.x;m=b2RevoluteJoint.tImpulse.y;c.m_position.x-=c.m_invMass*l;c.m_position.y-=c.m_invMass*m;c.m_rotation-=c.m_invI*(g*m-h*l);c.m_R.Set(c.m_rotation);e.m_position.x+=e.m_invMass*l;e.m_position.y+=e.m_invMass*m;e.m_rotation+=
e.m_invI*(a*m-k*l);e.m_R.Set(e.m_rotation);g=0;this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit&&(a=e.m_rotation-c.m_rotation-this.m_intialAngle,h=0,this.m_limitState==b2Joint.e_equalLimits?(a=b2Math.b2Clamp(a,-b2Settings.b2_maxAngularCorrection,b2Settings.b2_maxAngularCorrection),h=-this.m_motorMass*a,g=b2Math.b2Abs(a)):this.m_limitState==b2Joint.e_atLowerLimit?(a-=this.m_lowerAngle,g=b2Math.b2Max(0,-a),a=b2Math.b2Clamp(a+b2Settings.b2_angularSlop,-b2Settings.b2_maxAngularCorrection,
0),h=-this.m_motorMass*a,a=this.m_limitPositionImpulse,this.m_limitPositionImpulse=b2Math.b2Max(this.m_limitPositionImpulse+h,0),h=this.m_limitPositionImpulse-a):this.m_limitState==b2Joint.e_atUpperLimit&&(a-=this.m_upperAngle,g=b2Math.b2Max(0,a),a=b2Math.b2Clamp(a-b2Settings.b2_angularSlop,0,b2Settings.b2_maxAngularCorrection),h=-this.m_motorMass*a,a=this.m_limitPositionImpulse,this.m_limitPositionImpulse=b2Math.b2Min(this.m_limitPositionImpulse+h,0),h=this.m_limitPositionImpulse-a),c.m_rotation-=
c.m_invI*h,c.m_R.Set(c.m_rotation),e.m_rotation+=e.m_invI*h,e.m_R.Set(e.m_rotation));return f<=b2Settings.b2_linearSlop&&g<=b2Settings.b2_angularSlop},m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_ptpImpulse:new b2Vec2,m_motorImpulse:null,m_limitImpulse:null,m_limitPositionImpulse:null,m_ptpMass:new b2Mat22,m_motorMass:null,m_intialAngle:null,m_lowerAngle:null,m_upperAngle:null,m_maxMotorTorque:null,m_motorSpeed:null,m_enableLimit:null,m_enableMotor:null,m_limitState:0});
b2RevoluteJoint.tImpulse=new b2Vec2;var b2RevoluteJointDef=Class.create();Object.extend(b2RevoluteJointDef.prototype,b2JointDef.prototype);
Object.extend(b2RevoluteJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.body2=this.body1=this.userData=null;this.collideConnected=!1;this.type=b2Joint.e_revoluteJoint;this.anchorPoint=new b2Vec2(0,0);this.motorSpeed=this.motorTorque=this.upperAngle=this.lowerAngle=0;this.enableMotor=this.enableLimit=!1},anchorPoint:null,lowerAngle:null,upperAngle:null,motorTorque:null,motorSpeed:null,enableLimit:null,enableMotor:null});
function drawWorld(a,c){for(var e=a.m_jointList;e;e=e.m_next)drawJoint(a,e,c);for(e=a.m_bodyList;e;e=e.m_next)for(var f=e.GetShapeList();null!=f;f=f.GetNext())drawShape(f,c)}
function drawJoint(a,c,e,f){var g=c.m_body1,h=c.m_body2,k=g.m_position,l=h.m_position,m=c.GetAnchor1(),n=c.GetAnchor2();f||(f="#00f");switch(c.m_type){case b2Joint.e_distanceJoint:e.drawLine(m.x,m.y,n.x,n.y,1,f);break;case b2Joint.e_pulleyJoint:break;default:g==a.m_groundBody?e.drawLine(m.x,m.y,l.x,l.y,1,f):h==a.m_groundBody?e.drawLine(m.x,m.y,k.x,k.y,1,f):(e.drawLine(k.x,k.y,m.x,m.y,1,f),e.drawLine(m.x,m.y,l.x,l.y,1,f),e.drawLine(l.x,l.y,n.x,n.y,1,f))}}
function drawShape(a,c){switch(a.m_type){case b2Shape.e_circleShape:for(var e=a.m_position,f=a.m_radius,g=0,h=2*Math.PI/16,k=e.x+f,l=e.y,m=0;16>m;m++){var n=new b2Vec2(f*Math.cos(g),f*Math.sin(g)),n=b2Math.AddVV(e,n);c.drawLine(k,l,n.x,n.y,1,"#33f");k=n.x;l=n.y;g+=h}c.drawLine(k,l,e.x+f,e.y,1,"#33f");k=a.m_R.col1;f=new b2Vec2(e.x+f*k.x,e.y+f*k.y);c.drawLine(e.x,e.y,f.x,f.y,1,"#33f");break;case b2Shape.e_polyShape:e=b2Math.AddVV(a.m_position,b2Math.b2MulMV(a.m_R,a.m_vertices[0]));k=e.x;l=e.y;for(m=
0;m<a.m_vertexCount;m++)n=b2Math.AddVV(a.m_position,b2Math.b2MulMV(a.m_R,a.m_vertices[m])),c.drawLine(k,l,n.x,n.y,1,"#fff"),k=n.x,l=n.y;c.drawLine(k,l,e.x,e.y,1,"#fff")}}
var showDebugDraw=!1,isAndroid=!1,stage,world,mc,fps=32,GET,screenWidthCoef,screenHeightCoef,LANDSCAPE_MODE=!0,STATE_LOAD=0,STATE_SPLASH=1,STATE_COVER=2,STATE_MENU=3,STATE_INSTRUCTION_ONE=4,STATE_INSTRUCTION_TWO=5,STATE_INSTRUCTION_THREE=6,STATE_CHOOSE_LEVEL=7,STATE_GAME=8,STATE_LEVEL_CLEARED=9,STATE_LEVEL_FAILED=10,STATE_LEADER=11,STATE_ABOUT=12,STATE_PAUSE=13,STATE_SHOP=14,STATE_SETTINGS=15,PROCESS_START=1,PROCESS_GAME=0,gameState=STATE_LOAD,processState=PROCESS_START,crabStepWidth=3,crabDirectLeft=
!0,getAimTimeout=null,lastAimAngle=null,currentTotalScore=0,posibleLevelScore=0,page=0,curLevel=0,openLevel=0,countStar=0,gameScore=0,tmpGameScore=0,curLevelScore=0,bestLevelScore=[],bestLevelStars=[],levelStars=[],levelScore=[],maxScore=0,maxLevel=0,countLevels=44,hit_end_flag=!0,hasBeenMoved=!1,scored=0,starCouter=-1,timeDelayForCounter=[1E3,100,60,20,20],flag_ball_pocket=!1,pause_flag=!1,shop_flag=!1,slide_flag=!1,settings_flag=!1,explosion_flag=0,animation_star_flag=!1,animation_stars_flag=!1,
charMap="0123456789,+".split(""),charWidth=[34,34,34,34,34,34,34,34,34,34,13,34],charWidthBig=[34,34,34,34,34,34,34,34,34,34,20,34],charWidthBig2=[34,34,34,34,34,34,34,34,34,34,17,34],charWidthCL=[34,34,34,34,34,34,34,34,34,34,17,34],charWidthMin=[34,34,34,34,34,34,34,34,34,34,16,34],charWidthShop=[34,34,34,34,34,34,34,34,34,34,15,34],shotsText=null,levelText=null,timeInterval=0,shopGameScore=null,sparkleSprite=null,starSprites=[],priceSprites=[],shopCountElements=[],fish_array=[],startPearlsListCoor=
{x:-220,y:57,step:14},Level=null;window.onload=function(){GET=Utils.parseGet();Utils.addMobileListeners(LANDSCAPE_MODE,!0);Utils.mobileCorrectPixelRatio();Utils.addFitLayoutListeners();if(-1<window.navigator.userAgent.toLowerCase().indexOf("android")||-1<window.navigator.userAgent.toLowerCase().indexOf("linux"))isAndroid=!0;Level=getQueryParams(document.location.search);setTimeout(startLoad,600)};
function startLoad(){var a=Utils.getMobileScreenResolution(LANDSCAPE_MODE);1==GET.debug&&(a=Utils.getScaleScreenResolution(1,LANDSCAPE_MODE));Utils.globalScale=a.scale;for(var c=[1.5,1.6,1.66,1.7,1.78,1.52],e=0,e=window.innerWidth>window.innerHeight?window.innerWidth/window.innerHeight:window.innerHeight/window.innerWidth,f=1E5,g=-1,h,k=0;k<c.length-1;k++)h=Math.abs(e-c[k]),h<f&&(f=h,g=k);console.log("\u043f\u0430\u043a\u0435\u0442 \u0433\u0440\u0430\u0444\u0438\u043a\u0438 = "+g,Utils.globalScale);
672==window.innerHeight&&(g=5);screenWidthCoef=[1,1.0666,1.106,1.133,1.187,1.016][g];screenHeightCoef=[1,1,1,1,1,1][g];screenWidthRatioPos=g;a.width=Math.round(a.width*screenWidthCoef);Utils.createLayout(document.getElementById("main_container"),a);Utils.addEventListener("fitlayout",function(){stage&&buildBackground()});Utils.addEventListener("lockscreen",function(){stage&&stage.started&&stage.stop()});Utils.addEventListener("unlockscreen",function(){stage&&!stage.started&&stage.start()});Utils.fitLayoutToScreen();
Utils.mobileHideAddressBar();mixer=new AudioMixer("music",1);1!=GET.debug&&Utils.checkOrientation(LANDSCAPE_MODE);a="ratios/"+g+"/";console.log(a);library=new AssetsLibrary("images",Utils.globalScale,[{name:"about",src:"about.jpg",width:480,height:320},{name:"aim-big",src:"aim-big.png",width:22,height:266},{name:"aim",src:"aim.png",width:22,height:213},{name:"btn-back-big",src:"btn-back-big.png",width:76,height:76},{name:"btn-back",src:"btn-back.png",width:61,height:61},{name:"btn-best-score",src:"btn-best-score.png",
width:68,height:68},{name:"btn-home",src:"btn-home.png",width:75,height:75},{name:"btn-info",src:"btn-info.png",width:68,height:68},{name:"btn-instruction",src:"btn-instruction.png",width:68,height:68},{name:"btn-levels",src:"btn-levels.png",width:60,height:60},{name:"btn-next",src:"btn-next.png",width:51,height:51},{name:"btn-next-big",src:"btn-next-big.png",width:59,height:59},{name:"btn-next-slider",src:"btn-next-slider.png",width:45,
height:45},{name:"btn-pause",src:"btn-pause.png",width:36,height:35},{name:"btn-play-big",src:"btn-play-big.png",width:76,height:76},{name:"btn-play-max",src:"btn-play-max.png",width:113,height:112},{name:"btn-play",src:"btn-play.png",width:60,height:60},{name:"btn-prev-big",src:"btn-prev-big.png",width:59,height:59},{name:"btn-prev-slider",src:"btn-prev-slider.png",width:45,height:45},{name:"btn-prev",src:"btn-prev.png",width:51,height:51},{name:"btn-replay-big",src:"btn-replay-big.png",width:76,
height:76},{name:"btn-replay",src:"btn-replay.png",width:60,height:60},{name:"btn-settings",src:"btn-settings.png",width:70,height:70},{name:"btn-shop",src:"btn-shop.png",width:36,height:35},{name:"btn-slider",src:"btn-slider.png",width:41,height:25},{name:"btn-sound-off",src:"btn-sound-off.png",width:68,height:68},{name:"btn-sound-on",src:"btn-sound-on.png",width:68,height:68},{name:"cannon",src:"cannon.png",width:188,height:73},{name:"crab",src:"crab.png",width:119,height:38},{name:"atwill",src:"elements/atwill.png",
width:39,height:39},{name:"bl1",src:"elements/bl1.png",width:53,height:53},{name:"bl2",src:"elements/bl2.png",width:53,height:53},{name:"bl3",src:"elements/bl3.png",width:53,height:53},{name:"bl4",src:"elements/bl4.png",width:53,height:53},{name:"bl5",src:"elements/bl5.png",width:53,height:53},{name:"bl6",src:"elements/bl6.png",width:53,height:53},{name:"bluetube1",src:"elements/bluetube1.png",width:50,height:38},{name:"bluetube2",src:"elements/bluetube2.png",width:51,height:38},{name:"bluetube3",
src:"elements/bluetube3.png",width:34,height:46},{name:"bluetube4",src:"elements/bluetube4.png",width:38,height:50},{name:"bluetube5",src:"elements/bluetube5.png",width:47,height:34},{name:"bluetube6",src:"elements/bluetube6.png",width:46,height:35},{name:"bluetube7",src:"elements/bluetube7.png",width:38,height:50},{name:"bluetube8",src:"elements/bluetube8.png",width:34,height:46},{name:"bm1",src:"elements/bm1.png",width:35,height:31},{name:"bm2",src:"elements/bm2.png",width:35,height:31},{name:"bm3",
src:"elements/bm3.png",width:35,height:31},{name:"bm4",src:"elements/bm4.png",width:35,height:31},{name:"bm5",src:"elements/bm5.png",width:35,height:31},{name:"bm6",src:"elements/bm6.png",width:35,height:31},{name:"bs1",src:"elements/bs1.png",width:36,height:33},{name:"bs2",src:"elements/bs2.png",width:36,height:33},{name:"bs3",src:"elements/bs3.png",width:36,height:33},{name:"bs4",src:"elements/bs4.png",width:36,height:33},{name:"bs5",src:"elements/bs5.png",width:36,height:33},{name:"bs6",src:"elements/bs6.png",
width:36,height:33},{name:"circle1",src:"elements/circle1.png",width:16,height:17},{name:"circle10",src:"elements/circle10.png",width:30,height:30},{name:"circle2",src:"elements/circle2.png",width:16,height:17},{name:"circle3",src:"elements/circle3.png",width:16,height:17},{name:"circle4",src:"elements/circle4.png",width:16,height:17},{name:"circle5",src:"elements/circle5.png",width:16,height:17},{name:"circle6",src:"elements/circle6.png",width:16,height:17},{name:"circle7",src:"elements/circle7.png",
width:30,height:30},{name:"circle8",src:"elements/circle8.png",width:30,height:30},{name:"circle9",src:"elements/circle9.png",width:30,height:30},{name:"greentube1",src:"elements/greentube1.png",width:50,height:38},{name:"greentube2",src:"elements/greentube2.png",width:51,height:37},{name:"greentube3",src:"elements/greentube3.png",width:33,height:46},{name:"greentube4",src:"elements/greentube4.png",width:37,height:50},{name:"greentube5",src:"elements/greentube5.png",width:46,height:33},{name:"greentube6",
src:"elements/greentube6.png",width:46,height:33},{name:"greentube7",src:"elements/greentube7.png",width:38,height:50},{name:"greentube8",src:"elements/greentube8.png",width:33,height:46},{name:"greytube1",src:"elements/greytube1.png",width:51,height:37},{name:"greytube2",src:"elements/greytube2.png",width:51,height:37},{name:"greytube3",src:"elements/greytube3.png",width:33,height:46},{name:"greytube4",src:"elements/greytube4.png",width:38,height:50},{name:"greytube5",src:"elements/greytube5.png",
width:46,height:32},{name:"greytube6",src:"elements/greytube6.png",width:46,height:33},{name:"greytube7",src:"elements/greytube7.png",width:37,height:50},{name:"greytube8",src:"elements/greytube8.png",width:33,height:46},{name:"jellyfish1",src:"elements/jellyfish1.png",width:26,height:26},{name:"jellyfish2",src:"elements/jellyfish2.png",width:26,height:26},{name:"jellyfish3",src:"elements/jellyfish3.png",width:26,height:26},{name:"jellyfish4",src:"elements/jellyfish4.png",width:26,height:26},{name:"jellyfish5",
src:"elements/jellyfish5.png",width:26,height:26},{name:"multipearl",src:"elements/multipearl.png",width:39,height:39},{name:"octopus1",src:"elements/octopus1.png",width:25,height:31},{name:"octopus2",src:"elements/octopus2.png",width:25,height:31},{name:"octopus3",src:"elements/octopus3.png",width:25,height:31},{name:"octopus4",src:"elements/octopus4.png",width:25,height:31},{name:"octopus5",src:"elements/octopus5.png",width:25,height:31},{name:"octopus6",src:"elements/octopus6.png",width:25,height:31},
{name:"pinktube1",src:"elements/pinktube1.png",width:50,height:37},{name:"pinktube2",src:"elements/pinktube2.png",width:50,height:37},{name:"pinktube3",src:"elements/pinktube3.png",width:33,height:46},{name:"pinktube4",src:"elements/pinktube4.png",width:38,height:50},{name:"pinktube5",src:"elements/pinktube5.png",width:46,height:33},{name:"pinktube6",src:"elements/pinktube6.png",width:46,height:33},{name:"pinktube7",src:"elements/pinktube7.png",width:38,height:50},{name:"pinktube8",src:"elements/pinktube8.png",
width:33,height:46},{name:"shell1",src:"elements/shell1.png",width:20,height:19},{name:"shell2",src:"elements/shell2.png",width:20,height:19},{name:"shell3",src:"elements/shell3.png",width:20,height:19},{name:"shell4",src:"elements/shell4.png",width:20,height:19},{name:"shell5",src:"elements/shell5.png",width:20,height:19},{name:"shell6",src:"elements/shell6.png",width:20,height:19},{name:"starfish1",src:"elements/starfish1.png",width:25,height:23},{name:"starfish2",src:"elements/starfish2.png",width:25,
height:23},{name:"starfish3",src:"elements/starfish3.png",width:25,height:23},{name:"starfish4",src:"elements/starfish4.png",width:25,height:23},{name:"starfish5",src:"elements/starfish5.png",width:25,height:23},{name:"starfish6",src:"elements/starfish6.png",width:25,height:23},{name:"starfish7",src:"elements/starfish7.png",width:25,height:23},{name:"starfish8",src:"elements/starfish8.png",width:25,height:23},{name:"warp_hole",src:"elements/warp_hole.png",width:33,height:32},{name:"whatever",src:"elements/whatever.png",
width:21,height:21},{name:"glass",src:"glass.png",width:38,height:280},{name:"bluetube1_hl",src:"highlights/bluetube1_hl.png",width:50,height:38},{name:"bluetube2_hl",src:"highlights/bluetube2_hl.png",width:51,height:38},{name:"bluetube3_hl",src:"highlights/bluetube3_hl.png",width:34,height:46},{name:"bluetube4_hl",src:"highlights/bluetube4_hl.png",width:38,height:50},{name:"bluetube5_hl",src:"highlights/bluetube5_hl.png",width:47,height:34},{name:"bluetube6_hl",src:"highlights/bluetube6_hl.png",
width:46,height:35},{name:"bluetube7_hl",src:"highlights/bluetube7_hl.png",width:38,height:50},{name:"bluetube8_hl",src:"highlights/bluetube8_hl.png",width:34,height:46},{name:"bs_hl",src:"highlights/bs_hl.png",width:51,height:50},{name:"greentube1_hl",src:"highlights/greentube1_hl.png",width:50,height:38},{name:"greentube2_hl",src:"highlights/greentube2_hl.png",width:51,height:37},{name:"greentube3_hl",src:"highlights/greentube3_hl.png",width:33,height:46},{name:"greentube4_hl",src:"highlights/greentube4_hl.png",
width:37,height:50},{name:"greentube5_hl",src:"highlights/greentube5_hl.png",width:46,height:33},{name:"greentube6_hl",src:"highlights/greentube6_hl.png",width:46,height:33},{name:"greentube7_hl",src:"highlights/greentube7_hl.png",width:38,height:50},{name:"greentube8_hl",src:"highlights/greentube8_hl.png",width:33,height:46},{name:"greytube1_hl",src:"highlights/greytube1_hl.png",width:51,height:37},{name:"greytube2_hl",src:"highlights/greytube2_hl.png",width:51,height:37},{name:"greytube3_hl",src:"highlights/greytube3_hl.png",
width:33,height:46},{name:"greytube4_hl",src:"highlights/greytube4_hl.png",width:38,height:50},{name:"greytube5_hl",src:"highlights/greytube5_hl.png",width:46,height:32},{name:"greytube6_hl",src:"highlights/greytube6_hl.png",width:46,height:33},{name:"greytube7_hl",src:"highlights/greytube7_hl.png",width:37,height:50},{name:"greytube8_hl",src:"highlights/greytube8_hl.png",width:33,height:46},{name:"jellyfish1_hl",src:"highlights/jellyfish1_hl.png",width:41,height:40},{name:"jellyfish2_hl",src:"highlights/jellyfish2_hl.png",
width:41,height:40},{name:"jellyfish3_hl",src:"highlights/jellyfish3_hl.png",width:41,height:40},{name:"jellyfish4_hl",src:"highlights/jellyfish4_hl.png",width:41,height:40},{name:"jellyfish5_hl",src:"highlights/jellyfish5_hl.png",width:41,height:40},{name:"octopus_hl",src:"highlights/octopus_hl.png",width:43,height:49},{name:"pinktube1_hl",src:"highlights/pinktube1_hl.png",width:50,height:37},{name:"pinktube2_hl",src:"highlights/pinktube2_hl.png",width:50,height:37},{name:"pinktube3_hl",src:"highlights/pinktube3_hl.png",
width:33,height:46},{name:"pinktube4_hl",src:"highlights/pinktube4_hl.png",width:38,height:50},{name:"pinktube5_hl",src:"highlights/pinktube5_hl.png",width:46,height:33},{name:"pinktube6_hl",src:"highlights/pinktube6_hl.png",width:46,height:33},{name:"pinktube7_hl",src:"highlights/pinktube7_hl.png",width:38,height:50},{name:"pinktube8_hl",src:"highlights/pinktube8_hl.png",width:33,height:46},{name:"shell1_hl",src:"highlights/shell1_hl.png",width:42,height:42},{name:"shell2_hl",src:"highlights/shell2_hl.png",
width:42,height:42},{name:"shell3_hl",src:"highlights/shell3_hl.png",width:42,height:42},{name:"shell4_hl",src:"highlights/shell4_hl.png",width:42,height:42},{name:"shell5_hl",src:"highlights/shell5_hl.png",width:42,height:42},{name:"shell6_hl",src:"highlights/shell6_hl.png",width:42,height:42},{name:"starfish_hl",src:"highlights/starfish_hl.png",width:44,height:41},{name:"light",src:"light.png",width:103,height:124},{name:"lock",src:"lock.png",width:27,height:31},{name:"num-big",src:"num-big.png",
width:34,height:36,frames:12},{name:"num-levels",src:"num-levels.png",width:36,height:36,frames:11},{name:"pearl",src:"pearl.png",width:29,height:29},{name:"best-score",src:a+"best-score.jpg"},{name:"game-back",src:a+"game-back.jpg"},{name:"instruction-1",src:a+"instruction-1.jpg"},{name:"instruction-2",src:a+"instruction-2.jpg"},{name:"instruction-3",src:a+"instruction-3.jpg"},{name:"level-cleared",src:a+"level-cleared.jpg"},{name:"level-failed",src:a+"level-failed.jpg"},{name:"levels",src:a+"levels.jpg"},
{name:"menu",src:a+"menu.jpg"},{name:"pause",src:a+"pause.jpg"},{name:"settings",src:a+"settings.jpg"},{name:"shop",src:a+"shop.jpg"},{name:"shooter",src:"shooter.png",width:34,height:36},{name:"block-aim",src:"shop_elements/block-aim.png",width:270,height:151},{name:"block-bimba",src:"shop_elements/block-bimba.png",width:270,height:151},{name:"block-pearls",src:"shop_elements/block-pearls.png",width:270,height:151},{name:"block-rocket-red",src:"shop_elements/block-rocket-red.png",width:270,height:151},
{name:"block-rocket",src:"shop_elements/block-rocket.png",width:270,height:151},{name:"bomb-big",src:"shop_elements/bomb-big.png",width:24,height:40},{name:"bomb",src:"shop_elements/bomb.png",width:22,height:33},{name:"bomb2-big",src:"shop_elements/bomb2-big.png",width:20,height:29},{name:"bomb2",src:"shop_elements/bomb2.png",width:15,height:22},{name:"bomb3-big",src:"shop_elements/bomb3-big.png",width:21,height:30},{name:"bomb3",src:"shop_elements/bomb3.png",width:16,height:22},{name:"target",src:"shop_elements/target.png",
width:47,height:53},{name:"sparkle",src:"sparkle.png",width:38,height:24,frames:7},{name:"splash",src:"splash.png",width:480,height:320},{name:"star-blue-mini",src:"star-blue-mini.png",width:18,height:18},{name:"star-blue",src:"star-blue.png",width:39,height:37},{name:"star-yellow-mini",src:"star-yellow-mini.png",width:18,height:18},{name:"star-yellow",src:"star-yellow.png",width:39,height:37},{name:"txt-extra-pearl",src:"txt-extra-pearl.png",width:126,height:18},{name:"txt-multi-pearl",src:"txt-multi-pearl.png",
width:122,height:18},{name:"txt-second-chance",src:"txt-second-chance.png",width:145,height:18},{name:"white-explosion",src:"white-explosion.png",width:156,height:156,frames:13}]);library.load(loadImagesEnd,Utils.showLoadProgress)}function loadImagesEnd(){document.getElementById("progress_container").style.display="none";document.getElementById("screen_container").style.display="block";document.getElementById("screen_background_container").style.display="block";1!=GET.debug&&prepareGame()}
function getStageWidth(){return Math.round(480*screenWidthCoef)}function getStageHeight(){return Math.floor(320*screenHeightCoef)}function getStageWidthCenter(){return Math.round(getStageWidth()/2)}function getStageHeightCenter(){return Math.round(getStageHeight()/2)}function createStage(){stage&&(stage.destroy(),stage.stop());stage=new Stage("screen",getStageWidth(),getStageHeight());stage.delay=1E3/fps;stage.onpretick=preTick;stage.onposttick=postTick;stage.ceilSizes=!0;stage.showFPS=!1}
function createScene(){console.log("=====createScene");createStage();gameState==STATE_SPLASH&&(setBackColor("#fee002"),showSplash());gameState==STATE_COVER&&(setBackColor("#000000"),showCover());gameState==STATE_MENU&&(setBackColor("#000000"),showMenu());gameState==STATE_INSTRUCTION_ONE&&(setBackColor("#000000"),showInstructionOne());gameState==STATE_INSTRUCTION_TWO&&(setBackColor("#000000"),showInstructionTwo());gameState==STATE_INSTRUCTION_THREE&&(setBackColor("#000000"),showInstructionThree());
gameState==STATE_CHOOSE_LEVEL&&(setBackColor("#000000"),showChooseLevel());gameState==STATE_GAME&&(setBackColor("#000000"),processState==PROCESS_START&&startLevel(curLevel));gameState==STATE_LEVEL_CLEARED&&(setBackColor("#000000"),showLevelCleared());gameState==STATE_LEVEL_FAILED&&(setBackColor("#000000"),showLevelFailed());gameState==STATE_LEADER&&(setBackColor("#000000"),showHighscores());gameState==STATE_ABOUT&&(setBackColor("#fee002"),showAbout());gameState==STATE_SHOP&&(setBackColor("#000000"),
showShop());gameState==STATE_SETTINGS&&(setBackColor("#000000"),showSettings());buildBackground();stage.start()}function showSplash(){var a=library.getSprite("splash");a.x=getStageWidthCenter();a.y=getStageHeightCenter();a.static=!0;stage.addChild(a);setTimeout(function(){gameState=STATE_COVER;createScene()},3E3)}
function showCover(){mc=library.getSprite("menu",{width:getStageWidth(),height:getStageHeight()});mc.x=getStageWidthCenter();mc.y=getStageHeightCenter();mc.static=!0;stage.addChild(mc);mc=library.getSprite("btn-play");mc.x=getStageWidthCenter()+19;mc.y=stage.screenHeight-120;mc.static=!0;mc.zIndex=20;mc.onclick=function(){gameState=STATE_MENU;createScene()};stage.addChild(mc)}
function showMenu(){sound&&mixer.play("pool_fun",!0,!1,0);mc=library.getSprite("menu");mc.x=getStageWidthCenter();mc.y=getStageHeightCenter();mc.static=!0;stage.addChild(mc);mc=library.getSprite("btn-play-max");mc.x=getStageWidthCenter()+170;mc.y=getStageHeightCenter();mc.static=!0;mc.onmouseup=function(){gameState=STATE_CHOOSE_LEVEL;Utils.getCookie("bf_instruction")||(gameState=STATE_INSTRUCTION_ONE);createScene();return!1};stage.addChild(mc);mc=library.getSprite("btn-best-score");mc.x=50;mc.y=50;
mc.static=!0;mc.zIndex=20;mc.onclick=function(){gameState=STATE_LEADER;createScene()};stage.addChild(mc);mc=library.getSprite("btn-settings");mc.x=getStageWidthCenter()+120;mc.y=35;mc.static=!0;mc.zIndex=20;mc.onclick=function(){gameState=STATE_SETTINGS;createScene()};stage.addChild(mc);mc=library.getSprite("btn-more-games");mc.x=getStageWidthCenter()+190;mc.y=60;mc.static=!0;mc.onclick=function(){window.open("http://wap.renxo.com")};stage.addChild(mc)}
function showInstructionOne(){mc=library.getSprite("instruction-1");mc.x=getStageWidthCenter();mc.y=getStageHeightCenter();mc.static=!0;stage.addChild(mc);mc=library.getSprite("btn-prev");mc.x=30;mc.y=30;mc.static=!0;mc.onclick=function(){pause_flag&&(gameState=STATE_PAUSE);gameState=settings_flag?STATE_SETTINGS:STATE_MENU;createScene()};stage.addChild(mc);mc=library.getSprite("btn-next");mc.x=getStageWidth()-30;mc.y=30;mc.static=!0;mc.onclick=function(){gameState=STATE_INSTRUCTION_TWO;createScene()};
stage.addChild(mc)}function showInstructionTwo(){mc=library.getSprite("instruction-2");mc.x=getStageWidthCenter();mc.y=getStageHeightCenter();mc.static=!0;stage.addChild(mc);mc=library.getSprite("btn-prev");mc.x=30;mc.y=30;mc.static=!0;mc.onclick=function(){gameState=STATE_INSTRUCTION_ONE;createScene()};stage.addChild(mc);mc=library.getSprite("btn-next");mc.x=getStageWidth()-30;mc.y=30;mc.static=!0;mc.onclick=function(){gameState=STATE_INSTRUCTION_THREE;createScene()};stage.addChild(mc)}
function showInstructionThree(){mc=library.getSprite("instruction-3");mc.x=getStageWidthCenter();mc.y=getStageHeightCenter();mc.static=!0;stage.addChild(mc);mc=library.getSprite("btn-prev");mc.x=30;mc.y=30;mc.static=!0;mc.onclick=function(){gameState=STATE_INSTRUCTION_TWO;createScene()};stage.addChild(mc);mc=library.getSprite("btn-next");mc.x=getStageWidth()-30;mc.y=30;mc.static=!0;mc.onclick=function(){pause_flag&&(gameState=STATE_PAUSE);settings_flag?gameState=STATE_SETTINGS:(Utils.getCookie("bf_instruction")||
Utils.setCookie("bf_instruction",1),gameState=STATE_CHOOSE_LEVEL);createScene()};stage.addChild(mc)}
function showSettings(){settings_flag=!0;mc=library.getSprite("settings");mc.x=getStageWidthCenter();mc.y=getStageHeightCenter();mc.static=!0;stage.addChild(mc);mc=library.getSprite("btn-back");mc.x=50;mc.y=50;mc.static=!0;mc.zIndex=20;mc.onclick=function(){settings_flag=!1;gameState=STATE_MENU;createScene()};stage.addChild(mc);mc=library.getSprite("btn-instruction");mc.x=getStageWidthCenter()-138;mc.y=getStageHeightCenter()+12;mc.static=!0;mc.zIndex=20;mc.onclick=function(a){gameState=STATE_INSTRUCTION_ONE;
createScene()};stage.addChild(mc);mc=library.getSprite(sound?"btn-sound-on":"btn-sound-off");mc.x=getStageWidthCenter();mc.y=getStageHeightCenter()+12;mc.static=!0;mc.zIndex=20;mc.onclick=function(a){sound?(a.target.bitmap=library.getBitmap("btn-sound-off"),mixer.stop(0),Utils.setCookie("sound",2),sound=!1):(a.target.bitmap=library.getBitmap("btn-sound-on"),mixer.play("music",!0,!1,0),Utils.setCookie("sound",1),sound=!0);buildBackground();return!1};stage.addChild(mc);mc=library.getSprite("btn-info");
mc.x=getStageWidthCenter()+138;mc.y=getStageHeightCenter()+12;mc.static=!0;mc.zIndex=20;mc.onclick=function(){gameState=STATE_ABOUT;createScene()};stage.addChild(mc)}
function showChooseLevel(){var a;console.log("openLevel = "+openLevel);a=library.getSprite("levels");a.x=getStageWidthCenter();a.y=getStageHeightCenter();a.static=!0;stage.addChild(a);var c;for(a=0;15>a;a++){c=a+15*page;var e=a%5,f=Math.floor(a/5),g=new Sprite(null,60,60);g.n=c;g.x=getStageWidthCenter()+-184+88*e;g.y=2>f?getStageHeightCenter()+-59+87*f:getStageHeightCenter()+-59+87*f-4;g.static=!0;g.onmouseup=function(a){if(a.target.n>openLevel||a.target.n>countLevels)return!1;curLevel=a.target.n;
curLevel>countLevels&&(curLevel=countLevels);gameState=STATE_GAME;createScene();return!1};stage.addChild(g);var h=new SimpleText(library.getBitmap("num-levels"),36,36);h.x=g.x;h.y=g.y;h.charMap=charMap;h.charWidth=charWidth;h.align=h.ALIGN_CENTER;h.charSpacing=-8;h.write(c<=countLevels?c+1:"");for(h=0;3>h;h++){var k=library.getSprite(h<bestLevelStars[c]?"star-yellow-mini":"star-blue-mini");k.x=getStageWidthCenter()-197+88*e+18*h;k.y=2>f?getStageHeightCenter()-26+87*f:getStageHeightCenter()-26+87*
f-4;k.static=!0;stage.addChild(k)}g.n>openLevel&&(c=library.getSprite("lock"),c.x=getStageWidthCenter()-152+88*e,c.y=2>f?getStageHeightCenter()-81+87*f:getStageHeightCenter()-81+87*f-4,c.static=!1,stage.addChild(c))}a=library.getSprite("btn-prev");a.x=30;a.y=30;a.onclick=function(){0==page?gameState=STATE_MENU:(page--,gameState=STATE_CHOOSE_LEVEL);createScene()};stage.addChild(a);2!=page&&(a=library.getSprite("btn-next"),a.x=getStageWidth()-30,a.y=30,a.onclick=function(){page++;gameState=STATE_CHOOSE_LEVEL;
createScene()},stage.addChild(a));h=new SimpleText(library.getBitmap("num-big"),34,36);h.x=getStageWidthCenter()+50;h.y=getStageHeightCenter()-125;h.scale=0.9;h.charMap=charMap;h.charWidth=charWidthCL;h.charSpacing=-6;h.align=h.ALIGN_LEFT;h.write(gameScore.insertComma());return!1}
function showLevelCleared(){console.log("=====showLevelCleared");GameBase.setPlayerScore();mc=library.getSprite("level-cleared");mc.x=getStageWidthCenter();mc.y=getStageHeightCenter();mc.static=!0;mc.onmousedown=function(){return!1};mc.onmouseup=function(){return!1};stage.addChild(mc);mc=library.getSprite("btn-levels");mc.x=getStageWidthCenter()-200;mc.y=getStageHeight()-40;mc.static=!0;mc.onmouseup=function(){gameState=STATE_CHOOSE_LEVEL;createScene();return!1};stage.addChild(mc);mc=library.getSprite("btn-replay");
mc.x=getStageWidthCenter();mc.y=getStageHeight()-40;mc.static=!0;mc.onmouseup=function(){gameState=STATE_GAME;createScene();return!1};stage.addChild(mc);1<levelStars[curLevel]&&(mc=library.getSprite("btn-play"),mc.x=getStageWidthCenter()+200,mc.y=getStageHeight()-40,mc.static=!0,mc.onmouseup=function(){curLevel++;curLevel<countLevels?gameState=STATE_GAME:(curLevel=countLevels,gameState=STATE_MENU);createScene();return!1},stage.addChild(mc));console.log("curLevel = "+curLevel);text=new SimpleText(library.getBitmap("num-big"),
34,36);text.x=getStageWidthCenter()+75;text.y=getStageHeightCenter()-60;text.charMap=charMap;text.charWidth=charWidth;text.charSpacing=-8;text.align=text.ALIGN_LEFT;text.write(curLevel+1);text=new SimpleText(library.getBitmap("num-big"),34,36);text.x=getStageWidthCenter();text.y=getStageHeightCenter()+44;text.charMap=charMap;text.charWidth=charWidthBig2;text.charSpacing=-6;text.align=text.ALIGN_CENTER;text.write(0);var a=null;starSprites=[];for(var c=0;3>c;c++)a=library.getSprite("star-blue"),a.x=
getStageWidthCenter()+-50+50*c,a.y=getStageHeightCenter()-124,a.COLOR=BLUE,a.static=!1,a.visible=!0,stage.addChild(a),starSprites.push(a);console.log("levelStars["+curLevel+"] = "+levelStars[curLevel]);showAnimationStar(!0);showCounter(text)}
function showLevelFailed(){console.log("=====showLevelFailed");mc=library.getSprite("level-failed");mc.x=getStageWidthCenter();mc.y=getStageHeightCenter();mc.static=!0;mc.onmousedown=function(){return!1};mc.onmouseup=function(){return!1};stage.addChild(mc);mc=library.getSprite("btn-levels");mc.x=getStageWidthCenter()-200;mc.y=getStageHeight()-40;mc.static=!0;mc.onmouseup=function(){GameBase.setPlayerScore();gameState=STATE_CHOOSE_LEVEL;createScene();return!1};stage.addChild(mc);mc=library.getSprite("btn-replay");
mc.x=getStageWidthCenter();mc.y=getStageHeight()-40;mc.static=!0;mc.onmouseup=function(){gameState=STATE_GAME;createScene();return!1};stage.addChild(mc);text=new SimpleText(library.getBitmap("num-big"),34,36);text.x=getStageWidthCenter()+75;text.y=getStageHeightCenter()-60;text.charMap=charMap;text.charWidth=charWidth;text.charSpacing=-8;text.align=text.ALIGN_LEFT;text.write(curLevel+1);text=new SimpleText(library.getBitmap("num-big"),34,36);text.x=getStageWidthCenter();text.y=getStageHeightCenter()+
44;text.charMap=charMap;text.charWidth=charWidthBig2;text.charSpacing=-6;text.align=text.ALIGN_CENTER;text.write(curLevelScore.insertComma())}
function showHighscores(){console.log("=====showHighscores");mc=library.getSprite("best-score",{width:getStageWidth(),height:getStageHeight()});mc.x=getStageWidthCenter();mc.y=getStageHeightCenter();mc.static=!0;mc.onmousedown=function(){return!1};mc.onmouseup=function(){return!1};stage.addChild(mc);mc=library.getSprite("btn-back");mc.x=getStageWidthCenter()-200;mc.y=getStageHeight()-40;mc.zIndex=20;mc.animated=!1;mc.static=!0;mc.onclick=function(){gameState=STATE_MENU;createScene()};stage.addChild(mc);
var a=new SimpleText(library.getBitmap("num-big"),34,36);a.x=getStageWidthCenter()+140;a.y=getStageHeightCenter()-35;a.scale=1;a.charMap=charMap;a.charWidth=charWidth;a.align=a.ALIGN_LEFT;a.charSpacing=-5;a.write(maxLevel);a=new SimpleText(library.getBitmap("num-big"),34,36);a.x=getStageWidthCenter();a.y=getStageHeightCenter()+52;a.scale=1.5;a.charMap=charMap;a.charWidth=charWidthBig;a.align=a.ALIGN_CENTER;a.charSpacing=-5;a.write(maxScore.insertComma())}
function showAbout(){var a=library.getSprite("about");a.x=getStageWidthCenter();a.y=getStageHeightCenter();a.static=!0;a.onclick=function(){gameState=STATE_SETTINGS;createScene()};stage.addChild(a)}
function showPause(){pause_flag=!0;var a=library.getSprite("pause");a.x=getStageWidthCenter();a.y=getStageHeightCenter();a.setZIndex(stage.objects[stage.getMaxZIndexInStack(stage.objects)].zIndex+1);a.static=!1;a.onmousedown=function(){return!1};a.onmouseup=function(){return!1};a.onmousemove=function(){return!1};stage.addChild(a);var c=library.getSprite(sound?"btn-sound-on":"btn-sound-off");c.x=getStageWidthCenter()-205;c.y=50;c.static=!1;c.onmousedown=function(a){sound?(a.target.bitmap=library.getBitmap("btn-sound-off"),
mixer.stop(0),Utils.setCookie("sound",2),sound=!1):(a.target.bitmap=library.getBitmap("btn-sound-on"),mixer.play("pool_fun",!0,!1,0),Utils.setCookie("sound",1),sound=!0);buildBackground();return!1};stage.addChild(c);var e=library.getSprite("btn-instruction");e.x=getStageWidthCenter()+200;e.y=50;e.static=!1;e.onmousedown=function(){gameState=STATE_INSTRUCTION_ONE;createScene();return!1};stage.addChild(e);var f=library.getSprite("btn-home");f.x=getStageWidthCenter()-130;f.y=180;f.static=!1;f.onclick=
function(){GameBase.resetGameParameters();gameState=STATE_MENU;createScene();return!1};stage.addChild(f);var g=library.getSprite("btn-replay-big");g.x=getStageWidthCenter()+130;g.y=180;g.static=!1;g.onmouseup=function(){GameBase.resetGameParameters();gameState=STATE_GAME;createScene();return!1};stage.addChild(g);var h=library.getSprite("btn-play-big");h.x=getStageWidthCenter();h.y=180;h.static=!1;h.onmousdown=function(){return!1};h.onmouseup=function(){a.destroy=!0;f.destroy=!0;g.destroy=!0;h.destroy=
!0;c.destroy=!0;e.destroy=!0;k.destroy=!0;pause_flag=!1;buildBackground();return!1};stage.addChild(h);var k=library.getSprite("btn-select-level");k.x=getStageWidthCenter();k.y=270;k.static=!1;k.onclick=function(){GameBase.resetGameParameters();gameState=STATE_CHOOSE_LEVEL;createScene();return!1};stage.addChild(k);buildBackground();return!1}
function showShop(){shop_flag=!0;slide_flag=0;priceSprites=[];var a=["bimba","rocket","aim","pearls","rocket-red"],c=[],e=[],f=0,g=0,h=0,k=!1,l=0,m=0,n=null,p=null,q=library.getSprite("shop");q.x=getStageWidthCenter();q.y=getStageHeightCenter();q.setZIndex(stage.objects[stage.getMaxZIndexInStack(stage.objects)].zIndex+1);q.static=!1;q.onmousedown=function(a){console.log("=====shopBG.onmousedown");90<a.y&&(k=!0);return!1};q.onmouseup=function(){console.log("=====shopBG.onmouseup");return k=!1};q.onmousemove=
function(a){console.log("=====shopBG.onmousemove");if(k){y.x=getStageWidthCenter()+a.x;checkSliderButtonCoor(y);a=(l-y.x)*h;for(var g=-1,n=-1,p=0;p<c.length;p++){c[p].x=m+v*p+a;e[p].x=m+v*p+105+a;var q=stage.createTween(priceSprites[p],"x",priceSprites[p].x,c[p].x-83,1);q.onchange=function(a){a.target.obj.write(shopPrices[a.target.obj.id].insertComma())};q.play();if(g>Math.abs(m-c[p].x)||-1==g)g=Math.abs(m-c[p].x),n=p;f=n}}return!1};stage.addChild(q);var u=library.getSprite("btn-back");u.x=getStageWidthCenter()-
205;u.y=33;u.static=!1;u.onmouseup=function(){GameBase.saveElementsCount();q.destroy=!0;u.destroy=!0;x.destroy=!0;z.destroy=!0;y.destroy=!0;shopGameScore.write();for(var a=0;5>a;a++)shopCountElements[a].write(),priceSprites[a].write();for(a=0;a<stage.objects.length;a++)stage.objects[a].SHOPBLOCK&&(stage.objects[a].visible=!1,stage.objects[a].destroy=!0);shop_flag=!1;buildBackground();return!1};stage.addChild(u);for(var r=0;r<countItems;r++)shopCountElements[r]=new SimpleText(library.getBitmap("num-big"),
34,36),shopCountElements[r].x=getStageWidthCenter()+-150+40*r,shopCountElements[r].y=getStageHeightCenter()-125,shopCountElements[r].scale=0.4,shopCountElements[r].charMap=charMap,shopCountElements[r].charWidth=charWidth,shopCountElements[r].align=levelText.ALIGN_LEFT,shopCountElements[r].charSpacing=-5,shopCountElements[r].write(BonusElement.element[r].left);tmpGameScore=gameScore+curLevelScore;shopGameScore=new SimpleText(library.getBitmap("num-big"),34,36);shopGameScore.x=getStageWidthCenter()+
135;shopGameScore.y=26;shopGameScore.scale=0.75;shopGameScore.charMap=charMap;shopGameScore.charWidth=charWidthShop;shopGameScore.align=levelText.ALIGN_LEFT;shopGameScore.charSpacing=-6;shopGameScore.write(tmpGameScore.insertComma());r=new SpritesGroup(stage);r.x=getStageWidthCenter();r.y=getStageHeightCenter();for(var v=400,r=0;r<a.length;r++)c[r]=library.getSprite("block-"+a[r]),c[r].x=getStageWidthCenter()+0+v*r,c[r].y=getStageHeightCenter()+10,c[r].static=!1,c[r].SHOPBLOCK=!0,c[r].id=r,c[r].onmouseup=
buyItem,stage.addChild(c[r]),showItemPrices(c[r].x,r),e[r]=library.getSprite("btn-shop"),e[r].x=getStageWidthCenter()+0+v*r+105,e[r].y=getStageHeightCenter()+55,e[r].static=!1,e[r].SHOPBLOCK=!0,e[r].BUYBUTTON=!0,e[r].id=r,e[r].onmouseup=buyItem,stage.addChild(e[r]),g+=v;m=c[0].x;h=(g-v)/(getStageWidthCenter()+215-45-(getStageWidthCenter()-215+45));console.log("coef_width = "+h);var x=library.getSprite("btn-prev-slider");x.x=getStageWidthCenter()-215;x.y=getStageHeightCenter()+120;x.static=!1;x.onmousemove=
x.onmousedown=function(){return!1};x.onmouseup=function(){if(slide_flag)return!1;n&&clearTimeout(n);n=setTimeout(function(){clearTimeout(n);k=!1;if(0<f&&!slide_flag)for(var a=Math.abs(c[f-1].x-m),g=0;g<c.length;g++){slide_flag++;c[g].moveTo(c[g].x+a,c[g].y,fps/3,null,function(){slide_flag--;slide_flag||f--});e[g].moveTo(e[g].x+a,e[g].y,fps/3);var p=stage.createTween(priceSprites[g],"x",priceSprites[g].x,c[g].x+a-83,fps/3);p.onchange=function(a){a.target.obj.write(shopPrices[a.target.obj.id].insertComma())};
p.onfinish=function(){y.x=l+Math.abs((c[0].x-m)/h);checkSliderButtonCoor(y)};p.play()}},50);return!1};stage.addChild(x);var z=library.getSprite("btn-next-slider");z.x=getStageWidthCenter()+215;z.y=getStageHeightCenter()+120;z.static=!1;z.onmousemove=z.onmousedown=function(){return!1};z.onmouseup=function(){if(slide_flag)return!1;p&&clearTimeout(p);p=setTimeout(function(){clearTimeout(p);k=!1;if(f<countItems-1&&!slide_flag){for(var a=Math.abs(c[f+1].x-m),g=0;g<c.length;g++){slide_flag++;c[g].moveTo(c[g].x-
a,c[g].y,fps/3,null,function(){slide_flag--;slide_flag||(console.log(""),f++)});e[g].moveTo(e[g].x-a,e[g].y,fps/3);var n=stage.createTween(priceSprites[g],"x",priceSprites[g].x,c[g].x-a-83,fps/3);n.onchange=function(a){a.target.obj.write(shopPrices[a.target.obj.id].insertComma())};n.onfinish=function(){y.x=l+Math.abs((c[0].x-m)/h);checkSliderButtonCoor(y)};n.play()}y.x=l+Math.abs((c[0].x-m)/h)}},50);return!1};stage.addChild(z);var y=library.getSprite("btn-slider");y.x=getStageWidthCenter()-215+x.width;
y.y=getStageHeightCenter()+120;y.static=!1;y.onmousedown=function(){k=!0;return!1};y.onmouseup=function(){return k=!1};stage.addChild(y);l=y.x;buildBackground();return!1}function showItemPrices(a,c){var e=new SimpleText(library.getBitmap("num-big"),34,36);e.x=a-83;e.y=getStageHeightCenter()+55;e.scale=0.75;e.charMap=charMap;e.charWidth=charWidthMin;e.align=levelText.ALIGN_CENTER;e.charSpacing=-6;e.id=c;e.write(shopPrices[c].insertComma());priceSprites.push(e)}
function hideItemPrices(){for(var a=0;a<priceSprites.length;a++)priceSprites[a]&&priceSprites[a].write();priceSprites=[]}function showCountElements(a){shopCountElements[a].write(BonusElement.element[a].left)}function checkSliderButtonCoor(a){a.x-a.width/2<=getStageWidthCenter()-215+28&&(a.x=getStageWidthCenter()-215+45);a.x+a.width/2>=getStageWidthCenter()+215-28&&(a.x=getStageWidthCenter()+215-45)}
function buyItem(a){if(tmpGameScore>=shopPrices[a.target.id]&&50<a.target.x){a.target.BUYBUTTON?showExplosion(a.target.x,a.target.y):showExplosion(a.target.x-76,a.target.y-6);tmpGameScore-=shopPrices[a.target.id];gameScore=tmpGameScore-curLevelScore;if(0>tmpGameScore)return tmpGameScore=gameScore=0,!1;BonusElement.addElement(a.target.id);showCountElements(a.target.id)}return!1}function setBackColor(a){document.body.style.background=a}
function createGameArea(a){console.log("=====createGameArea");var c=library.getSprite("game-back");a&&(c.static=!0);c.setPosition(getStageWidthCenter(),getStageHeightCenter());c.onmousedown=function(a){console.log("===================ga.onmousedown()");!Pearl.onFieldFlag&&Math.abs(a.x)<GameWorld.sideShiftWall-GameWorld.widthSidePanel/2&&(Cannon.startRotation=!0);console.log("e = ",a);!Pearl.onFieldFlag&&100>Math.abs(a.y)&&-213>a.x&&-228<a.x&&BonusElement.undoElement();return!1};c.onmouseup=function(a){!Pearl.onFieldFlag&&
Math.abs(a.x)<GameWorld.sideShiftWall-GameWorld.widthSidePanel/2&&(Cannon.startRotation=!1,Pearl.createBody(),Pearl.move());return!1};c.onmousemove=function(a){Pearl.onFieldFlag||(Cannon.rotate(a),Pearl.takeAim())};stage.addChild(c);gameAreaSprite=c;mc=library.getSprite("btn-pause");mc.x=getStageWidthCenter()-220;mc.y=getStageHeight()-20;mc.static=!1;mc.onmousedown=function(){pause_flag||explosion_flag||showPause();return!1};stage.addChild(mc);mc=library.getSprite("btn-shop");mc.x=getStageWidthCenter()+
208;mc.y=30;mc.static=!1;mc.onmousedown=function(){shop_flag||explosion_flag||showShop();return!1};stage.addChild(mc);levelText=new SimpleText(library.getBitmap("num-big"),34,36);levelText.x=getStageWidthCenter()-101;levelText.y=12;levelText.scale=0.45;levelText.charMap=charMap;levelText.charWidth=charWidth;levelText.align=levelText.ALIGN_LEFT;levelText.charSpacing=-5;levelText.write(curLevel+1);shotsText=new SimpleText(library.getBitmap("num-big"),34,36);shotsText.x=getStageWidthCenter()-211;shotsText.y=
30;shotsText.scale=0.9;shotsText.charMap=charMap;shotsText.charWidth=charWidth;shotsText.align=levelText.ALIGN_CENTER;shotsText.charSpacing=-5;shotsText.write(Shots.count);scoreText=new SimpleText(library.getBitmap("num-big"),34,36);scoreText.x=getStageWidthCenter()+118;scoreText.y=11;scoreText.scale=0.55;scoreText.charMap=charMap;scoreText.charWidth=charWidth;scoreText.align=levelText.ALIGN_CENTER;scoreText.charSpacing=-5;scoreText.write(curLevelScore.insertComma());sparkleSprite=library.getSprite("sparkle");
sparkleSprite.x=getStageWidthCenter();sparkleSprite.y=getStageHeightCenter();sparkleSprite.static=!1;sparkleSprite.visible=!1;stage.addChild(sparkleSprite);for(a=0;3>a;a++)c=library.getSprite("star-blue-mini"),c.x=getStageWidthCenter()+105+22*a,c.y=getStageHeightCenter()-128,c.COLOR=BLUE,c.static=!1,stage.addChild(c),starSprites.push(c);GameWorld.createWorld()}function spritesSync(a,c,e){c=new Vector(-a.target.syncX,-a.target.syncY);c.rotate(-a.target.rotation);a.target.x+=c.x;a.target.y+=c.y}
function findObject(a){for(var c=0;c<objects.length;c++)if(objects[c].name==a)return objects[c];return!1}function prepareGame(){console.log("=====prepareGame");2!=parseInt(Utils.getCookie("sound"))&&1!=parseInt(Utils.getCookie("sound"))&&Utils.setCookie("sound",1);1==parseInt(Utils.getCookie("sound"))?sound=!0:2==parseInt(Utils.getCookie("sound"))&&(sound=!1);GameBase.getPlayerScore();gameState=STATE_MENU;createScene()}
function prepareLevel(a){stage&&(mc=library.getSprite("hourglass"),mc.x=getStageWidthCenter(),mc.y=getStageHeightCenter(),stage.addChild(mc));setTimeout("startLevel("+a+")",1E3/fps*2)}
function startLevel(a,c){console.log("=====startLevel");Level.level&&(a=Level.level);console.log("level = "+a);GameBase.resetGameParameters();createStage();createGameArea(c?!1:!0);var e,f;c&&(a=0,levels=[c],gameState=STATE_GAME);e=levels[a].objects;f=levels[a].joints;if(levels[a]){curLevel=a;a>openLevel&&(openLevel=a);console.log("openLevel = "+openLevel);for(var g,h,k=0;k<e.length;k++)g=e[k],h=findObject(g.type),mc=GameWorld.createObject(g,h),h.type==BALL&&(mc.__BALL=!0,mc.radius=ballRadius,mc.box2dBody.frictionCoef=
1,GameBase.countBall++);if(f)for(k=0;k<f.length;k++)e=f[k],g=getBodyByPoint(e.point1),h=getBodyByPoint(e.point2?e.point2:e.point1,g),0==e.type&&box2DCreateRevoluteJoint(GameWorld.world,g,h,e.point1,e.custom),1==e.type&&box2DCreateDistanceJoint(GameWorld.world,g,h,e.point1,e.point2),2==e.type&&box2DCreatePrismaticJoint(GameWorld.world,g,h,e.point2,e.custom);Shots.init();Cannon.init();Pearl.init();Crab.init();countPosibleLevelScore();Shots.show();BonusElement.init();stage.start()}}
function getBodyByPoint(a,c){var e=GameWorld.world.GetGroundBody();if(a&&(stack=stage.getObjectsStackByCoord(a.x,a.y,!1),0<stack.length))for(var f=stack.length-1;0<=f;f--)stack[f].box2dBody&&stack[f].box2dBody!=c&&(e=stack[f].box2dBody);return e}function createLevelObjects(a,c){var e;c?(e=c.objects,levels=[c],gameState=STATE_GAME):e=levels[a].objects;for(var f=0;f<e.length;f++)self.createObject(e[f])}
function checkLevelScore(){var a=100*curLevelScore/posibleLevelScore,c=-1;a>=starPrize[0]&&a<starPrize[1]&&(c=0);a>=starPrize[1]&&a<starPrize[2]&&(c=1);a>=starPrize[2]&&100>=a&&(c=2);-1<c&&(starCouter<c||0>starCouter)&&(console.log("percent = "+a),starCouter=c,showAnimationStar())}function countPosibleLevelScore(){posibleLevelScore=150*GameWorld.countElements;console.log("posibleLevelScore = "+posibleLevelScore)}
function showExplosion(a,c){explosion_flag++;var e=library.getSprite("white-explosion");e.x=a;e.y=c;e.animation=!0;e.animDelay=2;e.static=!1;e.onrender=function(a){a.target.currentFrame==a.target.totalFrames-1&&(a.target.destroy=!0,explosion_flag--)};stage.addChild(e);buildBackground()}
function moveTextHitScore(a,c,e,f){a="+"+a;t=new SimpleText(library.getBitmap("num-big"),34,36);t.x=c;t.y=e;t.scale=0.4;t.charMap=charMap;t.charWidth=charWidth;t.align=t.ALIGN_CENTER;t.charSpacing=-7;t.write(a);c=stage.createTween(t,"y",e,f,fps/2,Easing.linear.easeIn);c.onchange=function(c){c.target.obj.write(a)};c.onfinish=function(a){a.target.obj.write("");delete a.target.obj};c.play()}
function moveInfoText(a,c,e,f){a=library.getSprite(a);a.x=c;a.y=e;a.static=!1;stage.addChild(a);c=stage.createTween(a,"y",e,f,fps/2,Easing.linear.easeIn);c.onfinish=function(a){a.target.obj.destroy=!0};c.play()}
function showAnimationStar(a){s=0;animation_stars_flag=!0;animation_star_flag=!1;var c=setInterval(function(){starSprites[s].COLOR!=BLUE||animation_star_flag?starSprites[s].COLOR==YELLOW&&s++:(animation_star_flag=!0,starSprites[s].bitmap=library.getBitmap(a?"star-yellow":"star-yellow-mini"),starSprites[s].scaleX=3,starSprites[s].scaleY=3,starSprites[s].COLOR=YELLOW,starSprites[s].rotation=2*Math.PI,starSprites[s].visible=!0,showExplosion(starSprites[s].x,starSprites[s].y),starSprites[s].rotateTo(0,
fps/2,Easing.cubic.easeOut),starSprites[s].scaleTo(1,fps/2,Easing.linear.easeIn,function(){animation_star_flag=!1}),s++);s>starCouter&&(clearInterval(c),animation_stars_flag=!1)},10)}function showCounter(a){var c=0,e=curLevelScore,f=setInterval(function(){animation_stars_flag||(c>=e?clearInterval(f):(c+=40,c>e&&(c=e),a.write(c.insertComma())))},10)}function buildBackground(){GameWorld.world&&stage.box2dSync(GameWorld.world);stage.drawScene(document.getElementById("screen_background"),!0)}
function preTick(){if(gameState!=STATE_GAME||"undefined"===typeof GameWorld.world||pause_flag||shop_flag)shop_flag&&shopGameScore.write(tmpGameScore.insertComma());else{GameWorld.world.Step(1/(2*fps),1);stage.box2dSync(GameWorld.world);Crab.move();for(var a=0;a<Pearl.sprite.length;a++)Pearl.checkCoor(a),Pearl.checkContactList(a);Warp.checkTeleport();GameWorld.world.Step(1/(2*fps),1);for(a=0;a<Pearl.sprite.length;a++)Pearl.checkContactList(a);checkLevelScore();shotsText.write(Shots.count);scoreText.write(curLevelScore.insertComma());
BonusElement.showCountElement();Fish.count?!Fish.count||Shots.count||Pearl.onFieldFlag||timeInterval||(timeInterval=setInterval(function(){explosion_flag||animation_star_flag||(clearInterval(timeInterval),timeInterval=null,GameBase.saveElementsCount(),gameState=STATE_LEVEL_FAILED,createScene())},20)):timeInterval||(timeInterval=setInterval(function(){explosion_flag||animation_star_flag||(clearInterval(timeInterval),timeInterval=null,GameBase.saveElementsCount(),gameScore+=curLevelScore,levelStars[curLevel]=
starCouter+1,gameState=STATE_LEVEL_CLEARED,createScene())},20))}}function postTick(){showDebugDraw&&GameWorld.world&&drawWorld(GameWorld.world,stage)}
var GameWorld={world:null,coorPearl:[],body_x:0,body_y:0,collisionCoor:[],collisionFlag:!1,wall_density:10,wall_restitution:3,wall_friction:1,widthSidePanel:19,heightTopPanel:25,sideShiftWall:220,countElements:0,createWorld:function(){GameWorld.world=box2DCreateWorld();b2Settings.b2_timeToSleep=1;b2Settings.b2_linearSleepTolerance=0;b2Settings.b2_angularSleepTolerance=0;GameWorld.createWalls(GameWorld.world)},createWalls:function(a){var c=null,c=box2DCreateBox(a,getStageWidthCenter()-GameWorld.sideShiftWall,
getStageHeightCenter(),GameWorld.widthSidePanel,160,0,!0,GameWorld.wall_density,GameWorld.wall_restitution,GameWorld.wall_friction);c.WALL=!0;c=box2DCreateBox(a,getStageWidthCenter()+GameWorld.sideShiftWall,getStageHeightCenter(),GameWorld.widthSidePanel,160,0,!0,GameWorld.wall_density,GameWorld.wall_restitution,GameWorld.wall_friction);c.WALL=!0;c=box2DCreateBox(a,getStageWidthCenter()-142,0,80,GameWorld.heightTopPanel,0,!0,GameWorld.wall_density,GameWorld.wall_restitution,GameWorld.wall_friction);
c.WALL=!0;c=box2DCreateBox(a,getStageWidthCenter()+142,0,80,GameWorld.heightTopPanel,0,!0,GameWorld.wall_density,GameWorld.wall_restitution,GameWorld.wall_friction);c.WALL=!0;c=box2DCreateCircle(a,getStageWidthCenter()-205,30,35,0,!0,GameWorld.wall_density,GameWorld.wall_restitution,GameWorld.wall_friction);c.WALL=!0;c=box2DCreateCircle(a,getStageWidthCenter()+205,30,35,0,!0,GameWorld.wall_density,GameWorld.wall_restitution,GameWorld.wall_friction);c.WALL=!0},createObject:function(a,c){console.log("======createObject");
var e,f,g,h,k,l,m,n,p,q=library.getSprite(c.name,c.width,c.height,c.frames);q.x=getStageWidthCenter()-(240-a.x);q.y=a.y;q.NAME=c.name;q.hlNeedNumber=c.hlNeedNumber;q.rotation=a.rotation;stage.addChild(q);if(c.type==FISH||c.type==PLATFORM)fish_array.push({x:q.x,y:q.y}),Fish.addSprite(q),GameWorld.countElements++;c.type==WARP&&Warp.addSprite(q);if(c.type==CIRCLE_PLATFORM||c.type==PLATFORM)q.PLATFORM=!0;if(c.bodyType!=NONE&&c.type!=WARP){k="undefined"!=typeof a.fixed?a.fixed:c.fixed;f="undefined"!=typeof a.density?
a.density:c.density;g="undefined"!=typeof a.restitution?a.restitution:c.restitution;h="undefined"!=typeof a.friction?a.friction:c.friction;0>=f&&(k=!0);n=c.bodyWidth?c.bodyWidth:c.width;p=c.bodyHeight?c.bodyHeight:c.height;l=getStageWidthCenter()-(240-a.x);m=a.y;c.bodyPosCorrect&&(l+=c.bodyPosCorrect.x,m+=c.bodyPosCorrect.y,q.syncX=c.bodyPosCorrect.x,q.syncY=c.bodyPosCorrect.y,q.onbox2dsync=spritesSync);c.bodyType==BOX&&(e=box2DCreateBox(GameWorld.world,l,m,n/2,p/2,a.rotation,k,f,g,h));c.bodyType==
CIRCLE&&(e=box2DCreateCircle(GameWorld.world,l,m,n/2,a.rotation,k,f,g,h));c.bodyType==POLY&&(e=box2DCreatePoly(GameWorld.world,l,m,c.points,a.rotation,k,f,g,h));if(c.joints)for(f=0;f<c.joints.length;f++)"pivot"==c.joints[f].type&&(g=new Vector(c.joints[f].x,c.joints[f].y),0!=a.rotation&&g.rotate(-a.rotation),g.x+=getStageWidthCenter()-(240-a.x),g.y+=a.y,g=box2DCreateCircle(GameWorld.world,g.x,g.y,1,0,!0,0.001,0,0),box2DCreateRevoluteJoint(GameWorld.world,g,e,g.GetCenterPosition()));GameWorld.bodyCopyUID++;
c.color&&(e.color=c.color);e.NAME=c.name;e.sprite=q;e.type=c.type;e.width=c.bodyWidth;q.box2dBody=e;c.type!=FISH&&c.type!=PLATFORM||Fish.addBody(e)}1!=GET.debug&&k&&c.type!=FISH&&(q.static=!0);q.static=!0;q.obType=c.type;q.bodyWidth=c.bodyWidth;q.bodyHeight=c.bodyHeight;return q}},Cannon={sprite:null,spriteShooter:null,spriteAim:null,body:null,startRotation:!1,radius:50,shooterShift:16,aimShift:16,cannonShift:10,shiftElements:36,init:function(){console.log("===================Cannon.init()");Cannon.sprite||
(Cannon.sprite=GameBase.createSprite("cannon",getStageWidthCenter(),Cannon.cannonShift),Cannon.sprite.CANNON=!0,Cannon.body=box2DCreateCircle(GameWorld.world,Cannon.sprite.x,Cannon.sprite.y-Cannon.cannonShift,Cannon.radius,0,!0,ball_density,ball_restitution,ball_friction),Cannon.spriteShooter=GameBase.createSprite("shooter",getStageWidthCenter(),0),Cannon.spriteShooter.CANNON=!0,Cannon.spriteShooter.anchor={x:0,y:-(Cannon.aimShift+Cannon.shiftElements)},Cannon.spriteAim=GameBase.createSprite("aim",
getStageWidthCenter(),0,1),Cannon.spriteAim.CANNON=!0,Cannon.spriteAim.anchor={x:0,y:-(106+Cannon.aimShift+Cannon.shiftElements)},Cannon.spriteAim.setZIndex(1))},rotate:function(a){Cannon.startRotation&&(a=Math.PI/2+Math.atan2(getStageHeightCenter()+a.y-Cannon.sprite.y,getStageWidthCenter()+a.x-Cannon.sprite.x),4.15<a&&(a=4.15),2.15>a&&(a=2.15),Cannon.spriteShooter.rotation=Cannon.spriteAim.rotation=Math.PI+a)},clear:function(){Cannon.sprite=null;Cannon.body=null}},Pearl={sprite:[],body:[],radius:7,
impulse:3E4,onFieldFlag:0,onTouchFlag:!1,zIndex:0,pearlShift:15,startTime:0,startHlTime:0,finishTime:0,contactFlag:0,index:0,bonusType:-1,init:function(){console.log("===================Pearl.init()");var a,c=0;switch(Pearl.bonusType){case 0:a="bomb";GameWorld.world.m_gravity.y=300;break;case 1:a="bomb2";c=Math.PI+Cannon.spriteAim.rotation;GameWorld.world.m_gravity.y=0;break;case 2:a="bomb3";c=Math.PI+Cannon.spriteAim.rotation;GameWorld.world.m_gravity.y=0;break;default:a="pearl",GameWorld.world.m_gravity.y=
300}Pearl.sprite[Pearl.index]||(Pearl.sprite[Pearl.index]=GameBase.createSprite(a,getStageWidthCenter()-Math.round(Math.sin(Cannon.spriteAim.rotation)*(Cannon.radius+Pearl.pearlShift)),Math.abs(Math.round(Math.cos(Cannon.spriteAim.rotation)*(Cannon.radius+Pearl.pearlShift)))),Pearl.sprite[Pearl.index].rotation=c,Pearl.sprite[Pearl.index].PEARL=!0,Pearl.sprite[Pearl.index].bonusType=Pearl.bonusType,Pearl.zIndex?Pearl.sprite[Pearl.index].setZIndex(Pearl.zIndex):Pearl.zIndex=Pearl.sprite[0].zIndex,Pearl.index++)},
reset:function(a){console.log("===================Pearl.reset()");Pearl.sprite[a].visible=!1;Pearl.sprite[a].destroy=!0;Pearl.body[a]&&GameWorld.world.DestroyBody(Pearl.body[a]);buildBackground();Pearl.sprite.splice(a,1);Pearl.body.splice(a,1);Pearl.index--;console.log("Fish.sprite = ",Fish.sprite);console.log("Fish.count = "+Fish.count)},takeAim:function(){Pearl.sprite[0].x=getStageWidthCenter()-Math.round(Math.sin(Cannon.spriteAim.rotation)*(Cannon.radius+Pearl.pearlShift));Pearl.sprite[0].y=Math.abs(Math.round(Math.cos(Cannon.spriteAim.rotation)*
(Cannon.radius+Pearl.pearlShift)));if(1==Pearl.sprite[0].bonusType||2==Pearl.sprite[0].bonusType)Pearl.sprite[0].rotation=Math.PI+Cannon.spriteAim.rotation},createBody:function(a){a="undefined"!==typeof a?a:Pearl.index-1;Pearl.onFieldFlag++;Pearl.body[a]=box2DCreateCircle(GameWorld.world,Pearl.sprite[a].x,Pearl.sprite[a].y-5,Pearl.radius,0,!1,ball_density,ball_restitution,ball_friction);Pearl.body[a].m_invI=0;Pearl.body[a].sprite=Pearl.sprite[a];Pearl.sprite[a].syncY=-5;Pearl.sprite[a].box2dBody=
Pearl.body[a];Pearl.sprite[a].onbox2dsync=spritesSync},move:function(a,c){var e=a?Math.random()*Math.PI*2:Math.PI/2+Cannon.spriteAim.rotation+0.001;c="undefined"!==typeof c?c:Pearl.index-1;if(1==Pearl.sprite[c].bonusType||2==Pearl.sprite[c].bonusType)Pearl.body[c].m_rotation=Pearl.sprite[c].rotation;Pearl.body[c].ApplyImpulse(new b2Vec2(Math.cos(e)*Pearl.impulse,Math.sin(e)*Pearl.impulse),new b2Vec2(Pearl.body[c].m_position.x,Pearl.body[c].m_position.y));1!=Pearl.bonusType&&2!=Pearl.bonusType&&Shots.removeShot();
Pearl.startTime=Pearl.startHlTime=new Date;Pearl.bonusType=-1},checkCoor:function(a){if(Pearl.body[a])if(Pearl.sprite[a].y>=getStageHeight()-Pearl.sprite[a].height/2&&Pearl.sprite[a].x>=Crab.sprite.x-10&&Pearl.sprite[a].x<=Crab.sprite.x+10&&!Crab.lightFlag&&(Crab.showLight(),Shots.addShot()),Pearl.sprite[a].y>getStageHeight()&&Pearl.onFieldFlag){var c=Pearl.sprite[a].bonusType;Pearl.reset(a);Pearl.finishTime=new Date;!Crab.lightFlag&&!Pearl.onTouchFlag&&Pearl.finishTime-Pearl.startTime<secondChanceTime&&
0!=c&&1!=c&&2!=c&&(Shots.addShot(),moveInfoText("txt-second-chance",getStageWidthCenter(),getStageHeightCenter(),getStageHeightCenter()-20));var e=setInterval(function(){Crab.lightFlag||(clearInterval(e),Pearl.flagAddShot=!1,Pearl.onFieldFlag--,Pearl.onTouchFlag=!1,Fish.explosionFish(),Pearl.index||Pearl.init())},20)}else new Date-Pearl.startHlTime>explosionHLElementsTime&&(Fish.explosionFish(!0),Pearl.startHlTime=new Date)},checkContactList:function(a){if(Pearl.body[a]&&!Pearl.contactFlag){var c=
Pearl.body[a].GetContactList();if(c){var e=Math.atan2(c.other.m_position.y-Pearl.body[a].m_position.y,c.other.m_position.x-Pearl.body[a].m_position.x)-Math.PI;if(c.other.FISH)switch(Pearl.body[a].sprite.bonusType){case 0:for(c=0;c<Fish.body.length;c++)if(Fish.body[c]&&Math.sqrt(Math.pow(Fish.body[c].m_position.x-Pearl.body[a].m_position.x,2)+Math.pow(Fish.body[c].m_position.y-Pearl.body[a].m_position.y,2))<=BonusElement.bimbaRadius){for(var f=e=0;f<prize.length;f++)e+=prize[f];curLevelScore+=e;moveTextHitScore(e,
Fish.body[c].m_position.x,Fish.body[c].m_position.y-10,Fish.body[c].m_position.y-40);Fish.remove(c)}Pearl.onFieldFlag--;showExplosion(Pearl.sprite[a].x,Pearl.sprite[a].y);Pearl.reset(a);Pearl.init();break;case 1:GameWorld.world.DestroyBody(Pearl.body[a]);Fish.remove(c.other.FISH_ID);Pearl.createBody(a);Pearl.body[a].m_rotation=Pearl.sprite[a].rotation;Pearl.onFieldFlag--;Pearl.body[a].ApplyImpulse(new b2Vec2(Math.cos(Math.PI/2+Cannon.spriteAim.rotation)*Pearl.impulse,Math.sin(Math.PI/2+Cannon.spriteAim.rotation)*
Pearl.impulse),new b2Vec2(Pearl.body[a].m_position.x,Pearl.body[a].m_position.y));break;case 2:for(var g=0;g<Fish.body.length;g++)if(Fish.body[g]&&(c.other.NAME==Fish.body[g].NAME||c.other.type==PLATFORM&&c.other.color==Fish.body[g].color)){for(f=e=0;f<prize.length;f++)e+=prize[f];curLevelScore+=e;moveTextHitScore(e,Fish.body[g].m_position.x,Fish.body[g].m_position.y-10,Fish.body[g].m_position.y-40);Fish.remove(g)}Pearl.onFieldFlag--;showExplosion(Pearl.sprite[a].x,Pearl.sprite[a].y);Pearl.reset(a);
Pearl.init();break;default:Pearl.onTouchFlag=!0;Pearl.contactFlag++;Fish.countTouch(c.other.FISH_ID);Pearl.push(e,a);var h=setTimeout(function(){clearTimeout(h);Pearl.contactFlag--},50)}else if(1==Pearl.body[a].sprite.bonusType||2==Pearl.body[a].sprite.bonusType)console.log("BOOOOM!"),Pearl.onFieldFlag=0,showExplosion(Pearl.sprite[a].x,Pearl.sprite[a].y),Pearl.reset(a),Pearl.init();else if(c.other.type==CIRCLE_PLATFORM||c.other.type==PEARL){sparkleSprite.gotoAndStop(c.other.color);sparkleSprite.x=
Math.floor(c.other.m_position.x+c.other.width/2*Math.cos(e));sparkleSprite.y=Math.floor(c.other.m_position.y+c.other.width/2*Math.sin(e));sparkleSprite.visible=!0;var k=setTimeout(function(){clearTimeout(k);sparkleSprite.visible=!1},85);Pearl.push(e,a)}else c.other.type==MULTIPEARL&&(c.other.sprite.visible=!1,c.other.sprite.destroy=!0,buildBackground(),GameWorld.world.DestroyBody(c.other),showExplosion(c.other.sprite.x,c.other.sprite.y),moveInfoText("txt-multi-pearl",c.other.sprite.x,c.other.sprite.y,
c.other.sprite.y-20),Pearl.sprite[Pearl.index]=GameBase.createSprite("pearl",c.other.sprite.x,c.other.sprite.y),Pearl.sprite[Pearl.index].PEARL=!0,Pearl.zIndex?Pearl.sprite[Pearl.index].setZIndex(Pearl.zIndex):Pearl.zIndex=Pearl.sprite[0].zIndex,Pearl.push(e,a),Pearl.index++,Pearl.createBody(),Pearl.move(!0))}}},push:function(a,c){Pearl.body[c].ApplyImpulse(new b2Vec2(Math.cos(a)*(Pearl.impulse/5),Math.sin(a)*(Pearl.impulse/5)),new b2Vec2(Pearl.body[c].m_position.x,Pearl.body[c].m_position.y))},clear:function(){Pearl.sprite=
[];Pearl.body=[];Pearl.index=0;Pearl.zIndex=0;Pearl.onFieldFlag=0;Pearl.startTime=0;Pearl.startHlTime=0;Pearl.finishTime=0;Pearl.contactFlag=0;Pearl.bonusType=-1}},Crab={sprite:null,body:null,spriteLight:null,lightFlag:!1,moveLimit:0,leftLimit:0,rigthLimit:0,init:function(){console.log("===================Crab.init()");Crab.sprite||(Crab.sprite=GameBase.createSprite("crab",getStageWidthCenter(),getStageHeight()-19),Crab.sprite.CRAB=!0,Crab.body=box2DCreatePoly(GameWorld.world,getStageWidthCenter(),
getStageHeight()-Crab.sprite.height/2,[[[-60,2],[-19,-19],[-12,0],[-12,18],[-53,18]],[[12,0],[19,-19],[60,2],[53,18],[12,18]]],0,!0,GameWorld.wall_density,GameWorld.wall_restitution,GameWorld.wall_friction),Crab.body.sprite=Crab.sprite,Crab.sprite.box2dBody=Crab.body,Crab.leftLimit=getStageWidthCenter()+GameWorld.sideShiftWall-GameWorld.widthSidePanel-Crab.sprite.width/2,Crab.rightLimit=getStageWidthCenter()-GameWorld.sideShiftWall+GameWorld.widthSidePanel+Crab.sprite.width/2)},reset:function(){Crab.sprite.visible=
!1;Crab.sprite.destroy=!0;GameWorld.world.DestroyBody(Crab.body)},move:function(){var a=Crab.body.GetCenterPosition();a.x=crabDirectLeft?Crab.body.m_position.x+crabStepWidth:Crab.body.m_position.x-crabStepWidth;Crab.body.SetOriginPosition(a,0);Crab.sprite.x=Crab.body.m_position.x;Crab.spriteLight&&(Crab.spriteLight.x=Crab.sprite.x);if(Crab.sprite.x>Crab.leftLimit||Crab.sprite.x<Crab.rightLimit)crabDirectLeft=!crabDirectLeft},showLight:function(){if(!Crab.spriteLight){Crab.lightFlag=!0;Crab.spriteLight=
library.getSprite("light");Crab.spriteLight.x=Crab.sprite.x;Crab.spriteLight.y=getStageHeight()-(Crab.spriteLight.height/2+Crab.sprite.height/2)+10;Crab.spriteLight.static=!1;stage.addChild(Crab.spriteLight);moveInfoText("txt-extra-pearl",Crab.sprite.x,Crab.spriteLight.y+20,Crab.spriteLight.y-10);var a=setTimeout(function(){clearTimeout(a);Crab.spriteLight.visible=!1;Crab.spriteLight.destroy=!0;buildBackground();Crab.spriteLight=null;Crab.lightFlag=!1},300)}},clear:function(){Crab.sprite=null;Crab.body=
null}},Fish={sprite:[],body:[],hlSprite:[],counterTouch:[],count:0,init:function(){Fish.sprite=[];Fish.body=[];Fish.hlSprite=[];Fish.countTouch=[]},addSprite:function(a,c){a.FISH=!0;"undefined"!==typeof c?(a.FISH_ID=c,Fish.sprite[c]=a):(a.FISH_ID=Fish.sprite.length,Fish.sprite.push(a));Fish.count++;return Fish.sprite.length-1},addBody:function(a,c){a.FISH=!0;"undefined"!==typeof c?(a.FISH_ID=c,Fish.body[c]=a,Fish.sprite[c].body=a):(a.FISH_ID=Fish.body.length,Fish.body.push(a),Fish.sprite[Fish.body.length-
1].body=a);return Fish.body.length-1},countTouch:function(a){console.log("===================Fish.countTouch()");Fish.counterTouch[a]?Fish.counterTouch[a]++:Fish.counterTouch[a]=1;2<Fish.counterTouch[a]&&(Fish.counterTouch[a]=3);if(Fish.sprite[a]){if(2>Fish.counterTouch[a]&&!Fish.hlSprite[a]){if(Fish.sprite[a].hlNeedNumber){var c=library.getSprite(getName(Fish.sprite[a].NAME,Fish.sprite[a].hlNeedNumber)+"_hl");Fish.sprite[a].bitmap=library.getBitmap(getName(Fish.sprite[a].NAME,Fish.sprite[a].hlNeedNumber)+
"_hl");Fish.sprite[a].width=c.width;Fish.sprite[a].height=c.height;c.destroy=!0}else c=library.getSprite(getName(Fish.sprite[a].NAME)+"_hl"),c.x=Fish.sprite[a].x,c.y=Fish.sprite[a].y,c.HL_ID=a,c.static=!0,stage.addChild(c),c.setZIndex(Fish.sprite[a].zIndex-1),Fish.hlSprite[a]=c;buildBackground()}3>Fish.counterTouch[a]&&(curLevelScore+=prize[Fish.counterTouch[a]-1],moveTextHitScore(prize[Fish.counterTouch[a]-1],Fish.sprite[a].x,Fish.sprite[a].y-10,Fish.sprite[a].y-40))}},remove:function(a){Fish.sprite[a].visible=
!1;Fish.sprite[a].destroy=!0;Fish.counterTouch[Fish.body[a].FISH_ID]=null;for(var c=0;c<stage.objects.length;c++)stage.objects[c].HL_ID==Fish.body[a].FISH_ID&&(stage.objects[c].visible=!1,stage.objects[c].destroy=!0,delete Fish.hlSprite[stage.objects[c].HL_ID]);Fish.body[a]&&GameWorld.world.DestroyBody(Fish.body[a]);showExplosion(Fish.sprite[a].x,Fish.sprite[a].y);buildBackground();delete Fish.sprite[a];delete Fish.body[a];Fish.count--},explosionFish:function(a){console.log("===================Fish.explosionFish()");
a="undefined"!==typeof a?2:1;for(var c=0;c<Fish.body.length;c++)Fish.body[c]&&Fish.counterTouch[Fish.body[c].FISH_ID]>=a&&Fish.remove(c)},clear:function(){Fish.sprite=[];Fish.body=[];Fish.hlSprite=[];Fish.counterTouch=[];Fish.count=0}},Warp={sprite:[],teleportFlag:!1,init:function(){Warp.sprite=[]},addSprite:function(a){a.WARP=!0;Warp.sprite.push(a)},checkTeleport:function(){if(Pearl.body.length&&!Warp.teleportFlag)for(var a=0;a<Warp.sprite.length;a++){for(var c=!1,e=0;e<Pearl.body.length;e++)if(Pearl.body[e].m_position.x>=
Warp.sprite[a].x-Warp.sprite[a].width/2&&Pearl.body[e].m_position.x<=Warp.sprite[a].x+Warp.sprite[a].width/2&&Pearl.body[e].m_position.y>=Warp.sprite[a].y-Warp.sprite[a].height/2&&Pearl.body[e].m_position.y<=Warp.sprite[a].y+Warp.sprite[a].height/2){var f=c=0;Warp.sprite[a+1]?(c=Warp.sprite[a+1].x,f=Warp.sprite[a+1].y):(c=Warp.sprite[0].x,f=Warp.sprite[0].y);Pearl.body[e].m_position.x=c;Pearl.body[e].m_position.y=f;Warp.teleportFlag=!0;var g=setTimeout(function(){clearTimeout(g);Warp.teleportFlag=
!1},500),c=!0}if(c)break}},clear:function(){Warp.sprite=[];Warp.teleportFlag=!1}},Shots={sprite:[],spriteGlass:null,count:0,visibleShotsLimit:12,init:function(){Shots.count=startCountShots[curLevel];for(var a=0;a<(Shots.count>Shots.visibleShotsLimit?Shots.visibleShotsLimit:Shots.count);a++){var c=library.getSprite("pearl");c.x=getStageWidthCenter()+startPearlsListCoor.x;c.y=getStageHeightCenter()+startPearlsListCoor.y-startPearlsListCoor.step*a;c.scaleX=0;c.scaleY=0;c.SHOT=!0;c.static=!1;stage.addChild(c);
Shots.sprite.push(c)}a=library.getSprite("glass");a.x=getStageWidthCenter()-221;a.y=140;a.static=!1;stage.addChild(a);Shots.spriteGlass=a},show:function(){for(var a=0;a<Shots.sprite.length;a++)Shots.sprite[a].scaleTo(0.8,fps/4,null,function(a){a.target.obj.static=!0;buildBackground()})},addShot:function(){console.log("===================Shots.addShot()");Shots.count++;if(!(Shots.count>Shots.visibleShotsLimit)){var a=library.getSprite("pearl");a.x=getStageWidthCenter()+startPearlsListCoor.x;a.y=getStageHeightCenter()+
startPearlsListCoor.y-startPearlsListCoor.step*(Shots.count-1);a.scaleX=0;a.scaleY=0;a.SHOT=!0;a.static=!1;stage.addChild(a);Shots.sprite.push(a);Shots.spriteGlass.setZIndex(a.zIndex+1);a.scaleTo(0.8,fps/4,null,function(a){a.target.obj.static=!0;buildBackground()})}},removeShot:function(){console.log("===================Shots.removeShot()");0>Shots.count-1||(12<Shots.count?Shots.count--:(Shots.sprite[Shots.count-1].static=!1,buildBackground(),Shots.sprite[Shots.count-1].scaleTo(0,fps/4,null,function(a){a.target.obj.destroy=
!0;Shots.count--;Shots.sprite.pop();buildBackground()})))},clear:function(){Shots.sprite=[];Shots.spriteGlass=null;Shots.count=0}},BonusElement={element:[],bimbaRadius:70,addShots:5,countElements:[],counts:[],init:function(){for(var a=["bomb-big","bomb2-big","bomb3-big","target","pearl"],c=null,e=0;e<a.length;e++)c=library.getSprite(a[e]),c.x=getStageWidthCenter()+220,c.y=getStageHeightCenter()+-75+43*e,c.static=!0,c.ID=e,3==e&&(c.scaleX=0.5,c.scaleY=0.5),4==e&&(c.scaleX=1.2,c.scaleY=1.2),c.onmousedown=
function(){return!1},c.onmouseup=BonusElement.executeElement,stage.addChild(c),BonusElement.element.push({sprite:c,left:0<BonusElement.counts.length&&BonusElement.counts[e]?BonusElement.counts[e]:0}),BonusElement.countElements[e]=new SimpleText(library.getBitmap("num-big"),34,36),BonusElement.countElements[e].x=getStageWidthCenter()+240,BonusElement.countElements[e].y=getStageHeightCenter()+-65+43*e,BonusElement.countElements[e].scale=0.4,BonusElement.countElements[e].charMap=charMap,BonusElement.countElements[e].charWidth=
charWidth,BonusElement.countElements[e].align=levelText.ALIGN_RIGHT,BonusElement.countElements[e].charSpacing=-5,BonusElement.countElements[e].write(BonusElement.element[e].left)},addElement:function(a){BonusElement.element[a].left++},removeElement:function(a){BonusElement.element[a].left--;return 0>BonusElement.element[a].left?(BonusElement.element[a].left=0,!1):!0},executeElement:function(a){console.log("===================BonusElement.executeElement()");if(Pearl.bonusType==a.target.ID)return BonusElement.undoElement(),
!1;if(!BonusElement.removeElement(a.target.ID))return!1;0<=Pearl.bonusType&&BonusElement.element[Pearl.bonusType].left++;if(3==a.target.ID){var c=library.getSprite("aim-big");Cannon.spriteAim.bitmap=library.getBitmap("aim-big");Cannon.spriteAim.width=c.width;Cannon.spriteAim.height=c.height;Cannon.spriteAim.anchor={x:0,y:-(133+Cannon.aimShift+Cannon.shiftElements)};Cannon.spriteAim.setZIndex(1);c.destroy=!0}if(4==a.target.ID)for(a=0;a<BonusElement.addShots;a++)Shots.addShot();else Pearl.bonusType=
a.target.ID,Pearl.onFieldFlag||(Pearl.reset(0),Pearl.init());return!1},undoElement:function(){console.log("===================BonusElement.undoElement()");0<=Pearl.bonusType&&BonusElement.element[Pearl.bonusType].left++;Pearl.onFieldFlag||(Pearl.bonusType=-1,Pearl.reset(0),Pearl.init())},showCountElement:function(a){if(a)BonusElement.countElements[a].write(BonusElement.element[a].left);else for(a=0;a<BonusElement.element.length;a++)BonusElement.countElements[a].write(BonusElement.element[a].left)},
clear:function(){console.log("===================BonusElement.clear()");for(var a=0;a<BonusElement.element.length;a++)BonusElement.counts[a]=BonusElement.element[a].left;console.log("BonusElement.counts = ",BonusElement.counts);BonusElement.element=[]}},GameBase={createSprite:function(a,c,e,f,g){console.log("===================GameBase.createSprite("+a+","+c+","+e+","+f+","+g+")");g="undefined"==typeof g?!1:g;a=library.getSprite(a);a.x=c;a.y=e;a.onbox2dsync=spritesSync;a.syncX=0;a.syncY=0;a.static=
g;stage.addChild(a);"undefined"!==typeof f&&a.setZIndex(f);return a},getPlayerScore:function(){console.log("===================GameBase.getPlayerScore()");maxScore=parseInt(null==Utils.getCookie("bf_maxScore")?0:Utils.getCookie("bf_maxScore"));gameScore=parseInt(null==Utils.getCookie("bf_gameScore")?0:Utils.getCookie("bf_gameScore"));bestLevelStars=null==Utils.getCookie("bf_bestLevelStars")?[]:Utils.getCookie("bf_bestLevelStars").split(",");openLevel=parseInt(null==Utils.getCookie("bf_openLevel")?
0:Utils.getCookie("bf_openLevel"));maxLevel=parseInt(null==Utils.getCookie("bf_maxLevel")?0:Utils.getCookie("bf_maxLevel"));GameBase.loadElementsCount();for(var a=0;a<=countLevels;a++)"undefined"===typeof bestLevelStars[a]&&(bestLevelStars[a]=0),levelStars[a]=bestLevelStars[a],levelScore[a]=0},loadElementsCount:function(){console.log("===================GameBase.loadElementsCount()");BonusElement.counts=null==Utils.getCookie("bf_bonusElement")?[]:Utils.getCookie("bf_bonusElement").split(",")},setPlayerScore:function(){console.log("===================GameBase.setPlayerScore()");
for(var a=0;a<levelStars.length;a++)levelStars[a]>bestLevelStars[a]&&(bestLevelStars[a]=levelStars[a]);maxScore=maxScore>=gameScore?maxScore:gameScore;Utils.setCookie("bf_maxScore",maxScore>=gameScore?maxScore:gameScore);Utils.setCookie("bf_gameScore",gameScore);Utils.setCookie("bf_bestLevelStars",bestLevelStars.join(","));openLevel=openLevel>=countLevels?countLevels:openLevel;openLevel=openLevel>curLevel?openLevel:1<levelStars[curLevel]?curLevel+1:openLevel;maxLevel=maxLevel>curLevel?maxLevel:curLevel+
1;Utils.setCookie("bf_maxLevel",maxLevel);Utils.setCookie("bf_openLevel",openLevel)},saveElementsCount:function(){console.log("===================GameBase.saveElementsCount()");for(var a=[],c=0;c<BonusElement.element.length;c++)a.push(BonusElement.element[c].left);Utils.setCookie("bf_bonusElement",a.join(","))},resetGameParameters:function(){Pearl.clear();Cannon.clear();Fish.clear();Crab.clear();Warp.clear();Shots.clear();BonusElement.clear();GameWorld.countElements=0;starCouter=-1;starSprites=[];
curLevelScore=0;fish_array=[];timeInterval=null;pause_flag=shop_flag=!1}};function getRandomInt(a,c){return Math.floor(Math.random()*(c-a+1))+a}function toFormattedTime(a){var c="00",e="00",e=c=0;a%=3600;c=Math.floor(a/60);e=a%60;c=10<=c?c.toString():"0"+c.toString();e=10<=e?e.toString():"0"+e.toString();return c+":"+e}function getName(a,c){var e=c?0:1;return/^(\w{2,})\d+/i.exec(a)?/^(\w{2,})(\d+)/i.exec(a)[e]:""}
function getQueryParams(a){a=a.split("+").join(" ");for(var c={},e,f=/[?&]?([^=]+)=([^&]*)/g;e=f.exec(a);)c[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return c}Number.prototype.insertComma=function(){for(var a=parseInt(this).toString().split("").reverse().join(""),c="",e=0;e<a.length;e++)c+=(0<e&&0==e%3?",":"")+a.charAt(e);return c.split("").reverse().join("")};Array.prototype.deleteElement=function(a){for(var c=0;c<this.length;c++)this[c]==a&&this.splice(c,1)};
var NONE=0,BOX=1,CIRCLE=2,POLY=3,NORMAL=0,STONE=1,SHELL=2,FASTER=3,PLATFORM=4,FISH=5,WARP=6,PEARL=7,BALL=8,CIRCLE_PLATFORM=9,WALL=10,MULTIPEARL=11,WHITE=0,ORANGE=1,RED=2,GREEN=3,BLUE=4,PINK=5,VIOLET=6,GREY=7,YELLOW=8,stone_density=100,stone_restitution=0,stone_friction=1,faster_density=0,faster_restitution=0,faster_friction=0,platform_density=0,platform_restitution=5,platform_friction=1,gravity_density=0,gravity_restitution=0,gravity_friction=5,rotate_Element_density=1,rotate_Element_restitution=
0,ball_density=0.5,ball_restitution=0.6,ball_friction=0.01,blowfish_density=0,blowfish_restitution=0.7,blowfish_friction=0.01,jellyfish_density=0,jellyfish_restitution=0.7,jellyfish_friction=0.01,octopus_density=0,octopus_restitution=0.7,octopus_friction=0.01,starfish_density=0,starfish_restitution=0.7,starfish_friction=0.01,shell_density=0,shell_restitution=0.7,shell_friction=0.01,warp_density=0,warp_restitution=0,warp_friction=0,ballRadius=10;
function spritesSync(a,c,e){c=new Vector(-a.target.syncX,-a.target.syncY);c.rotate(-a.target.rotation);a.target.x+=c.x;a.target.y+=c.y}
var objects=[{name:"bs1",image:"elements/bs1.png",type:FISH,width:35,height:31,bodyWidth:22,bodyHeight:22,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:-2},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction,hlNeedNumber:!1},{name:"bs2",image:"elements/bs2.png",type:FISH,width:35,height:31,bodyWidth:22,bodyHeight:22,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:-2},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction,
hlNeedNumber:!1},{name:"bs3",image:"elements/bs3.png",type:FISH,width:35,height:31,bodyWidth:22,bodyHeight:22,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:-2},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction,hlNeedNumber:!1},{name:"bs4",image:"elements/bs4.png",type:FISH,width:35,height:31,bodyWidth:22,bodyHeight:22,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:-2},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,
friction:blowfish_friction,hlNeedNumber:!1},{name:"bs5",image:"elements/bs5.png",type:FISH,width:35,height:31,bodyWidth:22,bodyHeight:22,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:-2},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction,hlNeedNumber:!1},{name:"bs6",image:"elements/bs6.png",type:FISH,width:35,height:31,bodyWidth:22,bodyHeight:22,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:-2},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,
friction:blowfish_friction,hlNeedNumber:!1},{name:"bm1",image:"elements/bm1.png",type:FISH,width:36,height:33,bodyWidth:36,bodyHeight:33,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction,hlNeedNumber:!1},{name:"bm2",image:"elements/bm2.png",type:FISH,width:36,height:33,bodyWidth:36,bodyHeight:33,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,
friction:blowfish_friction,hlNeedNumber:!1},{name:"bm3",image:"elements/bm3.png",type:FISH,width:36,height:33,bodyWidth:36,bodyHeight:33,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction,hlNeedNumber:!1},{name:"bm4",image:"elements/bm4.png",type:FISH,width:36,height:33,bodyWidth:36,bodyHeight:33,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,
friction:blowfish_friction,hlNeedNumber:!1},{name:"bm5",image:"elements/bm5.png",type:FISH,width:36,height:33,bodyWidth:36,bodyHeight:33,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction,hlNeedNumber:!1},{name:"bm6",image:"elements/bm6.png",type:FISH,width:36,height:33,bodyWidth:36,bodyHeight:33,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,
friction:blowfish_friction,hlNeedNumber:!1},{name:"bl1",image:"elements/bl1.png",type:FISH,width:53,height:53,bodyWidth:53,bodyHeight:53,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction,hlNeedNumber:!1},{name:"bl2",image:"elements/bl2.png",type:FISH,width:53,height:53,bodyWidth:53,bodyHeight:53,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,
friction:blowfish_friction,hlNeedNumber:!1},{name:"bl3",image:"elements/bl3.png",type:FISH,width:53,height:53,bodyWidth:53,bodyHeight:53,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction,hlNeedNumber:!1},{name:"bl4",image:"elements/bl4.png",type:FISH,width:53,height:53,bodyWidth:53,bodyHeight:53,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,
friction:blowfish_friction,hlNeedNumber:!1},{name:"bl5",image:"elements/bl5.png",type:FISH,width:53,height:53,bodyWidth:53,bodyHeight:53,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction,hlNeedNumber:!1},{name:"bl6",image:"elements/bl6.png",type:FISH,width:53,height:53,bodyWidth:53,bodyHeight:53,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,
friction:blowfish_friction,hlNeedNumber:!1},{name:"starfish1",image:"elements/starfish1.png",type:FISH,width:25,height:23,bodyWidth:20,bodyHeight:20,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:starfish_density,restitution:starfish_restitution,friction:starfish_friction,hlNeedNumber:!1},{name:"starfish2",image:"elements/starfish2.png",type:FISH,width:25,height:23,bodyWidth:20,bodyHeight:20,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:starfish_density,
restitution:starfish_restitution,friction:starfish_friction,hlNeedNumber:!1},{name:"starfish3",image:"elements/starfish3.png",type:FISH,width:25,height:23,bodyWidth:20,bodyHeight:20,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:starfish_density,restitution:starfish_restitution,friction:starfish_friction,hlNeedNumber:!1},{name:"starfish4",image:"elements/starfish4.png",type:FISH,width:25,height:23,bodyWidth:20,bodyHeight:20,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,
y:0},remove:!1,fixed:!1,density:starfish_density,restitution:starfish_restitution,friction:starfish_friction,hlNeedNumber:!1},{name:"starfish5",image:"elements/starfish5.png",type:FISH,width:25,height:23,bodyWidth:20,bodyHeight:20,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:starfish_density,restitution:starfish_restitution,friction:starfish_friction,hlNeedNumber:!1},{name:"starfish6",image:"elements/starfish6.png",type:FISH,width:25,height:23,bodyWidth:20,bodyHeight:20,
frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:starfish_density,restitution:starfish_restitution,friction:starfish_friction,hlNeedNumber:!1},{name:"starfish7",image:"elements/starfish7.png",type:FISH,width:25,height:23,bodyWidth:20,bodyHeight:20,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:starfish_density,restitution:starfish_restitution,friction:starfish_friction,hlNeedNumber:!1},{name:"starfish8",image:"elements/starfish8.png",type:FISH,
width:25,height:23,bodyWidth:20,bodyHeight:20,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:starfish_density,restitution:starfish_restitution,friction:starfish_friction,hlNeedNumber:!1},{name:"jellyfish1",image:"elements/jellyfish1.png",type:FISH,width:26,height:26,bodyWidth:16,bodyHeight:16,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:jellyfish_density,restitution:jellyfish_restitution,friction:jellyfish_friction,hlNeedNumber:!0},{name:"jellyfish2",
image:"elements/jellyfish2.png",type:FISH,width:26,height:26,bodyWidth:16,bodyHeight:16,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:jellyfish_density,restitution:jellyfish_restitution,friction:jellyfish_friction,hlNeedNumber:!0},{name:"jellyfish3",image:"elements/jellyfish3.png",type:FISH,width:26,height:26,bodyWidth:16,bodyHeight:16,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:jellyfish_density,restitution:jellyfish_restitution,friction:jellyfish_friction,
hlNeedNumber:!0},{name:"jellyfish4",image:"elements/jellyfish4.png",type:FISH,width:26,height:26,bodyWidth:16,bodyHeight:16,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:jellyfish_density,restitution:jellyfish_restitution,friction:jellyfish_friction,hlNeedNumber:!0},{name:"jellyfish5",image:"elements/jellyfish5.png",type:FISH,width:26,height:26,bodyWidth:16,bodyHeight:16,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:jellyfish_density,restitution:jellyfish_restitution,
friction:jellyfish_friction,hlNeedNumber:!0},{name:"octopus1",image:"elements/octopus1.png",type:FISH,width:25,height:31,bodyWidth:24,bodyHeight:24,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:octopus_density,restitution:octopus_restitution,friction:octopus_friction,hlNeedNumber:!1},{name:"octopus2",image:"elements/octopus2.png",type:FISH,width:25,height:31,bodyWidth:24,bodyHeight:24,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:octopus_density,
restitution:octopus_restitution,friction:octopus_friction,hlNeedNumber:!1},{name:"octopus3",image:"elements/octopus3.png",type:FISH,width:25,height:31,bodyWidth:24,bodyHeight:24,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:octopus_density,restitution:octopus_restitution,friction:octopus_friction,hlNeedNumber:!1},{name:"octopus4",image:"elements/octopus4.png",type:FISH,width:25,height:31,bodyWidth:24,bodyHeight:24,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,
fixed:!1,density:octopus_density,restitution:octopus_restitution,friction:octopus_friction,hlNeedNumber:!1},{name:"octopus5",image:"elements/octopus5.png",type:FISH,width:25,height:31,bodyWidth:24,bodyHeight:24,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:octopus_density,restitution:octopus_restitution,friction:octopus_friction,hlNeedNumber:!1},{name:"octopus6",image:"elements/octopus6.png",type:FISH,width:25,height:31,bodyWidth:24,bodyHeight:24,frames:1,bodyType:CIRCLE,
bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:octopus_density,restitution:octopus_restitution,friction:octopus_friction,hlNeedNumber:!1},{name:"shell1",image:"elements/shell1.png",type:FISH,width:20,height:19,bodyWidth:16,bodyHeight:16,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:shell_density,restitution:shell_restitution,friction:shell_friction,hlNeedNumber:!0},{name:"shell2",image:"elements/shell2.png",type:FISH,width:20,height:19,bodyWidth:16,bodyHeight:16,
frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:shell_density,restitution:shell_restitution,friction:shell_friction,hlNeedNumber:!0},{name:"shell3",image:"elements/shell3.png",type:FISH,width:20,height:19,bodyWidth:16,bodyHeight:16,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:shell_density,restitution:shell_restitution,friction:shell_friction,hlNeedNumber:!0},{name:"shell4",image:"elements/shell4.png",type:FISH,width:20,height:19,bodyWidth:16,
bodyHeight:16,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:shell_density,restitution:shell_restitution,friction:shell_friction,hlNeedNumber:!0},{name:"shell5",image:"elements/shell5.png",type:FISH,width:20,height:19,bodyWidth:16,bodyHeight:16,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:shell_density,restitution:shell_restitution,friction:shell_friction,hlNeedNumber:!0},{name:"shell6",image:"elements/shell6.png",type:FISH,width:20,height:19,
bodyWidth:16,bodyHeight:16,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:shell_density,restitution:shell_restitution,friction:shell_friction,hlNeedNumber:!0},{name:"atwill",image:"elements/atwill.png",type:PEARL,width:39,height:39,bodyWidth:36,bodyHeight:36,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction},{name:"whatever",image:"elements/whatever.png",type:PEARL,
width:21,height:21,bodyWidth:20,bodyHeight:20,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction},{name:"multipearl",image:"elements/multipearl.png",type:MULTIPEARL,width:39,height:39,bodyWidth:36,bodyHeight:36,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:blowfish_density,restitution:blowfish_restitution,friction:blowfish_friction},{name:"warp_hole",image:"elements/warp_hole.png",
type:WARP,width:33,height:32,bodyWidth:32,bodyHeight:32,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:0,y:0},remove:!1,fixed:!1,density:warp_density,restitution:warp_restitution,friction:warp_friction},{name:"circle1",image:"elements/circle1.png",type:CIRCLE_PLATFORM,width:16,height:17,bodyWidth:12,bodyHeight:12,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:-2,y:-2},remove:!1,fixed:!0,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:RED},{name:"circle2",image:"elements/circle2.png",
type:CIRCLE_PLATFORM,width:16,height:17,bodyWidth:12,bodyHeight:12,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:-2,y:-2},remove:!1,fixed:!0,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:ORANGE},{name:"circle3",image:"elements/circle3.png",type:CIRCLE_PLATFORM,width:16,height:17,bodyWidth:12,bodyHeight:12,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:-2,y:-2},remove:!1,fixed:!0,density:platform_density,restitution:platform_restitution,friction:platform_friction,
color:BLUE},{name:"circle4",image:"elements/circle4.png",type:CIRCLE_PLATFORM,width:16,height:17,bodyWidth:12,bodyHeight:12,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:-2,y:-2},remove:!1,fixed:!0,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:VIOLET},{name:"circle5",image:"elements/circle5.png",type:CIRCLE_PLATFORM,width:16,height:17,bodyWidth:12,bodyHeight:12,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:-2,y:-2},remove:!1,fixed:!0,density:platform_density,
restitution:platform_restitution,friction:platform_friction,color:PINK},{name:"circle6",image:"elements/circle6.png",type:CIRCLE_PLATFORM,width:16,height:17,bodyWidth:12,bodyHeight:12,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:-2,y:-2},remove:!1,fixed:!0,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREEN},{name:"circle7",image:"elements/circle7.png",type:CIRCLE_PLATFORM,width:30,height:30,bodyWidth:28,bodyHeight:28,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:-1,
y:-1},remove:!1,fixed:!0,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:PINK},{name:"circle8",image:"elements/circle8.png",type:CIRCLE_PLATFORM,width:30,height:30,bodyWidth:28,bodyHeight:28,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:-1,y:-1},remove:!1,fixed:!0,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:BLUE},{name:"circle9",image:"elements/circle9.png",type:CIRCLE_PLATFORM,width:30,height:30,bodyWidth:28,bodyHeight:28,
frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:-1,y:-1},remove:!1,fixed:!0,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREEN},{name:"circle10",image:"elements/circle10.png",type:CIRCLE_PLATFORM,width:30,height:30,bodyWidth:28,bodyHeight:28,frames:1,bodyType:CIRCLE,bodyPosCorrect:{x:-1,y:-1},remove:!1,fixed:!0,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:ORANGE},{name:"bluetube1",image:"elements/bluetube1.png",
type:PLATFORM,width:50,height:38,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:BLUE,hlNeedNumber:!0,points:[[[-20,6],[-10,-3],[-3,6],[-12,14]],[[-10,-3],[6,-11],[10,0],[-3,6]],[[6,-11],[23,-14],[23,-2],[10,0]]]},{name:"bluetube2",image:"elements/bluetube2.png",type:PLATFORM,width:51,height:38,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,
friction:platform_friction,color:BLUE,hlNeedNumber:!0,points:[[[-23,-14],[-6,-11],[-10,0],[-23,-2]],[[-6,-11],[10,-3],[2,5],[-10,0]],[[10,-3],[21,6],[13,14],[2,5]]]},{name:"bluetube3",image:"elements/bluetube3.png",type:PLATFORM,width:34,height:46,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:BLUE,hlNeedNumber:!0,points:[[[-3,-19],[4,-8],[-5,-1],[-11,-11]],[[4,-8],[10,5],[-1,9],[-5,-1]],
[[10,5],[12,21],[1,21],[-1,9]]]},{name:"bluetube4",image:"elements/bluetube4.png",type:PLATFORM,width:38,height:50,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:BLUE,hlNeedNumber:!0,points:[[[14,-24],[12,-8],[1,-12],[2,-24]],[[12,-8],[6,6],[-4,0],[1,-12]],[[6,6],[-5,20],[-13,12],[-4,0]]]},{name:"bluetube5",image:"elements/bluetube5.png",type:PLATFORM,width:47,height:34,frames:1,bodyType:POLY,
bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:BLUE,hlNeedNumber:!0,points:[[[-22,0],[-10,-1],[-6,10],[-22,12]],[[-10,-1],[1,-6],[8,4],[-6,10]],[[1,-6],[9,-12],[18,-3],[8,4]]]},{name:"bluetube6",image:"elements/bluetube6.png",type:PLATFORM,width:46,height:35,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:BLUE,
hlNeedNumber:!0,points:[[[-11,-11],[-2,-5],[-10,4],[-19,-3]],[[-2,-5],[4,-10],[12,-7],[11,0],[9,11],[-10,4]],[[11,0],[21,1],[21,12],[9,11]]]},{name:"bluetube7",image:"elements/bluetube7.png",type:PLATFORM,width:38,height:50,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:BLUE,hlNeedNumber:!0,points:[[[-2,-23],[0,-11],[-12,-9],[-13,-23]],[[0,-11],[5,0],[-5,6],[-12,-9]],[[5,0],[14,13],[6,21],
[-5,6]]]},{name:"bluetube8",image:"elements/bluetube8.png",type:PLATFORM,width:34,height:46,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:BLUE,hlNeedNumber:!0,points:[[[-13,22],[-12,7],[0,9],[-2,22]],[[-12,7],[-6,-7],[4,0],[0,9]],[[-6,-7],[2,-17],[10,-9],[4,0]]]},{name:"greentube1",image:"elements/greentube1.png",type:PLATFORM,width:50,height:38,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,
y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREEN,hlNeedNumber:!0,points:[[[-20,6],[-10,-3],[-3,6],[-12,14]],[[-10,-3],[6,-11],[10,0],[-3,6]],[[6,-11],[23,-14],[23,-2],[10,0]]]},{name:"greentube2",image:"elements/greentube2.png",type:PLATFORM,width:51,height:38,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREEN,hlNeedNumber:!0,
points:[[[-23,-14],[-6,-11],[-10,0],[-23,-2]],[[-6,-11],[10,-3],[2,5],[-10,0]],[[10,-3],[21,6],[13,14],[2,5]]]},{name:"greentube3",image:"elements/greentube3.png",type:PLATFORM,width:34,height:46,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREEN,hlNeedNumber:!0,points:[[[-3,-19],[4,-8],[-5,-1],[-11,-11]],[[4,-8],[10,5],[-1,9],[-5,-1]],[[10,5],[12,21],[1,21],[-1,9]]]},{name:"greentube4",
image:"elements/greentube4.png",type:PLATFORM,width:38,height:50,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREEN,hlNeedNumber:!0,points:[[[14,-24],[12,-8],[1,-12],[2,-24]],[[12,-8],[6,6],[-4,0],[1,-12]],[[6,6],[-5,20],[-13,12],[-4,0]]]},{name:"greentube5",image:"elements/greentube5.png",type:PLATFORM,width:47,height:34,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,
density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREEN,hlNeedNumber:!0,points:[[[-22,0],[-10,-1],[-6,10],[-22,12]],[[-10,-1],[1,-6],[8,4],[-6,10]],[[1,-6],[9,-12],[18,-3],[8,4]]]},{name:"greentube6",image:"elements/greentube6.png",type:PLATFORM,width:46,height:35,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREEN,hlNeedNumber:!0,points:[[[-11,-11],
[-2,-5],[-10,4],[-19,-3]],[[-2,-5],[4,-10],[12,-7],[11,0],[9,11],[-10,4]],[[11,0],[21,1],[21,12],[9,11]]]},{name:"greentube7",image:"elements/greentube7.png",type:PLATFORM,width:38,height:50,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREEN,hlNeedNumber:!0,points:[[[-2,-23],[0,-11],[-12,-9],[-13,-23]],[[0,-11],[5,0],[-5,6],[-12,-9]],[[5,0],[14,13],[6,21],[-5,6]]]},{name:"greentube8",image:"elements/greentube8.png",
type:PLATFORM,width:34,height:46,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREEN,hlNeedNumber:!0,points:[[[-13,22],[-12,7],[0,9],[-2,22]],[[-12,7],[-6,-7],[4,0],[0,9]],[[-6,-7],[2,-17],[10,-9],[4,0]]]},{name:"greytube1",image:"elements/greytube1.png",type:PLATFORM,width:50,height:38,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,
friction:platform_friction,color:GREY,hlNeedNumber:!0,points:[[[-20,6],[-10,-3],[-3,6],[-12,14]],[[-10,-3],[6,-11],[10,0],[-3,6]],[[6,-11],[23,-14],[23,-2],[10,0]]]},{name:"greytube2",image:"elements/greytube2.png",type:PLATFORM,width:51,height:38,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREY,hlNeedNumber:!0,points:[[[-23,-14],[-6,-11],[-10,0],[-23,-2]],[[-6,-11],[10,-3],[2,5],[-10,
0]],[[10,-3],[21,6],[13,14],[2,5]]]},{name:"greytube3",image:"elements/greytube3.png",type:PLATFORM,width:34,height:46,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREY,hlNeedNumber:!0,points:[[[-3,-19],[4,-8],[-5,-1],[-11,-11]],[[4,-8],[10,5],[-1,9],[-5,-1]],[[10,5],[12,21],[1,21],[-1,9]]]},{name:"greytube4",image:"elements/greytube4.png",type:PLATFORM,width:38,height:50,frames:1,bodyType:POLY,
bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREY,hlNeedNumber:!0,points:[[[14,-24],[12,-8],[1,-12],[2,-24]],[[12,-8],[6,6],[-4,0],[1,-12]],[[6,6],[-5,20],[-13,12],[-4,0]]]},{name:"greytube5",image:"elements/greytube5.png",type:PLATFORM,width:47,height:34,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREY,
hlNeedNumber:!0,points:[[[-22,0],[-10,-1],[-6,10],[-22,12]],[[-10,-1],[1,-6],[8,4],[-6,10]],[[1,-6],[9,-12],[18,-3],[8,4]]]},{name:"greytube6",image:"elements/greytube6.png",type:PLATFORM,width:46,height:35,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREY,hlNeedNumber:!0,points:[[[-11,-11],[-2,-5],[-10,4],[-19,-3]],[[-2,-5],[4,-10],[12,-7],[11,0],[9,11],[-10,4]],[[11,0],[21,1],[21,12],
[9,11]]]},{name:"greytube7",image:"elements/greytube7.png",type:PLATFORM,width:38,height:50,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREY,hlNeedNumber:!0,points:[[[-2,-23],[0,-11],[-12,-9],[-13,-23]],[[0,-11],[5,0],[-5,6],[-12,-9]],[[5,0],[14,13],[6,21],[-5,6]]]},{name:"greytube8",image:"elements/greytube8.png",type:PLATFORM,width:34,height:46,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,
y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:GREY,hlNeedNumber:!0,points:[[[-13,22],[-12,7],[0,9],[-2,22]],[[-12,7],[-6,-7],[4,0],[0,9]],[[-6,-7],[2,-17],[10,-9],[4,0]]]},{name:"pinktube1",image:"elements/pinktube1.png",type:PLATFORM,width:50,height:38,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:PINK,hlNeedNumber:!0,
points:[[[-20,6],[-10,-3],[-3,6],[-12,14]],[[-10,-3],[6,-11],[10,0],[-3,6]],[[6,-11],[23,-14],[23,-2],[10,0]]]},{name:"pinktube2",image:"elements/pinktube2.png",type:PLATFORM,width:51,height:38,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:PINK,hlNeedNumber:!0,points:[[[-23,-14],[-6,-11],[-10,0],[-23,-2]],[[-6,-11],[10,-3],[2,5],[-10,0]],[[10,-3],[21,6],[13,14],[2,5]]]},{name:"pinktube3",
image:"elements/pinktube3.png",type:PLATFORM,width:34,height:46,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:PINK,hlNeedNumber:!0,points:[[[-3,-19],[4,-8],[-5,-1],[-11,-11]],[[4,-8],[10,5],[-1,9],[-5,-1]],[[10,5],[12,21],[1,21],[-1,9]]]},{name:"pinktube4",image:"elements/pinktube4.png",type:PLATFORM,width:38,height:50,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,
restitution:platform_restitution,friction:platform_friction,color:PINK,hlNeedNumber:!0,points:[[[14,-24],[12,-8],[1,-12],[2,-24]],[[12,-8],[6,6],[-4,0],[1,-12]],[[6,6],[-5,20],[-13,12],[-4,0]]]},{name:"pinktube5",image:"elements/pinktube5.png",type:PLATFORM,width:47,height:34,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:PINK,hlNeedNumber:!0,points:[[[-22,0],[-10,-1],[-6,10],[-22,12]],[[-10,
-1],[1,-6],[8,4],[-6,10]],[[1,-6],[9,-12],[18,-3],[8,4]]]},{name:"pinktube6",image:"elements/pinktube6.png",type:PLATFORM,width:46,height:35,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:PINK,hlNeedNumber:!0,points:[[[-11,-11],[-2,-5],[-10,4],[-19,-3]],[[-2,-5],[4,-10],[12,-7],[11,0],[9,11],[-10,4]],[[11,0],[21,1],[21,12],[9,11]]]},{name:"pinktube7",image:"elements/pinktube7.png",type:PLATFORM,
width:38,height:50,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,friction:platform_friction,color:PINK,hlNeedNumber:!0,points:[[[-2,-23],[0,-11],[-12,-9],[-13,-23]],[[0,-11],[5,0],[-5,6],[-12,-9]],[[5,0],[14,13],[6,21],[-5,6]]]},{name:"pinktube8",image:"elements/pinktube8.png",type:PLATFORM,width:34,height:46,frames:1,bodyType:POLY,bodyPosCorrect:{x:0,y:0},remove:!0,fixed:!1,density:platform_density,restitution:platform_restitution,
friction:platform_friction,color:PINK,hlNeedNumber:!0,points:[[[-13,22],[-12,7],[0,9],[-2,22]],[[-12,7],[-6,-7],[4,0],[0,9]],[[-6,-7],[2,-17],[10,-9],[4,0]]]}],levels=[{objects:[{type:"bs2",x:241,y:163,rotation:0},{type:"bs2",x:241,y:114,rotation:0},{type:"bs2",x:241,y:213,rotation:0},{type:"bs2",x:308,y:163,rotation:0},{type:"bs2",x:175,y:163,rotation:0},{type:"circle1",x:204,y:133,rotation:0},{type:"circle1",x:281,y:133,rotation:0},{type:"circle1",x:137,y:164,rotation:0},{type:"circle1",x:346,y:164,
rotation:0},{type:"circle1",x:207,y:192,rotation:0},{type:"circle1",x:275,y:192,rotation:0},{type:"bs1",x:158,y:108,rotation:0},{type:"bs1",x:319,y:108,rotation:0},{type:"circle1",x:84,y:136,rotation:0},{type:"circle1",x:395,y:136,rotation:0},{type:"circle1",x:173,y:217,rotation:0},{type:"circle1",x:136,y:241,rotation:0},{type:"circle1",x:307,y:217,rotation:0},{type:"circle1",x:343,y:241,rotation:0},{type:"bs1",x:102,y:211,rotation:0},{type:"bs1",x:392,y:211,rotation:0}],joints:[]},{objects:[{type:"bs4",
x:215,y:119,rotation:0},{type:"bs4",x:285,y:119,rotation:0},{type:"bs4",x:186,y:163,rotation:0},{type:"bs4",x:308,y:163,rotation:0},{type:"bs4",x:215,y:212,rotation:0},{type:"bs4",x:285,y:212,rotation:0},{type:"bs4",x:126,y:163,rotation:0},{type:"bs4",x:368,y:163,rotation:0},{type:"bs3",x:80,y:119,rotation:0},{type:"bs3",x:80,y:212,rotation:0},{type:"bs3",x:403,y:119,rotation:0},{type:"bs3",x:403,y:212,rotation:0},{type:"whatever",x:156,y:105,rotation:0},{type:"whatever",x:340,y:105,rotation:0},{type:"whatever",
x:251,y:166,rotation:0},{type:"whatever",x:79,y:166,rotation:0},{type:"whatever",x:405,y:166,rotation:0},{type:"whatever",x:156,y:212,rotation:0},{type:"whatever",x:340,y:212,rotation:0}],joints:[]},{objects:[{type:"greentube1",x:105,y:117,rotation:0},{type:"greentube2",x:155,y:117,rotation:0},{type:"greentube3",x:182,y:144,rotation:0},{type:"greentube4",x:180,y:191,rotation:0},{type:"greentube5",x:154,y:216,rotation:0},{type:"greentube6",x:108,y:216,rotation:0},{type:"greentube7",x:82,y:190,rotation:0},
{type:"greentube8",x:79,y:143,rotation:0},{type:"greentube1",x:326,y:117,rotation:0},{type:"greentube2",x:375,y:117,rotation:0},{type:"greentube3",x:402,y:145,rotation:0},{type:"greentube4",x:401,y:193,rotation:0},{type:"greentube5",x:375,y:218,rotation:0},{type:"greentube6",x:330,y:217,rotation:0},{type:"greentube7",x:303,y:191,rotation:0},{type:"greentube8",x:300,y:144,rotation:0},{type:"bs3",x:131,y:166,rotation:0},{type:"bs3",x:351,y:166,rotation:0},{type:"bs6",x:69,y:107,rotation:0},{type:"bs6",
x:407,y:107,rotation:0},{type:"bs3",x:108,y:82,rotation:0},{type:"bs3",x:373,y:82,rotation:0},{type:"bs6",x:240,y:164,rotation:0},{type:"bs6",x:213,y:119,rotation:0},{type:"bs6",x:273,y:119,rotation:0},{type:"bs3",x:240,y:227,rotation:0},{type:"bs3",x:69,y:233,rotation:0},{type:"bs3",x:407,y:233,rotation:0},{type:"bs6",x:166,y:245,rotation:0},{type:"bs6",x:342,y:245,rotation:0}],joints:[]},{objects:[{type:"circle8",x:237,y:134,rotation:0},{type:"circle8",x:184,y:106,rotation:0},{type:"circle8",x:289,
y:105,rotation:0},{type:"circle1",x:141,y:82,rotation:0},{type:"circle1",x:340,y:82,rotation:0},{type:"starfish2",x:237,y:246,rotation:0},{type:"starfish2",x:264,y:222,rotation:0},{type:"starfish2",x:213,y:221,rotation:0},{type:"starfish2",x:184,y:198,rotation:0},{type:"starfish2",x:156,y:174,rotation:0},{type:"starfish2",x:133,y:148,rotation:0},{type:"starfish2",x:110,y:125,rotation:0},{type:"starfish2",x:87,y:100,rotation:0},{type:"starfish2",x:292,y:198,rotation:0},{type:"starfish2",x:321,y:174,
rotation:0},{type:"starfish2",x:345,y:148,rotation:0},{type:"starfish2",x:374,y:125,rotation:0},{type:"starfish2",x:399,y:100,rotation:0},{type:"circle1",x:79,y:159,rotation:0},{type:"circle1",x:398,y:159,rotation:0},{type:"circle1",x:165,y:221,rotation:0},{type:"circle1",x:320,y:221,rotation:0},{type:"circle8",x:105,y:222,rotation:0},{type:"circle8",x:374,y:222,rotation:0}],joints:[]},{objects:[{type:"bs5",x:240,y:124,rotation:0},{type:"bs5",x:240,y:172,rotation:0},{type:"bs5",x:240,y:221,rotation:0},
{type:"circle1",x:212,y:174,rotation:0},{type:"circle1",x:167,y:174,rotation:0},{type:"circle1",x:122,y:174,rotation:0},{type:"circle1",x:77,y:174,rotation:0},{type:"circle1",x:270,y:174,rotation:0},{type:"bs5",x:293,y:103,rotation:0},{type:"circle1",x:317,y:174,rotation:0},{type:"bs5",x:333,y:103,rotation:0},{type:"circle1",x:363,y:174,rotation:0},{type:"bs5",x:368,y:103,rotation:0},{type:"circle1",x:409,y:174,rotation:0},{type:"bs5",x:406,y:102,rotation:0},{type:"bs5",x:293,y:237,rotation:0},{type:"bs5",
x:332,y:237,rotation:0},{type:"bs5",x:368,y:237,rotation:0},{type:"bs5",x:406,y:237,rotation:0},{type:"bs5",x:80,y:238,rotation:0},{type:"bs5",x:187,y:103,rotation:0},{type:"bs5",x:187,y:237,rotation:0},{type:"bs5",x:152,y:236,rotation:0},{type:"bs5",x:152,y:103,rotation:0},{type:"bs5",x:117,y:237,rotation:0},{type:"bs5",x:117,y:103,rotation:0},{type:"bs5",x:80,y:103,rotation:0}],joints:[]},{objects:[{type:"circle9",x:240,y:151,rotation:0},{type:"starfish6",x:214,y:202,rotation:0},{type:"starfish6",
x:265,y:202,rotation:0},{type:"starfish6",x:240,y:245,rotation:0},{type:"starfish6",x:290,y:245,rotation:0},{type:"starfish6",x:190,y:245,rotation:0},{type:"starfish6",x:104,y:238,rotation:0},{type:"greytube3",x:180,y:203,rotation:-0.05000000000000002},{type:"greytube2",x:153,y:176,rotation:0},{type:"greytube6",x:106,y:161,rotation:0},{type:"greytube7",x:79,y:135,rotation:0},{type:"greytube8",x:77,y:87,rotation:0},{type:"circle9",x:89,y:207,rotation:0},{type:"starfish8",x:124,y:204,rotation:0},{type:"starfish8",
x:68,y:251,rotation:0},{type:"starfish8",x:66,y:176,rotation:0},{type:"starfish6",x:365,y:237,rotation:0},{type:"warp_hole",x:106,y:115,rotation:0},{type:"starfish7",x:130,y:67,rotation:0},{type:"starfish7",x:167,y:95,rotation:0},{type:"greytube8",x:300,y:202,rotation:0},{type:"greytube1",x:326,y:175,rotation:0},{type:"greytube5",x:374,y:160,rotation:0},{type:"greytube4",x:400,y:134,rotation:0},{type:"greytube3",x:402,y:86,rotation:0},{type:"circle9",x:390,y:208,rotation:0},{type:"starfish8",x:409,
y:176,rotation:0},{type:"starfish8",x:354,y:204,rotation:0},{type:"starfish8",x:400,y:251,rotation:0},{type:"warp_hole",x:372,y:115,rotation:0},{type:"starfish7",x:195,y:134,rotation:0},{type:"starfish7",x:310,y:134,rotation:0},{type:"starfish7",x:320,y:95,rotation:0},{type:"starfish7",x:356,y:67,rotation:0}],joints:[]},{objects:[{type:"bs4",x:240,y:169,rotation:0},{type:"pinktube6",x:219,y:223,rotation:-0.05},{type:"pinktube5",x:264,y:223,rotation:0},{type:"pinktube4",x:291,y:198,rotation:0},{type:"pinktube3",
x:292,y:150,rotation:0},{type:"pinktube2",x:265,y:123,rotation:0},{type:"pinktube1",x:216,y:123,rotation:0},{type:"pinktube8",x:191,y:150,rotation:0},{type:"pinktube7",x:194,y:197,rotation:0},{type:"greentube1",x:306,y:117,rotation:0},{type:"greentube2",x:356,y:117,rotation:0},{type:"greentube3",x:382,y:145,rotation:0},{type:"greentube4",x:381,y:192,rotation:0},{type:"greentube5",x:354,y:217,rotation:0},{type:"greentube6",x:309,y:217,rotation:0},{type:"greentube2",x:177,y:118,rotation:0},{type:"greentube1",
x:128,y:118,rotation:0},{type:"greentube8",x:102,y:144,rotation:0},{type:"greentube7",x:105,y:192,rotation:0},{type:"greentube6",x:131,y:218,rotation:0},{type:"greentube5",x:177,y:219,rotation:0},{type:"bs4",x:333,y:164,rotation:0},{type:"bs4",x:148,y:164,rotation:0},{type:"bs4",x:185,y:85,rotation:0},{type:"bs4",x:113,y:85,rotation:0},{type:"bs4",x:186,y:247,rotation:0},{type:"bs4",x:113,y:249,rotation:0},{type:"bs4",x:69,y:202,rotation:0},{type:"bs4",x:69,y:128,rotation:0},{type:"bs4",x:304,y:85,
rotation:0},{type:"bs4",x:376,y:85,rotation:0},{type:"bs4",x:415,y:128,rotation:0},{type:"bs4",x:414,y:202,rotation:0},{type:"bs4",x:382,y:249,rotation:0},{type:"bs4",x:297,y:247,rotation:0}],joints:[]},{objects:[{type:"starfish7",x:240,y:241,rotation:0},{type:"starfish7",x:240,y:119,rotation:0},{type:"starfish7",x:418,y:174,rotation:0},{type:"starfish7",x:301,y:174,rotation:0},{type:"starfish7",x:182,y:174,rotation:0},{type:"starfish7",x:65,y:174,rotation:0},{type:"circle1",x:301,y:127,rotation:0},
{type:"circle1",x:418,y:127,rotation:0},{type:"circle1",x:301,y:225,rotation:0},{type:"circle1",x:418,y:225,rotation:0},{type:"starfish7",x:389,y:234,rotation:0},{type:"starfish7",x:300,y:92,rotation:0},{type:"starfish7",x:379,y:88,rotation:0},{type:"circle1",x:182,y:127,rotation:0},{type:"circle1",x:182,y:225,rotation:0},{type:"circle1",x:65,y:225,rotation:0},{type:"circle1",x:65,y:127,rotation:0},{type:"starfish7",x:118,y:111,rotation:0},{type:"starfish7",x:82,y:88,rotation:0},{type:"starfish7",
x:182,y:92,rotation:0},{type:"starfish7",x:118,y:232,rotation:0},{type:"atwill",x:240,y:179,rotation:0},{type:"atwill",x:360,y:179,rotation:0},{type:"atwill",x:117,y:179,rotation:0}],joints:[]},{objects:[{type:"bluetube1",x:82,y:87,rotation:0},{type:"bluetube8",x:57,y:114,rotation:0},{type:"bluetube7",x:59,y:162,rotation:0},{type:"bluetube6",x:85,y:188,rotation:0},{type:"bluetube5",x:131,y:189,rotation:0},{type:"bluetube4",x:412,y:161,rotation:-0.05},{type:"bluetube3",x:157,y:114,rotation:0},{type:"bluetube2",
x:131,y:87,rotation:0},{type:"bs2",x:86,y:121,rotation:0},{type:"bs2",x:127,y:121,rotation:0},{type:"bs2",x:86,y:155,rotation:0},{type:"bs2",x:127,y:155,rotation:0},{type:"bluetube1",x:338,y:87,rotation:0},{type:"bluetube2",x:387,y:87,rotation:0},{type:"bluetube3",x:413,y:114,rotation:0},{type:"bluetube4",x:156,y:162,rotation:0},{type:"bluetube5",x:387,y:187,rotation:0},{type:"bluetube6",x:341,y:185,rotation:0},{type:"bluetube7",x:314,y:161,rotation:0},{type:"bluetube8",x:312,y:113,rotation:0},{type:"bs2",
x:340,y:123,rotation:0},{type:"bs2",x:382,y:124,rotation:0},{type:"bs2",x:382,y:159,rotation:0},{type:"bs2",x:340,y:159,rotation:0},{type:"bluetube1",x:213,y:154,rotation:0},{type:"bluetube2",x:262,y:154,rotation:0},{type:"bluetube3",x:289,y:181,rotation:0},{type:"bluetube4",x:287,y:229,rotation:0},{type:"bluetube5",x:260,y:255,rotation:0},{type:"bluetube7",x:190,y:229,rotation:0},{type:"bluetube6",x:215,y:254,rotation:0},{type:"bluetube8",x:188,y:181,rotation:0},{type:"bs2",x:214,y:190,rotation:0},
{type:"bs2",x:255,y:190,rotation:0},{type:"bs2",x:255,y:223,rotation:0},{type:"bs2",x:214,y:223,rotation:0},{type:"starfish2",x:175,y:78,rotation:0},{type:"starfish2",x:301,y:78,rotation:0},{type:"circle1",x:187,y:119,rotation:0},{type:"circle1",x:284,y:119,rotation:0},{type:"starfish2",x:74,y:246,rotation:0},{type:"circle1",x:116,y:222,rotation:0},{type:"circle1",x:355,y:222,rotation:0},{type:"starfish2",x:394,y:246,rotation:0}],joints:[]},{objects:[{type:"bs1",x:240,y:147,rotation:0},{type:"bs1",
x:194,y:109,rotation:0},{type:"bs1",x:289,y:109,rotation:0},{type:"bs1",x:324,y:152,rotation:0},{type:"bs1",x:159,y:152,rotation:0},{type:"bs1",x:194,y:192,rotation:0},{type:"bs1",x:289,y:192,rotation:0},{type:"jellyfish4",x:240,y:221,rotation:0},{type:"jellyfish4",x:158,y:214,rotation:0},{type:"jellyfish4",x:348,y:214,rotation:0},{type:"circle7",x:110,y:163,rotation:0},{type:"circle7",x:388,y:163,rotation:0},{type:"jellyfish4",x:363,y:130,rotation:0},{type:"jellyfish4",x:133,y:130,rotation:0},{type:"jellyfish4",
x:412,y:131,rotation:0},{type:"jellyfish4",x:69,y:130,rotation:0},{type:"jellyfish4",x:418,y:177,rotation:0},{type:"jellyfish4",x:77,y:177,rotation:0},{type:"jellyfish4",x:413,y:213,rotation:0},{type:"jellyfish4",x:92,y:213,rotation:0},{type:"circle7",x:397,y:250,rotation:0},{type:"circle7",x:114,y:250,rotation:0},{type:"jellyfish4",x:162,y:253,rotation:0},{type:"jellyfish4",x:355,y:253,rotation:0},{type:"jellyfish4",x:95,y:80,rotation:0},{type:"jellyfish4",x:392,y:80,rotation:0},{type:"multipearl",
x:99,y:114,rotation:0}],joints:[]},{objects:[{type:"circle7",x:240,y:198,rotation:0},{type:"greytube2",x:178,y:102,rotation:0},{type:"greytube3",x:205,y:129,rotation:0},{type:"greytube4",x:203,y:177,rotation:0},{type:"greytube1",x:129,y:102,rotation:0},{type:"greytube8",x:66,y:89,rotation:0},{type:"greytube7",x:68,y:137,rotation:0},{type:"greytube6",x:95,y:163,rotation:0},{type:"greytube5",x:140,y:165,rotation:0},{type:"starfish2",x:183,y:159,rotation:0},{type:"starfish2",x:166,y:126,rotation:0},
{type:"starfish2",x:119,y:136,rotation:0},{type:"starfish2",x:90,y:113,rotation:0},{type:"starfish2",x:98,y:77,rotation:0},{type:"starfish2",x:134,y:61,rotation:0},{type:"starfish2",x:175,y:72,rotation:0},{type:"starfish2",x:157,y:196,rotation:0},{type:"starfish2",x:181,y:214,rotation:0},{type:"starfish2",x:95,y:204,rotation:0},{type:"starfish2",x:64,y:183,rotation:0},{type:"starfish2",x:181,y:248,rotation:0},{type:"circle7",x:142,y:240,rotation:0},{type:"greytube1",x:298,y:108,rotation:0},{type:"greytube8",
x:273,y:135,rotation:0},{type:"greytube7",x:275,y:183,rotation:0},{type:"greytube2",x:348,y:108,rotation:0},{type:"starfish2",x:365,y:136,rotation:0},{type:"starfish2",x:390,y:113,rotation:0},{type:"starfish2",x:373,y:74,rotation:0},{type:"starfish2",x:338,y:61,rotation:0},{type:"starfish2",x:303,y:72,rotation:0},{type:"starfish2",x:328,y:126,rotation:0},{type:"starfish2",x:299,y:159,rotation:0},{type:"greytube3",x:418,y:100,rotation:0},{type:"greytube4",x:416,y:148,rotation:0},{type:"greytube5",
x:390,y:174,rotation:0},{type:"greytube6",x:345,y:173,rotation:0},{type:"starfish2",x:305,y:214,rotation:0},{type:"starfish2",x:305,y:248,rotation:0},{type:"starfish2",x:330,y:196,rotation:0},{type:"starfish2",x:389,y:204,rotation:0},{type:"starfish2",x:422,y:183,rotation:0},{type:"circle7",x:340,y:241,rotation:0}],joints:[]},{objects:[{type:"starfish6",x:240,y:150,rotation:0},{type:"jellyfish3",x:240,y:105,rotation:0},{type:"jellyfish3",x:240,y:196,rotation:0},{type:"jellyfish3",x:208,y:121,rotation:0},
{type:"jellyfish3",x:194,y:151,rotation:0},{type:"jellyfish3",x:208,y:181,rotation:0},{type:"jellyfish3",x:271,y:121,rotation:0},{type:"jellyfish3",x:286,y:151,rotation:0},{type:"jellyfish3",x:275,y:181,rotation:0},{type:"circle6",x:272,y:85,rotation:0},{type:"jellyfish1",x:299,y:96,rotation:0},{type:"jellyfish1",x:331,y:82,rotation:0},{type:"jellyfish2",x:361,y:69,rotation:0},{type:"jellyfish1",x:387,y:82,rotation:0},{type:"circle6",x:360,y:106,rotation:0},{type:"circle6",x:326,y:123,rotation:0},
{type:"jellyfish2",x:388,y:136,rotation:0},{type:"jellyfish2",x:385,y:176,rotation:0},{type:"circle6",x:313,y:179,rotation:0},{type:"jellyfish1",x:341,y:195,rotation:0},{type:"circle6",x:368,y:209,rotation:0},{type:"jellyfish1",x:401,y:227,rotation:0},{type:"circle6",x:402,y:197,rotation:0},{type:"jellyfish2",x:341,y:227,rotation:0},{type:"jellyfish2",x:375,y:251,rotation:0},{type:"jellyfish2",x:273,y:211,rotation:0},{type:"circle6",x:261,y:238,rotation:0},{type:"jellyfish2",x:311,y:247,rotation:0},
{type:"jellyfish2",x:223,y:239,rotation:0},{type:"circle6",x:199,y:217,rotation:0},{type:"jellyfish1",x:174,y:199,rotation:0},{type:"jellyfish2",x:174,y:251,rotation:0},{type:"jellyfish2",x:139,y:210,rotation:0},{type:"jellyfish2",x:96,y:229,rotation:0},{type:"circle6",x:129,y:245,rotation:0},{type:"circle6",x:90,y:175,rotation:0},{type:"jellyfish1",x:121,y:139,rotation:0},{type:"jellyfish2",x:73,y:120,rotation:0},{type:"circle6",x:108,y:101,rotation:0},{type:"circle6",x:164,y:120,rotation:0},{type:"jellyfish1",
x:151,y:81,rotation:0},{type:"jellyfish2",x:99,y:69,rotation:0}],joints:[]},{objects:[{type:"starfish4",x:222,y:146,rotation:0},{type:"starfish4",x:269,y:146,rotation:0},{type:"starfish4",x:245,y:170,rotation:0},{type:"starfish4",x:222,y:192,rotation:0},{type:"starfish4",x:269,y:192,rotation:0},{type:"pinktube1",x:218,y:121,rotation:0},{type:"pinktube2",x:268,y:121,rotation:0},{type:"pinktube3",x:295,y:148,rotation:0},{type:"pinktube4",x:293,y:196,rotation:0},{type:"pinktube5",x:267,y:222,rotation:0},
{type:"pinktube6",x:221,y:222,rotation:0},{type:"pinktube7",x:195,y:196,rotation:0},{type:"pinktube8",x:193,y:148,rotation:0},{type:"bs4",x:132,y:176,rotation:0},{type:"bs4",x:350,y:173,rotation:0},{type:"bs4",x:101,y:150,rotation:0},{type:"bs4",x:101,y:202,rotation:0},{type:"bs4",x:378,y:145,rotation:0},{type:"bs4",x:378,y:201,rotation:0},{type:"starfish4",x:137,y:143,rotation:0},{type:"starfish4",x:137,y:209,rotation:0},{type:"starfish4",x:348,y:204,rotation:0},{type:"starfish4",x:348,y:143,rotation:0},
{type:"greentube1",x:99,y:127,rotation:0},{type:"greentube8",x:73,y:153,rotation:0},{type:"greentube7",x:75,y:201,rotation:0},{type:"greentube6",x:102,y:227,rotation:0},{type:"greentube2",x:387,y:125,rotation:0},{type:"greentube3",x:413,y:152,rotation:0},{type:"greentube4",x:412,y:200,rotation:0},{type:"greentube5",x:387,y:225,rotation:0},{type:"starfish4",x:85,y:99,rotation:0},{type:"starfish4",x:67,y:243,rotation:0},{type:"starfish4",x:417,y:243,rotation:0},{type:"starfish4",x:403,y:99,rotation:0}],
joints:[]},{objects:[{type:"bs3",x:221,y:175,rotation:0},{type:"bs3",x:262,y:175,rotation:0},{type:"bs3",x:199,y:207,rotation:0},{type:"bs3",x:284,y:205,rotation:0},{type:"bs3",x:221,y:237,rotation:0},{type:"bs3",x:262,y:237,rotation:0},{type:"starfish2",x:240,y:203,rotation:0},{type:"circle5",x:187,y:239,rotation:0},{type:"circle5",x:296,y:239,rotation:0},{type:"circle10",x:178,y:170,rotation:0},{type:"circle10",x:310,y:170,rotation:0},{type:"bs3",x:168,y:129,rotation:0},{type:"bs3",x:141,y:168,
rotation:0},{type:"bs3",x:112,y:168,rotation:0},{type:"bs3",x:90,y:129,rotation:0},{type:"starfish2",x:132,y:135,rotation:0},{type:"bs3",x:112,y:99,rotation:0},{type:"bs3",x:147,y:99,rotation:0},{type:"circle10",x:79,y:170,rotation:0},{type:"circle5",x:77,y:92,rotation:0},{type:"starfish2",x:132,y:64,rotation:0},{type:"starfish2",x:93,y:202,rotation:0},{type:"circle5",x:135,y:205,rotation:0},{type:"bs3",x:342,y:168,rotation:0},{type:"bs3",x:373,y:168,rotation:0},{type:"circle10",x:406,y:170,rotation:0},
{type:"bs3",x:323,y:129,rotation:0},{type:"bs3",x:403,y:129,rotation:0},{type:"bs3",x:342,y:99,rotation:0},{type:"bs3",x:373,y:99,rotation:0},{type:"starfish2",x:362,y:132,rotation:0},{type:"starfish2",x:362,y:64,rotation:0},{type:"starfish2",x:390,y:202,rotation:0},{type:"circle5",x:360,y:205,rotation:0},{type:"circle5",x:407,y:92,rotation:0}],joints:[]},{objects:[{type:"multipearl",x:238,y:171,rotation:0},{type:"bs6",x:255,y:147,rotation:0},{type:"bs6",x:264,y:186,rotation:0},{type:"bs6",x:223,
y:196,rotation:0},{type:"bs6",x:213,y:158,rotation:0},{type:"bluetube1",x:217,y:122,rotation:0},{type:"bluetube2",x:265,y:122,rotation:0},{type:"bluetube3",x:291,y:148,rotation:0},{type:"bluetube4",x:288,y:196,rotation:0},{type:"bluetube5",x:263,y:221,rotation:0},{type:"bluetube6",x:218,y:220,rotation:0},{type:"bluetube7",x:192,y:195,rotation:0},{type:"bluetube8",x:191,y:147,rotation:0},{type:"bluetube2",x:176,y:117,rotation:0},{type:"bluetube4",x:297,y:110,rotation:0},{type:"bluetube6",x:299,y:226,
rotation:0},{type:"bluetube8",x:193,y:233,rotation:0},{type:"pinktube1",x:155,y:177,rotation:0},{type:"pinktube5",x:327,y:164,rotation:0},{type:"bs4",x:321,y:130,rotation:0},{type:"bs4",x:154,y:136,rotation:0},{type:"bs4",x:160,y:213,rotation:0},{type:"bs4",x:322,y:199,rotation:0},{type:"bs5",x:91,y:129,rotation:0},{type:"bs5",x:110,y:162,rotation:0},{type:"bs5",x:76,y:162,rotation:0},{type:"bs5",x:76,y:203,rotation:0},{type:"bs5",x:109,y:203,rotation:0},{type:"circle8",x:91,y:87,rotation:0},{type:"circle8",
x:75,y:238,rotation:0},{type:"circle1",x:135,y:204,rotation:0},{type:"circle1",x:67,y:120,rotation:0},{type:"bs2",x:204,y:88,rotation:0},{type:"bs2",x:269,y:88,rotation:0},{type:"bs2",x:215,y:259,rotation:0},{type:"bs2",x:270,y:253,rotation:0},{type:"circle1",x:347,y:200,rotation:0},{type:"bs5",x:367,y:166,rotation:0},{type:"bs5",x:399,y:166,rotation:0},{type:"bs5",x:381,y:120,rotation:0},{type:"bs5",x:367,y:203,rotation:0},{type:"bs5",x:399,y:203,rotation:0},{type:"circle8",x:400,y:239,rotation:0},
{type:"circle8",x:390,y:81,rotation:0},{type:"circle1",x:405,y:119,rotation:0}],joints:[]},{objects:[{type:"starfish7",x:207,y:188,rotation:0},{type:"starfish7",x:187,y:165,rotation:0},{type:"starfish7",x:195,y:125,rotation:0},{type:"starfish7",x:161,y:110,rotation:0},{type:"starfish7",x:133,y:93,rotation:0},{type:"starfish7",x:81,y:96,rotation:0},{type:"starfish7",x:107,y:74,rotation:0},{type:"starfish7",x:161,y:189,rotation:0},{type:"starfish7",x:133,y:209,rotation:0},{type:"starfish7",x:107,y:233,
rotation:0},{type:"starfish7",x:289,y:125,rotation:0},{type:"starfish7",x:325,y:110,rotation:0},{type:"starfish7",x:352,y:93,rotation:0},{type:"starfish7",x:381,y:74,rotation:0},{type:"starfish7",x:406,y:96,rotation:0},{type:"starfish7",x:289,y:165,rotation:0},{type:"starfish7",x:325,y:189,rotation:0},{type:"starfish7",x:352,y:212,rotation:0},{type:"starfish7",x:381,y:236,rotation:0},{type:"starfish7",x:266,y:189,rotation:0},{type:"atwill",x:240,y:145,rotation:0},{type:"whatever",x:152,y:76,rotation:0},
{type:"whatever",x:82,y:57,rotation:0},{type:"whatever",x:160,y:147,rotation:0},{type:"whatever",x:121,y:147,rotation:0},{type:"whatever",x:84,y:147,rotation:0},{type:"whatever",x:78,y:182,rotation:0},{type:"whatever",x:98,y:260,rotation:0},{type:"whatever",x:154,y:225,rotation:0},{type:"whatever",x:323,y:147,rotation:0},{type:"whatever",x:362,y:147,rotation:0},{type:"whatever",x:400,y:147,rotation:0},{type:"whatever",x:330,y:225,rotation:0},{type:"whatever",x:387,y:260,rotation:0},{type:"whatever",
x:402,y:177,rotation:0},{type:"whatever",x:322,y:76,rotation:0},{type:"whatever",x:402,y:56,rotation:0}],joints:[]},{objects:[{type:"circle9",x:242,y:146,rotation:0},{type:"circle9",x:305,y:207,rotation:0},{type:"circle9",x:348,y:247,rotation:0},{type:"circle9",x:175,y:207,rotation:0},{type:"circle9",x:129,y:247,rotation:0},{type:"starfish8",x:204,y:170,rotation:0},{type:"starfish8",x:275,y:170,rotation:0},{type:"starfish8",x:204,y:117,rotation:0},{type:"starfish8",x:275,y:117,rotation:0},{type:"starfish6",
x:240,y:187,rotation:0},{type:"starfish6",x:202,y:217,rotation:0},{type:"starfish6",x:275,y:217,rotation:0},{type:"circle3",x:156,y:237,rotation:0},{type:"circle3",x:326,y:237,rotation:0},{type:"circle3",x:311,y:150,rotation:0},{type:"circle3",x:170,y:150,rotation:0},{type:"circle3",x:170,y:92,rotation:0},{type:"circle3",x:311,y:92,rotation:0},{type:"starfish6",x:338,y:118,rotation:0},{type:"starfish6",x:141,y:118,rotation:0},{type:"circle3",x:107,y:119,rotation:0},{type:"circle3",x:370,y:119,rotation:0},
{type:"starfish6",x:141,y:187,rotation:0},{type:"starfish6",x:344,y:187,rotation:0},{type:"circle3",x:107,y:188,rotation:0},{type:"circle3",x:380,y:188,rotation:0},{type:"starfish8",x:368,y:151,rotation:0},{type:"starfish8",x:105,y:151,rotation:0},{type:"starfish8",x:105,y:86,rotation:0},{type:"starfish8",x:105,y:217,rotation:0},{type:"starfish8",x:368,y:86,rotation:0},{type:"starfish8",x:369,y:223,rotation:0},{type:"starfish6",x:69,y:212,rotation:0},{type:"starfish6",x:403,y:213,rotation:0},{type:"starfish6",
x:69,y:104,rotation:0},{type:"starfish6",x:403,y:104,rotation:0},{type:"bs4",x:67,y:240,rotation:0},{type:"bs4",x:67,y:184,rotation:0},{type:"circle3",x:69,y:160,rotation:0},{type:"bs4",x:67,y:133,rotation:0},{type:"bs4",x:67,y:76,rotation:0},{type:"bs4",x:403,y:77,rotation:0},{type:"bs4",x:403,y:135,rotation:0},{type:"circle3",x:405,y:160,rotation:0},{type:"bs4",x:403,y:184,rotation:0},{type:"bs4",x:403,y:240,rotation:0}],joints:[]},{objects:[{type:"pinktube1",x:86,y:98,rotation:0},{type:"pinktube3",
x:161,y:124,rotation:0},{type:"pinktube2",x:135,y:98,rotation:0},{type:"pinktube2",x:192,y:161,rotation:0},{type:"pinktube1",x:146,y:161,rotation:0},{type:"jellyfish3",x:240,y:162,rotation:0},{type:"pinktube3",x:218,y:188,rotation:0},{type:"pinktube8",x:61,y:125,rotation:0},{type:"circle9",x:166,y:247,rotation:0},{type:"bs2",x:166,y:187,rotation:0},{type:"bs6",x:198,y:217,rotation:0},{type:"bs6",x:140,y:217,rotation:0},{type:"pinktube8",x:121,y:187,rotation:0},{type:"jellyfish3",x:89,y:228,rotation:0},
{type:"bs2",x:69,y:205,rotation:0},{type:"bs6",x:86,y:163,rotation:0},{type:"bs2",x:109,y:126,rotation:0},{type:"bs2",x:172,y:81,rotation:0},{type:"jellyfish3",x:203,y:123,rotation:0},{type:"pinktube8",x:265,y:186,rotation:0},{type:"pinktube1",x:290,y:160,rotation:0},{type:"pinktube2",x:337,y:160,rotation:0},{type:"pinktube3",x:363,y:187,rotation:0},{type:"pinktube8",x:322,y:123,rotation:0},{type:"pinktube1",x:347,y:97,rotation:0},{type:"pinktube2",x:395,y:97,rotation:0},{type:"pinktube3",x:420,y:123,
rotation:0},{type:"bs2",x:314,y:187,rotation:0},{type:"bs6",x:343,y:217,rotation:0},{type:"bs6",x:287,y:217,rotation:0},{type:"circle9",x:314,y:247,rotation:0},{type:"bs2",x:371,y:126,rotation:0},{type:"bs6",x:398,y:163,rotation:0},{type:"bs2",x:410,y:205,rotation:0},{type:"jellyfish3",x:391,y:228,rotation:0},{type:"jellyfish3",x:275,y:123,rotation:0},{type:"bs2",x:304,y:81,rotation:0}],joints:[]},{objects:[{type:"starfish8",x:240,y:114,rotation:0},{type:"bs3",x:128,y:248,rotation:0},{type:"bs3",
x:369,y:248,rotation:0},{type:"greentube4",x:346,y:199,rotation:0},{type:"greentube5",x:320,y:224,rotation:0},{type:"starfish8",x:300,y:201,rotation:0},{type:"starfish8",x:329,y:175,rotation:0},{type:"greentube4",x:324,y:120,rotation:0},{type:"greentube5",x:297,y:146,rotation:0},{type:"greentube4",x:398,y:105,rotation:0},{type:"greentube5",x:371,y:131,rotation:0},{type:"starfish8",x:355,y:98,rotation:0},{type:"starfish8",x:382,y:70,rotation:0},{type:"bs3",x:405,y:154,rotation:0},{type:"bs3",x:405,
y:194,rotation:0},{type:"starfish8",x:299,y:85,rotation:0},{type:"greentube6",x:187,y:145,rotation:0},{type:"greentube7",x:161,y:118,rotation:0},{type:"starfish8",x:187,y:85,rotation:0},{type:"greentube6",x:108,y:130,rotation:0},{type:"greentube7",x:82,y:103,rotation:0},{type:"starfish8",x:100,y:71,rotation:0},{type:"starfish8",x:129,y:98,rotation:0},{type:"greentube7",x:138,y:197,rotation:0},{type:"greentube6",x:164,y:224,rotation:0},{type:"starfish8",x:183,y:201,rotation:0},{type:"starfish8",x:150,
y:177,rotation:0},{type:"bs3",x:84,y:154,rotation:0},{type:"bs3",x:84,y:194,rotation:0},{type:"whatever",x:372,y:169,rotation:0},{type:"whatever",x:110,y:169,rotation:0}],joints:[]},{objects:[{type:"octopus2",x:246,y:118,rotation:0},{type:"octopus1",x:189,y:130,rotation:0},{type:"octopus1",x:297,y:130,rotation:0},{type:"multipearl",x:246,y:162,rotation:0},{type:"octopus1",x:189,y:200,rotation:0},{type:"octopus1",x:297,y:200,rotation:0},{type:"octopus1",x:144,y:102,rotation:0},{type:"octopus1",x:92,
y:111,rotation:0},{type:"octopus1",x:342,y:102,rotation:0},{type:"octopus1",x:391,y:111,rotation:0},{type:"octopus2",x:117,y:160,rotation:0},{type:"octopus2",x:358,y:160,rotation:0},{type:"circle1",x:69,y:141,rotation:0},{type:"circle1",x:412,y:136,rotation:0},{type:"octopus1",x:96,y:205,rotation:0},{type:"octopus1",x:388,y:205,rotation:0},{type:"circle1",x:87,y:175,rotation:0},{type:"circle1",x:393,y:175,rotation:0},{type:"circle1",x:125,y:207,rotation:0},{type:"circle1",x:362,y:207,rotation:0},
{type:"circle1",x:165,y:240,rotation:0},{type:"circle1",x:221,y:252,rotation:0},{type:"circle1",x:275,y:252,rotation:0},{type:"circle1",x:328,y:240,rotation:0},{type:"starfish6",x:153,y:193,rotation:0},{type:"starfish6",x:333,y:193,rotation:0}],joints:[]},{objects:[{type:"octopus3",x:240,y:130,rotation:0},{type:"octopus3",x:138,y:71,rotation:0},{type:"octopus3",x:291,y:107,rotation:0},{type:"octopus3",x:291,y:160,rotation:0},{type:"octopus3",x:189,y:107,rotation:0},{type:"octopus3",x:191,y:160,rotation:0},
{type:"starfish2",x:156,y:102,rotation:0},{type:"starfish2",x:325,y:105,rotation:0},{type:"octopus3",x:353,y:78,rotation:0},{type:"starfish2",x:118,y:98,rotation:0},{type:"starfish2",x:376,y:102,rotation:0},{type:"circle5",x:178,y:67,rotation:0},{type:"circle5",x:305,y:67,rotation:0},{type:"starfish2",x:400,y:131,rotation:0},{type:"starfish2",x:402,y:175,rotation:0},{type:"starfish2",x:327,y:201,rotation:0},{type:"starfish2",x:372,y:217,rotation:0},{type:"circle5",x:420,y:115,rotation:0},{type:"starfish2",
x:92,y:127,rotation:0},{type:"circle5",x:384,y:254,rotation:0},{type:"circle5",x:307,y:226,rotation:0},{type:"circle5",x:68,y:122,rotation:0},{type:"starfish2",x:117,y:217,rotation:0},{type:"starfish2",x:162,y:200,rotation:0},{type:"starfish2",x:87,y:175,rotation:0},{type:"circle5",x:179,y:226,rotation:0},{type:"circle5",x:95,y:254,rotation:0},{type:"atwill",x:240,y:210,rotation:0},{type:"atwill",x:129,y:163,rotation:0},{type:"atwill",x:365,y:163,rotation:0},{type:"atwill",x:86,y:82,rotation:0},{type:"atwill",
x:402,y:82,rotation:0}],joints:[]},{objects:[{type:"starfish7",x:244,y:115,rotation:0},{type:"starfish7",x:219,y:144,rotation:0},{type:"starfish7",x:268,y:144,rotation:0},{type:"greentube6",x:262,y:172,rotation:0},{type:"greentube5",x:222,y:172,rotation:0},{type:"starfish7",x:243,y:192,rotation:0},{type:"pinktube1",x:176,y:186,rotation:0},{type:"pinktube2",x:309,y:188,rotation:0},{type:"greentube6",x:343,y:208,rotation:0},{type:"greentube5",x:143,y:205,rotation:0},{type:"pinktube2",x:390,y:224,rotation:0},
{type:"pinktube1",x:95,y:220,rotation:0},{type:"greentube6",x:424,y:244,rotation:0},{type:"greentube5",x:62,y:239,rotation:0},{type:"circle7",x:182,y:123,rotation:0},{type:"circle7",x:301,y:123,rotation:0},{type:"starfish7",x:135,y:105,rotation:0},{type:"starfish7",x:341,y:101,rotation:0},{type:"bs4",x:118,y:70,rotation:0},{type:"bs4",x:358,y:70,rotation:0},{type:"circle7",x:84,y:98,rotation:0},{type:"circle7",x:387,y:91,rotation:0},{type:"bs4",x:149,y:146,rotation:0},{type:"bs4",x:326,y:146,rotation:0},
{type:"starfish7",x:99,y:128,rotation:0},{type:"starfish7",x:371,y:128,rotation:0},{type:"bs4",x:111,y:164,rotation:0},{type:"bs4",x:375,y:164,rotation:0},{type:"bs4",x:81,y:191,rotation:0},{type:"bs4",x:403,y:191,rotation:0},{type:"starfish7",x:74,y:150,rotation:0},{type:"starfish7",x:409,y:150,rotation:0},{type:"circle7",x:150,y:240,rotation:0},{type:"circle7",x:338,y:240,rotation:0},{type:"bs4",x:108,y:239,rotation:0},{type:"bs4",x:380,y:239,rotation:0}],joints:[]},{objects:[{type:"jellyfish3",
x:235,y:156,rotation:0},{type:"jellyfish3",x:196,y:156,rotation:0},{type:"jellyfish3",x:268,y:156,rotation:0},{type:"jellyfish3",x:296,y:156,rotation:0},{type:"jellyfish3",x:162,y:143,rotation:0},{type:"jellyfish3",x:132,y:124,rotation:0},{type:"jellyfish3",x:94,y:106,rotation:0},{type:"jellyfish3",x:57,y:84,rotation:0},{type:"jellyfish3",x:329,y:134,rotation:0},{type:"jellyfish3",x:366,y:120,rotation:0},{type:"jellyfish3",x:397,y:98,rotation:0},{type:"jellyfish2",x:427,y:98,rotation:0},{type:"jellyfish2",
x:402,y:125,rotation:0},{type:"jellyfish2",x:381,y:146,rotation:0},{type:"jellyfish2",x:356,y:161,rotation:0},{type:"circle2",x:337,y:177,rotation:0},{type:"jellyfish2",x:313,y:177,rotation:0},{type:"jellyfish2",x:282,y:178,rotation:0},{type:"jellyfish2",x:246,y:178,rotation:0},{type:"jellyfish2",x:208,y:179,rotation:0},{type:"jellyfish2",x:173,y:172,rotation:0},{type:"jellyfish2",x:122,y:153,rotation:0},{type:"jellyfish2",x:94,y:135,rotation:0},{type:"jellyfish2",x:67,y:114,rotation:0},{type:"circle2",
x:401,y:159,rotation:0},{type:"circle2",x:428,y:123,rotation:0},{type:"jellyfish3",x:430,y:147,rotation:0},{type:"jellyfish3",x:411,y:172,rotation:0},{type:"jellyfish3",x:383,y:185,rotation:0},{type:"jellyfish3",x:343,y:196,rotation:0},{type:"jellyfish3",x:299,y:201,rotation:0},{type:"jellyfish3",x:262,y:202,rotation:0},{type:"jellyfish3",x:226,y:202,rotation:0},{type:"jellyfish3",x:185,y:202,rotation:0},{type:"jellyfish3",x:137,y:189,rotation:0},{type:"circle2",x:148,y:170,rotation:0},{type:"jellyfish3",
x:98,y:178,rotation:0},{type:"circle2",x:77,y:145,rotation:0},{type:"jellyfish3",x:62,y:162,rotation:0},{type:"circle2",x:49,y:131,rotation:0},{type:"circle2",x:58,y:199,rotation:0},{type:"circle2",x:93,y:228,rotation:0},{type:"circle2",x:426,y:196,rotation:0},{type:"circle2",x:412,y:225,rotation:0},{type:"circle2",x:206,y:232,rotation:0},{type:"circle2",x:277,y:232,rotation:0}],joints:[]},{objects:[{type:"starfish2",x:230,y:97,rotation:0},{type:"octopus2",x:144,y:197,rotation:0},{type:"starfish2",
x:283,y:93,rotation:0},{type:"starfish2",x:315,y:76,rotation:0},{type:"starfish2",x:184,y:84,rotation:0},{type:"starfish2",x:200,y:128,rotation:0},{type:"octopus3",x:198,y:166,rotation:0},{type:"starfish2",x:233,y:192,rotation:0},{type:"starfish2",x:282,y:187,rotation:0},{type:"starfish2",x:314,y:165,rotation:0},{type:"octopus3",x:312,y:122,rotation:0},{type:"starfish2",x:318,y:215,rotation:0},{type:"starfish2",x:190,y:212,rotation:0},{type:"octopus2",x:144,y:113,rotation:0},{type:"octopus2",x:346,
y:194,rotation:0},{type:"octopus2",x:346,y:117,rotation:0},{type:"octopus5",x:111,y:98,rotation:0},{type:"octopus5",x:81,y:84,rotation:0},{type:"octopus5",x:111,y:211,rotation:0},{type:"octopus5",x:81,y:232,rotation:0},{type:"octopus5",x:374,y:97,rotation:0},{type:"octopus5",x:406,y:84,rotation:0},{type:"octopus5",x:374,y:214,rotation:0},{type:"octopus5",x:406,y:230,rotation:0},{type:"circle9",x:111,y:164,rotation:0},{type:"circle9",x:386,y:164,rotation:0}],joints:[]},{objects:[{type:"multipearl",
x:243,y:126,rotation:0},{type:"starfish1",x:240,y:82,rotation:0},{type:"starfish2",x:282,y:105,rotation:0},{type:"starfish2",x:208,y:105,rotation:0},{type:"starfish1",x:214,y:159,rotation:0},{type:"starfish1",x:273,y:159,rotation:0},{type:"greytube2",x:394,y:90,rotation:0},{type:"greytube3",x:420,y:117,rotation:0},{type:"greytube4",x:418,y:166,rotation:0},{type:"bs6",x:380,y:113,rotation:0},{type:"greytube1",x:344,y:90,rotation:0},{type:"bs4",x:399,y:150,rotation:0},{type:"starfish4",x:393,y:190,
rotation:0},{type:"starfish4",x:371,y:223,rotation:0},{type:"starfish4",x:341,y:246,rotation:0},{type:"bluetube3",x:355,y:136,rotation:0},{type:"bluetube4",x:353,y:184,rotation:0},{type:"bluetube5",x:328,y:210,rotation:0},{type:"bluetube6",x:283,y:209,rotation:0},{type:"bs5",x:336,y:180,rotation:0},{type:"starfish2",x:240,y:197,rotation:0},{type:"pinktube6",x:160,y:206,rotation:0},{type:"pinktube5",x:205,y:207,rotation:0},{type:"pinktube7",x:135,y:180,rotation:0},{type:"pinktube8",x:132,y:133,rotation:0},
{type:"bs5",x:160,y:180,rotation:0},{type:"greentube1",x:77,y:88,rotation:0},{type:"greentube2",x:126,y:88,rotation:0},{type:"greentube7",x:53,y:162,rotation:0},{type:"greentube8",x:51,y:114,rotation:0},{type:"bs6",x:89,y:113,rotation:0},{type:"bs4",x:89,y:150,rotation:0},{type:"starfish4",x:95,y:190,rotation:0},{type:"starfish4",x:118,y:223,rotation:0},{type:"starfish4",x:148,y:246,rotation:0},{type:"whatever",x:118,y:51,rotation:0},{type:"whatever",x:350,y:51,rotation:0},{type:"whatever",x:65,y:215,
rotation:0},{type:"whatever",x:408,y:215,rotation:0}],joints:[]},{objects:[{type:"octopus2",x:221,y:136,rotation:0},{type:"greentube6",x:357,y:67,rotation:0},{type:"octopus2",x:259,y:136,rotation:0},{type:"pinktube6",x:298,y:169,rotation:0},{type:"greentube2",x:345,y:185,rotation:0},{type:"circle3",x:290,y:193,rotation:0},{type:"pinktube5",x:185,y:168,rotation:0},{type:"greentube1",x:138,y:182,rotation:0},{type:"circle3",x:189,y:193,rotation:0},{type:"octopus2",x:186,y:110,rotation:0},{type:"octopus2",
x:144,y:88,rotation:0},{type:"octopus2",x:299,y:110,rotation:0},{type:"octopus2",x:340,y:88,rotation:0},{type:"octopus2",x:361,y:134,rotation:0},{type:"octopus2",x:397,y:110,rotation:0},{type:"octopus2",x:409,y:162,rotation:0},{type:"pinktube2",x:404,y:83,rotation:0},{type:"starfish7",x:332,y:138,rotation:0},{type:"starfish7",x:379,y:174,rotation:0},{type:"circle9",x:410,y:215,rotation:0},{type:"circle3",x:404,y:239,rotation:0},{type:"starfish7",x:148,y:138,rotation:0},{type:"octopus2",x:115,y:134,
rotation:0},{type:"octopus2",x:90,y:110,rotation:0},{type:"octopus2",x:69,y:153,rotation:0},{type:"starfish7",x:101,y:178,rotation:0},{type:"circle9",x:87,y:213,rotation:0},{type:"circle3",x:86,y:239,rotation:0},{type:"greentube5",x:125,y:68,rotation:0},{type:"pinktube1",x:78,y:83,rotation:0}],joints:[]},{objects:[{type:"octopus1",x:377,y:84,rotation:0},{type:"starfish2",x:240,y:148,rotation:0},{type:"starfish2",x:307,y:149,rotation:0},{type:"starfish2",x:378,y:149,rotation:0},{type:"starfish2",x:408,
y:121,rotation:0},{type:"starfish2",x:345,y:121,rotation:0},{type:"starfish2",x:282,y:121,rotation:0},{type:"starfish2",x:295,y:191,rotation:0},{type:"circle2",x:272,y:177,rotation:0},{type:"circle2",x:320,y:121,rotation:0},{type:"circle2",x:413,y:93,rotation:0},{type:"octopus5",x:341,y:171,rotation:0},{type:"octopus5",x:406,y:171,rotation:0},{type:"circle2",x:423,y:200,rotation:0},{type:"starfish3",x:382,y:198,rotation:0},{type:"starfish3",x:350,y:212,rotation:0},{type:"starfish3",x:315,y:222,rotation:0},
{type:"starfish3",x:278,y:222,rotation:0},{type:"starfish2",x:203,y:121,rotation:0},{type:"starfish2",x:178,y:149,rotation:0},{type:"starfish2",x:122,y:149,rotation:0},{type:"starfish2",x:157,y:121,rotation:0},{type:"starfish2",x:96,y:121,rotation:0},{type:"starfish2",x:70,y:149,rotation:0},{type:"starfish2",x:186,y:191,rotation:0},{type:"circle2",x:207,y:177,rotation:0},{type:"octopus5",x:150,y:171,rotation:0},{type:"octopus5",x:96,y:171,rotation:0},{type:"octopus1",x:112,y:84,rotation:0},{type:"circle2",
x:72,y:93,rotation:0},{type:"circle2",x:82,y:200,rotation:0},{type:"starfish3",x:237,y:222,rotation:0},{type:"starfish3",x:197,y:220,rotation:0},{type:"starfish3",x:153,y:214,rotation:0},{type:"starfish3",x:123,y:197,rotation:0},{type:"circle2",x:126,y:121,rotation:0},{type:"circle2",x:124,y:229,rotation:0},{type:"circle2",x:382,y:231,rotation:0}],joints:[]},{objects:[{type:"circle10",x:93,y:99,rotation:0},{type:"circle10",x:72,y:149,rotation:0},{type:"jellyfish2",x:240,y:126,rotation:0},{type:"jellyfish2",
x:196,y:126,rotation:0},{type:"jellyfish2",x:154,y:126,rotation:0},{type:"jellyfish2",x:112,y:126,rotation:0},{type:"jellyfish2",x:283,y:126,rotation:0},{type:"jellyfish2",x:324,y:126,rotation:0},{type:"jellyfish2",x:365,y:126,rotation:0},{type:"starfish7",x:221,y:152,rotation:0},{type:"starfish7",x:182,y:152,rotation:0},{type:"starfish7",x:141,y:152,rotation:0},{type:"starfish7",x:102,y:152,rotation:0},{type:"jellyfish4",x:240,y:177,rotation:0},{type:"jellyfish4",x:196,y:177,rotation:0},{type:"jellyfish4",
x:154,y:177,rotation:0},{type:"jellyfish4",x:112,y:177,rotation:0},{type:"jellyfish4",x:76,y:177,rotation:0},{type:"circle1",x:218,y:200,rotation:0},{type:"circle1",x:176,y:200,rotation:0},{type:"circle1",x:132,y:200,rotation:0},{type:"circle1",x:91,y:200,rotation:0},{type:"octopus2",x:238,y:231,rotation:0},{type:"octopus2",x:196,y:231,rotation:0},{type:"octopus2",x:156,y:231,rotation:0},{type:"octopus2",x:118,y:231,rotation:0},{type:"octopus2",x:76,y:231,rotation:0},{type:"starfish2",x:216,y:96,
rotation:0},{type:"starfish2",x:177,y:96,rotation:0},{type:"starfish2",x:136,y:96,rotation:0},{type:"starfish2",x:262,y:96,rotation:0},{type:"starfish2",x:304,y:96,rotation:0},{type:"starfish2",x:344,y:96,rotation:0},{type:"starfish7",x:259,y:152,rotation:0},{type:"starfish7",x:299,y:152,rotation:0},{type:"starfish7",x:339,y:152,rotation:0},{type:"starfish7",x:374,y:152,rotation:0},{type:"jellyfish4",x:281,y:177,rotation:0},{type:"jellyfish4",x:323,y:177,rotation:0},{type:"jellyfish4",x:358,y:177,
rotation:0},{type:"jellyfish4",x:398,y:177,rotation:0},{type:"circle1",x:261,y:200,rotation:0},{type:"circle1",x:303,y:200,rotation:0},{type:"circle1",x:346,y:200,rotation:0},{type:"circle1",x:391,y:200,rotation:0},{type:"octopus2",x:274,y:231,rotation:0},{type:"octopus2",x:312,y:231,rotation:0},{type:"octopus2",x:355,y:231,rotation:0},{type:"octopus2",x:393,y:231,rotation:0},{type:"circle10",x:404,y:149,rotation:0},{type:"circle10",x:387,y:102,rotation:0}],joints:[]},{objects:[{type:"octopus6",x:349,
y:67,rotation:0},{type:"circle7",x:240,y:146,rotation:0},{type:"starfish6",x:240,y:191,rotation:0},{type:"starfish6",x:240,y:236,rotation:0},{type:"starfish6",x:268,y:224,rotation:0},{type:"starfish6",x:293,y:210,rotation:0},{type:"starfish6",x:352,y:210,rotation:0},{type:"octopus4",x:319,y:200,rotation:0},{type:"octopus6",x:386,y:214,rotation:0},{type:"pinktube3",x:401,y:127,rotation:0},{type:"pinktube4",x:400,y:174,rotation:0},{type:"greytube3",x:348,y:122,rotation:0},{type:"greytube4",x:346,y:170,
rotation:0},{type:"circle7",x:362,y:248,rotation:0},{type:"octopus4",x:405,y:89,rotation:0},{type:"bs3",x:379,y:136,rotation:0},{type:"starfish3",x:374,y:92,rotation:0},{type:"starfish5",x:325,y:90,rotation:0},{type:"bs1",x:316,y:138,rotation:0},{type:"greytube7",x:141,y:165,rotation:0},{type:"greytube8",x:139,y:118,rotation:0},{type:"starfish6",x:215,y:224,rotation:0},{type:"starfish6",x:190,y:210,rotation:0},{type:"starfish6",x:136,y:211,rotation:0},{type:"starfish6",x:65,y:238,rotation:0},{type:"octopus4",
x:162,y:200,rotation:0},{type:"octopus6",x:90,y:214,rotation:0},{type:"pinktube7",x:88,y:173,rotation:0},{type:"pinktube8",x:85,y:126,rotation:0},{type:"bs3",x:107,y:139,rotation:0},{type:"bs1",x:166,y:138,rotation:0},{type:"starfish5",x:167,y:90,rotation:0},{type:"starfish3",x:119,y:84,rotation:0},{type:"octopus6",x:143,y:67,rotation:0},{type:"octopus4",x:71,y:92,rotation:0},{type:"circle7",x:116,y:248,rotation:0}],joints:[]},{objects:[{type:"starfish8",x:240,y:91,rotation:0},{type:"starfish8",x:254,
y:70,rotation:0},{type:"starfish8",x:224,y:66,rotation:0},{type:"starfish8",x:194,y:60,rotation:0},{type:"starfish8",x:166,y:54,rotation:0},{type:"starfish8",x:135,y:52,rotation:0},{type:"starfish8",x:107,y:62,rotation:0},{type:"starfish8",x:89,y:85,rotation:0},{type:"starfish8",x:78,y:113,rotation:0},{type:"starfish8",x:78,y:139,rotation:0},{type:"starfish8",x:94,y:164,rotation:0},{type:"starfish8",x:116,y:186,rotation:0},{type:"starfish8",x:138,y:206,rotation:0},{type:"starfish8",x:165,y:217,rotation:0},
{type:"starfish8",x:190,y:230,rotation:0},{type:"starfish8",x:216,y:238,rotation:0},{type:"starfish8",x:247,y:238,rotation:0},{type:"starfish8",x:276,y:231,rotation:0},{type:"starfish8",x:305,y:224,rotation:0},{type:"starfish8",x:326,y:206,rotation:0},{type:"starfish8",x:340,y:183,rotation:0},{type:"starfish8",x:349,y:156,rotation:0},{type:"starfish8",x:346,y:126,rotation:0},{type:"starfish8",x:334,y:99,rotation:0},{type:"starfish8",x:336,y:71,rotation:0},{type:"starfish8",x:361,y:62,rotation:0},
{type:"starfish8",x:390,y:62,rotation:0},{type:"starfish8",x:277,y:86,rotation:0},{type:"starfish8",x:290,y:108,rotation:0},{type:"starfish8",x:290,y:132,rotation:0},{type:"starfish8",x:279,y:157,rotation:0},{type:"starfish8",x:256,y:171,rotation:0},{type:"starfish8",x:229,y:166,rotation:0},{type:"starfish8",x:209,y:147,rotation:0},{type:"starfish8",x:198,y:119,rotation:0},{type:"starfish8",x:213,y:97,rotation:0},{type:"starfish8",x:411,y:81,rotation:0},{type:"starfish8",x:424,y:105,rotation:0},{type:"starfish8",
x:423,y:131,rotation:0},{type:"starfish8",x:423,y:156,rotation:0},{type:"starfish8",x:422,y:181,rotation:0},{type:"starfish8",x:411,y:204,rotation:0},{type:"starfish8",x:395,y:223,rotation:0},{type:"starfish8",x:372,y:236,rotation:0},{type:"starfish8",x:346,y:230,rotation:0},{type:"multipearl",x:162,y:108,rotation:0},{type:"whatever",x:132,y:88,rotation:0},{type:"whatever",x:113,y:124,rotation:0},{type:"whatever",x:151,y:158,rotation:0},{type:"whatever",x:190,y:185,rotation:0},{type:"whatever",x:245,
y:127,rotation:0},{type:"whatever",x:304,y:185,rotation:0},{type:"whatever",x:376,y:99,rotation:0},{type:"whatever",x:389,y:141,rotation:0},{type:"whatever",x:382,y:185,rotation:0},{type:"whatever",x:105,y:233,rotation:0},{type:"whatever",x:63,y:214,rotation:0}],joints:[]},{objects:[{type:"bs2",x:176,y:111,rotation:0},{type:"pinktube1",x:216,y:235,rotation:0},{type:"pinktube2",x:265,y:235,rotation:0},{type:"circle9",x:139,y:152,rotation:0},{type:"starfish7",x:214,y:167,rotation:0},{type:"starfish7",
x:270,y:167,rotation:0},{type:"starfish7",x:266,y:113,rotation:0},{type:"starfish7",x:214,y:113,rotation:0},{type:"starfish5",x:240,y:143,rotation:0},{type:"bs2",x:185,y:137,rotation:0},{type:"bs2",x:186,y:169,rotation:0},{type:"bs2",x:143,y:95,rotation:0},{type:"bs2",x:109,y:102,rotation:0},{type:"bs2",x:93,y:135,rotation:0},{type:"bs2",x:99,y:166,rotation:0},{type:"bs2",x:124,y:187,rotation:0},{type:"bs2",x:154,y:206,rotation:0},{type:"bs2",x:187,y:202,rotation:0},{type:"starfish5",x:114,y:68,rotation:0},
{type:"starfish5",x:80,y:86,rotation:0},{type:"starfish5",x:69,y:120,rotation:0},{type:"starfish5",x:73,y:168,rotation:0},{type:"starfish5",x:99,y:198,rotation:0},{type:"starfish5",x:122,y:220,rotation:0},{type:"pinktube3",x:98,y:236,rotation:0},{type:"pinktube2",x:72,y:209,rotation:0},{type:"bs2",x:307,y:137,rotation:0},{type:"bs2",x:300,y:169,rotation:0},{type:"bs2",x:297,y:201,rotation:0},{type:"bs2",x:325,y:206,rotation:0},{type:"bs2",x:350,y:189,rotation:0},{type:"bs2",x:377,y:166,rotation:0},
{type:"bs2",x:387,y:133,rotation:0},{type:"bs2",x:375,y:102,rotation:0},{type:"bs2",x:345,y:95,rotation:0},{type:"bs2",x:320,y:111,rotation:0},{type:"circle9",x:348,y:152,rotation:0},{type:"starfish5",x:384,y:68,rotation:0},{type:"starfish5",x:412,y:86,rotation:0},{type:"starfish5",x:420,y:120,rotation:0},{type:"starfish5",x:409,y:159,rotation:0},{type:"starfish5",x:378,y:195,rotation:0},{type:"starfish5",x:359,y:220,rotation:0},{type:"pinktube8",x:380,y:236,rotation:0},{type:"pinktube1",x:406,y:210,
rotation:0}],joints:[]},{objects:[{type:"octopus2",x:189,y:134,rotation:0},{type:"bs5",x:240,y:113,rotation:0},{type:"bs5",x:240,y:169,rotation:0},{type:"bs5",x:222,y:141,rotation:0},{type:"bs5",x:260,y:141,rotation:0},{type:"bs6",x:211,y:100,rotation:0},{type:"bs6",x:272,y:100,rotation:0},{type:"octopus2",x:161,y:102,rotation:0},{type:"octopus2",x:133,y:84,rotation:0},{type:"octopus2",x:104,y:78,rotation:0},{type:"octopus2",x:74,y:89,rotation:0},{type:"octopus2",x:66,y:124,rotation:0},{type:"bs3",
x:78,y:159,rotation:0},{type:"bs3",x:104,y:181,rotation:0},{type:"bs3",x:133,y:197,rotation:0},{type:"bs3",x:191,y:173,rotation:0},{type:"bs3",x:166,y:201,rotation:0},{type:"octopus2",x:294,y:134,rotation:0},{type:"octopus2",x:309,y:102,rotation:0},{type:"octopus2",x:338,y:84,rotation:0},{type:"octopus2",x:367,y:78,rotation:0},{type:"octopus2",x:398,y:89,rotation:0},{type:"octopus2",x:412,y:124,rotation:0},{type:"bs3",x:404,y:158,rotation:0},{type:"bs3",x:376,y:181,rotation:0},{type:"bs3",x:344,y:197,
rotation:0},{type:"bs3",x:311,y:201,rotation:0},{type:"bs3",x:289,y:173,rotation:0},{type:"atwill",x:117,y:130,rotation:0},{type:"atwill",x:365,y:130,rotation:0},{type:"atwill",x:76,y:214,rotation:0},{type:"atwill",x:408,y:214,rotation:0},{type:"whatever",x:185,y:236,rotation:0},{type:"whatever",x:291,y:236,rotation:0}],joints:[]},{objects:[{type:"octopus3",x:217,y:161,rotation:0},{type:"octopus3",x:258,y:161,rotation:0},{type:"bs4",x:308,y:160,rotation:0},{type:"bs4",x:341,y:160,rotation:0},{type:"bs4",
x:371,y:160,rotation:0},{type:"bs4",x:402,y:160,rotation:0},{type:"bs4",x:160,y:160,rotation:0},{type:"bs4",x:130,y:160,rotation:0},{type:"bs4",x:100,y:160,rotation:0},{type:"bs4",x:70,y:160,rotation:0},{type:"bs2",x:73,y:120,rotation:0},{type:"bs2",x:71,y:198,rotation:0},{type:"bs2",x:402,y:120,rotation:0},{type:"bs2",x:401,y:203,rotation:0},{type:"bs2",x:360,y:127,rotation:0},{type:"bs2",x:359,y:195,rotation:0},{type:"bs2",x:308,y:96,rotation:0},{type:"bs2",x:290,y:206,rotation:0},{type:"bs2",x:316,
y:233,rotation:0},{type:"circle6",x:289,y:180,rotation:0},{type:"circle1",x:317,y:196,rotation:0},{type:"circle1",x:349,y:218,rotation:0},{type:"circle1",x:378,y:236,rotation:0},{type:"circle1",x:399,y:256,rotation:0},{type:"circle6",x:258,y:198,rotation:0},{type:"circle1",x:274,y:229,rotation:0},{type:"circle1",x:293,y:255,rotation:0},{type:"circle6",x:292,y:141,rotation:0},{type:"circle1",x:317,y:124,rotation:0},{type:"circle1",x:349,y:104,rotation:0},{type:"circle1",x:377,y:83,rotation:0},{type:"circle1",
x:403,y:65,rotation:0},{type:"circle1",x:280,y:96,rotation:0},{type:"circle1",x:308,y:65,rotation:0},{type:"circle6",x:240,y:128,rotation:0},{type:"circle6",x:221,y:198,rotation:0},{type:"circle1",x:197,y:229,rotation:0},{type:"circle1",x:177,y:255,rotation:0},{type:"bs2",x:181,y:206,rotation:0},{type:"bs2",x:150,y:233,rotation:0},{type:"circle6",x:185,y:176,rotation:0},{type:"circle1",x:159,y:193,rotation:0},{type:"circle1",x:134,y:212,rotation:0},{type:"circle1",x:110,y:232,rotation:0},{type:"circle1",
x:85,y:255,rotation:0},{type:"bs2",x:108,y:191,rotation:0},{type:"bs2",x:110,y:127,rotation:0},{type:"bs2",x:175,y:98,rotation:0},{type:"circle6",x:190,y:141,rotation:0},{type:"circle1",x:157,y:126,rotation:0},{type:"circle1",x:127,y:107,rotation:0},{type:"circle1",x:98,y:87,rotation:0},{type:"circle1",x:75,y:68,rotation:0},{type:"circle1",x:205,y:87,rotation:0},{type:"circle1",x:172,y:65,rotation:0}],joints:[]},{objects:[{type:"jellyfish3",x:240,y:93,rotation:0},{type:"jellyfish3",x:240,y:200,rotation:0},
{type:"jellyfish3",x:207,y:129,rotation:0},{type:"jellyfish3",x:209,y:168,rotation:0},{type:"jellyfish3",x:270,y:129,rotation:0},{type:"jellyfish3",x:272,y:168,rotation:0},{type:"pinktube7",x:159,y:239,rotation:0},{type:"greytube8",x:156,y:191,rotation:0},{type:"greentube4",x:175,y:159,rotation:0},{type:"pinktube3",x:177,y:112,rotation:0},{type:"greytube2",x:150,y:85,rotation:0},{type:"greentube1",x:101,y:84,rotation:0},{type:"pinktube8",x:74,y:110,rotation:0},{type:"greytube7",x:76,y:158,rotation:0},
{type:"greentube3",x:96,y:191,rotation:0},{type:"pinktube4",x:94,y:238,rotation:0},{type:"pinktube8",x:308,y:107,rotation:0},{type:"greytube7",x:311,y:153,rotation:0},{type:"greentube3",x:332,y:186,rotation:0},{type:"pinktube4",x:331,y:233,rotation:0},{type:"greentube1",x:334,y:81,rotation:0},{type:"greytube2",x:381,y:81,rotation:0},{type:"pinktube3",x:408,y:108,rotation:0},{type:"greentube4",x:406,y:155,rotation:0},{type:"greytube8",x:387,y:187,rotation:0},{type:"pinktube7",x:389,y:234,rotation:0},
{type:"starfish1",x:414,y:72,rotation:0},{type:"starfish1",x:299,y:70,rotation:0},{type:"starfish1",x:282,y:103,rotation:0},{type:"starfish2",x:356,y:100,rotation:0},{type:"starfish2",x:356,y:162,rotation:0},{type:"bs6",x:333,y:130,rotation:0},{type:"bs6",x:382,y:131,rotation:0},{type:"starfish1",x:417,y:189,rotation:0},{type:"starfish1",x:415,y:216,rotation:0},{type:"starfish1",x:66,y:76,rotation:0},{type:"starfish1",x:180,y:70,rotation:0},{type:"starfish1",x:199,y:103,rotation:0},{type:"starfish1",
x:68,y:185,rotation:0},{type:"starfish1",x:79,y:212,rotation:0},{type:"starfish2",x:124,y:107,rotation:0},{type:"starfish2",x:124,y:160,rotation:0},{type:"bs6",x:95,y:132,rotation:0},{type:"bs6",x:153,y:132,rotation:0},{type:"whatever",x:240,y:148,rotation:0},{type:"whatever",x:184,y:212,rotation:0},{type:"whatever",x:124,y:248,rotation:0},{type:"whatever",x:298,y:212,rotation:0},{type:"whatever",x:359,y:247,rotation:0}],joints:[]},{objects:[{type:"starfish1",x:240,y:93,rotation:0},{type:"starfish1",
x:240,y:145,rotation:0},{type:"starfish1",x:240,y:197,rotation:0},{type:"greentube8",x:98,y:129,rotation:0},{type:"greentube7",x:101,y:176,rotation:0},{type:"octopus1",x:183,y:145,rotation:0},{type:"bs4",x:152,y:105,rotation:0},{type:"bs4",x:123,y:147,rotation:0},{type:"bs4",x:160,y:188,rotation:0},{type:"starfish1",x:129,y:195,rotation:0},{type:"octopus1",x:285,y:145,rotation:0},{type:"bs4",x:305,y:105,rotation:0},{type:"bs4",x:338,y:147,rotation:0},{type:"bs4",x:310,y:188,rotation:0},{type:"starfish1",
x:350,y:195,rotation:0},{type:"greentube4",x:382,y:175,rotation:0},{type:"greentube3",x:384,y:128,rotation:0},{type:"jellyfish4",x:98,y:48,rotation:0},{type:"jellyfish4",x:76,y:82,rotation:0},{type:"jellyfish4",x:66,y:126,rotation:0},{type:"jellyfish4",x:69,y:175,rotation:0},{type:"jellyfish4",x:94,y:215,rotation:0},{type:"jellyfish4",x:124,y:246,rotation:0},{type:"circle6",x:122,y:222,rotation:0},{type:"circle6",x:89,y:248,rotation:0},{type:"multipearl",x:117,y:82,rotation:0},{type:"multipearl",
x:350,y:82,rotation:0},{type:"jellyfish4",x:381,y:48,rotation:0},{type:"jellyfish4",x:402,y:82,rotation:0},{type:"jellyfish4",x:414,y:127,rotation:0},{type:"jellyfish4",x:414,y:174,rotation:0},{type:"jellyfish4",x:401,y:215,rotation:0},{type:"jellyfish4",x:373,y:246,rotation:0},{type:"circle6",x:363,y:222,rotation:0},{type:"circle6",x:410,y:248,rotation:0}],joints:[]},{objects:[{type:"bs3",x:240,y:88,rotation:0},{type:"circle8",x:240,y:150,rotation:0},{type:"bs3",x:214,y:105,rotation:0},{type:"bs3",
x:191,y:124,rotation:0},{type:"bs3",x:174,y:150,rotation:0},{type:"bs3",x:191,y:173,rotation:0},{type:"bs3",x:215,y:193,rotation:0},{type:"bs3",x:240,y:213,rotation:0},{type:"bs3",x:303,y:150,rotation:0},{type:"bs3",x:264,y:105,rotation:0},{type:"bs3",x:286,y:124,rotation:0},{type:"bs3",x:286,y:173,rotation:0},{type:"bs3",x:264,y:193,rotation:0},{type:"bs5",x:161,y:120,rotation:0},{type:"bs5",x:131,y:109,rotation:0},{type:"bs5",x:102,y:98,rotation:0},{type:"bs2",x:155,y:86,rotation:0},{type:"bs2",
x:122,y:73,rotation:0},{type:"bs5",x:321,y:120,rotation:0},{type:"bs5",x:349,y:109,rotation:0},{type:"bs5",x:376,y:98,rotation:0},{type:"bs2",x:343,y:73,rotation:0},{type:"bs2",x:311,y:86,rotation:0},{type:"bs4",x:155,y:181,rotation:0},{type:"bs4",x:127,y:199,rotation:0},{type:"bs4",x:101,y:223,rotation:0},{type:"bs2",x:157,y:218,rotation:0},{type:"bs2",x:129,y:239,rotation:0},{type:"bs4",x:321,y:181,rotation:0},{type:"bs4",x:349,y:199,rotation:0},{type:"bs4",x:380,y:223,rotation:0},{type:"bs2",x:321,
y:218,rotation:0},{type:"bs2",x:349,y:239,rotation:0},{type:"circle8",x:382,y:150,rotation:0},{type:"circle8",x:94,y:150,rotation:0}],joints:[]},{objects:[{type:"greytube3",x:167,y:179,rotation:0},{type:"greytube6",x:95,y:252,rotation:0},{type:"greytube7",x:69,y:227,rotation:0},{type:"greytube8",x:67,y:179,rotation:0},{type:"greytube1",x:92,y:152,rotation:0},{type:"greytube2",x:141,y:152,rotation:0},{type:"greytube4",x:165,y:227,rotation:0},{type:"greytube5",x:140,y:253,rotation:0},{type:"circle3",
x:187,y:239,rotation:0},{type:"circle3",x:215,y:239,rotation:0},{type:"circle3",x:245,y:239,rotation:0},{type:"circle3",x:275,y:239,rotation:0},{type:"circle3",x:307,y:239,rotation:0},{type:"circle3",x:337,y:239,rotation:0},{type:"circle3",x:372,y:239,rotation:0},{type:"circle3",x:190,y:171,rotation:0},{type:"circle3",x:224,y:166,rotation:0},{type:"circle3",x:256,y:161,rotation:0},{type:"circle3",x:288,y:157,rotation:0},{type:"circle3",x:328,y:152,rotation:0},{type:"circle3",x:363,y:149,rotation:0},
{type:"circle3",x:392,y:125,rotation:0},{type:"jellyfish2",x:206,y:143,rotation:0},{type:"jellyfish2",x:242,y:138,rotation:0},{type:"jellyfish2",x:275,y:130,rotation:0},{type:"jellyfish2",x:305,y:124,rotation:0},{type:"jellyfish2",x:334,y:117,rotation:0},{type:"jellyfish2",x:366,y:106,rotation:0},{type:"jellyfish2",x:173,y:150,rotation:0},{type:"jellyfish2",x:400,y:92,rotation:0},{type:"jellyfish2",x:198,y:206,rotation:0},{type:"jellyfish2",x:222,y:206,rotation:0},{type:"jellyfish2",x:252,y:206,rotation:0},
{type:"jellyfish2",x:279,y:206,rotation:0},{type:"jellyfish2",x:308,y:206,rotation:0},{type:"jellyfish2",x:340,y:206,rotation:0},{type:"jellyfish2",x:367,y:206,rotation:0},{type:"circle3",x:164,y:132,rotation:0},{type:"circle3",x:203,y:126,rotation:0},{type:"circle3",x:242,y:118,rotation:0},{type:"circle3",x:277,y:109,rotation:0},{type:"circle3",x:311,y:100,rotation:0},{type:"circle3",x:338,y:89,rotation:0},{type:"circle3",x:368,y:79,rotation:0},{type:"jellyfish2",x:141,y:107,rotation:0},{type:"jellyfish2",
x:166,y:100,rotation:0},{type:"jellyfish2",x:198,y:89,rotation:0},{type:"jellyfish2",x:226,y:79,rotation:0},{type:"jellyfish2",x:257,y:69,rotation:0},{type:"jellyfish2",x:288,y:59,rotation:0},{type:"circle3",x:119,y:119,rotation:0},{type:"circle3",x:127,y:94,rotation:0},{type:"circle3",x:135,y:67,rotation:0},{type:"jellyfish2",x:97,y:98,rotation:0},{type:"jellyfish2",x:98,y:70,rotation:0},{type:"jellyfish2",x:93,y:124,rotation:0},{type:"jellyfish2",x:69,y:141,rotation:0},{type:"circle3",x:70,y:119,
rotation:0},{type:"circle3",x:69,y:95,rotation:0},{type:"starfish8",x:115,y:175,rotation:0},{type:"starfish8",x:115,y:226,rotation:0},{type:"octopus2",x:87,y:201,rotation:0},{type:"octopus2",x:147,y:201,rotation:0}],joints:[]},{objects:[{type:"circle10",x:240,y:132,rotation:0},{type:"circle10",x:240,y:213,rotation:0},{type:"starfish1",x:278,y:108,rotation:0},{type:"starfish1",x:303,y:135,rotation:0},{type:"starfish1",x:333,y:108,rotation:0},{type:"starfish1",x:363,y:135,rotation:0},{type:"starfish1",
x:386,y:108,rotation:0},{type:"starfish1",x:417,y:135,rotation:0},{type:"starfish1",x:278,y:162,rotation:0},{type:"starfish1",x:333,y:162,rotation:0},{type:"starfish1",x:388,y:162,rotation:0},{type:"starfish1",x:303,y:188,rotation:0},{type:"starfish1",x:360,y:188,rotation:0},{type:"starfish1",x:412,y:188,rotation:0},{type:"starfish1",x:278,y:214,rotation:0},{type:"starfish1",x:333,y:214,rotation:0},{type:"starfish1",x:385,y:215,rotation:0},{type:"starfish1",x:368,y:242,rotation:0},{type:"starfish1",
x:316,y:242,rotation:0},{type:"starfish1",x:267,y:242,rotation:0},{type:"jellyfish2",x:306,y:108,rotation:0},{type:"jellyfish2",x:359,y:108,rotation:0},{type:"jellyfish2",x:413,y:108,rotation:0},{type:"jellyfish2",x:390,y:135,rotation:0},{type:"jellyfish2",x:334,y:135,rotation:0},{type:"jellyfish2",x:307,y:163,rotation:0},{type:"jellyfish2",x:361,y:162,rotation:0},{type:"jellyfish2",x:416,y:162,rotation:0},{type:"jellyfish2",x:388,y:188,rotation:0},{type:"jellyfish2",x:333,y:188,rotation:0},{type:"jellyfish2",
x:307,y:214,rotation:0},{type:"jellyfish2",x:360,y:214,rotation:0},{type:"jellyfish2",x:412,y:214,rotation:0},{type:"jellyfish2",x:393,y:242,rotation:0},{type:"jellyfish2",x:342,y:242,rotation:0},{type:"jellyfish2",x:292,y:242,rotation:0},{type:"circle10",x:420,y:242,rotation:0},{type:"circle10",x:394,y:69,rotation:0},{type:"starfish1",x:187,y:108,rotation:0},{type:"starfish1",x:168,y:135,rotation:0},{type:"starfish1",x:136,y:108,rotation:0},{type:"starfish1",x:117,y:135,rotation:0},{type:"starfish1",
x:86,y:108,rotation:0},{type:"starfish1",x:193,y:162,rotation:0},{type:"starfish1",x:144,y:162,rotation:0},{type:"starfish1",x:91,y:162,rotation:0},{type:"starfish1",x:161,y:188,rotation:0},{type:"starfish1",x:111,y:188,rotation:0},{type:"starfish1",x:187,y:214,rotation:0},{type:"starfish1",x:136,y:214,rotation:0},{type:"starfish1",x:86,y:214,rotation:0},{type:"starfish1",x:111,y:242,rotation:0},{type:"starfish1",x:160,y:242,rotation:0},{type:"starfish1",x:209,y:242,rotation:0},{type:"jellyfish2",
x:162,y:108,rotation:0},{type:"jellyfish2",x:111,y:108,rotation:0},{type:"jellyfish2",x:143,y:135,rotation:0},{type:"jellyfish2",x:93,y:135,rotation:0},{type:"starfish1",x:65,y:135,rotation:0},{type:"jellyfish2",x:60,y:108,rotation:0},{type:"jellyfish2",x:60,y:162,rotation:0},{type:"jellyfish2",x:118,y:162,rotation:0},{type:"jellyfish2",x:168,y:162,rotation:0},{type:"jellyfish2",x:136,y:188,rotation:0},{type:"jellyfish2",x:84,y:188,rotation:0},{type:"starfish1",x:61,y:188,rotation:0},{type:"jellyfish2",
x:61,y:214,rotation:0},{type:"jellyfish2",x:111,y:214,rotation:0},{type:"jellyfish2",x:161,y:214,rotation:0},{type:"jellyfish2",x:185,y:242,rotation:0},{type:"jellyfish2",x:135,y:242,rotation:0},{type:"jellyfish2",x:86,y:242,rotation:0},{type:"circle10",x:88,y:69,rotation:0},{type:"circle10",x:56,y:242,rotation:0}],joints:[]},{objects:[{type:"pinktube2",x:269,y:180,rotation:0},{type:"pinktube1",x:220,y:180,rotation:0},{type:"bs2",x:240,y:200,rotation:0},{type:"bs2",x:261,y:225,rotation:0},{type:"bs2",
x:218,y:225,rotation:0},{type:"pinktube3",x:296,y:207,rotation:0},{type:"pinktube8",x:195,y:206,rotation:0},{type:"octopus6",x:213,y:136,rotation:0},{type:"octopus6",x:182,y:156,rotation:0},{type:"octopus6",x:151,y:184,rotation:0},{type:"octopus6",x:118,y:213,rotation:0},{type:"octopus6",x:90,y:236,rotation:0},{type:"octopus6",x:290,y:136,rotation:0},{type:"octopus6",x:322,y:156,rotation:0},{type:"octopus6",x:349,y:184,rotation:0},{type:"octopus6",x:374,y:213,rotation:0},{type:"octopus6",x:404,y:236,
rotation:0},{type:"circle8",x:137,y:128,rotation:0},{type:"circle8",x:356,y:128,rotation:0},{type:"starfish6",x:183,y:97,rotation:0},{type:"starfish6",x:141,y:84,rotation:0},{type:"starfish6",x:108,y:92,rotation:0},{type:"starfish6",x:76,y:105,rotation:0},{type:"starfish6",x:80,y:145,rotation:0},{type:"starfish6",x:117,y:167,rotation:0},{type:"starfish6",x:89,y:200,rotation:0},{type:"circle6",x:90,y:176,rotation:0},{type:"circle8",x:152,y:246,rotation:0},{type:"starfish6",x:322,y:97,rotation:0},{type:"starfish6",
x:353,y:84,rotation:0},{type:"starfish6",x:389,y:92,rotation:0},{type:"starfish6",x:419,y:105,rotation:0},{type:"starfish6",x:406,y:145,rotation:0},{type:"starfish6",x:381,y:167,rotation:0},{type:"circle6",x:409,y:176,rotation:0},{type:"starfish6",x:406,y:200,rotation:0},{type:"circle8",x:343,y:246,rotation:0}],joints:[]},{objects:[{type:"greentube6",x:252,y:98,rotation:0},{type:"greentube2",x:300,y:114,rotation:0},{type:"greentube6",x:333,y:134,rotation:0},{type:"greentube2",x:381,y:151,rotation:0},
{type:"greentube3",x:408,y:178,rotation:0},{type:"greentube4",x:407,y:226,rotation:0},{type:"greentube5",x:381,y:251,rotation:0},{type:"greentube2",x:219,y:78,rotation:0},{type:"greentube1",x:170,y:77,rotation:0},{type:"greentube7",x:147,y:151,rotation:0},{type:"greentube8",x:144,y:103,rotation:0},{type:"greentube6",x:173,y:178,rotation:0},{type:"greentube2",x:221,y:193,rotation:0},{type:"greentube6",x:254,y:213,rotation:0},{type:"greentube2",x:302,y:229,rotation:0},{type:"greentube6",x:335,y:249,
rotation:0},{type:"shell6",x:197,y:102,rotation:0},{type:"shell6",x:219,y:101,rotation:0},{type:"shell6",x:237,y:112,rotation:0},{type:"shell6",x:231,y:154,rotation:0},{type:"shell6",x:181,y:122,rotation:0},{type:"shell6",x:186,y:146,rotation:0},{type:"shell6",x:207,y:156,rotation:0},{type:"shell6",x:241,y:134,rotation:0},{type:"multipearl",x:281,y:161,rotation:0},{type:"warp_hole",x:361,y:198,rotation:0},{type:"shell6",x:359,y:164,rotation:0},{type:"shell6",x:364,y:229,rotation:0},{type:"shell6",
x:325,y:197,rotation:0},{type:"shell6",x:393,y:197,rotation:0},{type:"warp_hole",x:116,y:215,rotation:0},{type:"shell2",x:92,y:185,rotation:0},{type:"shell2",x:118,y:177,rotation:0},{type:"shell2",x:142,y:190,rotation:0},{type:"shell2",x:152,y:218,rotation:0},{type:"shell2",x:140,y:243,rotation:0},{type:"shell2",x:112,y:249,rotation:0},{type:"shell2",x:87,y:232,rotation:0},{type:"shell2",x:82,y:209,rotation:0},{type:"circle5",x:67,y:162,rotation:0},{type:"circle5",x:80,y:133,rotation:0},{type:"circle5",
x:102,y:108,rotation:0},{type:"circle5",x:125,y:84,rotation:0},{type:"circle5",x:153,y:63,rotation:0},{type:"shell4",x:94,y:156,rotation:0},{type:"shell4",x:77,y:103,rotation:0},{type:"shell4",x:123,y:109,rotation:0},{type:"shell4",x:123,y:53,rotation:0},{type:"circle5",x:286,y:77,rotation:0},{type:"circle5",x:319,y:81,rotation:0},{type:"circle5",x:351,y:80,rotation:0},{type:"circle5",x:381,y:80,rotation:0},{type:"circle5",x:408,y:96,rotation:0},{type:"shell4",x:406,y:129,rotation:0},{type:"shell4",
x:376,y:115,rotation:0},{type:"shell4",x:373,y:54,rotation:0},{type:"shell4",x:335,y:95,rotation:0},{type:"shell4",x:300,y:55,rotation:0}],joints:[]},{objects:[{type:"shell1",x:241,y:150,rotation:0},{type:"starfish1",x:240,y:116,rotation:0},{type:"circle7",x:240,y:190,rotation:0},{type:"jellyfish2",x:202,y:135,rotation:0},{type:"jellyfish2",x:276,y:135,rotation:0},{type:"jellyfish2",x:276,y:173,rotation:0},{type:"jellyfish2",x:202,y:173,rotation:0},{type:"circle7",x:162,y:148,rotation:0},{type:"shell1",
x:161,y:105,rotation:0},{type:"starfish1",x:162,y:66,rotation:0},{type:"starfish1",x:161,y:188,rotation:0},{type:"jellyfish2",x:187,y:91,rotation:0},{type:"jellyfish2",x:138,y:91,rotation:0},{type:"starfish1",x:110,y:85,rotation:0},{type:"starfish1",x:110,y:122,rotation:0},{type:"jellyfish2",x:131,y:153,rotation:0},{type:"jellyfish2",x:88,y:154,rotation:0},{type:"shell1",x:110,y:174,rotation:0},{type:"circle7",x:110,y:214,rotation:0},{type:"starfish1",x:110,y:244,rotation:0},{type:"jellyfish2",x:136,
y:229,rotation:0},{type:"jellyfish2",x:86,y:229,rotation:0},{type:"warp_hole",x:82,y:187,rotation:0},{type:"circle7",x:81,y:78,rotation:0},{type:"jellyfish2",x:297,y:91,rotation:0},{type:"starfish1",x:324,y:66,rotation:0},{type:"jellyfish2",x:347,y:91,rotation:0},{type:"shell1",x:324,y:105,rotation:0},{type:"circle7",x:324,y:149,rotation:0},{type:"starfish1",x:313,y:187,rotation:0},{type:"warp_hole",x:347,y:187,rotation:0},{type:"shell1",x:383,y:174,rotation:0},{type:"jellyfish2",x:403,y:153,rotation:0},
{type:"jellyfish2",x:361,y:153,rotation:0},{type:"circle7",x:378,y:211,rotation:0},{type:"starfish1",x:378,y:244,rotation:0},{type:"jellyfish2",x:403,y:229,rotation:0},{type:"jellyfish2",x:348,y:230,rotation:0},{type:"starfish1",x:378,y:129,rotation:0},{type:"starfish1",x:378,y:85,rotation:0},{type:"circle7",x:408,y:78,rotation:0}],joints:[]},{objects:[{type:"circle3",x:133,y:261,rotation:0},{type:"circle3",x:364,y:262,rotation:0},{type:"greytube1",x:105,y:128,rotation:0},{type:"greytube3",x:180,
y:105,rotation:0},{type:"greytube2",x:155,y:128,rotation:0},{type:"greytube5",x:153,y:230,rotation:0},{type:"greytube7",x:82,y:202,rotation:0},{type:"greytube8",x:77,y:103,rotation:0},{type:"greytube6",x:109,y:228,rotation:0},{type:"greytube4",x:179,y:204,rotation:0},{type:"greytube1",x:103,y:76,rotation:0},{type:"greytube6",x:105,y:178,rotation:0},{type:"greytube5",x:151,y:180,rotation:0},{type:"greytube4",x:177,y:154,rotation:0},{type:"greytube7",x:78,y:152,rotation:0},{type:"greytube8",x:79,y:154,
rotation:0},{type:"greytube3",x:181,y:155,rotation:0},{type:"greytube2",x:154,y:77,rotation:0},{type:"greytube5",x:373,y:226,rotation:0},{type:"greytube6",x:328,y:225,rotation:0},{type:"greytube4",x:398,y:200,rotation:0},{type:"greytube7",x:302,y:199,rotation:0},{type:"greytube2",x:374,y:126,rotation:0},{type:"greytube1",x:325,y:126,rotation:0},{type:"greytube5",x:372,y:176,rotation:0},{type:"greytube4",x:398,y:151,rotation:0},{type:"greytube3",x:400,y:103,rotation:0},{type:"greytube2",x:374,y:76,
rotation:0},{type:"greytube1",x:323,y:76,rotation:0},{type:"greytube8",x:298,y:103,rotation:0},{type:"greytube7",x:300,y:149,rotation:0},{type:"greytube6",x:327,y:174,rotation:0},{type:"greytube3",x:400,y:153,rotation:0},{type:"greytube8",x:300,y:152,rotation:0},{type:"shell3",x:95,y:106,rotation:0},{type:"shell3",x:115,y:98,rotation:0},{type:"shell3",x:138,y:98,rotation:0},{type:"shell3",x:159,y:106,rotation:0},{type:"shell3",x:104,y:150,rotation:0},{type:"shell3",x:128,y:150,rotation:0},{type:"shell3",
x:153,y:150,rotation:0},{type:"shell3",x:342,y:98,rotation:0},{type:"shell3",x:364,y:98,rotation:0},{type:"shell3",x:384,y:105,rotation:0},{type:"shell3",x:321,y:106,rotation:0},{type:"shell3",x:359,y:150,rotation:0},{type:"shell3",x:381,y:150,rotation:0},{type:"shell3",x:336,y:150,rotation:0},{type:"shell3",x:321,y:196,rotation:0},{type:"shell3",x:343,y:202,rotation:0},{type:"shell3",x:364,y:203,rotation:0},{type:"shell3",x:385,y:196,rotation:0},{type:"shell3",x:98,y:193,rotation:0},{type:"shell3",
x:118,y:202,rotation:0},{type:"shell3",x:141,y:203,rotation:0},{type:"shell3",x:162,y:194,rotation:0},{type:"circle3",x:97,y:248,rotation:0},{type:"circle3",x:70,y:217,rotation:0},{type:"circle3",x:62,y:157,rotation:0},{type:"circle3",x:64,y:87,rotation:0},{type:"circle3",x:421,y:151,rotation:0},{type:"circle3",x:419,y:87,rotation:0},{type:"circle3",x:418,y:217,rotation:0},{type:"circle3",x:396,y:248,rotation:0},{type:"circle8",x:240,y:226,rotation:0},{type:"circle3",x:200,y:156,rotation:0},{type:"circle3",
x:228,y:156,rotation:0},{type:"circle3",x:257,y:156,rotation:0},{type:"circle3",x:285,y:156,rotation:0},{type:"circle3",x:273,y:186,rotation:0},{type:"circle3",x:242,y:186,rotation:0},{type:"circle3",x:211,y:186,rotation:0}],joints:[]},{objects:[{type:"circle2",x:256,y:172,rotation:0},{type:"circle2",x:224,y:172,rotation:0},{type:"jellyfish4",x:238,y:117,rotation:0},{type:"jellyfish4",x:202,y:189,rotation:0},{type:"jellyfish4",x:160,y:210,rotation:0},{type:"circle2",x:188,y:172,rotation:0},{type:"circle2",
x:159,y:172,rotation:0},{type:"jellyfish4",x:195,y:123,rotation:0},{type:"jellyfish4",x:159,y:101,rotation:0},{type:"shell6",x:162,y:142,rotation:0},{type:"octopus3",x:186,y:229,rotation:0},{type:"circle10",x:123,y:171,rotation:0},{type:"bs4",x:123,y:130,rotation:0},{type:"circle10",x:123,y:88,rotation:0},{type:"bs4",x:123,y:210,rotation:0},{type:"circle10",x:123,y:245,rotation:0},{type:"circle2",x:95,y:211,rotation:0},{type:"starfish6",x:85,y:228,rotation:0},{type:"shell6",x:85,y:253,rotation:0},
{type:"shell6",x:83,y:177,rotation:0},{type:"starfish6",x:85,y:146,rotation:0},{type:"circle2",x:97,y:119,rotation:0},{type:"shell6",x:86,y:95,rotation:0},{type:"jellyfish4",x:83,y:64,rotation:0},{type:"jellyfish4",x:281,y:189,rotation:0},{type:"octopus3",x:299,y:229,rotation:0},{type:"jellyfish4",x:337,y:210,rotation:0},{type:"bs4",x:368,y:210,rotation:0},{type:"circle10",x:363,y:245,rotation:0},{type:"circle10",x:363,y:170,rotation:0},{type:"circle2",x:329,y:172,rotation:0},{type:"circle2",x:298,
y:172,rotation:0},{type:"shell6",x:326,y:142,rotation:0},{type:"jellyfish4",x:291,y:123,rotation:0},{type:"jellyfish4",x:326,y:101,rotation:0},{type:"bs4",x:369,y:130,rotation:0},{type:"circle10",x:363,y:88,rotation:0},{type:"shell6",x:406,y:253,rotation:0},{type:"starfish6",x:405,y:228,rotation:0},{type:"circle2",x:393,y:211,rotation:0},{type:"shell6",x:404,y:177,rotation:0},{type:"starfish6",x:403,y:146,rotation:0},{type:"circle2",x:390,y:121,rotation:0},{type:"shell6",x:404,y:93,rotation:0},{type:"jellyfish4",
x:402,y:61,rotation:0}],joints:[]},{objects:[{type:"starfish1",x:240,y:98,rotation:0},{type:"bs3",x:298,y:243,rotation:0},{type:"bs3",x:350,y:217,rotation:0},{type:"bs3",x:378,y:192,rotation:0},{type:"bs3",x:392,y:155,rotation:0},{type:"bs3",x:392,y:109,rotation:0},{type:"bs3",x:392,y:75,rotation:0},{type:"circle6",x:240,y:178,rotation:0},{type:"starfish1",x:219,y:200,rotation:0},{type:"starfish1",x:253,y:200,rotation:0},{type:"starfish1",x:288,y:176,rotation:0},{type:"starfish1",x:280,y:110,rotation:0},
{type:"starfish1",x:307,y:140,rotation:0},{type:"circle6",x:310,y:112,rotation:0},{type:"circle6",x:334,y:139,rotation:0},{type:"circle6",x:317,y:166,rotation:0},{type:"circle6",x:305,y:201,rotation:0},{type:"circle6",x:323,y:226,rotation:0},{type:"circle6",x:271,y:227,rotation:0},{type:"circle6",x:208,y:232,rotation:0},{type:"starfish1",x:191,y:176,rotation:0},{type:"starfish1",x:177,y:140,rotation:0},{type:"starfish1",x:205,y:110,rotation:0},{type:"circle6",x:179,y:112,rotation:0},{type:"circle6",
x:154,y:139,rotation:0},{type:"circle6",x:170,y:166,rotation:0},{type:"circle6",x:172,y:197,rotation:0},{type:"circle6",x:158,y:221,rotation:0},{type:"shell3",x:162,y:80,rotation:0},{type:"shell3",x:138,y:110,rotation:0},{type:"shell3",x:125,y:153,rotation:0},{type:"shell3",x:142,y:192,rotation:0},{type:"shell3",x:187,y:217,rotation:0},{type:"bs3",x:172,y:244,rotation:0},{type:"bs3",x:127,y:217,rotation:0},{type:"bs3",x:91,y:192,rotation:0},{type:"bs3",x:84,y:155,rotation:0},{type:"bs3",x:84,y:109,
rotation:0},{type:"bs3",x:93,y:75,rotation:0},{type:"shell3",x:335,y:80,rotation:0},{type:"shell3",x:356,y:111,rotation:0},{type:"shell3",x:355,y:153,rotation:0},{type:"shell3",x:334,y:192,rotation:0},{type:"circle6",x:113,y:181,rotation:0},{type:"circle6",x:106,y:126,rotation:0},{type:"circle6",x:67,y:71,rotation:0},{type:"circle6",x:88,y:227,rotation:0},{type:"circle6",x:67,y:181,rotation:0},{type:"circle6",x:67,y:132,rotation:0},{type:"circle6",x:123,y:84,rotation:0},{type:"circle6",x:370,y:84,
rotation:0},{type:"circle6",x:375,y:126,rotation:0},{type:"circle6",x:364,y:175,rotation:0},{type:"shell3",x:291,y:217,rotation:0},{type:"circle6",x:416,y:71,rotation:0},{type:"circle6",x:416,y:133,rotation:0},{type:"circle6",x:416,y:181,rotation:0},{type:"circle6",x:395,y:227,rotation:0}],joints:[]},{objects:[{type:"jellyfish4",x:240,y:166,rotation:0},{type:"shell6",x:240,y:110,rotation:0},{type:"bs5",x:240,y:206,rotation:0},{type:"bs5",x:273,y:232,rotation:0},{type:"bs5",x:301,y:204,rotation:0},
{type:"bs5",x:331,y:231,rotation:0},{type:"bs5",x:358,y:205,rotation:0},{type:"bs5",x:389,y:230,rotation:0},{type:"bs5",x:400,y:206,rotation:0},{type:"jellyfish4",x:330,y:166,rotation:0},{type:"jellyfish4",x:379,y:166,rotation:0},{type:"starfish8",x:266,y:140,rotation:0},{type:"starfish8",x:399,y:140,rotation:0},{type:"starfish8",x:318,y:140,rotation:0},{type:"multipearl",x:358,y:140,rotation:0},{type:"warp_hole",x:380,y:82,rotation:0},{type:"shell6",x:288,y:110,rotation:0},{type:"shell6",x:325,y:110,
rotation:0},{type:"shell6",x:362,y:110,rotation:0},{type:"shell6",x:401,y:110,rotation:0},{type:"shell6",x:264,y:82,rotation:0},{type:"shell6",x:307,y:82,rotation:0},{type:"shell6",x:345,y:82,rotation:0},{type:"shell6",x:198,y:110,rotation:0},{type:"shell6",x:155,y:110,rotation:0},{type:"shell6",x:116,y:110,rotation:0},{type:"shell6",x:79,y:110,rotation:0},{type:"shell6",x:98,y:82,rotation:0},{type:"shell6",x:138,y:82,rotation:0},{type:"shell6",x:177,y:82,rotation:0},{type:"shell6",x:219,y:82,rotation:0},
{type:"starfish8",x:216,y:140,rotation:0},{type:"starfish8",x:174,y:140,rotation:0},{type:"starfish8",x:94,y:140,rotation:0},{type:"multipearl",x:133,y:140,rotation:0},{type:"jellyfish4",x:158,y:166,rotation:0},{type:"jellyfish4",x:114,y:166,rotation:0},{type:"bs5",x:189,y:206,rotation:0},{type:"bs5",x:136,y:206,rotation:0},{type:"bs5",x:94,y:206,rotation:0},{type:"bs5",x:212,y:232,rotation:0},{type:"bs5",x:163,y:231,rotation:0},{type:"bs5",x:114,y:230,rotation:0},{type:"warp_hole",x:88,y:249,rotation:0},
{type:"whatever",x:411,y:168,rotation:0},{type:"whatever",x:361,y:254,rotation:0},{type:"whatever",x:303,y:232,rotation:0},{type:"whatever",x:241,y:232,rotation:0},{type:"whatever",x:188,y:232,rotation:0},{type:"whatever",x:139,y:254,rotation:0},{type:"whatever",x:287,y:170,rotation:0},{type:"whatever",x:191,y:170,rotation:0},{type:"whatever",x:78,y:170,rotation:0}],joints:[]}],FaceBook={init:function(){fb_message.description="Total games = "+countGames;fb_message.description+=" | Total goals = "+
totalCountHitsInBasket;fb_message.description+=" | Total points = "+totalPoints;fb_message.description+=" | Best combos = "+maxComboPerGame;fb_message.description+=" | Accuracy = "+gameAccuracy+"%"},getUserInfo:function(a){FB.getLoginStatus(function(c){"connected"===c.status?(flag_fb=1,"function"===typeof a&&a()):FB.login(function(c){if(c.authResponse)flag_fb=1,"function"===typeof a&&a();else return flag_fb=0,!1},{scope:"publish_actions"})})},postOnWall:function(){FB.ui(fb_message,function(a){null==
a||void 0==a.post_id?alert("Not posted on Facebook wall."):alert("Facebook wall posted.")})},doLike:function(){FB.api("/me/likes/"+app_id,function(a){console.log("resp = ",a)})}};
